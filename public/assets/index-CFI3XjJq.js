var vq=Object.defineProperty;var xq=(t,e,r)=>e in t?vq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Te=(t,e,r)=>xq(t,typeof e!="symbol"?e+"":e,r);function wq(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Jr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function C4(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function E4(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var k4={exports:{}},nx={},T4={exports:{}},mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pg=Symbol.for("react.element"),bq=Symbol.for("react.portal"),Sq=Symbol.for("react.fragment"),_q=Symbol.for("react.strict_mode"),Cq=Symbol.for("react.profiler"),Eq=Symbol.for("react.provider"),kq=Symbol.for("react.context"),Tq=Symbol.for("react.forward_ref"),jq=Symbol.for("react.suspense"),Aq=Symbol.for("react.memo"),Pq=Symbol.for("react.lazy"),_P=Symbol.iterator;function Nq(t){return t===null||typeof t!="object"?null:(t=_P&&t[_P]||t["@@iterator"],typeof t=="function"?t:null)}var j4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A4=Object.assign,P4={};function ih(t,e,r){this.props=t,this.context=e,this.refs=P4,this.updater=r||j4}ih.prototype.isReactComponent={};ih.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ih.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function N4(){}N4.prototype=ih.prototype;function Ok(t,e,r){this.props=t,this.context=e,this.refs=P4,this.updater=r||j4}var Mk=Ok.prototype=new N4;Mk.constructor=Ok;A4(Mk,ih.prototype);Mk.isPureReactComponent=!0;var CP=Array.isArray,R4=Object.prototype.hasOwnProperty,Ik={current:null},O4={key:!0,ref:!0,__self:!0,__source:!0};function M4(t,e,r){var n,s={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)R4.call(e,n)&&!O4.hasOwnProperty(n)&&(s[n]=e[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:pg,type:t,key:i,ref:o,props:s,_owner:Ik.current}}function Rq(t,e){return{$$typeof:pg,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Dk(t){return typeof t=="object"&&t!==null&&t.$$typeof===pg}function Oq(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var EP=/\/+/g;function rb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Oq(""+t.key):e.toString(36)}function py(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case pg:case bq:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+rb(o,0):n,CP(s)?(r="",t!=null&&(r=t.replace(EP,"$&/")+"/"),py(s,e,r,"",function(c){return c})):s!=null&&(Dk(s)&&(s=Rq(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(EP,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",CP(t))for(var a=0;a<t.length;a++){i=t[a];var l=n+rb(i,a);o+=py(i,e,r,l,s)}else if(l=Nq(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=n+rb(i,a++),o+=py(i,e,r,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function em(t,e,r){if(t==null)return t;var n=[],s=0;return py(t,n,"","",function(i){return e.call(r,i,s++)}),n}function Mq(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Un={current:null},gy={transition:null},Iq={ReactCurrentDispatcher:Un,ReactCurrentBatchConfig:gy,ReactCurrentOwner:Ik};function I4(){throw Error("act(...) is not supported in production builds of React.")}mt.Children={map:em,forEach:function(t,e,r){em(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return em(t,function(){e++}),e},toArray:function(t){return em(t,function(e){return e})||[]},only:function(t){if(!Dk(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};mt.Component=ih;mt.Fragment=Sq;mt.Profiler=Cq;mt.PureComponent=Ok;mt.StrictMode=_q;mt.Suspense=jq;mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Iq;mt.act=I4;mt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=A4({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ik.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)R4.call(e,l)&&!O4.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:pg,type:t.type,key:s,ref:i,props:n,_owner:o}};mt.createContext=function(t){return t={$$typeof:kq,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Eq,_context:t},t.Consumer=t};mt.createElement=M4;mt.createFactory=function(t){var e=M4.bind(null,t);return e.type=t,e};mt.createRef=function(){return{current:null}};mt.forwardRef=function(t){return{$$typeof:Tq,render:t}};mt.isValidElement=Dk;mt.lazy=function(t){return{$$typeof:Pq,_payload:{_status:-1,_result:t},_init:Mq}};mt.memo=function(t,e){return{$$typeof:Aq,type:t,compare:e===void 0?null:e}};mt.startTransition=function(t){var e=gy.transition;gy.transition={};try{t()}finally{gy.transition=e}};mt.unstable_act=I4;mt.useCallback=function(t,e){return Un.current.useCallback(t,e)};mt.useContext=function(t){return Un.current.useContext(t)};mt.useDebugValue=function(){};mt.useDeferredValue=function(t){return Un.current.useDeferredValue(t)};mt.useEffect=function(t,e){return Un.current.useEffect(t,e)};mt.useId=function(){return Un.current.useId()};mt.useImperativeHandle=function(t,e,r){return Un.current.useImperativeHandle(t,e,r)};mt.useInsertionEffect=function(t,e){return Un.current.useInsertionEffect(t,e)};mt.useLayoutEffect=function(t,e){return Un.current.useLayoutEffect(t,e)};mt.useMemo=function(t,e){return Un.current.useMemo(t,e)};mt.useReducer=function(t,e,r){return Un.current.useReducer(t,e,r)};mt.useRef=function(t){return Un.current.useRef(t)};mt.useState=function(t){return Un.current.useState(t)};mt.useSyncExternalStore=function(t,e,r){return Un.current.useSyncExternalStore(t,e,r)};mt.useTransition=function(){return Un.current.useTransition()};mt.version="18.3.1";T4.exports=mt;var w=T4.exports;const ie=C4(w),D4=wq({__proto__:null,default:ie},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dq=w,Fq=Symbol.for("react.element"),Lq=Symbol.for("react.fragment"),Bq=Object.prototype.hasOwnProperty,$q=Dq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Uq={key:!0,ref:!0,__self:!0,__source:!0};function F4(t,e,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Bq.call(e,n)&&!Uq.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:Fq,type:t,key:i,ref:o,props:s,_owner:$q.current}}nx.Fragment=Lq;nx.jsx=F4;nx.jsxs=F4;k4.exports=nx;var u=k4.exports,L4={exports:{}},Ls={},B4={exports:{}},$4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,K){var de=F.length;F.push(K);e:for(;0<de;){var le=de-1>>>1,be=F[le];if(0<s(be,K))F[le]=K,F[de]=be,de=le;else break e}}function r(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var K=F[0],de=F.pop();if(de!==K){F[0]=de;e:for(var le=0,be=F.length,Be=be>>>1;le<Be;){var He=2*(le+1)-1,ht=F[He],U=He+1,D=F[U];if(0>s(ht,de))U<be&&0>s(D,ht)?(F[le]=D,F[U]=de,le=U):(F[le]=ht,F[He]=de,le=He);else if(U<be&&0>s(D,de))F[le]=D,F[U]=de,le=U;else break e}}return K}function s(F,K){var de=F.sortIndex-K.sortIndex;return de!==0?de:F.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,p=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(F){for(var K=r(c);K!==null;){if(K.callback===null)n(c);else if(K.startTime<=F)n(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=r(c)}}function _(F){if(y=!1,b(F),!g)if(r(l)!==null)g=!0,Q(C);else{var K=r(c);K!==null&&se(_,K.startTime-F)}}function C(F,K){g=!1,y&&(y=!1,m(R),R=-1),p=!0;var de=f;try{for(b(K),h=r(l);h!==null&&(!(h.expirationTime>K)||F&&!re());){var le=h.callback;if(typeof le=="function"){h.callback=null,f=h.priorityLevel;var be=le(h.expirationTime<=K);K=t.unstable_now(),typeof be=="function"?h.callback=be:h===r(l)&&n(l),b(K)}else n(l);h=r(l)}if(h!==null)var Be=!0;else{var He=r(c);He!==null&&se(_,He.startTime-K),Be=!1}return Be}finally{h=null,f=de,p=!1}}var T=!1,O=null,R=-1,I=5,H=-1;function re(){return!(t.unstable_now()-H<I)}function L(){if(O!==null){var F=t.unstable_now();H=F;var K=!0;try{K=O(!0,F)}finally{K?z():(T=!1,O=null)}}else T=!1}var z;if(typeof x=="function")z=function(){x(L)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,pe=Y.port2;Y.port1.onmessage=L,z=function(){pe.postMessage(null)}}else z=function(){v(L,0)};function Q(F){O=F,T||(T=!0,z())}function se(F,K){R=v(function(){F(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,Q(C))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var K=3;break;default:K=f}var de=f;f=K;try{return F()}finally{f=de}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,K){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var de=f;f=F;try{return K()}finally{f=de}},t.unstable_scheduleCallback=function(F,K,de){var le=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?le+de:le):de=le,F){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=de+be,F={id:d++,callback:K,priorityLevel:F,startTime:de,expirationTime:be,sortIndex:-1},de>le?(F.sortIndex=de,e(c,F),r(l)===null&&F===r(c)&&(y?(m(R),R=-1):y=!0,se(_,de-le))):(F.sortIndex=be,e(l,F),g||p||(g=!0,Q(C))),F},t.unstable_shouldYield=re,t.unstable_wrapCallback=function(F){var K=f;return function(){var de=f;f=K;try{return F.apply(this,arguments)}finally{f=de}}}})($4);B4.exports=$4;var Vq=B4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zq=w,js=Vq;function ye(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var U4=new Set,vp={};function qc(t,e){Ad(t,e),Ad(t+"Capture",e)}function Ad(t,e){for(vp[t]=e,t=0;t<e.length;t++)U4.add(e[t])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),D_=Object.prototype.hasOwnProperty,Hq=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kP={},TP={};function Wq(t){return D_.call(TP,t)?!0:D_.call(kP,t)?!1:Hq.test(t)?TP[t]=!0:(kP[t]=!0,!1)}function qq(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Gq(t,e,r,n){if(e===null||typeof e>"u"||qq(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vn(t,e,r,n,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var on={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){on[t]=new Vn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];on[e]=new Vn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){on[t]=new Vn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){on[t]=new Vn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){on[t]=new Vn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){on[t]=new Vn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){on[t]=new Vn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){on[t]=new Vn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){on[t]=new Vn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Fk=/[\-:]([a-z])/g;function Lk(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Fk,Lk);on[e]=new Vn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Fk,Lk);on[e]=new Vn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Fk,Lk);on[e]=new Vn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){on[t]=new Vn(t,1,!1,t.toLowerCase(),null,!1,!1)});on.xlinkHref=new Vn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){on[t]=new Vn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bk(t,e,r,n){var s=on.hasOwnProperty(e)?on[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Gq(e,r,s,n)&&(r=null),n||s===null?Wq(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var va=zq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tm=Symbol.for("react.element"),Fu=Symbol.for("react.portal"),Lu=Symbol.for("react.fragment"),$k=Symbol.for("react.strict_mode"),F_=Symbol.for("react.profiler"),V4=Symbol.for("react.provider"),z4=Symbol.for("react.context"),Uk=Symbol.for("react.forward_ref"),L_=Symbol.for("react.suspense"),B_=Symbol.for("react.suspense_list"),Vk=Symbol.for("react.memo"),Fa=Symbol.for("react.lazy"),H4=Symbol.for("react.offscreen"),jP=Symbol.iterator;function Vh(t){return t===null||typeof t!="object"?null:(t=jP&&t[jP]||t["@@iterator"],typeof t=="function"?t:null)}var Qt=Object.assign,nb;function cf(t){if(nb===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);nb=e&&e[1]||""}return`
`+nb+t}var sb=!1;function ib(t,e){if(!t||sb)return"";sb=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{sb=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?cf(t):""}function Kq(t){switch(t.tag){case 5:return cf(t.type);case 16:return cf("Lazy");case 13:return cf("Suspense");case 19:return cf("SuspenseList");case 0:case 2:case 15:return t=ib(t.type,!1),t;case 11:return t=ib(t.type.render,!1),t;case 1:return t=ib(t.type,!0),t;default:return""}}function $_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Lu:return"Fragment";case Fu:return"Portal";case F_:return"Profiler";case $k:return"StrictMode";case L_:return"Suspense";case B_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case z4:return(t.displayName||"Context")+".Consumer";case V4:return(t._context.displayName||"Context")+".Provider";case Uk:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vk:return e=t.displayName||null,e!==null?e:$_(t.type)||"Memo";case Fa:e=t._payload,t=t._init;try{return $_(t(e))}catch{}}return null}function Yq(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $_(e);case 8:return e===$k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ll(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function W4(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Xq(t){var e=W4(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rm(t){t._valueTracker||(t._valueTracker=Xq(t))}function q4(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=W4(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Zy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function U_(t,e){var r=e.checked;return Qt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function AP(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=ll(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function G4(t,e){e=e.checked,e!=null&&Bk(t,"checked",e,!1)}function V_(t,e){G4(t,e);var r=ll(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?z_(t,e.type,r):e.hasOwnProperty("defaultValue")&&z_(t,e.type,ll(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function PP(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function z_(t,e,r){(e!=="number"||Zy(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var uf=Array.isArray;function ad(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+ll(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function H_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ye(91));return Qt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function NP(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ye(92));if(uf(r)){if(1<r.length)throw Error(ye(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:ll(r)}}function K4(t,e){var r=ll(e.value),n=ll(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function RP(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Y4(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function W_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Y4(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var nm,X4=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(nm=nm||document.createElement("div"),nm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=nm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xp(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var jf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jq=["Webkit","ms","Moz","O"];Object.keys(jf).forEach(function(t){Jq.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),jf[e]=jf[t]})});function J4(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||jf.hasOwnProperty(t)&&jf[t]?(""+e).trim():e+"px"}function Z4(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=J4(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var Zq=Qt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function q_(t,e){if(e){if(Zq[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ye(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ye(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ye(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ye(62))}}function G_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var K_=null;function zk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Y_=null,ld=null,cd=null;function OP(t){if(t=yg(t)){if(typeof Y_!="function")throw Error(ye(280));var e=t.stateNode;e&&(e=lx(e),Y_(t.stateNode,t.type,e))}}function Q4(t){ld?cd?cd.push(t):cd=[t]:ld=t}function eF(){if(ld){var t=ld,e=cd;if(cd=ld=null,OP(t),e)for(t=0;t<e.length;t++)OP(e[t])}}function tF(t,e){return t(e)}function rF(){}var ob=!1;function nF(t,e,r){if(ob)return t(e,r);ob=!0;try{return tF(t,e,r)}finally{ob=!1,(ld!==null||cd!==null)&&(rF(),eF())}}function wp(t,e){var r=t.stateNode;if(r===null)return null;var n=lx(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ye(231,e,typeof r));return r}var X_=!1;if(ia)try{var zh={};Object.defineProperty(zh,"passive",{get:function(){X_=!0}}),window.addEventListener("test",zh,zh),window.removeEventListener("test",zh,zh)}catch{X_=!1}function Qq(t,e,r,n,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var Af=!1,Qy=null,e0=!1,J_=null,eG={onError:function(t){Af=!0,Qy=t}};function tG(t,e,r,n,s,i,o,a,l){Af=!1,Qy=null,Qq.apply(eG,arguments)}function rG(t,e,r,n,s,i,o,a,l){if(tG.apply(this,arguments),Af){if(Af){var c=Qy;Af=!1,Qy=null}else throw Error(ye(198));e0||(e0=!0,J_=c)}}function Gc(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function sF(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function MP(t){if(Gc(t)!==t)throw Error(ye(188))}function nG(t){var e=t.alternate;if(!e){if(e=Gc(t),e===null)throw Error(ye(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return MP(s),t;if(i===n)return MP(s),e;i=i.sibling}throw Error(ye(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o)throw Error(ye(189))}}if(r.alternate!==n)throw Error(ye(190))}if(r.tag!==3)throw Error(ye(188));return r.stateNode.current===r?t:e}function iF(t){return t=nG(t),t!==null?oF(t):null}function oF(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=oF(t);if(e!==null)return e;t=t.sibling}return null}var aF=js.unstable_scheduleCallback,IP=js.unstable_cancelCallback,sG=js.unstable_shouldYield,iG=js.unstable_requestPaint,fr=js.unstable_now,oG=js.unstable_getCurrentPriorityLevel,Hk=js.unstable_ImmediatePriority,lF=js.unstable_UserBlockingPriority,t0=js.unstable_NormalPriority,aG=js.unstable_LowPriority,cF=js.unstable_IdlePriority,sx=null,ao=null;function lG(t){if(ao&&typeof ao.onCommitFiberRoot=="function")try{ao.onCommitFiberRoot(sx,t,void 0,(t.current.flags&128)===128)}catch{}}var Ri=Math.clz32?Math.clz32:dG,cG=Math.log,uG=Math.LN2;function dG(t){return t>>>=0,t===0?32:31-(cG(t)/uG|0)|0}var sm=64,im=4194304;function df(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function r0(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~s;a!==0?n=df(a):(i&=o,i!==0&&(n=df(i)))}else o=r&~s,o!==0?n=df(o):i!==0&&(n=df(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Ri(e),s=1<<r,n|=t[r],e&=~s;return n}function hG(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fG(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ri(i),a=1<<o,l=s[o];l===-1?(!(a&r)||a&n)&&(s[o]=hG(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Z_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function uF(){var t=sm;return sm<<=1,!(sm&4194240)&&(sm=64),t}function ab(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function gg(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ri(e),t[e]=r}function pG(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Ri(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function Wk(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Ri(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Pt=0;function dF(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hF,qk,fF,pF,gF,Q_=!1,om=[],Ga=null,Ka=null,Ya=null,bp=new Map,Sp=new Map,$a=[],gG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function DP(t,e){switch(t){case"focusin":case"focusout":Ga=null;break;case"dragenter":case"dragleave":Ka=null;break;case"mouseover":case"mouseout":Ya=null;break;case"pointerover":case"pointerout":bp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sp.delete(e.pointerId)}}function Hh(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=yg(e),e!==null&&qk(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function mG(t,e,r,n,s){switch(e){case"focusin":return Ga=Hh(Ga,t,e,r,n,s),!0;case"dragenter":return Ka=Hh(Ka,t,e,r,n,s),!0;case"mouseover":return Ya=Hh(Ya,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return bp.set(i,Hh(bp.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Sp.set(i,Hh(Sp.get(i)||null,t,e,r,n,s)),!0}return!1}function mF(t){var e=oc(t.target);if(e!==null){var r=Gc(e);if(r!==null){if(e=r.tag,e===13){if(e=sF(r),e!==null){t.blockedOn=e,gF(t.priority,function(){fF(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function my(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=eC(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);K_=n,r.target.dispatchEvent(n),K_=null}else return e=yg(r),e!==null&&qk(e),t.blockedOn=r,!1;e.shift()}return!0}function FP(t,e,r){my(t)&&r.delete(e)}function yG(){Q_=!1,Ga!==null&&my(Ga)&&(Ga=null),Ka!==null&&my(Ka)&&(Ka=null),Ya!==null&&my(Ya)&&(Ya=null),bp.forEach(FP),Sp.forEach(FP)}function Wh(t,e){t.blockedOn===e&&(t.blockedOn=null,Q_||(Q_=!0,js.unstable_scheduleCallback(js.unstable_NormalPriority,yG)))}function _p(t){function e(s){return Wh(s,t)}if(0<om.length){Wh(om[0],t);for(var r=1;r<om.length;r++){var n=om[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Ga!==null&&Wh(Ga,t),Ka!==null&&Wh(Ka,t),Ya!==null&&Wh(Ya,t),bp.forEach(e),Sp.forEach(e),r=0;r<$a.length;r++)n=$a[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<$a.length&&(r=$a[0],r.blockedOn===null);)mF(r),r.blockedOn===null&&$a.shift()}var ud=va.ReactCurrentBatchConfig,n0=!0;function vG(t,e,r,n){var s=Pt,i=ud.transition;ud.transition=null;try{Pt=1,Gk(t,e,r,n)}finally{Pt=s,ud.transition=i}}function xG(t,e,r,n){var s=Pt,i=ud.transition;ud.transition=null;try{Pt=4,Gk(t,e,r,n)}finally{Pt=s,ud.transition=i}}function Gk(t,e,r,n){if(n0){var s=eC(t,e,r,n);if(s===null)yb(t,e,n,s0,r),DP(t,n);else if(mG(s,t,e,r,n))n.stopPropagation();else if(DP(t,n),e&4&&-1<gG.indexOf(t)){for(;s!==null;){var i=yg(s);if(i!==null&&hF(i),i=eC(t,e,r,n),i===null&&yb(t,e,n,s0,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else yb(t,e,n,null,r)}}var s0=null;function eC(t,e,r,n){if(s0=null,t=zk(n),t=oc(t),t!==null)if(e=Gc(t),e===null)t=null;else if(r=e.tag,r===13){if(t=sF(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return s0=t,null}function yF(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oG()){case Hk:return 1;case lF:return 4;case t0:case aG:return 16;case cF:return 536870912;default:return 16}default:return 16}}var Ha=null,Kk=null,yy=null;function vF(){if(yy)return yy;var t,e=Kk,r=e.length,n,s="value"in Ha?Ha.value:Ha.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[i-n];n++);return yy=s.slice(t,1<n?1-n:void 0)}function vy(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function am(){return!0}function LP(){return!1}function Bs(t){function e(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?am:LP,this.isPropagationStopped=LP,this}return Qt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=am)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=am)},persist:function(){},isPersistent:am}),e}var oh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yk=Bs(oh),mg=Qt({},oh,{view:0,detail:0}),wG=Bs(mg),lb,cb,qh,ix=Qt({},mg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qh&&(qh&&t.type==="mousemove"?(lb=t.screenX-qh.screenX,cb=t.screenY-qh.screenY):cb=lb=0,qh=t),lb)},movementY:function(t){return"movementY"in t?t.movementY:cb}}),BP=Bs(ix),bG=Qt({},ix,{dataTransfer:0}),SG=Bs(bG),_G=Qt({},mg,{relatedTarget:0}),ub=Bs(_G),CG=Qt({},oh,{animationName:0,elapsedTime:0,pseudoElement:0}),EG=Bs(CG),kG=Qt({},oh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),TG=Bs(kG),jG=Qt({},oh,{data:0}),$P=Bs(jG),AG={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PG={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NG={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RG(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=NG[t])?!!e[t]:!1}function Xk(){return RG}var OG=Qt({},mg,{key:function(t){if(t.key){var e=AG[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vy(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?PG[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xk,charCode:function(t){return t.type==="keypress"?vy(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vy(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),MG=Bs(OG),IG=Qt({},ix,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),UP=Bs(IG),DG=Qt({},mg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xk}),FG=Bs(DG),LG=Qt({},oh,{propertyName:0,elapsedTime:0,pseudoElement:0}),BG=Bs(LG),$G=Qt({},ix,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),UG=Bs($G),VG=[9,13,27,32],Jk=ia&&"CompositionEvent"in window,Pf=null;ia&&"documentMode"in document&&(Pf=document.documentMode);var zG=ia&&"TextEvent"in window&&!Pf,xF=ia&&(!Jk||Pf&&8<Pf&&11>=Pf),VP=" ",zP=!1;function wF(t,e){switch(t){case"keyup":return VG.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bF(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bu=!1;function HG(t,e){switch(t){case"compositionend":return bF(e);case"keypress":return e.which!==32?null:(zP=!0,VP);case"textInput":return t=e.data,t===VP&&zP?null:t;default:return null}}function WG(t,e){if(Bu)return t==="compositionend"||!Jk&&wF(t,e)?(t=vF(),yy=Kk=Ha=null,Bu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xF&&e.locale!=="ko"?null:e.data;default:return null}}var qG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function HP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qG[t.type]:e==="textarea"}function SF(t,e,r,n){Q4(n),e=i0(e,"onChange"),0<e.length&&(r=new Yk("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Nf=null,Cp=null;function GG(t){OF(t,0)}function ox(t){var e=Vu(t);if(q4(e))return t}function KG(t,e){if(t==="change")return e}var _F=!1;if(ia){var db;if(ia){var hb="oninput"in document;if(!hb){var WP=document.createElement("div");WP.setAttribute("oninput","return;"),hb=typeof WP.oninput=="function"}db=hb}else db=!1;_F=db&&(!document.documentMode||9<document.documentMode)}function qP(){Nf&&(Nf.detachEvent("onpropertychange",CF),Cp=Nf=null)}function CF(t){if(t.propertyName==="value"&&ox(Cp)){var e=[];SF(e,Cp,t,zk(t)),nF(GG,e)}}function YG(t,e,r){t==="focusin"?(qP(),Nf=e,Cp=r,Nf.attachEvent("onpropertychange",CF)):t==="focusout"&&qP()}function XG(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ox(Cp)}function JG(t,e){if(t==="click")return ox(e)}function ZG(t,e){if(t==="input"||t==="change")return ox(e)}function QG(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Di=typeof Object.is=="function"?Object.is:QG;function Ep(t,e){if(Di(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!D_.call(e,s)||!Di(t[s],e[s]))return!1}return!0}function GP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function KP(t,e){var r=GP(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=GP(r)}}function EF(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?EF(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kF(){for(var t=window,e=Zy();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Zy(t.document)}return e}function Zk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function eK(t){var e=kF(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&EF(r.ownerDocument.documentElement,r)){if(n!==null&&Zk(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=KP(r,i);var o=KP(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var tK=ia&&"documentMode"in document&&11>=document.documentMode,$u=null,tC=null,Rf=null,rC=!1;function YP(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;rC||$u==null||$u!==Zy(n)||(n=$u,"selectionStart"in n&&Zk(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Rf&&Ep(Rf,n)||(Rf=n,n=i0(tC,"onSelect"),0<n.length&&(e=new Yk("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=$u)))}function lm(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Uu={animationend:lm("Animation","AnimationEnd"),animationiteration:lm("Animation","AnimationIteration"),animationstart:lm("Animation","AnimationStart"),transitionend:lm("Transition","TransitionEnd")},fb={},TF={};ia&&(TF=document.createElement("div").style,"AnimationEvent"in window||(delete Uu.animationend.animation,delete Uu.animationiteration.animation,delete Uu.animationstart.animation),"TransitionEvent"in window||delete Uu.transitionend.transition);function ax(t){if(fb[t])return fb[t];if(!Uu[t])return t;var e=Uu[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in TF)return fb[t]=e[r];return t}var jF=ax("animationend"),AF=ax("animationiteration"),PF=ax("animationstart"),NF=ax("transitionend"),RF=new Map,XP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jl(t,e){RF.set(t,e),qc(e,[t])}for(var pb=0;pb<XP.length;pb++){var gb=XP[pb],rK=gb.toLowerCase(),nK=gb[0].toUpperCase()+gb.slice(1);jl(rK,"on"+nK)}jl(jF,"onAnimationEnd");jl(AF,"onAnimationIteration");jl(PF,"onAnimationStart");jl("dblclick","onDoubleClick");jl("focusin","onFocus");jl("focusout","onBlur");jl(NF,"onTransitionEnd");Ad("onMouseEnter",["mouseout","mouseover"]);Ad("onMouseLeave",["mouseout","mouseover"]);Ad("onPointerEnter",["pointerout","pointerover"]);Ad("onPointerLeave",["pointerout","pointerover"]);qc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qc("onBeforeInput",["compositionend","keypress","textInput","paste"]);qc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sK=new Set("cancel close invalid load scroll toggle".split(" ").concat(hf));function JP(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,rG(n,e,void 0,t),t.currentTarget=null}function OF(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;JP(s,a,c),i=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;JP(s,a,c),i=l}}}if(e0)throw t=J_,e0=!1,J_=null,t}function zt(t,e){var r=e[aC];r===void 0&&(r=e[aC]=new Set);var n=t+"__bubble";r.has(n)||(MF(e,t,2,!1),r.add(n))}function mb(t,e,r){var n=0;e&&(n|=4),MF(r,t,n,e)}var cm="_reactListening"+Math.random().toString(36).slice(2);function kp(t){if(!t[cm]){t[cm]=!0,U4.forEach(function(r){r!=="selectionchange"&&(sK.has(r)||mb(r,!1,t),mb(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[cm]||(e[cm]=!0,mb("selectionchange",!1,e))}}function MF(t,e,r,n){switch(yF(e)){case 1:var s=vG;break;case 4:s=xG;break;default:s=Gk}r=s.bind(null,e,r,t),s=void 0,!X_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function yb(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=oc(a),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}a=a.parentNode}}n=n.return}nF(function(){var c=i,d=zk(r),h=[];e:{var f=RF.get(t);if(f!==void 0){var p=Yk,g=t;switch(t){case"keypress":if(vy(r)===0)break e;case"keydown":case"keyup":p=MG;break;case"focusin":g="focus",p=ub;break;case"focusout":g="blur",p=ub;break;case"beforeblur":case"afterblur":p=ub;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=BP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=SG;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=FG;break;case jF:case AF:case PF:p=EG;break;case NF:p=BG;break;case"scroll":p=wG;break;case"wheel":p=UG;break;case"copy":case"cut":case"paste":p=TG;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=UP}var y=(e&4)!==0,v=!y&&t==="scroll",m=y?f!==null?f+"Capture":null:f;y=[];for(var x=c,b;x!==null;){b=x;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,m!==null&&(_=wp(x,m),_!=null&&y.push(Tp(x,_,b)))),v)break;x=x.return}0<y.length&&(f=new p(f,g,null,r,d),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&r!==K_&&(g=r.relatedTarget||r.fromElement)&&(oc(g)||g[oa]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=c,g=g?oc(g):null,g!==null&&(v=Gc(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(y=BP,_="onMouseLeave",m="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(y=UP,_="onPointerLeave",m="onPointerEnter",x="pointer"),v=p==null?f:Vu(p),b=g==null?f:Vu(g),f=new y(_,x+"leave",p,r,d),f.target=v,f.relatedTarget=b,_=null,oc(d)===c&&(y=new y(m,x+"enter",g,r,d),y.target=b,y.relatedTarget=v,_=y),v=_,p&&g)t:{for(y=p,m=g,x=0,b=y;b;b=yu(b))x++;for(b=0,_=m;_;_=yu(_))b++;for(;0<x-b;)y=yu(y),x--;for(;0<b-x;)m=yu(m),b--;for(;x--;){if(y===m||m!==null&&y===m.alternate)break t;y=yu(y),m=yu(m)}y=null}else y=null;p!==null&&ZP(h,f,p,y,!1),g!==null&&v!==null&&ZP(h,v,g,y,!0)}}e:{if(f=c?Vu(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var C=KG;else if(HP(f))if(_F)C=ZG;else{C=XG;var T=YG}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=JG);if(C&&(C=C(t,c))){SF(h,C,r,d);break e}T&&T(t,f,c),t==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&z_(f,"number",f.value)}switch(T=c?Vu(c):window,t){case"focusin":(HP(T)||T.contentEditable==="true")&&($u=T,tC=c,Rf=null);break;case"focusout":Rf=tC=$u=null;break;case"mousedown":rC=!0;break;case"contextmenu":case"mouseup":case"dragend":rC=!1,YP(h,r,d);break;case"selectionchange":if(tK)break;case"keydown":case"keyup":YP(h,r,d)}var O;if(Jk)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Bu?wF(t,r)&&(R="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(R="onCompositionStart");R&&(xF&&r.locale!=="ko"&&(Bu||R!=="onCompositionStart"?R==="onCompositionEnd"&&Bu&&(O=vF()):(Ha=d,Kk="value"in Ha?Ha.value:Ha.textContent,Bu=!0)),T=i0(c,R),0<T.length&&(R=new $P(R,t,null,r,d),h.push({event:R,listeners:T}),O?R.data=O:(O=bF(r),O!==null&&(R.data=O)))),(O=zG?HG(t,r):WG(t,r))&&(c=i0(c,"onBeforeInput"),0<c.length&&(d=new $P("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=O))}OF(h,e)})}function Tp(t,e,r){return{instance:t,listener:e,currentTarget:r}}function i0(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=wp(t,r),i!=null&&n.unshift(Tp(t,i,s)),i=wp(t,e),i!=null&&n.push(Tp(t,i,s))),t=t.return}return n}function yu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ZP(t,e,r,n,s){for(var i=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,s?(l=wp(r,i),l!=null&&o.unshift(Tp(r,l,a))):s||(l=wp(r,i),l!=null&&o.push(Tp(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var iK=/\r\n?/g,oK=/\u0000|\uFFFD/g;function QP(t){return(typeof t=="string"?t:""+t).replace(iK,`
`).replace(oK,"")}function um(t,e,r){if(e=QP(e),QP(t)!==e&&r)throw Error(ye(425))}function o0(){}var nC=null,sC=null;function iC(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var oC=typeof setTimeout=="function"?setTimeout:void 0,aK=typeof clearTimeout=="function"?clearTimeout:void 0,eN=typeof Promise=="function"?Promise:void 0,lK=typeof queueMicrotask=="function"?queueMicrotask:typeof eN<"u"?function(t){return eN.resolve(null).then(t).catch(cK)}:oC;function cK(t){setTimeout(function(){throw t})}function vb(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),_p(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);_p(e)}function Xa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function tN(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ah=Math.random().toString(36).slice(2),eo="__reactFiber$"+ah,jp="__reactProps$"+ah,oa="__reactContainer$"+ah,aC="__reactEvents$"+ah,uK="__reactListeners$"+ah,dK="__reactHandles$"+ah;function oc(t){var e=t[eo];if(e)return e;for(var r=t.parentNode;r;){if(e=r[oa]||r[eo]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=tN(t);t!==null;){if(r=t[eo])return r;t=tN(t)}return e}t=r,r=t.parentNode}return null}function yg(t){return t=t[eo]||t[oa],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ye(33))}function lx(t){return t[jp]||null}var lC=[],zu=-1;function Al(t){return{current:t}}function Ht(t){0>zu||(t.current=lC[zu],lC[zu]=null,zu--)}function $t(t,e){zu++,lC[zu]=t.current,t.current=e}var cl={},_n=Al(cl),rs=Al(!1),Ac=cl;function Pd(t,e){var r=t.type.contextTypes;if(!r)return cl;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ns(t){return t=t.childContextTypes,t!=null}function a0(){Ht(rs),Ht(_n)}function rN(t,e,r){if(_n.current!==cl)throw Error(ye(168));$t(_n,e),$t(rs,r)}function IF(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(ye(108,Yq(t)||"Unknown",s));return Qt({},r,n)}function l0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cl,Ac=_n.current,$t(_n,t),$t(rs,rs.current),!0}function nN(t,e,r){var n=t.stateNode;if(!n)throw Error(ye(169));r?(t=IF(t,e,Ac),n.__reactInternalMemoizedMergedChildContext=t,Ht(rs),Ht(_n),$t(_n,t)):Ht(rs),$t(rs,r)}var Do=null,cx=!1,xb=!1;function DF(t){Do===null?Do=[t]:Do.push(t)}function hK(t){cx=!0,DF(t)}function Pl(){if(!xb&&Do!==null){xb=!0;var t=0,e=Pt;try{var r=Do;for(Pt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Do=null,cx=!1}catch(s){throw Do!==null&&(Do=Do.slice(t+1)),aF(Hk,Pl),s}finally{Pt=e,xb=!1}}return null}var Hu=[],Wu=0,c0=null,u0=0,Ys=[],Xs=0,Pc=null,Bo=1,$o="";function Gl(t,e){Hu[Wu++]=u0,Hu[Wu++]=c0,c0=t,u0=e}function FF(t,e,r){Ys[Xs++]=Bo,Ys[Xs++]=$o,Ys[Xs++]=Pc,Pc=t;var n=Bo;t=$o;var s=32-Ri(n)-1;n&=~(1<<s),r+=1;var i=32-Ri(e)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Bo=1<<32-Ri(e)+s|r<<s|n,$o=i+t}else Bo=1<<i|r<<s|n,$o=t}function Qk(t){t.return!==null&&(Gl(t,1),FF(t,1,0))}function eT(t){for(;t===c0;)c0=Hu[--Wu],Hu[Wu]=null,u0=Hu[--Wu],Hu[Wu]=null;for(;t===Pc;)Pc=Ys[--Xs],Ys[Xs]=null,$o=Ys[--Xs],Ys[Xs]=null,Bo=Ys[--Xs],Ys[Xs]=null}var Cs=null,Ss=null,qt=!1,Ei=null;function LF(t,e){var r=ti(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function sN(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Cs=t,Ss=Xa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Cs=t,Ss=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Pc!==null?{id:Bo,overflow:$o}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=ti(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Cs=t,Ss=null,!0):!1;default:return!1}}function cC(t){return(t.mode&1)!==0&&(t.flags&128)===0}function uC(t){if(qt){var e=Ss;if(e){var r=e;if(!sN(t,e)){if(cC(t))throw Error(ye(418));e=Xa(r.nextSibling);var n=Cs;e&&sN(t,e)?LF(n,r):(t.flags=t.flags&-4097|2,qt=!1,Cs=t)}}else{if(cC(t))throw Error(ye(418));t.flags=t.flags&-4097|2,qt=!1,Cs=t}}}function iN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Cs=t}function dm(t){if(t!==Cs)return!1;if(!qt)return iN(t),qt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!iC(t.type,t.memoizedProps)),e&&(e=Ss)){if(cC(t))throw BF(),Error(ye(418));for(;e;)LF(t,e),e=Xa(e.nextSibling)}if(iN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ye(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ss=Xa(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ss=null}}else Ss=Cs?Xa(t.stateNode.nextSibling):null;return!0}function BF(){for(var t=Ss;t;)t=Xa(t.nextSibling)}function Nd(){Ss=Cs=null,qt=!1}function tT(t){Ei===null?Ei=[t]:Ei.push(t)}var fK=va.ReactCurrentBatchConfig;function Gh(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ye(309));var n=r.stateNode}if(!n)throw Error(ye(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ye(284));if(!r._owner)throw Error(ye(290,t))}return t}function hm(t,e){throw t=Object.prototype.toString.call(e),Error(ye(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function oN(t){var e=t._init;return e(t._payload)}function $F(t){function e(m,x){if(t){var b=m.deletions;b===null?(m.deletions=[x],m.flags|=16):b.push(x)}}function r(m,x){if(!t)return null;for(;x!==null;)e(m,x),x=x.sibling;return null}function n(m,x){for(m=new Map;x!==null;)x.key!==null?m.set(x.key,x):m.set(x.index,x),x=x.sibling;return m}function s(m,x){return m=el(m,x),m.index=0,m.sibling=null,m}function i(m,x,b){return m.index=b,t?(b=m.alternate,b!==null?(b=b.index,b<x?(m.flags|=2,x):b):(m.flags|=2,x)):(m.flags|=1048576,x)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,x,b,_){return x===null||x.tag!==6?(x=kb(b,m.mode,_),x.return=m,x):(x=s(x,b),x.return=m,x)}function l(m,x,b,_){var C=b.type;return C===Lu?d(m,x,b.props.children,_,b.key):x!==null&&(x.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Fa&&oN(C)===x.type)?(_=s(x,b.props),_.ref=Gh(m,x,b),_.return=m,_):(_=Ey(b.type,b.key,b.props,null,m.mode,_),_.ref=Gh(m,x,b),_.return=m,_)}function c(m,x,b,_){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=Tb(b,m.mode,_),x.return=m,x):(x=s(x,b.children||[]),x.return=m,x)}function d(m,x,b,_,C){return x===null||x.tag!==7?(x=yc(b,m.mode,_,C),x.return=m,x):(x=s(x,b),x.return=m,x)}function h(m,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=kb(""+x,m.mode,b),x.return=m,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case tm:return b=Ey(x.type,x.key,x.props,null,m.mode,b),b.ref=Gh(m,null,x),b.return=m,b;case Fu:return x=Tb(x,m.mode,b),x.return=m,x;case Fa:var _=x._init;return h(m,_(x._payload),b)}if(uf(x)||Vh(x))return x=yc(x,m.mode,b,null),x.return=m,x;hm(m,x)}return null}function f(m,x,b,_){var C=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return C!==null?null:a(m,x,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case tm:return b.key===C?l(m,x,b,_):null;case Fu:return b.key===C?c(m,x,b,_):null;case Fa:return C=b._init,f(m,x,C(b._payload),_)}if(uf(b)||Vh(b))return C!==null?null:d(m,x,b,_,null);hm(m,b)}return null}function p(m,x,b,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return m=m.get(b)||null,a(x,m,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case tm:return m=m.get(_.key===null?b:_.key)||null,l(x,m,_,C);case Fu:return m=m.get(_.key===null?b:_.key)||null,c(x,m,_,C);case Fa:var T=_._init;return p(m,x,b,T(_._payload),C)}if(uf(_)||Vh(_))return m=m.get(b)||null,d(x,m,_,C,null);hm(x,_)}return null}function g(m,x,b,_){for(var C=null,T=null,O=x,R=x=0,I=null;O!==null&&R<b.length;R++){O.index>R?(I=O,O=null):I=O.sibling;var H=f(m,O,b[R],_);if(H===null){O===null&&(O=I);break}t&&O&&H.alternate===null&&e(m,O),x=i(H,x,R),T===null?C=H:T.sibling=H,T=H,O=I}if(R===b.length)return r(m,O),qt&&Gl(m,R),C;if(O===null){for(;R<b.length;R++)O=h(m,b[R],_),O!==null&&(x=i(O,x,R),T===null?C=O:T.sibling=O,T=O);return qt&&Gl(m,R),C}for(O=n(m,O);R<b.length;R++)I=p(O,m,R,b[R],_),I!==null&&(t&&I.alternate!==null&&O.delete(I.key===null?R:I.key),x=i(I,x,R),T===null?C=I:T.sibling=I,T=I);return t&&O.forEach(function(re){return e(m,re)}),qt&&Gl(m,R),C}function y(m,x,b,_){var C=Vh(b);if(typeof C!="function")throw Error(ye(150));if(b=C.call(b),b==null)throw Error(ye(151));for(var T=C=null,O=x,R=x=0,I=null,H=b.next();O!==null&&!H.done;R++,H=b.next()){O.index>R?(I=O,O=null):I=O.sibling;var re=f(m,O,H.value,_);if(re===null){O===null&&(O=I);break}t&&O&&re.alternate===null&&e(m,O),x=i(re,x,R),T===null?C=re:T.sibling=re,T=re,O=I}if(H.done)return r(m,O),qt&&Gl(m,R),C;if(O===null){for(;!H.done;R++,H=b.next())H=h(m,H.value,_),H!==null&&(x=i(H,x,R),T===null?C=H:T.sibling=H,T=H);return qt&&Gl(m,R),C}for(O=n(m,O);!H.done;R++,H=b.next())H=p(O,m,R,H.value,_),H!==null&&(t&&H.alternate!==null&&O.delete(H.key===null?R:H.key),x=i(H,x,R),T===null?C=H:T.sibling=H,T=H);return t&&O.forEach(function(L){return e(m,L)}),qt&&Gl(m,R),C}function v(m,x,b,_){if(typeof b=="object"&&b!==null&&b.type===Lu&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case tm:e:{for(var C=b.key,T=x;T!==null;){if(T.key===C){if(C=b.type,C===Lu){if(T.tag===7){r(m,T.sibling),x=s(T,b.props.children),x.return=m,m=x;break e}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Fa&&oN(C)===T.type){r(m,T.sibling),x=s(T,b.props),x.ref=Gh(m,T,b),x.return=m,m=x;break e}r(m,T);break}else e(m,T);T=T.sibling}b.type===Lu?(x=yc(b.props.children,m.mode,_,b.key),x.return=m,m=x):(_=Ey(b.type,b.key,b.props,null,m.mode,_),_.ref=Gh(m,x,b),_.return=m,m=_)}return o(m);case Fu:e:{for(T=b.key;x!==null;){if(x.key===T)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){r(m,x.sibling),x=s(x,b.children||[]),x.return=m,m=x;break e}else{r(m,x);break}else e(m,x);x=x.sibling}x=Tb(b,m.mode,_),x.return=m,m=x}return o(m);case Fa:return T=b._init,v(m,x,T(b._payload),_)}if(uf(b))return g(m,x,b,_);if(Vh(b))return y(m,x,b,_);hm(m,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(r(m,x.sibling),x=s(x,b),x.return=m,m=x):(r(m,x),x=kb(b,m.mode,_),x.return=m,m=x),o(m)):r(m,x)}return v}var Rd=$F(!0),UF=$F(!1),d0=Al(null),h0=null,qu=null,rT=null;function nT(){rT=qu=h0=null}function sT(t){var e=d0.current;Ht(d0),t._currentValue=e}function dC(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function dd(t,e){h0=t,rT=qu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(es=!0),t.firstContext=null)}function ii(t){var e=t._currentValue;if(rT!==t)if(t={context:t,memoizedValue:e,next:null},qu===null){if(h0===null)throw Error(ye(308));qu=t,h0.dependencies={lanes:0,firstContext:t}}else qu=qu.next=t;return e}var ac=null;function iT(t){ac===null?ac=[t]:ac.push(t)}function VF(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,iT(e)):(r.next=s.next,s.next=r),e.interleaved=r,aa(t,n)}function aa(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var La=!1;function oT(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zF(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ja(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ct&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,aa(t,r)}return s=n.interleaved,s===null?(e.next=e,iT(n)):(e.next=s.next,s.next=e),n.interleaved=e,aa(t,r)}function xy(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Wk(t,r)}}function aN(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function f0(t,e,r,n){var s=t.updateQueue;La=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,d=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,y=a;switch(f=e,p=r,y.tag){case 1:if(g=y.payload,typeof g=="function"){h=g.call(p,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,f=typeof g=="function"?g.call(p,h,f):g,f==null)break e;h=Qt({},h,f);break e;case 2:La=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Rc|=o,t.lanes=o,t.memoizedState=h}}function lN(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ye(191,s));s.call(n)}}}var vg={},lo=Al(vg),Ap=Al(vg),Pp=Al(vg);function lc(t){if(t===vg)throw Error(ye(174));return t}function aT(t,e){switch($t(Pp,e),$t(Ap,t),$t(lo,vg),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:W_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=W_(e,t)}Ht(lo),$t(lo,e)}function Od(){Ht(lo),Ht(Ap),Ht(Pp)}function HF(t){lc(Pp.current);var e=lc(lo.current),r=W_(e,t.type);e!==r&&($t(Ap,t),$t(lo,r))}function lT(t){Ap.current===t&&(Ht(lo),Ht(Ap))}var Yt=Al(0);function p0(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var wb=[];function cT(){for(var t=0;t<wb.length;t++)wb[t]._workInProgressVersionPrimary=null;wb.length=0}var wy=va.ReactCurrentDispatcher,bb=va.ReactCurrentBatchConfig,Nc=0,Zt=null,Or=null,qr=null,g0=!1,Of=!1,Np=0,pK=0;function ln(){throw Error(ye(321))}function uT(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Di(t[r],e[r]))return!1;return!0}function dT(t,e,r,n,s,i){if(Nc=i,Zt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wy.current=t===null||t.memoizedState===null?vK:xK,t=r(n,s),Of){i=0;do{if(Of=!1,Np=0,25<=i)throw Error(ye(301));i+=1,qr=Or=null,e.updateQueue=null,wy.current=wK,t=r(n,s)}while(Of)}if(wy.current=m0,e=Or!==null&&Or.next!==null,Nc=0,qr=Or=Zt=null,g0=!1,e)throw Error(ye(300));return t}function hT(){var t=Np!==0;return Np=0,t}function Ji(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qr===null?Zt.memoizedState=qr=t:qr=qr.next=t,qr}function oi(){if(Or===null){var t=Zt.alternate;t=t!==null?t.memoizedState:null}else t=Or.next;var e=qr===null?Zt.memoizedState:qr.next;if(e!==null)qr=e,Or=t;else{if(t===null)throw Error(ye(310));Or=t,t={memoizedState:Or.memoizedState,baseState:Or.baseState,baseQueue:Or.baseQueue,queue:Or.queue,next:null},qr===null?Zt.memoizedState=qr=t:qr=qr.next=t}return qr}function Rp(t,e){return typeof e=="function"?e(t):e}function Sb(t){var e=oi(),r=e.queue;if(r===null)throw Error(ye(311));r.lastRenderedReducer=t;var n=Or,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((Nc&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=n):l=l.next=h,Zt.lanes|=d,Rc|=d}c=c.next}while(c!==null&&c!==i);l===null?o=n:l.next=a,Di(n,e.memoizedState)||(es=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,Zt.lanes|=i,Rc|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function _b(t){var e=oi(),r=e.queue;if(r===null)throw Error(ye(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Di(i,e.memoizedState)||(es=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function WF(){}function qF(t,e){var r=Zt,n=oi(),s=e(),i=!Di(n.memoizedState,s);if(i&&(n.memoizedState=s,es=!0),n=n.queue,fT(YF.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||qr!==null&&qr.memoizedState.tag&1){if(r.flags|=2048,Op(9,KF.bind(null,r,n,s,e),void 0,null),Xr===null)throw Error(ye(349));Nc&30||GF(r,e,s)}return s}function GF(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function KF(t,e,r,n){e.value=r,e.getSnapshot=n,XF(e)&&JF(t)}function YF(t,e,r){return r(function(){XF(e)&&JF(t)})}function XF(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Di(t,r)}catch{return!0}}function JF(t){var e=aa(t,1);e!==null&&Oi(e,t,1,-1)}function cN(t){var e=Ji();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rp,lastRenderedState:t},e.queue=t,t=t.dispatch=yK.bind(null,Zt,t),[e.memoizedState,t]}function Op(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Zt.updateQueue,e===null?(e={lastEffect:null,stores:null},Zt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function ZF(){return oi().memoizedState}function by(t,e,r,n){var s=Ji();Zt.flags|=t,s.memoizedState=Op(1|e,r,void 0,n===void 0?null:n)}function ux(t,e,r,n){var s=oi();n=n===void 0?null:n;var i=void 0;if(Or!==null){var o=Or.memoizedState;if(i=o.destroy,n!==null&&uT(n,o.deps)){s.memoizedState=Op(e,r,i,n);return}}Zt.flags|=t,s.memoizedState=Op(1|e,r,i,n)}function uN(t,e){return by(8390656,8,t,e)}function fT(t,e){return ux(2048,8,t,e)}function QF(t,e){return ux(4,2,t,e)}function eL(t,e){return ux(4,4,t,e)}function tL(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rL(t,e,r){return r=r!=null?r.concat([t]):null,ux(4,4,tL.bind(null,e,t),r)}function pT(){}function nL(t,e){var r=oi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&uT(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function sL(t,e){var r=oi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&uT(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function iL(t,e,r){return Nc&21?(Di(r,e)||(r=uF(),Zt.lanes|=r,Rc|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,es=!0),t.memoizedState=r)}function gK(t,e){var r=Pt;Pt=r!==0&&4>r?r:4,t(!0);var n=bb.transition;bb.transition={};try{t(!1),e()}finally{Pt=r,bb.transition=n}}function oL(){return oi().memoizedState}function mK(t,e,r){var n=Qa(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},aL(t))lL(e,r);else if(r=VF(t,e,r,n),r!==null){var s=Fn();Oi(r,t,n,s),cL(r,e,n)}}function yK(t,e,r){var n=Qa(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(aL(t))lL(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,r);if(s.hasEagerState=!0,s.eagerState=a,Di(a,o)){var l=e.interleaved;l===null?(s.next=s,iT(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}r=VF(t,e,s,n),r!==null&&(s=Fn(),Oi(r,t,n,s),cL(r,e,n))}}function aL(t){var e=t.alternate;return t===Zt||e!==null&&e===Zt}function lL(t,e){Of=g0=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function cL(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Wk(t,r)}}var m0={readContext:ii,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},vK={readContext:ii,useCallback:function(t,e){return Ji().memoizedState=[t,e===void 0?null:e],t},useContext:ii,useEffect:uN,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,by(4194308,4,tL.bind(null,e,t),r)},useLayoutEffect:function(t,e){return by(4194308,4,t,e)},useInsertionEffect:function(t,e){return by(4,2,t,e)},useMemo:function(t,e){var r=Ji();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ji();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=mK.bind(null,Zt,t),[n.memoizedState,t]},useRef:function(t){var e=Ji();return t={current:t},e.memoizedState=t},useState:cN,useDebugValue:pT,useDeferredValue:function(t){return Ji().memoizedState=t},useTransition:function(){var t=cN(!1),e=t[0];return t=gK.bind(null,t[1]),Ji().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Zt,s=Ji();if(qt){if(r===void 0)throw Error(ye(407));r=r()}else{if(r=e(),Xr===null)throw Error(ye(349));Nc&30||GF(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,uN(YF.bind(null,n,i,t),[t]),n.flags|=2048,Op(9,KF.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Ji(),e=Xr.identifierPrefix;if(qt){var r=$o,n=Bo;r=(n&~(1<<32-Ri(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Np++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=pK++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xK={readContext:ii,useCallback:nL,useContext:ii,useEffect:fT,useImperativeHandle:rL,useInsertionEffect:QF,useLayoutEffect:eL,useMemo:sL,useReducer:Sb,useRef:ZF,useState:function(){return Sb(Rp)},useDebugValue:pT,useDeferredValue:function(t){var e=oi();return iL(e,Or.memoizedState,t)},useTransition:function(){var t=Sb(Rp)[0],e=oi().memoizedState;return[t,e]},useMutableSource:WF,useSyncExternalStore:qF,useId:oL,unstable_isNewReconciler:!1},wK={readContext:ii,useCallback:nL,useContext:ii,useEffect:fT,useImperativeHandle:rL,useInsertionEffect:QF,useLayoutEffect:eL,useMemo:sL,useReducer:_b,useRef:ZF,useState:function(){return _b(Rp)},useDebugValue:pT,useDeferredValue:function(t){var e=oi();return Or===null?e.memoizedState=t:iL(e,Or.memoizedState,t)},useTransition:function(){var t=_b(Rp)[0],e=oi().memoizedState;return[t,e]},useMutableSource:WF,useSyncExternalStore:qF,useId:oL,unstable_isNewReconciler:!1};function bi(t,e){if(t&&t.defaultProps){e=Qt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function hC(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Qt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var dx={isMounted:function(t){return(t=t._reactInternals)?Gc(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Fn(),s=Qa(t),i=Wo(n,s);i.payload=e,r!=null&&(i.callback=r),e=Ja(t,i,s),e!==null&&(Oi(e,t,s,n),xy(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Fn(),s=Qa(t),i=Wo(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Ja(t,i,s),e!==null&&(Oi(e,t,s,n),xy(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Fn(),n=Qa(t),s=Wo(r,n);s.tag=2,e!=null&&(s.callback=e),e=Ja(t,s,n),e!==null&&(Oi(e,t,n,r),xy(e,t,n))}};function dN(t,e,r,n,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ep(r,n)||!Ep(s,i):!0}function uL(t,e,r){var n=!1,s=cl,i=e.contextType;return typeof i=="object"&&i!==null?i=ii(i):(s=ns(e)?Ac:_n.current,n=e.contextTypes,i=(n=n!=null)?Pd(t,s):cl),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dx,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function hN(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&dx.enqueueReplaceState(e,e.state,null)}function fC(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},oT(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ii(i):(i=ns(e)?Ac:_n.current,s.context=Pd(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(hC(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&dx.enqueueReplaceState(s,s.state,null),f0(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Md(t,e){try{var r="",n=e;do r+=Kq(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Cb(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function pC(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var bK=typeof WeakMap=="function"?WeakMap:Map;function dL(t,e,r){r=Wo(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){v0||(v0=!0,CC=n),pC(t,e)},r}function hL(t,e,r){r=Wo(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){pC(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){pC(t,e),typeof n!="function"&&(Za===null?Za=new Set([this]):Za.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function fN(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new bK;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=IK.bind(null,t,e,r),e.then(t,t))}function pN(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gN(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Wo(-1,1),e.tag=2,Ja(r,e,1))),r.lanes|=1),t)}var SK=va.ReactCurrentOwner,es=!1;function Nn(t,e,r,n){e.child=t===null?UF(e,null,r,n):Rd(e,t.child,r,n)}function mN(t,e,r,n,s){r=r.render;var i=e.ref;return dd(e,s),n=dT(t,e,r,n,i,s),r=hT(),t!==null&&!es?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,la(t,e,s)):(qt&&r&&Qk(e),e.flags|=1,Nn(t,e,n,s),e.child)}function yN(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!ST(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,fL(t,e,i,n,s)):(t=Ey(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Ep,r(o,n)&&t.ref===e.ref)return la(t,e,s)}return e.flags|=1,t=el(i,n),t.ref=e.ref,t.return=e,e.child=t}function fL(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Ep(i,n)&&t.ref===e.ref)if(es=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(es=!0);else return e.lanes=t.lanes,la(t,e,s)}return gC(t,e,r,n,s)}function pL(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$t(Ku,gs),gs|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$t(Ku,gs),gs|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,$t(Ku,gs),gs|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,$t(Ku,gs),gs|=n;return Nn(t,e,s,r),e.child}function gL(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function gC(t,e,r,n,s){var i=ns(r)?Ac:_n.current;return i=Pd(e,i),dd(e,s),r=dT(t,e,r,n,i,s),n=hT(),t!==null&&!es?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,la(t,e,s)):(qt&&n&&Qk(e),e.flags|=1,Nn(t,e,r,s),e.child)}function vN(t,e,r,n,s){if(ns(r)){var i=!0;l0(e)}else i=!1;if(dd(e,s),e.stateNode===null)Sy(t,e),uL(e,r,n),fC(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=ii(c):(c=ns(r)?Ac:_n.current,c=Pd(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&hN(e,o,n,c),La=!1;var f=e.memoizedState;o.state=f,f0(e,n,o,s),l=e.memoizedState,a!==n||f!==l||rs.current||La?(typeof d=="function"&&(hC(e,r,d,n),l=e.memoizedState),(a=La||dN(e,r,a,n,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,zF(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:bi(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=ii(l):(l=ns(r)?Ac:_n.current,l=Pd(e,l));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&hN(e,o,n,l),La=!1,f=e.memoizedState,o.state=f,f0(e,n,o,s);var g=e.memoizedState;a!==h||f!==g||rs.current||La?(typeof p=="function"&&(hC(e,r,p,n),g=e.memoizedState),(c=La||dN(e,r,c,n,f,g,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),o.props=n,o.state=g,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return mC(t,e,r,n,i,s)}function mC(t,e,r,n,s,i){gL(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&nN(e,r,!1),la(t,e,i);n=e.stateNode,SK.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Rd(e,t.child,null,i),e.child=Rd(e,null,a,i)):Nn(t,e,a,i),e.memoizedState=n.state,s&&nN(e,r,!0),e.child}function mL(t){var e=t.stateNode;e.pendingContext?rN(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rN(t,e.context,!1),aT(t,e.containerInfo)}function xN(t,e,r,n,s){return Nd(),tT(s),e.flags|=256,Nn(t,e,r,n),e.child}var yC={dehydrated:null,treeContext:null,retryLane:0};function vC(t){return{baseLanes:t,cachePool:null,transitions:null}}function yL(t,e,r){var n=e.pendingProps,s=Yt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),$t(Yt,s&1),t===null)return uC(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=px(o,n,0,null),t=yc(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=vC(r),e.memoizedState=yC,t):gT(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return _K(t,e,o,n,a,s,r);if(i){i=n.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=el(s,l),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=el(a,i):(i=yc(i,o,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?vC(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=yC,n}return i=t.child,t=i.sibling,n=el(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function gT(t,e){return e=px({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fm(t,e,r,n){return n!==null&&tT(n),Rd(e,t.child,null,r),t=gT(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _K(t,e,r,n,s,i,o){if(r)return e.flags&256?(e.flags&=-257,n=Cb(Error(ye(422))),fm(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=px({mode:"visible",children:n.children},s,0,null),i=yc(i,s,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Rd(e,t.child,null,o),e.child.memoizedState=vC(o),e.memoizedState=yC,i);if(!(e.mode&1))return fm(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(ye(419)),n=Cb(i,n,void 0),fm(t,e,o,n)}if(a=(o&t.childLanes)!==0,es||a){if(n=Xr,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,aa(t,s),Oi(n,t,s,-1))}return bT(),n=Cb(Error(ye(421))),fm(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=DK.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ss=Xa(s.nextSibling),Cs=e,qt=!0,Ei=null,t!==null&&(Ys[Xs++]=Bo,Ys[Xs++]=$o,Ys[Xs++]=Pc,Bo=t.id,$o=t.overflow,Pc=e),e=gT(e,n.children),e.flags|=4096,e)}function wN(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),dC(t.return,e,r)}function Eb(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function vL(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Nn(t,e,n.children,r),n=Yt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wN(t,r,e);else if(t.tag===19)wN(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if($t(Yt,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&p0(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Eb(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&p0(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Eb(e,!0,r,null,i);break;case"together":Eb(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sy(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function la(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Rc|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ye(153));if(e.child!==null){for(t=e.child,r=el(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=el(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function CK(t,e,r){switch(e.tag){case 3:mL(e),Nd();break;case 5:HF(e);break;case 1:ns(e.type)&&l0(e);break;case 4:aT(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;$t(d0,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?($t(Yt,Yt.current&1),e.flags|=128,null):r&e.child.childLanes?yL(t,e,r):($t(Yt,Yt.current&1),t=la(t,e,r),t!==null?t.sibling:null);$t(Yt,Yt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return vL(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$t(Yt,Yt.current),n)break;return null;case 22:case 23:return e.lanes=0,pL(t,e,r)}return la(t,e,r)}var xL,xC,wL,bL;xL=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};xC=function(){};wL=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,lc(lo.current);var i=null;switch(r){case"input":s=U_(t,s),n=U_(t,n),i=[];break;case"select":s=Qt({},s,{value:void 0}),n=Qt({},n,{value:void 0}),i=[];break;case"textarea":s=H_(t,s),n=H_(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=o0)}q_(r,n);var o;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(vp.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var l=n[c];if(a=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(vp.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&zt("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}r&&(i=i||[]).push("style",r);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};bL=function(t,e,r,n){r!==n&&(e.flags|=4)};function Kh(t,e){if(!qt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function cn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function EK(t,e,r){var n=e.pendingProps;switch(eT(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(e),null;case 1:return ns(e.type)&&a0(),cn(e),null;case 3:return n=e.stateNode,Od(),Ht(rs),Ht(_n),cT(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(dm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ei!==null&&(TC(Ei),Ei=null))),xC(t,e),cn(e),null;case 5:lT(e);var s=lc(Pp.current);if(r=e.type,t!==null&&e.stateNode!=null)wL(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ye(166));return cn(e),null}if(t=lc(lo.current),dm(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[eo]=e,n[jp]=i,t=(e.mode&1)!==0,r){case"dialog":zt("cancel",n),zt("close",n);break;case"iframe":case"object":case"embed":zt("load",n);break;case"video":case"audio":for(s=0;s<hf.length;s++)zt(hf[s],n);break;case"source":zt("error",n);break;case"img":case"image":case"link":zt("error",n),zt("load",n);break;case"details":zt("toggle",n);break;case"input":AP(n,i),zt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},zt("invalid",n);break;case"textarea":NP(n,i),zt("invalid",n)}q_(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&um(n.textContent,a,t),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&um(n.textContent,a,t),s=["children",""+a]):vp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&zt("scroll",n)}switch(r){case"input":rm(n),PP(n,i,!0);break;case"textarea":rm(n),RP(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=o0)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Y4(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[eo]=e,t[jp]=n,xL(t,e,!1,!1),e.stateNode=t;e:{switch(o=G_(r,n),r){case"dialog":zt("cancel",t),zt("close",t),s=n;break;case"iframe":case"object":case"embed":zt("load",t),s=n;break;case"video":case"audio":for(s=0;s<hf.length;s++)zt(hf[s],t);s=n;break;case"source":zt("error",t),s=n;break;case"img":case"image":case"link":zt("error",t),zt("load",t),s=n;break;case"details":zt("toggle",t),s=n;break;case"input":AP(t,n),s=U_(t,n),zt("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Qt({},n,{value:void 0}),zt("invalid",t);break;case"textarea":NP(t,n),s=H_(t,n),zt("invalid",t);break;default:s=n}q_(r,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Z4(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&X4(t,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&xp(t,l):typeof l=="number"&&xp(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(vp.hasOwnProperty(i)?l!=null&&i==="onScroll"&&zt("scroll",t):l!=null&&Bk(t,i,l,o))}switch(r){case"input":rm(t),PP(t,n,!1);break;case"textarea":rm(t),RP(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ll(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?ad(t,!!n.multiple,i,!1):n.defaultValue!=null&&ad(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=o0)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return cn(e),null;case 6:if(t&&e.stateNode!=null)bL(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ye(166));if(r=lc(Pp.current),lc(lo.current),dm(e)){if(n=e.stateNode,r=e.memoizedProps,n[eo]=e,(i=n.nodeValue!==r)&&(t=Cs,t!==null))switch(t.tag){case 3:um(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&um(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[eo]=e,e.stateNode=n}return cn(e),null;case 13:if(Ht(Yt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(qt&&Ss!==null&&e.mode&1&&!(e.flags&128))BF(),Nd(),e.flags|=98560,i=!1;else if(i=dm(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(ye(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ye(317));i[eo]=e}else Nd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;cn(e),i=!1}else Ei!==null&&(TC(Ei),Ei=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Yt.current&1?Ir===0&&(Ir=3):bT())),e.updateQueue!==null&&(e.flags|=4),cn(e),null);case 4:return Od(),xC(t,e),t===null&&kp(e.stateNode.containerInfo),cn(e),null;case 10:return sT(e.type._context),cn(e),null;case 17:return ns(e.type)&&a0(),cn(e),null;case 19:if(Ht(Yt),i=e.memoizedState,i===null)return cn(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)Kh(i,!1);else{if(Ir!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=p0(t),o!==null){for(e.flags|=128,Kh(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return $t(Yt,Yt.current&1|2),e.child}t=t.sibling}i.tail!==null&&fr()>Id&&(e.flags|=128,n=!0,Kh(i,!1),e.lanes=4194304)}else{if(!n)if(t=p0(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Kh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!qt)return cn(e),null}else 2*fr()-i.renderingStartTime>Id&&r!==1073741824&&(e.flags|=128,n=!0,Kh(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=fr(),e.sibling=null,r=Yt.current,$t(Yt,n?r&1|2:r&1),e):(cn(e),null);case 22:case 23:return wT(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?gs&1073741824&&(cn(e),e.subtreeFlags&6&&(e.flags|=8192)):cn(e),null;case 24:return null;case 25:return null}throw Error(ye(156,e.tag))}function kK(t,e){switch(eT(e),e.tag){case 1:return ns(e.type)&&a0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Od(),Ht(rs),Ht(_n),cT(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lT(e),null;case 13:if(Ht(Yt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ye(340));Nd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ht(Yt),null;case 4:return Od(),null;case 10:return sT(e.type._context),null;case 22:case 23:return wT(),null;case 24:return null;default:return null}}var pm=!1,vn=!1,TK=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Gu(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){sr(t,e,n)}else r.current=null}function wC(t,e,r){try{r()}catch(n){sr(t,e,n)}}var bN=!1;function jK(t,e){if(nC=n0,t=kF(),Zk(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var p;h!==r||s!==0&&h.nodeType!==3||(a=o+s),h!==i||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===r&&++c===s&&(a=o),f===i&&++d===n&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(sC={focusedElem:t,selectionRange:r},n0=!1,Ie=e;Ie!==null;)if(e=Ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ie=t;else for(;Ie!==null;){e=Ie;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,v=g.memoizedState,m=e.stateNode,x=m.getSnapshotBeforeUpdate(e.elementType===e.type?y:bi(e.type,y),v);m.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ye(163))}}catch(_){sr(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,Ie=t;break}Ie=e.return}return g=bN,bN=!1,g}function Mf(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&wC(e,r,i)}s=s.next}while(s!==n)}}function hx(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function bC(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function SL(t){var e=t.alternate;e!==null&&(t.alternate=null,SL(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[eo],delete e[jp],delete e[aC],delete e[uK],delete e[dK])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _L(t){return t.tag===5||t.tag===3||t.tag===4}function SN(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_L(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function SC(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=o0));else if(n!==4&&(t=t.child,t!==null))for(SC(t,e,r),t=t.sibling;t!==null;)SC(t,e,r),t=t.sibling}function _C(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(_C(t,e,r),t=t.sibling;t!==null;)_C(t,e,r),t=t.sibling}var en=null,Si=!1;function Ca(t,e,r){for(r=r.child;r!==null;)CL(t,e,r),r=r.sibling}function CL(t,e,r){if(ao&&typeof ao.onCommitFiberUnmount=="function")try{ao.onCommitFiberUnmount(sx,r)}catch{}switch(r.tag){case 5:vn||Gu(r,e);case 6:var n=en,s=Si;en=null,Ca(t,e,r),en=n,Si=s,en!==null&&(Si?(t=en,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):en.removeChild(r.stateNode));break;case 18:en!==null&&(Si?(t=en,r=r.stateNode,t.nodeType===8?vb(t.parentNode,r):t.nodeType===1&&vb(t,r),_p(t)):vb(en,r.stateNode));break;case 4:n=en,s=Si,en=r.stateNode.containerInfo,Si=!0,Ca(t,e,r),en=n,Si=s;break;case 0:case 11:case 14:case 15:if(!vn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&wC(r,e,o),s=s.next}while(s!==n)}Ca(t,e,r);break;case 1:if(!vn&&(Gu(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){sr(r,e,a)}Ca(t,e,r);break;case 21:Ca(t,e,r);break;case 22:r.mode&1?(vn=(n=vn)||r.memoizedState!==null,Ca(t,e,r),vn=n):Ca(t,e,r);break;default:Ca(t,e,r)}}function _N(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new TK),e.forEach(function(n){var s=FK.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function fi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:en=a.stateNode,Si=!1;break e;case 3:en=a.stateNode.containerInfo,Si=!0;break e;case 4:en=a.stateNode.containerInfo,Si=!0;break e}a=a.return}if(en===null)throw Error(ye(160));CL(i,o,s),en=null,Si=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){sr(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)EL(e,t),e=e.sibling}function EL(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fi(e,t),qi(t),n&4){try{Mf(3,t,t.return),hx(3,t)}catch(y){sr(t,t.return,y)}try{Mf(5,t,t.return)}catch(y){sr(t,t.return,y)}}break;case 1:fi(e,t),qi(t),n&512&&r!==null&&Gu(r,r.return);break;case 5:if(fi(e,t),qi(t),n&512&&r!==null&&Gu(r,r.return),t.flags&32){var s=t.stateNode;try{xp(s,"")}catch(y){sr(t,t.return,y)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&G4(s,i),G_(a,o);var c=G_(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?Z4(s,h):d==="dangerouslySetInnerHTML"?X4(s,h):d==="children"?xp(s,h):Bk(s,d,h,c)}switch(a){case"input":V_(s,i);break;case"textarea":K4(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?ad(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?ad(s,!!i.multiple,i.defaultValue,!0):ad(s,!!i.multiple,i.multiple?[]:"",!1))}s[jp]=i}catch(y){sr(t,t.return,y)}}break;case 6:if(fi(e,t),qi(t),n&4){if(t.stateNode===null)throw Error(ye(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){sr(t,t.return,y)}}break;case 3:if(fi(e,t),qi(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{_p(e.containerInfo)}catch(y){sr(t,t.return,y)}break;case 4:fi(e,t),qi(t);break;case 13:fi(e,t),qi(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(vT=fr())),n&4&&_N(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(vn=(c=vn)||d,fi(e,t),vn=c):fi(e,t),qi(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Ie=t,d=t.child;d!==null;){for(h=Ie=d;Ie!==null;){switch(f=Ie,p=f.child,f.tag){case 0:case 11:case 14:case 15:Mf(4,f,f.return);break;case 1:Gu(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){sr(n,r,y)}}break;case 5:Gu(f,f.return);break;case 22:if(f.memoizedState!==null){EN(h);continue}}p!==null?(p.return=f,Ie=p):EN(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=J4("display",o))}catch(y){sr(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){sr(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fi(e,t),qi(t),n&4&&_N(t);break;case 21:break;default:fi(e,t),qi(t)}}function qi(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(_L(r)){var n=r;break e}r=r.return}throw Error(ye(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(xp(s,""),n.flags&=-33);var i=SN(t);_C(t,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=SN(t);SC(t,a,o);break;default:throw Error(ye(161))}}catch(l){sr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AK(t,e,r){Ie=t,kL(t)}function kL(t,e,r){for(var n=(t.mode&1)!==0;Ie!==null;){var s=Ie,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||pm;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||vn;a=pm;var c=vn;if(pm=o,(vn=l)&&!c)for(Ie=s;Ie!==null;)o=Ie,l=o.child,o.tag===22&&o.memoizedState!==null?kN(s):l!==null?(l.return=o,Ie=l):kN(s);for(;i!==null;)Ie=i,kL(i),i=i.sibling;Ie=s,pm=a,vn=c}CN(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ie=i):CN(t)}}function CN(t){for(;Ie!==null;){var e=Ie;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vn||hx(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!vn)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:bi(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&lN(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}lN(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&_p(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ye(163))}vn||e.flags&512&&bC(e)}catch(f){sr(e,e.return,f)}}if(e===t){Ie=null;break}if(r=e.sibling,r!==null){r.return=e.return,Ie=r;break}Ie=e.return}}function EN(t){for(;Ie!==null;){var e=Ie;if(e===t){Ie=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Ie=r;break}Ie=e.return}}function kN(t){for(;Ie!==null;){var e=Ie;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{hx(4,e)}catch(l){sr(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){sr(e,s,l)}}var i=e.return;try{bC(e)}catch(l){sr(e,i,l)}break;case 5:var o=e.return;try{bC(e)}catch(l){sr(e,o,l)}}}catch(l){sr(e,e.return,l)}if(e===t){Ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ie=a;break}Ie=e.return}}var PK=Math.ceil,y0=va.ReactCurrentDispatcher,mT=va.ReactCurrentOwner,ri=va.ReactCurrentBatchConfig,Ct=0,Xr=null,br=null,sn=0,gs=0,Ku=Al(0),Ir=0,Mp=null,Rc=0,fx=0,yT=0,If=null,Kn=null,vT=0,Id=1/0,Mo=null,v0=!1,CC=null,Za=null,gm=!1,Wa=null,x0=0,Df=0,EC=null,_y=-1,Cy=0;function Fn(){return Ct&6?fr():_y!==-1?_y:_y=fr()}function Qa(t){return t.mode&1?Ct&2&&sn!==0?sn&-sn:fK.transition!==null?(Cy===0&&(Cy=uF()),Cy):(t=Pt,t!==0||(t=window.event,t=t===void 0?16:yF(t.type)),t):1}function Oi(t,e,r,n){if(50<Df)throw Df=0,EC=null,Error(ye(185));gg(t,r,n),(!(Ct&2)||t!==Xr)&&(t===Xr&&(!(Ct&2)&&(fx|=r),Ir===4&&Ua(t,sn)),ss(t,n),r===1&&Ct===0&&!(e.mode&1)&&(Id=fr()+500,cx&&Pl()))}function ss(t,e){var r=t.callbackNode;fG(t,e);var n=r0(t,t===Xr?sn:0);if(n===0)r!==null&&IP(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&IP(r),e===1)t.tag===0?hK(TN.bind(null,t)):DF(TN.bind(null,t)),lK(function(){!(Ct&6)&&Pl()}),r=null;else{switch(dF(n)){case 1:r=Hk;break;case 4:r=lF;break;case 16:r=t0;break;case 536870912:r=cF;break;default:r=t0}r=ML(r,TL.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function TL(t,e){if(_y=-1,Cy=0,Ct&6)throw Error(ye(327));var r=t.callbackNode;if(hd()&&t.callbackNode!==r)return null;var n=r0(t,t===Xr?sn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=w0(t,n);else{e=n;var s=Ct;Ct|=2;var i=AL();(Xr!==t||sn!==e)&&(Mo=null,Id=fr()+500,mc(t,e));do try{OK();break}catch(a){jL(t,a)}while(!0);nT(),y0.current=i,Ct=s,br!==null?e=0:(Xr=null,sn=0,e=Ir)}if(e!==0){if(e===2&&(s=Z_(t),s!==0&&(n=s,e=kC(t,s))),e===1)throw r=Mp,mc(t,0),Ua(t,n),ss(t,fr()),r;if(e===6)Ua(t,n);else{if(s=t.current.alternate,!(n&30)&&!NK(s)&&(e=w0(t,n),e===2&&(i=Z_(t),i!==0&&(n=i,e=kC(t,i))),e===1))throw r=Mp,mc(t,0),Ua(t,n),ss(t,fr()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(ye(345));case 2:Kl(t,Kn,Mo);break;case 3:if(Ua(t,n),(n&130023424)===n&&(e=vT+500-fr(),10<e)){if(r0(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Fn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=oC(Kl.bind(null,t,Kn,Mo),e);break}Kl(t,Kn,Mo);break;case 4:if(Ua(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-Ri(n);i=1<<o,o=e[o],o>s&&(s=o),n&=~i}if(n=s,n=fr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*PK(n/1960))-n,10<n){t.timeoutHandle=oC(Kl.bind(null,t,Kn,Mo),n);break}Kl(t,Kn,Mo);break;case 5:Kl(t,Kn,Mo);break;default:throw Error(ye(329))}}}return ss(t,fr()),t.callbackNode===r?TL.bind(null,t):null}function kC(t,e){var r=If;return t.current.memoizedState.isDehydrated&&(mc(t,e).flags|=256),t=w0(t,e),t!==2&&(e=Kn,Kn=r,e!==null&&TC(e)),t}function TC(t){Kn===null?Kn=t:Kn.push.apply(Kn,t)}function NK(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Di(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ua(t,e){for(e&=~yT,e&=~fx,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Ri(e),n=1<<r;t[r]=-1,e&=~n}}function TN(t){if(Ct&6)throw Error(ye(327));hd();var e=r0(t,0);if(!(e&1))return ss(t,fr()),null;var r=w0(t,e);if(t.tag!==0&&r===2){var n=Z_(t);n!==0&&(e=n,r=kC(t,n))}if(r===1)throw r=Mp,mc(t,0),Ua(t,e),ss(t,fr()),r;if(r===6)throw Error(ye(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Kl(t,Kn,Mo),ss(t,fr()),null}function xT(t,e){var r=Ct;Ct|=1;try{return t(e)}finally{Ct=r,Ct===0&&(Id=fr()+500,cx&&Pl())}}function Oc(t){Wa!==null&&Wa.tag===0&&!(Ct&6)&&hd();var e=Ct;Ct|=1;var r=ri.transition,n=Pt;try{if(ri.transition=null,Pt=1,t)return t()}finally{Pt=n,ri.transition=r,Ct=e,!(Ct&6)&&Pl()}}function wT(){gs=Ku.current,Ht(Ku)}function mc(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,aK(r)),br!==null)for(r=br.return;r!==null;){var n=r;switch(eT(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&a0();break;case 3:Od(),Ht(rs),Ht(_n),cT();break;case 5:lT(n);break;case 4:Od();break;case 13:Ht(Yt);break;case 19:Ht(Yt);break;case 10:sT(n.type._context);break;case 22:case 23:wT()}r=r.return}if(Xr=t,br=t=el(t.current,null),sn=gs=e,Ir=0,Mp=null,yT=fx=Rc=0,Kn=If=null,ac!==null){for(e=0;e<ac.length;e++)if(r=ac[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}ac=null}return t}function jL(t,e){do{var r=br;try{if(nT(),wy.current=m0,g0){for(var n=Zt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}g0=!1}if(Nc=0,qr=Or=Zt=null,Of=!1,Np=0,mT.current=null,r===null||r.return===null){Ir=1,Mp=e,br=null;break}e:{var i=t,o=r.return,a=r,l=e;if(e=sn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=pN(o);if(p!==null){p.flags&=-257,gN(p,o,a,i,e),p.mode&1&&fN(i,c,e),e=p,l=c;var g=e.updateQueue;if(g===null){var y=new Set;y.add(l),e.updateQueue=y}else g.add(l);break e}else{if(!(e&1)){fN(i,c,e),bT();break e}l=Error(ye(426))}}else if(qt&&a.mode&1){var v=pN(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),gN(v,o,a,i,e),tT(Md(l,a));break e}}i=l=Md(l,a),Ir!==4&&(Ir=2),If===null?If=[i]:If.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=dL(i,l,e);aN(i,m);break e;case 1:a=l;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Za===null||!Za.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=hL(i,a,e);aN(i,_);break e}}i=i.return}while(i!==null)}NL(r)}catch(C){e=C,br===r&&r!==null&&(br=r=r.return);continue}break}while(!0)}function AL(){var t=y0.current;return y0.current=m0,t===null?m0:t}function bT(){(Ir===0||Ir===3||Ir===2)&&(Ir=4),Xr===null||!(Rc&268435455)&&!(fx&268435455)||Ua(Xr,sn)}function w0(t,e){var r=Ct;Ct|=2;var n=AL();(Xr!==t||sn!==e)&&(Mo=null,mc(t,e));do try{RK();break}catch(s){jL(t,s)}while(!0);if(nT(),Ct=r,y0.current=n,br!==null)throw Error(ye(261));return Xr=null,sn=0,Ir}function RK(){for(;br!==null;)PL(br)}function OK(){for(;br!==null&&!sG();)PL(br)}function PL(t){var e=OL(t.alternate,t,gs);t.memoizedProps=t.pendingProps,e===null?NL(t):br=e,mT.current=null}function NL(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=kK(r,e),r!==null){r.flags&=32767,br=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ir=6,br=null;return}}else if(r=EK(r,e,gs),r!==null){br=r;return}if(e=e.sibling,e!==null){br=e;return}br=e=t}while(e!==null);Ir===0&&(Ir=5)}function Kl(t,e,r){var n=Pt,s=ri.transition;try{ri.transition=null,Pt=1,MK(t,e,r,n)}finally{ri.transition=s,Pt=n}return null}function MK(t,e,r,n){do hd();while(Wa!==null);if(Ct&6)throw Error(ye(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ye(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(pG(t,i),t===Xr&&(br=Xr=null,sn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||gm||(gm=!0,ML(t0,function(){return hd(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ri.transition,ri.transition=null;var o=Pt;Pt=1;var a=Ct;Ct|=4,mT.current=null,jK(t,r),EL(r,t),eK(sC),n0=!!nC,sC=nC=null,t.current=r,AK(r),iG(),Ct=a,Pt=o,ri.transition=i}else t.current=r;if(gm&&(gm=!1,Wa=t,x0=s),i=t.pendingLanes,i===0&&(Za=null),lG(r.stateNode),ss(t,fr()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(v0)throw v0=!1,t=CC,CC=null,t;return x0&1&&t.tag!==0&&hd(),i=t.pendingLanes,i&1?t===EC?Df++:(Df=0,EC=t):Df=0,Pl(),null}function hd(){if(Wa!==null){var t=dF(x0),e=ri.transition,r=Pt;try{if(ri.transition=null,Pt=16>t?16:t,Wa===null)var n=!1;else{if(t=Wa,Wa=null,x0=0,Ct&6)throw Error(ye(331));var s=Ct;for(Ct|=4,Ie=t.current;Ie!==null;){var i=Ie,o=i.child;if(Ie.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ie=c;Ie!==null;){var d=Ie;switch(d.tag){case 0:case 11:case 15:Mf(8,d,i)}var h=d.child;if(h!==null)h.return=d,Ie=h;else for(;Ie!==null;){d=Ie;var f=d.sibling,p=d.return;if(SL(d),d===c){Ie=null;break}if(f!==null){f.return=p,Ie=f;break}Ie=p}}}var g=i.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}Ie=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ie=o;else e:for(;Ie!==null;){if(i=Ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Mf(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,Ie=m;break e}Ie=i.return}}var x=t.current;for(Ie=x;Ie!==null;){o=Ie;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Ie=b;else e:for(o=x;Ie!==null;){if(a=Ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hx(9,a)}}catch(C){sr(a,a.return,C)}if(a===o){Ie=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,Ie=_;break e}Ie=a.return}}if(Ct=s,Pl(),ao&&typeof ao.onPostCommitFiberRoot=="function")try{ao.onPostCommitFiberRoot(sx,t)}catch{}n=!0}return n}finally{Pt=r,ri.transition=e}}return!1}function jN(t,e,r){e=Md(r,e),e=dL(t,e,1),t=Ja(t,e,1),e=Fn(),t!==null&&(gg(t,1,e),ss(t,e))}function sr(t,e,r){if(t.tag===3)jN(t,t,r);else for(;e!==null;){if(e.tag===3){jN(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Za===null||!Za.has(n))){t=Md(r,t),t=hL(e,t,1),e=Ja(e,t,1),t=Fn(),e!==null&&(gg(e,1,t),ss(e,t));break}}e=e.return}}function IK(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Fn(),t.pingedLanes|=t.suspendedLanes&r,Xr===t&&(sn&r)===r&&(Ir===4||Ir===3&&(sn&130023424)===sn&&500>fr()-vT?mc(t,0):yT|=r),ss(t,e)}function RL(t,e){e===0&&(t.mode&1?(e=im,im<<=1,!(im&130023424)&&(im=4194304)):e=1);var r=Fn();t=aa(t,e),t!==null&&(gg(t,e,r),ss(t,r))}function DK(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),RL(t,r)}function FK(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ye(314))}n!==null&&n.delete(e),RL(t,r)}var OL;OL=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||rs.current)es=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return es=!1,CK(t,e,r);es=!!(t.flags&131072)}else es=!1,qt&&e.flags&1048576&&FF(e,u0,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Sy(t,e),t=e.pendingProps;var s=Pd(e,_n.current);dd(e,r),s=dT(null,e,n,t,s,r);var i=hT();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ns(n)?(i=!0,l0(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,oT(e),s.updater=dx,e.stateNode=s,s._reactInternals=e,fC(e,n,t,r),e=mC(null,e,n,!0,i,r)):(e.tag=0,qt&&i&&Qk(e),Nn(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Sy(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=BK(n),t=bi(n,t),s){case 0:e=gC(null,e,n,t,r);break e;case 1:e=vN(null,e,n,t,r);break e;case 11:e=mN(null,e,n,t,r);break e;case 14:e=yN(null,e,n,bi(n.type,t),r);break e}throw Error(ye(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:bi(n,s),gC(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:bi(n,s),vN(t,e,n,s,r);case 3:e:{if(mL(e),t===null)throw Error(ye(387));n=e.pendingProps,i=e.memoizedState,s=i.element,zF(t,e),f0(e,n,null,r);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Md(Error(ye(423)),e),e=xN(t,e,n,r,s);break e}else if(n!==s){s=Md(Error(ye(424)),e),e=xN(t,e,n,r,s);break e}else for(Ss=Xa(e.stateNode.containerInfo.firstChild),Cs=e,qt=!0,Ei=null,r=UF(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Nd(),n===s){e=la(t,e,r);break e}Nn(t,e,n,r)}e=e.child}return e;case 5:return HF(e),t===null&&uC(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,iC(n,s)?o=null:i!==null&&iC(n,i)&&(e.flags|=32),gL(t,e),Nn(t,e,o,r),e.child;case 6:return t===null&&uC(e),null;case 13:return yL(t,e,r);case 4:return aT(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Rd(e,null,n,r):Nn(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:bi(n,s),mN(t,e,n,s,r);case 7:return Nn(t,e,e.pendingProps,r),e.child;case 8:return Nn(t,e,e.pendingProps.children,r),e.child;case 12:return Nn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,$t(d0,n._currentValue),n._currentValue=o,i!==null)if(Di(i.value,o)){if(i.children===s.children&&!rs.current){e=la(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=Wo(-1,r&-r),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),dC(i.return,r,e),a.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ye(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),dC(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Nn(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,dd(e,r),s=ii(s),n=n(s),e.flags|=1,Nn(t,e,n,r),e.child;case 14:return n=e.type,s=bi(n,e.pendingProps),s=bi(n.type,s),yN(t,e,n,s,r);case 15:return fL(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:bi(n,s),Sy(t,e),e.tag=1,ns(n)?(t=!0,l0(e)):t=!1,dd(e,r),uL(e,n,s),fC(e,n,s,r),mC(null,e,n,!0,t,r);case 19:return vL(t,e,r);case 22:return pL(t,e,r)}throw Error(ye(156,e.tag))};function ML(t,e){return aF(t,e)}function LK(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ti(t,e,r,n){return new LK(t,e,r,n)}function ST(t){return t=t.prototype,!(!t||!t.isReactComponent)}function BK(t){if(typeof t=="function")return ST(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Uk)return 11;if(t===Vk)return 14}return 2}function el(t,e){var r=t.alternate;return r===null?(r=ti(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ey(t,e,r,n,s,i){var o=2;if(n=t,typeof t=="function")ST(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Lu:return yc(r.children,s,i,e);case $k:o=8,s|=8;break;case F_:return t=ti(12,r,e,s|2),t.elementType=F_,t.lanes=i,t;case L_:return t=ti(13,r,e,s),t.elementType=L_,t.lanes=i,t;case B_:return t=ti(19,r,e,s),t.elementType=B_,t.lanes=i,t;case H4:return px(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case V4:o=10;break e;case z4:o=9;break e;case Uk:o=11;break e;case Vk:o=14;break e;case Fa:o=16,n=null;break e}throw Error(ye(130,t==null?t:typeof t,""))}return e=ti(o,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function yc(t,e,r,n){return t=ti(7,t,n,e),t.lanes=r,t}function px(t,e,r,n){return t=ti(22,t,n,e),t.elementType=H4,t.lanes=r,t.stateNode={isHidden:!1},t}function kb(t,e,r){return t=ti(6,t,null,e),t.lanes=r,t}function Tb(t,e,r){return e=ti(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $K(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ab(0),this.expirationTimes=ab(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ab(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function _T(t,e,r,n,s,i,o,a,l){return t=new $K(t,e,r,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ti(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},oT(i),t}function UK(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fu,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function IL(t){if(!t)return cl;t=t._reactInternals;e:{if(Gc(t)!==t||t.tag!==1)throw Error(ye(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ns(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ye(171))}if(t.tag===1){var r=t.type;if(ns(r))return IF(t,r,e)}return e}function DL(t,e,r,n,s,i,o,a,l){return t=_T(r,n,!0,t,s,i,o,a,l),t.context=IL(null),r=t.current,n=Fn(),s=Qa(r),i=Wo(n,s),i.callback=e??null,Ja(r,i,s),t.current.lanes=s,gg(t,s,n),ss(t,n),t}function gx(t,e,r,n){var s=e.current,i=Fn(),o=Qa(s);return r=IL(r),e.context===null?e.context=r:e.pendingContext=r,e=Wo(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Ja(s,e,o),t!==null&&(Oi(t,s,o,i),xy(t,s,o)),o}function b0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function AN(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function CT(t,e){AN(t,e),(t=t.alternate)&&AN(t,e)}function VK(){return null}var FL=typeof reportError=="function"?reportError:function(t){console.error(t)};function ET(t){this._internalRoot=t}mx.prototype.render=ET.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ye(409));gx(t,e,null,null)};mx.prototype.unmount=ET.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Oc(function(){gx(null,t,null,null)}),e[oa]=null}};function mx(t){this._internalRoot=t}mx.prototype.unstable_scheduleHydration=function(t){if(t){var e=pF();t={blockedOn:null,target:t,priority:e};for(var r=0;r<$a.length&&e!==0&&e<$a[r].priority;r++);$a.splice(r,0,t),r===0&&mF(t)}};function kT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function PN(){}function zK(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=b0(o);i.call(c)}}var o=DL(e,n,t,0,null,!1,!1,"",PN);return t._reactRootContainer=o,t[oa]=o.current,kp(t.nodeType===8?t.parentNode:t),Oc(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var c=b0(l);a.call(c)}}var l=_T(t,0,!1,null,null,!1,!1,"",PN);return t._reactRootContainer=l,t[oa]=l.current,kp(t.nodeType===8?t.parentNode:t),Oc(function(){gx(e,l,r,n)}),l}function vx(t,e,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=b0(o);a.call(l)}}gx(e,o,t,s)}else o=zK(r,e,t,s,n);return b0(o)}hF=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=df(e.pendingLanes);r!==0&&(Wk(e,r|1),ss(e,fr()),!(Ct&6)&&(Id=fr()+500,Pl()))}break;case 13:Oc(function(){var n=aa(t,1);if(n!==null){var s=Fn();Oi(n,t,1,s)}}),CT(t,1)}};qk=function(t){if(t.tag===13){var e=aa(t,134217728);if(e!==null){var r=Fn();Oi(e,t,134217728,r)}CT(t,134217728)}};fF=function(t){if(t.tag===13){var e=Qa(t),r=aa(t,e);if(r!==null){var n=Fn();Oi(r,t,e,n)}CT(t,e)}};pF=function(){return Pt};gF=function(t,e){var r=Pt;try{return Pt=t,e()}finally{Pt=r}};Y_=function(t,e,r){switch(e){case"input":if(V_(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=lx(n);if(!s)throw Error(ye(90));q4(n),V_(n,s)}}}break;case"textarea":K4(t,r);break;case"select":e=r.value,e!=null&&ad(t,!!r.multiple,e,!1)}};tF=xT;rF=Oc;var HK={usingClientEntryPoint:!1,Events:[yg,Vu,lx,Q4,eF,xT]},Yh={findFiberByHostInstance:oc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WK={bundleType:Yh.bundleType,version:Yh.version,rendererPackageName:Yh.rendererPackageName,rendererConfig:Yh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:va.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=iF(t),t===null?null:t.stateNode},findFiberByHostInstance:Yh.findFiberByHostInstance||VK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mm.isDisabled&&mm.supportsFiber)try{sx=mm.inject(WK),ao=mm}catch{}}Ls.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HK;Ls.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kT(e))throw Error(ye(200));return UK(t,e,null,r)};Ls.createRoot=function(t,e){if(!kT(t))throw Error(ye(299));var r=!1,n="",s=FL;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=_T(t,1,!1,null,null,r,!1,n,s),t[oa]=e.current,kp(t.nodeType===8?t.parentNode:t),new ET(e)};Ls.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ye(188)):(t=Object.keys(t).join(","),Error(ye(268,t)));return t=iF(e),t=t===null?null:t.stateNode,t};Ls.flushSync=function(t){return Oc(t)};Ls.hydrate=function(t,e,r){if(!yx(e))throw Error(ye(200));return vx(null,t,e,!0,r)};Ls.hydrateRoot=function(t,e,r){if(!kT(t))throw Error(ye(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=FL;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=DL(e,null,t,1,r??null,s,!1,i,o),t[oa]=e.current,kp(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new mx(e)};Ls.render=function(t,e,r){if(!yx(e))throw Error(ye(200));return vx(null,t,e,!1,r)};Ls.unmountComponentAtNode=function(t){if(!yx(t))throw Error(ye(40));return t._reactRootContainer?(Oc(function(){vx(null,null,t,!1,function(){t._reactRootContainer=null,t[oa]=null})}),!0):!1};Ls.unstable_batchedUpdates=xT;Ls.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!yx(r))throw Error(ye(200));if(t==null||t._reactInternals===void 0)throw Error(ye(38));return vx(t,e,r,!1,n)};Ls.version="18.3.1-next-f1338f8080-20240426";function LL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(LL)}catch(t){console.error(t)}}LL(),L4.exports=Ls;var lh=L4.exports;const BL=C4(lh);var $L,NN=lh;$L=NN.createRoot,NN.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ip(){return Ip=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ip.apply(this,arguments)}var qa;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qa||(qa={}));const RN="popstate";function qK(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:o,hash:a}=n.location;return jC("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:S0(s)}return KK(e,r,null,t)}function gr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function UL(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GK(){return Math.random().toString(36).substr(2,8)}function ON(t,e){return{usr:t.state,key:t.key,idx:e}}function jC(t,e,r,n){return r===void 0&&(r=null),Ip({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ch(e):e,{state:r,key:e&&e.key||n||GK()})}function S0(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ch(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function KK(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,a=qa.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Ip({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=qa.Pop;let v=d(),m=v==null?null:v-c;c=v,l&&l({action:a,location:y.location,delta:m})}function f(v,m){a=qa.Push;let x=jC(y.location,v,m);c=d()+1;let b=ON(x,c),_=y.createHref(x);try{o.pushState(b,"",_)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(_)}i&&l&&l({action:a,location:y.location,delta:1})}function p(v,m){a=qa.Replace;let x=jC(y.location,v,m);c=d();let b=ON(x,c),_=y.createHref(x);o.replaceState(b,"",_),i&&l&&l({action:a,location:y.location,delta:0})}function g(v){let m=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof v=="string"?v:S0(v);return x=x.replace(/ $/,"%20"),gr(m,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,m)}let y={get action(){return a},get location(){return t(s,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(RN,h),l=v,()=>{s.removeEventListener(RN,h),l=null}},createHref(v){return e(s,v)},createURL:g,encodeLocation(v){let m=g(v);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:p,go(v){return o.go(v)}};return y}var MN;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(MN||(MN={}));function YK(t,e,r){return r===void 0&&(r="/"),XK(t,e,r,!1)}function XK(t,e,r,n){let s=typeof e=="string"?ch(e):e,i=TT(s.pathname||"/",r);if(i==null)return null;let o=VL(t);JK(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=lY(i);a=oY(o[l],c,n)}return a}function VL(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(gr(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=tl([n,l.relativePath]),d=r.concat(l);i.children&&i.children.length>0&&(gr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),VL(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:sY(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of zL(i.path))s(i,o,l)}),e}function zL(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=zL(n.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function JK(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:iY(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const ZK=/^:[\w-]+$/,QK=3,eY=2,tY=1,rY=10,nY=-2,IN=t=>t==="*";function sY(t,e){let r=t.split("/"),n=r.length;return r.some(IN)&&(n+=nY),e&&(n+=eY),r.filter(s=>!IN(s)).reduce((s,i)=>s+(ZK.test(i)?QK:i===""?tY:rY),n)}function iY(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function oY(t,e,r){let{routesMeta:n}=t,s={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,d=i==="/"?e:e.slice(i.length)||"/",h=DN({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),f=l.route;if(!h&&c&&r&&!n[n.length-1].route.index&&(h=DN({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:tl([i,h.pathname]),pathnameBase:hY(tl([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=tl([i,h.pathnameBase]))}return o}function DN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=aY(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((c,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let y=a[h]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const g=a[h];return p&&!g?c[f]=void 0:c[f]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function aY(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),UL(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function lY(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return UL(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function TT(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function cY(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?ch(t):t;return{pathname:r?r.startsWith("/")?r:uY(r,e):e,search:fY(n),hash:pY(s)}}function uY(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function jb(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dY(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function jT(t,e){let r=dY(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function AT(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=ch(t):(s=Ip({},t),gr(!s.pathname||!s.pathname.includes("?"),jb("?","pathname","search",s)),gr(!s.pathname||!s.pathname.includes("#"),jb("#","pathname","hash",s)),gr(!s.search||!s.search.includes("#"),jb("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=r;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=cY(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const tl=t=>t.join("/").replace(/\/\/+/g,"/"),hY=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),fY=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pY=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function gY(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const HL=["post","put","patch","delete"];new Set(HL);const mY=["get",...HL];new Set(mY);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dp(){return Dp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dp.apply(this,arguments)}const PT=w.createContext(null),yY=w.createContext(null),Nl=w.createContext(null),xx=w.createContext(null),xa=w.createContext({outlet:null,matches:[],isDataRoute:!1}),WL=w.createContext(null);function vY(t,e){let{relative:r}=e===void 0?{}:e;uh()||gr(!1);let{basename:n,navigator:s}=w.useContext(Nl),{hash:i,pathname:o,search:a}=GL(t,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:tl([n,o])),s.createHref({pathname:l,search:a,hash:i})}function uh(){return w.useContext(xx)!=null}function dh(){return uh()||gr(!1),w.useContext(xx).location}function qL(t){w.useContext(Nl).static||w.useLayoutEffect(t)}function ci(){let{isDataRoute:t}=w.useContext(xa);return t?NY():xY()}function xY(){uh()||gr(!1);let t=w.useContext(PT),{basename:e,future:r,navigator:n}=w.useContext(Nl),{matches:s}=w.useContext(xa),{pathname:i}=dh(),o=JSON.stringify(jT(s,r.v7_relativeSplatPath)),a=w.useRef(!1);return qL(()=>{a.current=!0}),w.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let h=AT(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:tl([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,o,i,t])}function NT(){let{matches:t}=w.useContext(xa),e=t[t.length-1];return e?e.params:{}}function GL(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=w.useContext(Nl),{matches:s}=w.useContext(xa),{pathname:i}=dh(),o=JSON.stringify(jT(s,n.v7_relativeSplatPath));return w.useMemo(()=>AT(t,JSON.parse(o),i,r==="path"),[t,o,i,r])}function wY(t,e){return bY(t,e)}function bY(t,e,r,n){uh()||gr(!1);let{navigator:s}=w.useContext(Nl),{matches:i}=w.useContext(xa),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=dh(),d;if(e){var h;let v=typeof e=="string"?ch(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||gr(!1),d=v}else d=c;let f=d.pathname||"/",p=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=YK(t,{pathname:p}),y=kY(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:tl([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:tl([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,r,n);return e&&y?w.createElement(xx.Provider,{value:{location:Dp({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:qa.Pop}},y):y}function SY(){let t=PY(),e=gY(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),r?w.createElement("pre",{style:s},r):null,null)}const _Y=w.createElement(SY,null);class CY extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?w.createElement(xa.Provider,{value:this.props.routeContext},w.createElement(WL.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function EY(t){let{routeContext:e,match:r,children:n}=t,s=w.useContext(PT);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),w.createElement(xa.Provider,{value:e},n)}function kY(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,a=(s=r)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||gr(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:f,errors:p}=r,g=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let p,g=!1,y=null,v=null;r&&(p=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||_Y,l&&(c<0&&f===0?(g=!0,v=null):c===f&&(g=!0,v=h.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,f+1)),x=()=>{let b;return p?b=y:g?b=v:h.route.Component?b=w.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=d,w.createElement(EY,{match:h,routeContext:{outlet:d,matches:m,isDataRoute:r!=null},children:b})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?w.createElement(CY,{location:r.location,revalidation:r.revalidation,component:y,error:p,children:x(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):x()},null)}var KL=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(KL||{}),_0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(_0||{});function TY(t){let e=w.useContext(PT);return e||gr(!1),e}function jY(t){let e=w.useContext(yY);return e||gr(!1),e}function AY(t){let e=w.useContext(xa);return e||gr(!1),e}function YL(t){let e=AY(),r=e.matches[e.matches.length-1];return r.route.id||gr(!1),r.route.id}function PY(){var t;let e=w.useContext(WL),r=jY(_0.UseRouteError),n=YL(_0.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function NY(){let{router:t}=TY(KL.UseNavigateStable),e=YL(_0.UseNavigateStable),r=w.useRef(!1);return qL(()=>{r.current=!0}),w.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Dp({fromRouteId:e},i)))},[t,e])}function RY(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Mu(t){let{to:e,replace:r,state:n,relative:s}=t;uh()||gr(!1);let{future:i,static:o}=w.useContext(Nl),{matches:a}=w.useContext(xa),{pathname:l}=dh(),c=ci(),d=AT(e,jT(a,i.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(d);return w.useEffect(()=>c(JSON.parse(h),{replace:r,state:n,relative:s}),[c,h,s,r,n]),null}function kn(t){gr(!1)}function OY(t){let{basename:e="/",children:r=null,location:n,navigationType:s=qa.Pop,navigator:i,static:o=!1,future:a}=t;uh()&&gr(!1);let l=e.replace(/^\/*/,"/"),c=w.useMemo(()=>({basename:l,navigator:i,static:o,future:Dp({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof n=="string"&&(n=ch(n));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:g="default"}=n,y=w.useMemo(()=>{let v=TT(d,l);return v==null?null:{location:{pathname:v,search:h,hash:f,state:p,key:g},navigationType:s}},[l,d,h,f,p,g,s]);return y==null?null:w.createElement(Nl.Provider,{value:c},w.createElement(xx.Provider,{children:r,value:y}))}function MY(t){let{children:e,location:r}=t;return wY(AC(e),r)}new Promise(()=>{});function AC(t,e){e===void 0&&(e=[]);let r=[];return w.Children.forEach(t,(n,s)=>{if(!w.isValidElement(n))return;let i=[...e,s];if(n.type===w.Fragment){r.push.apply(r,AC(n.props.children,i));return}n.type!==kn&&gr(!1),!n.props.index||!n.props.children||gr(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=AC(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function PC(){return PC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},PC.apply(this,arguments)}function IY(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function DY(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function FY(t,e){return t.button===0&&(!e||e==="_self")&&!DY(t)}const LY=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],BY="6";try{window.__reactRouterVersion=BY}catch{}const $Y="startTransition",FN=D4[$Y];function UY(t){let{basename:e,children:r,future:n,window:s}=t,i=w.useRef();i.current==null&&(i.current=qK({window:s,v5Compat:!0}));let o=i.current,[a,l]=w.useState({action:o.action,location:o.location}),{v7_startTransition:c}=n||{},d=w.useCallback(h=>{c&&FN?FN(()=>l(h)):l(h)},[l,c]);return w.useLayoutEffect(()=>o.listen(d),[o,d]),w.useEffect(()=>RY(n),[n]),w.createElement(OY,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}const VY=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zY=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ff=w.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:h}=e,f=IY(e,LY),{basename:p}=w.useContext(Nl),g,y=!1;if(typeof c=="string"&&zY.test(c)&&(g=c,VY))try{let b=new URL(window.location.href),_=c.startsWith("//")?new URL(b.protocol+c):new URL(c),C=TT(_.pathname,p);_.origin===b.origin&&C!=null?c=C+_.search+_.hash:y=!0}catch{}let v=vY(c,{relative:s}),m=HY(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:h});function x(b){n&&n(b),b.defaultPrevented||m(b)}return w.createElement("a",PC({},f,{href:g||v,onClick:y||i?n:x,ref:r,target:l}))});var LN;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(LN||(LN={}));var BN;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(BN||(BN={}));function HY(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=ci(),c=dh(),d=GL(t,{relative:o});return w.useCallback(h=>{if(FY(h,r)){h.preventDefault();let f=n!==void 0?n:S0(c)===S0(d);l(t,{replace:f,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,d,n,s,r,t,i,o,a])}var XL={exports:{}},JL={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xg=w;function WY(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qY=typeof Object.is=="function"?Object.is:WY,GY=xg.useSyncExternalStore,KY=xg.useRef,YY=xg.useEffect,XY=xg.useMemo,JY=xg.useDebugValue;JL.useSyncExternalStoreWithSelector=function(t,e,r,n,s){var i=KY(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=XY(function(){function l(p){if(!c){if(c=!0,d=p,p=n(p),s!==void 0&&o.hasValue){var g=o.value;if(s(g,p))return h=g}return h=p}if(g=h,qY(d,p))return g;var y=n(p);return s!==void 0&&s(g,y)?(d=p,g):(d=p,h=y)}var c=!1,d,h,f=r===void 0?null:r;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,r,n,s]);var a=GY(t,i[0],i[1]);return YY(function(){o.hasValue=!0,o.value=a},[a]),JY(a),a};XL.exports=JL;var ZY=XL.exports;function QY(t){t()}function eX(){let t=null,e=null;return{clear(){t=null,e=null},notify(){QY(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=t;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=e={callback:r,next:null,prev:e};return s.prev?s.prev.next=s:t=s,function(){!n||t===null||(n=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}var $N={notify(){},get:()=>[]};function tX(t,e){let r,n=$N,s=0,i=!1;function o(y){d();const v=n.subscribe(y);let m=!1;return()=>{m||(m=!0,v(),h())}}function a(){n.notify()}function l(){g.onStateChange&&g.onStateChange()}function c(){return i}function d(){s++,r||(r=t.subscribe(l),n=eX())}function h(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=$N)}function f(){i||(i=!0,d())}function p(){i&&(i=!1,h())}const g={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:f,tryUnsubscribe:p,getListeners:()=>n};return g}var rX=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nX=rX(),sX=()=>typeof navigator<"u"&&navigator.product==="ReactNative",iX=sX(),oX=()=>nX||iX?w.useLayoutEffect:w.useEffect,aX=oX(),Ab=Symbol.for("react-redux-context"),Pb=typeof globalThis<"u"?globalThis:{};function lX(){if(!w.createContext)return{};const t=Pb[Ab]??(Pb[Ab]=new Map);let e=t.get(w.createContext);return e||(e=w.createContext(null),t.set(w.createContext,e)),e}var ul=lX();function cX(t){const{children:e,context:r,serverState:n,store:s}=t,i=w.useMemo(()=>{const l=tX(s);return{store:s,subscription:l,getServerState:n?()=>n:void 0}},[s,n]),o=w.useMemo(()=>s.getState(),[s]);aX(()=>{const{subscription:l}=i;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==s.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[i,o]);const a=r||ul;return w.createElement(a.Provider,{value:i},e)}var uX=cX;function RT(t=ul){return function(){return w.useContext(t)}}var ZL=RT();function QL(t=ul){const e=t===ul?ZL:RT(t),r=()=>{const{store:n}=e();return n};return Object.assign(r,{withTypes:()=>r}),r}var dX=QL();function hX(t=ul){const e=t===ul?dX:QL(t),r=()=>e().dispatch;return Object.assign(r,{withTypes:()=>r}),r}var Ar=hX(),fX=(t,e)=>t===e;function pX(t=ul){const e=t===ul?ZL:RT(t),r=(n,s={})=>{const{equalityFn:i=fX}=typeof s=="function"?{equalityFn:s}:s,o=e(),{store:a,subscription:l,getServerState:c}=o;w.useRef(!0);const d=w.useCallback({[n.name](f){return n(f)}}[n.name],[n]),h=ZY.useSyncExternalStoreWithSelector(l.addNestedSub,a.getState,c||a.getState,d,i);return w.useDebugValue(h),h};return Object.assign(r,{withTypes:()=>r}),r}var Ze=pX(),C0=["light","dark"],OT="(prefers-color-scheme: dark)",gX=typeof window>"u",MT=w.createContext(void 0),mX={setTheme:t=>{},themes:[]},yX=()=>{var t;return(t=w.useContext(MT))!=null?t:mX},vX=t=>w.useContext(MT)?t.children:w.createElement(wX,{...t}),xX=["light","dark"],wX=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:r=!0,enableColorScheme:n=!0,storageKey:s="theme",themes:i=xX,defaultTheme:o=r?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:d})=>{let[h,f]=w.useState(()=>UN(s,o)),[p,g]=w.useState(()=>UN(s)),y=l?Object.values(l):i,v=w.useCallback(_=>{let C=_;if(!C)return;_==="system"&&r&&(C=VN());let T=l?l[C]:C,O=e?SX():null,R=document.documentElement;if(a==="class"?(R.classList.remove(...y),T&&R.classList.add(T)):T?R.setAttribute(a,T):R.removeAttribute(a),n){let I=C0.includes(o)?o:null,H=C0.includes(C)?C:I;R.style.colorScheme=H}O==null||O()},[]),m=w.useCallback(_=>{let C=typeof _=="function"?_(_):_;f(C);try{localStorage.setItem(s,C)}catch{}},[t]),x=w.useCallback(_=>{let C=VN(_);g(C),h==="system"&&r&&!t&&v("system")},[h,t]);w.useEffect(()=>{let _=window.matchMedia(OT);return _.addListener(x),x(_),()=>_.removeListener(x)},[x]),w.useEffect(()=>{let _=C=>{if(C.key!==s)return;let T=C.newValue||o;m(T)};return window.addEventListener("storage",_),()=>window.removeEventListener("storage",_)},[m]),w.useEffect(()=>{v(t??h)},[t,h]);let b=w.useMemo(()=>({theme:h,setTheme:m,forcedTheme:t,resolvedTheme:h==="system"?p:h,themes:r?[...i,"system"]:i,systemTheme:r?p:void 0}),[h,m,t,p,r,i]);return w.createElement(MT.Provider,{value:b},w.createElement(bX,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:r,enableColorScheme:n,storageKey:s,themes:i,defaultTheme:o,attribute:a,value:l,children:c,attrs:y,nonce:d}),c)},bX=w.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:s,defaultTheme:i,value:o,attrs:a,nonce:l})=>{let c=i==="system",d=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,h=s?C0.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(g,y=!1,v=!0)=>{let m=o?o[g]:g,x=y?g+"|| ''":`'${m}'`,b="";return s&&v&&!y&&C0.includes(g)&&(b+=`d.style.colorScheme = '${g}';`),r==="class"?y||m?b+=`c.add(${x})`:b+="null":m&&(b+=`d[s](n,${x})`),b},p=t?`!function(){${d}${f(t)}}()`:n?`!function(){try{${d}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${OT}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${c?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return w.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})}),UN=(t,e)=>{if(gX)return;let r;try{r=localStorage.getItem(t)||void 0}catch{}return r||e},SX=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},VN=t=>(t||(t=window.matchMedia(OT)),t.matches?"dark":"light");function Qr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var _X=typeof Symbol=="function"&&Symbol.observable||"@@observable",zN=_X,Nb=()=>Math.random().toString(36).substring(7).split("").join("."),CX={INIT:`@@redux/INIT${Nb()}`,REPLACE:`@@redux/REPLACE${Nb()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Nb()}`},E0=CX;function IT(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function eB(t,e,r){if(typeof t!="function")throw new Error(Qr(2));if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Qr(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Qr(1));return r(eB)(t,e)}let n=t,s=e,i=new Map,o=i,a=0,l=!1;function c(){o===i&&(o=new Map,i.forEach((v,m)=>{o.set(m,v)}))}function d(){if(l)throw new Error(Qr(3));return s}function h(v){if(typeof v!="function")throw new Error(Qr(4));if(l)throw new Error(Qr(5));let m=!0;c();const x=a++;return o.set(x,v),function(){if(m){if(l)throw new Error(Qr(6));m=!1,c(),o.delete(x),i=null}}}function f(v){if(!IT(v))throw new Error(Qr(7));if(typeof v.type>"u")throw new Error(Qr(8));if(typeof v.type!="string")throw new Error(Qr(17));if(l)throw new Error(Qr(9));try{l=!0,s=n(s,v)}finally{l=!1}return(i=o).forEach(x=>{x()}),v}function p(v){if(typeof v!="function")throw new Error(Qr(10));n=v,f({type:E0.REPLACE})}function g(){const v=h;return{subscribe(m){if(typeof m!="object"||m===null)throw new Error(Qr(11));function x(){const _=m;_.next&&_.next(d())}return x(),{unsubscribe:v(x)}},[zN](){return this}}}return f({type:E0.INIT}),{dispatch:f,subscribe:h,getState:d,replaceReducer:p,[zN]:g}}function EX(t){Object.keys(t).forEach(e=>{const r=t[e];if(typeof r(void 0,{type:E0.INIT})>"u")throw new Error(Qr(12));if(typeof r(void 0,{type:E0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Qr(13))})}function kX(t){const e=Object.keys(t),r={};for(let i=0;i<e.length;i++){const o=e[i];typeof t[o]=="function"&&(r[o]=t[o])}const n=Object.keys(r);let s;try{EX(r)}catch(i){s=i}return function(o={},a){if(s)throw s;let l=!1;const c={};for(let d=0;d<n.length;d++){const h=n[d],f=r[h],p=o[h],g=f(p,a);if(typeof g>"u")throw a&&a.type,new Error(Qr(14));c[h]=g,l=l||g!==p}return l=l||n.length!==Object.keys(o).length,l?c:o}}function k0(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,r)=>(...n)=>e(r(...n)))}function TX(...t){return e=>(r,n)=>{const s=e(r,n);let i=()=>{throw new Error(Qr(15))};const o={getState:s.getState,dispatch:(l,...c)=>i(l,...c)},a=t.map(l=>l(o));return i=k0(...a)(s.dispatch),{...s,dispatch:i}}}function jX(t){return IT(t)&&"type"in t&&typeof t.type=="string"}var tB=Symbol.for("immer-nothing"),HN=Symbol.for("immer-draftable"),As=Symbol.for("immer-state");function Ti(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Dd=Object.getPrototypeOf;function Mc(t){return!!t&&!!t[As]}function ca(t){var e;return t?rB(t)||Array.isArray(t)||!!t[HN]||!!((e=t.constructor)!=null&&e[HN])||bx(t)||Sx(t):!1}var AX=Object.prototype.constructor.toString();function rB(t){if(!t||typeof t!="object")return!1;const e=Dd(t);if(e===null)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===AX}function T0(t,e){wx(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function wx(t){const e=t[As];return e?e.type_:Array.isArray(t)?1:bx(t)?2:Sx(t)?3:0}function NC(t,e){return wx(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function nB(t,e,r){const n=wx(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function PX(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function bx(t){return t instanceof Map}function Sx(t){return t instanceof Set}function Yl(t){return t.copy_||t.base_}function RC(t,e){if(bx(t))return new Map(t);if(Sx(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=rB(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[As];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const o=s[i],a=n[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(Dd(t),n)}else{const n=Dd(t);if(n!==null&&r)return{...t};const s=Object.create(n);return Object.assign(s,t)}}function DT(t,e=!1){return _x(t)||Mc(t)||!ca(t)||(wx(t)>1&&(t.set=t.add=t.clear=t.delete=NX),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>DT(n,!0))),t}function NX(){Ti(2)}function _x(t){return Object.isFrozen(t)}var RX={};function Ic(t){const e=RX[t];return e||Ti(0,t),e}var Fp;function sB(){return Fp}function OX(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function WN(t,e){e&&(Ic("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function OC(t){MC(t),t.drafts_.forEach(MX),t.drafts_=null}function MC(t){t===Fp&&(Fp=t.parent_)}function qN(t){return Fp=OX(Fp,t)}function MX(t){const e=t[As];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function GN(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[As].modified_&&(OC(e),Ti(4)),ca(t)&&(t=j0(e,t),e.parent_||A0(e,t)),e.patches_&&Ic("Patches").generateReplacementPatches_(r[As].base_,t,e.patches_,e.inversePatches_)):t=j0(e,r,[]),OC(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==tB?t:void 0}function j0(t,e,r){if(_x(e))return e;const n=e[As];if(!n)return T0(e,(s,i)=>KN(t,n,e,s,i,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return A0(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let i=s,o=!1;n.type_===3&&(i=new Set(s),s.clear(),o=!0),T0(i,(a,l)=>KN(t,n,s,a,l,r,o)),A0(t,s,!1),r&&t.patches_&&Ic("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function KN(t,e,r,n,s,i,o){if(Mc(s)){const a=i&&e&&e.type_!==3&&!NC(e.assigned_,n)?i.concat(n):void 0,l=j0(t,s,a);if(nB(r,n,l),Mc(l))t.canAutoFreeze_=!1;else return}else o&&r.add(s);if(ca(s)&&!_x(s)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;j0(t,s),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&A0(t,s)}}function A0(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&DT(e,r)}function IX(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:sB(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=FT;r&&(s=[n],i=Lp);const{revoke:o,proxy:a}=Proxy.revocable(s,i);return n.draft_=a,n.revoke_=o,a}var FT={get(t,e){if(e===As)return t;const r=Yl(t);if(!NC(r,e))return DX(t,r,e);const n=r[e];return t.finalized_||!ca(n)?n:n===Rb(t.base_,e)?(Ob(t),t.copy_[e]=DC(n,t)):n},has(t,e){return e in Yl(t)},ownKeys(t){return Reflect.ownKeys(Yl(t))},set(t,e,r){const n=iB(Yl(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const s=Rb(Yl(t),e),i=s==null?void 0:s[As];if(i&&i.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(PX(r,s)&&(r!==void 0||NC(t.base_,e)))return!0;Ob(t),IC(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Rb(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Ob(t),IC(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=Yl(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){Ti(11)},getPrototypeOf(t){return Dd(t.base_)},setPrototypeOf(){Ti(12)}},Lp={};T0(FT,(t,e)=>{Lp[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Lp.deleteProperty=function(t,e){return Lp.set.call(this,t,e,void 0)};Lp.set=function(t,e,r){return FT.set.call(this,t[0],e,r,t[0])};function Rb(t,e){const r=t[As];return(r?Yl(r):t)[e]}function DX(t,e,r){var s;const n=iB(e,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(t.draft_):void 0}function iB(t,e){if(!(e in t))return;let r=Dd(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Dd(r)}}function IC(t){t.modified_||(t.modified_=!0,t.parent_&&IC(t.parent_))}function Ob(t){t.copy_||(t.copy_=RC(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var FX=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const i=r;r=e;const o=this;return function(l=i,...c){return o.produce(l,d=>r.call(this,d,...c))}}typeof r!="function"&&Ti(6),n!==void 0&&typeof n!="function"&&Ti(7);let s;if(ca(e)){const i=qN(this),o=DC(e,void 0);let a=!0;try{s=r(o),a=!1}finally{a?OC(i):MC(i)}return WN(i,n),GN(s,i)}else if(!e||typeof e!="object"){if(s=r(e),s===void 0&&(s=e),s===tB&&(s=void 0),this.autoFreeze_&&DT(s,!0),n){const i=[],o=[];Ic("Patches").generateReplacementPatches_(e,s,i,o),n(i,o)}return s}else Ti(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let n,s;return[this.produce(e,r,(o,a)=>{n=o,s=a}),n,s]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ca(t)||Ti(8),Mc(t)&&(t=LX(t));const e=qN(this),r=DC(t,void 0);return r[As].isManual_=!0,MC(e),r}finishDraft(t,e){const r=t&&t[As];(!r||!r.isManual_)&&Ti(9);const{scope_:n}=r;return WN(n,e),GN(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const s=e[r];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}r>-1&&(e=e.slice(r+1));const n=Ic("Patches").applyPatches_;return Mc(t)?n(t,e):this.produce(t,s=>n(s,e))}};function DC(t,e){const r=bx(t)?Ic("MapSet").proxyMap_(t,e):Sx(t)?Ic("MapSet").proxySet_(t,e):IX(t,e);return(e?e.scope_:sB()).drafts_.push(r),r}function LX(t){return Mc(t)||Ti(10,t),oB(t)}function oB(t){if(!ca(t)||_x(t))return t;const e=t[As];let r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=RC(t,e.scope_.immer_.useStrictShallowCopy_)}else r=RC(t,!0);return T0(r,(n,s)=>{nB(r,n,oB(s))}),e&&(e.finalized_=!1),r}var Ps=new FX,aB=Ps.produce;Ps.produceWithPatches.bind(Ps);Ps.setAutoFreeze.bind(Ps);Ps.setUseStrictShallowCopy.bind(Ps);Ps.applyPatches.bind(Ps);Ps.createDraft.bind(Ps);Ps.finishDraft.bind(Ps);function BX(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function $X(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function UX(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(r=>typeof r=="function")){const r=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${e}[${r}]`)}}var YN=t=>Array.isArray(t)?t:[t];function VX(t){const e=Array.isArray(t[0])?t[0]:t;return UX(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function zX(t,e){const r=[],{length:n}=t;for(let s=0;s<n;s++)r.push(t[s].apply(null,e));return r}var HX=class{constructor(t){this.value=t}deref(){return this.value}},WX=typeof WeakRef<"u"?WeakRef:HX,qX=0,XN=1;function ym(){return{s:qX,v:void 0,o:null,p:null}}function lB(t,e={}){let r=ym();const{resultEqualityCheck:n}=e;let s,i=0;function o(){var h;let a=r;const{length:l}=arguments;for(let f=0,p=l;f<p;f++){const g=arguments[f];if(typeof g=="function"||typeof g=="object"&&g!==null){let y=a.o;y===null&&(a.o=y=new WeakMap);const v=y.get(g);v===void 0?(a=ym(),y.set(g,a)):a=v}else{let y=a.p;y===null&&(a.p=y=new Map);const v=y.get(g);v===void 0?(a=ym(),y.set(g,a)):a=v}}const c=a;let d;if(a.s===XN)d=a.v;else if(d=t.apply(null,arguments),i++,n){const f=((h=s==null?void 0:s.deref)==null?void 0:h.call(s))??s;f!=null&&n(f,d)&&(d=f,i!==0&&i--),s=typeof d=="object"&&d!==null||typeof d=="function"?new WX(d):d}return c.s=XN,c.v=d,d}return o.clearCache=()=>{r=ym(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function GX(t,...e){const r=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,n=(...s)=>{let i=0,o=0,a,l={},c=s.pop();typeof c=="object"&&(l=c,c=s.pop()),BX(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const d={...r,...l},{memoize:h,memoizeOptions:f=[],argsMemoize:p=lB,argsMemoizeOptions:g=[],devModeChecks:y={}}=d,v=YN(f),m=YN(g),x=VX(s),b=h(function(){return i++,c.apply(null,arguments)},...v),_=p(function(){o++;const T=zX(x,arguments);return a=b.apply(null,T),a},...m);return Object.assign(_,{resultFunc:c,memoizedResultFunc:b,dependencies:x,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var LT=GX(lB),KX=Object.assign((t,e=LT)=>{$X(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const r=Object.keys(t),n=r.map(i=>t[i]);return e(n,(...i)=>i.reduce((o,a,l)=>(o[r[l]]=a,o),{}))},{withTypes:()=>KX});function cB(t){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,t):s(i)}var YX=cB(),XX=cB,JX=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?k0:k0.apply(null,arguments)},ZX=t=>t&&typeof t.match=="function";function Ff(t,e){function r(...n){if(e){let s=e(...n);if(!s)throw new Error(qo(0));return{type:t,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>jX(n)&&n.type===t,r}var uB=class pf extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,pf.prototype)}static get[Symbol.species](){return pf}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new pf(...e[0].concat(this)):new pf(...e.concat(this))}};function JN(t){return ca(t)?aB(t,()=>{}):t}function vm(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function QX(t){return typeof t=="boolean"}var eJ=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=e??{};let o=new uB;return r&&(QX(r)?o.push(YX):o.push(XX(r.extraArgument))),o},tJ="RTK_autoBatch",ZN=t=>e=>{setTimeout(e,t)},rJ=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let s=!0,i=!1,o=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:ZN(10):t.type==="callback"?t.queueNotification:ZN(t.timeout),c=()=>{o=!1,i&&(i=!1,a.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const h=()=>s&&d(),f=n.subscribe(h);return a.add(d),()=>{f(),a.delete(d)}},dispatch(d){var h;try{return s=!((h=d==null?void 0:d.meta)!=null&&h[tJ]),i=!s,i&&(o||(o=!0,l(c))),n.dispatch(d)}finally{s=!0}}})},nJ=t=>function(r){const{autoBatch:n=!0}=r??{};let s=new uB(t);return n&&s.push(rJ(typeof n=="object"?n:void 0)),s};function sJ(t){const e=eJ(),{reducer:r=void 0,middleware:n,devTools:s=!0,duplicateMiddlewareCheck:i=!0,preloadedState:o=void 0,enhancers:a=void 0}=t||{};let l;if(typeof r=="function")l=r;else if(IT(r))l=kX(r);else throw new Error(qo(1));let c;typeof n=="function"?c=n(e):c=e();let d=k0;s&&(d=JX({trace:!1,...typeof s=="object"&&s}));const h=TX(...c),f=nJ(h);let p=typeof a=="function"?a(f):f();const g=d(...p);return eB(l,o,g)}function dB(t){const e={},r=[];let n;const s={addCase(i,o){const a=typeof i=="string"?i:i.type;if(!a)throw new Error(qo(28));if(a in e)throw new Error(qo(29));return e[a]=o,s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return n=i,s}};return t(s),[e,r,n]}function iJ(t){return typeof t=="function"}function oJ(t,e){let[r,n,s]=dB(e),i;if(iJ(t))i=()=>JN(t());else{const a=JN(t);i=()=>a}function o(a=i(),l){let c=[r[l.type],...n.filter(({matcher:d})=>d(l)).map(({reducer:d})=>d)];return c.filter(d=>!!d).length===0&&(c=[s]),c.reduce((d,h)=>{if(h)if(Mc(d)){const p=h(d,l);return p===void 0?d:p}else{if(ca(d))return aB(d,f=>h(f,l));{const f=h(d,l);if(f===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return d},a)}return o.getInitialState=i,o}var aJ=(t,e)=>ZX(t)?t.match(e):t(e);function lJ(...t){return e=>t.some(r=>aJ(r,e))}var cJ="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",uJ=(t=21)=>{let e="",r=t;for(;r--;)e+=cJ[Math.random()*64|0];return e},dJ=["name","message","stack","code"],Mb=class{constructor(t,e){Te(this,"_type");this.payload=t,this.meta=e}},QN=class{constructor(t,e){Te(this,"_type");this.payload=t,this.meta=e}},hJ=t=>{if(typeof t=="object"&&t!==null){const e={};for(const r of dJ)typeof t[r]=="string"&&(e[r]=t[r]);return e}return{message:String(t)}},eR="External signal was aborted",ke=(()=>{function t(e,r,n){const s=Ff(e+"/fulfilled",(l,c,d,h)=>({payload:l,meta:{...h||{},arg:d,requestId:c,requestStatus:"fulfilled"}})),i=Ff(e+"/pending",(l,c,d)=>({payload:void 0,meta:{...d||{},arg:c,requestId:l,requestStatus:"pending"}})),o=Ff(e+"/rejected",(l,c,d,h,f)=>({payload:h,error:(n&&n.serializeError||hJ)(l||"Rejected"),meta:{...f||{},arg:d,requestId:c,rejectedWithValue:!!h,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"}}));function a(l,{signal:c}={}){return(d,h,f)=>{const p=n!=null&&n.idGenerator?n.idGenerator(l):uJ(),g=new AbortController;let y,v;function m(b){v=b,g.abort()}c&&(c.aborted?m(eR):c.addEventListener("abort",()=>m(eR),{once:!0}));const x=async function(){var C,T;let b;try{let O=(C=n==null?void 0:n.condition)==null?void 0:C.call(n,l,{getState:h,extra:f});if(pJ(O)&&(O=await O),O===!1||g.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const R=new Promise((I,H)=>{y=()=>{H({name:"AbortError",message:v||"Aborted"})},g.signal.addEventListener("abort",y)});d(i(p,l,(T=n==null?void 0:n.getPendingMeta)==null?void 0:T.call(n,{requestId:p,arg:l},{getState:h,extra:f}))),b=await Promise.race([R,Promise.resolve(r(l,{dispatch:d,getState:h,extra:f,requestId:p,signal:g.signal,abort:m,rejectWithValue:(I,H)=>new Mb(I,H),fulfillWithValue:(I,H)=>new QN(I,H)})).then(I=>{if(I instanceof Mb)throw I;return I instanceof QN?s(I.payload,p,l,I.meta):s(I,p,l)})])}catch(O){b=O instanceof Mb?o(null,p,l,O.payload,O.meta):o(O,p,l)}finally{y&&g.signal.removeEventListener("abort",y)}return n&&!n.dispatchConditionRejection&&o.match(b)&&b.meta.condition||d(b),b}();return Object.assign(x,{abort:m,requestId:p,arg:l,unwrap(){return x.then(fJ)}})}}return Object.assign(a,{pending:i,rejected:o,fulfilled:s,settled:lJ(o,s),typePrefix:e})}return t.withTypes=()=>t,t})();function fJ(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function pJ(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var gJ=Symbol.for("rtk-slice-createasyncthunk");function mJ(t,e){return`${t}/${e}`}function yJ({creators:t}={}){var r;const e=(r=t==null?void 0:t.asyncThunk)==null?void 0:r[gJ];return function(s){const{name:i,reducerPath:o=i}=s;if(!i)throw new Error(qo(11));typeof process<"u";const a=(typeof s.reducers=="function"?s.reducers(xJ()):s.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(_,C){const T=typeof _=="string"?_:_.type;if(!T)throw new Error(qo(12));if(T in c.sliceCaseReducersByType)throw new Error(qo(13));return c.sliceCaseReducersByType[T]=C,d},addMatcher(_,C){return c.sliceMatchers.push({matcher:_,reducer:C}),d},exposeAction(_,C){return c.actionCreators[_]=C,d},exposeCaseReducer(_,C){return c.sliceCaseReducersByName[_]=C,d}};l.forEach(_=>{const C=a[_],T={reducerName:_,type:mJ(i,_),createNotation:typeof s.reducers=="function"};bJ(C)?_J(T,C,d,e):wJ(T,C,d)});function h(){const[_={},C=[],T=void 0]=typeof s.extraReducers=="function"?dB(s.extraReducers):[s.extraReducers],O={..._,...c.sliceCaseReducersByType};return oJ(s.initialState,R=>{for(let I in O)R.addCase(I,O[I]);for(let I of c.sliceMatchers)R.addMatcher(I.matcher,I.reducer);for(let I of C)R.addMatcher(I.matcher,I.reducer);T&&R.addDefaultCase(T)})}const f=_=>_,p=new Map,g=new WeakMap;let y;function v(_,C){return y||(y=h()),y(_,C)}function m(){return y||(y=h()),y.getInitialState()}function x(_,C=!1){function T(R){let I=R[_];return typeof I>"u"&&C&&(I=vm(g,T,m)),I}function O(R=f){const I=vm(p,C,()=>new WeakMap);return vm(I,R,()=>{const H={};for(const[re,L]of Object.entries(s.selectors??{}))H[re]=vJ(L,R,()=>vm(g,R,m),C);return H})}return{reducerPath:_,getSelectors:O,get selectors(){return O(T)},selectSlice:T}}const b={name:i,reducer:v,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:m,...x(o),injectInto(_,{reducerPath:C,...T}={}){const O=C??o;return _.inject({reducerPath:O,reducer:v},T),{...b,...x(O,!0)}}};return b}}function vJ(t,e,r,n){function s(i,...o){let a=e(i);return typeof a>"u"&&n&&(a=r()),t(a,...o)}return s.unwrapped=t,s}var Cn=yJ();function xJ(){function t(e,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...r}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function wJ({type:t,reducerName:e,createNotation:r},n,s){let i,o;if("reducer"in n){if(r&&!SJ(n))throw new Error(qo(17));i=n.reducer,o=n.prepare}else i=n;s.addCase(t,i).exposeCaseReducer(e,i).exposeAction(e,o?Ff(t,o):Ff(t))}function bJ(t){return t._reducerDefinitionType==="asyncThunk"}function SJ(t){return t._reducerDefinitionType==="reducerWithPrepare"}function _J({type:t,reducerName:e},r,n,s){if(!s)throw new Error(qo(18));const{payloadCreator:i,fulfilled:o,pending:a,rejected:l,settled:c,options:d}=r,h=s(t,i,d);n.exposeAction(e,h),o&&n.addCase(h.fulfilled,o),a&&n.addCase(h.pending,a),l&&n.addCase(h.rejected,l),c&&n.addMatcher(h.settled,c),n.exposeCaseReducer(e,{fulfilled:o||xm,pending:a||xm,rejected:l||xm,settled:c||xm})}function xm(){}function qo(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const CJ="modulepreload",EJ=function(t){return"/"+t},tR={},wg=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=EJ(l),l in tR)return;tR[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":CJ,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},kJ=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>wg(async()=>{const{default:n}=await Promise.resolve().then(()=>hh);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class BT extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class TJ extends BT{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class jJ extends BT{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class AJ extends BT{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var FC;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(FC||(FC={}));var PJ=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};class NJ{constructor(e,{headers:r={},customFetch:n,region:s=FC.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=kJ(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return PJ(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let a={},{region:l}=r;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:c}).catch(g=>{throw new TJ(g)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new jJ(d);if(!d.ok)throw new AJ(d);let f=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield d.json():f==="application/octet-stream"?p=yield d.blob():f==="text/event-stream"?p=d:f==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null}}catch(s){return{data:null,error:s}}})}}var Yn={},$T={},Cx={},bg={},Ex={},kx={},RJ=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Fd=RJ();const OJ=Fd.fetch,hB=Fd.fetch.bind(Fd),fB=Fd.Headers,MJ=Fd.Request,IJ=Fd.Response,hh=Object.freeze(Object.defineProperty({__proto__:null,Headers:fB,Request:MJ,Response:IJ,default:hB,fetch:OJ},Symbol.toStringTag,{value:"Module"})),DJ=E4(hh);var Tx={};Object.defineProperty(Tx,"__esModule",{value:!0});let FJ=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Tx.default=FJ;var pB=Jr&&Jr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kx,"__esModule",{value:!0});const LJ=pB(DJ),BJ=pB(Tx);let $J=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=LJ.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let c=null,d=null,h=null,f=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const m=await i.text();m===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=m:d=JSON.parse(m))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");y&&v&&v.length>1&&(h=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const y=await i.text();try{c=JSON.parse(y),Array.isArray(c)&&i.status===404&&(d=[],c=null,f=200,p="OK")}catch{i.status===404&&y===""?(f=204,p="No Content"):c={message:y}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,f=200,p="OK"),c&&this.shouldThrowOnError)throw new BJ.default(c)}return{error:c,data:d,count:h,status:f,statusText:p}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,r)}returns(){return this}overrideTypes(){return this}};kx.default=$J;var UJ=Jr&&Jr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ex,"__esModule",{value:!0});const VJ=UJ(kx);let zJ=class extends VJ.default{select(e){let r=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Ex.default=zJ;var HJ=Jr&&Jr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bg,"__esModule",{value:!0});const WJ=HJ(Ex);let qJ=class extends WJ.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};bg.default=qJ;var GJ=Jr&&Jr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cx,"__esModule",{value:!0});const Xh=GJ(bg);let KJ=class{constructor(e,{headers:r={},schema:n,fetch:s}){this.url=e,this.headers=r,this.schema=n,this.fetch=s}select(e,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Xh.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Xh.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new Xh.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new Xh.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Xh.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Cx.default=KJ;var jx={},Ax={};Object.defineProperty(Ax,"__esModule",{value:!0});Ax.version=void 0;Ax.version="0.0.0-automated";Object.defineProperty(jx,"__esModule",{value:!0});jx.DEFAULT_HEADERS=void 0;const YJ=Ax;jx.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${YJ.version}`};var gB=Jr&&Jr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($T,"__esModule",{value:!0});const XJ=gB(Cx),JJ=gB(bg),ZJ=jx;let QJ=class mB{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},ZJ.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(e){const r=new URL(`${this.url}/${e}`);return new XJ.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new mB(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{a.searchParams.append(d,h)})):(o="POST",l=r);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new JJ.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};$T.default=QJ;var fh=Jr&&Jr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yn,"__esModule",{value:!0});Yn.PostgrestError=Yn.PostgrestBuilder=Yn.PostgrestTransformBuilder=Yn.PostgrestFilterBuilder=Yn.PostgrestQueryBuilder=Yn.PostgrestClient=void 0;const yB=fh($T);Yn.PostgrestClient=yB.default;const vB=fh(Cx);Yn.PostgrestQueryBuilder=vB.default;const xB=fh(bg);Yn.PostgrestFilterBuilder=xB.default;const wB=fh(Ex);Yn.PostgrestTransformBuilder=wB.default;const bB=fh(kx);Yn.PostgrestBuilder=bB.default;const SB=fh(Tx);Yn.PostgrestError=SB.default;var eZ=Yn.default={PostgrestClient:yB.default,PostgrestQueryBuilder:vB.default,PostgrestFilterBuilder:xB.default,PostgrestTransformBuilder:wB.default,PostgrestBuilder:bB.default,PostgrestError:SB.default};const{PostgrestClient:tZ,PostgrestQueryBuilder:K2e,PostgrestFilterBuilder:Y2e,PostgrestTransformBuilder:X2e,PostgrestBuilder:J2e,PostgrestError:Z2e}=eZ;let LC;typeof window>"u"?LC=require("ws"):LC=window.WebSocket;const rZ=LC,nZ="2.11.10",sZ={"X-Client-Info":`realtime-js/${nZ}`},iZ="1.0.0",_B=1e4,oZ=1e3;var fd;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(fd||(fd={}));var Pn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Pn||(Pn={}));var _i;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(_i||(_i={}));var BC;(function(t){t.websocket="websocket"})(BC||(BC={}));var ec;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ec||(ec={}));class aZ{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+s));o=o+s;const l=n.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class CB{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Lt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Lt||(Lt={}));const rR=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=lZ(o,t,e,s),i),{})},lZ=(t,e,r,n)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=r[t];return i&&!n.includes(i)?EB(i,o):$C(o)},EB=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return hZ(e,r)}switch(t){case Lt.bool:return cZ(e);case Lt.float4:case Lt.float8:case Lt.int2:case Lt.int4:case Lt.int8:case Lt.numeric:case Lt.oid:return uZ(e);case Lt.json:case Lt.jsonb:return dZ(e);case Lt.timestamp:return fZ(e);case Lt.abstime:case Lt.date:case Lt.daterange:case Lt.int4range:case Lt.int8range:case Lt.money:case Lt.reltime:case Lt.text:case Lt.time:case Lt.timestamptz:case Lt.timetz:case Lt.tsrange:case Lt.tstzrange:return $C(e);default:return $C(e)}},$C=t=>t,cZ=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},uZ=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},dZ=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},hZ=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>EB(e,a))}return t},fZ=t=>typeof t=="string"?t.replace(" ","T"):t,kB=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Ib{constructor(e,r,n={},s=_B){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var nR;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(nR||(nR={}));class Lf{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Lf.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Lf.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Lf.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),o=this.transformState(r),a={},l={};return this.map(i,(c,d)=>{o[c]||(l[c]=d)}),this.map(o,(c,d)=>{const h=i[c];if(h){const f=d.map(v=>v.presence_ref),p=h.map(v=>v.presence_ref),g=d.filter(v=>p.indexOf(v.presence_ref)<0),y=h.filter(v=>f.indexOf(v.presence_ref)<0);g.length>0&&(a[c]=g),y.length>0&&(l[c]=y)}else a[c]=d}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const d=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),d.length>0){const h=e[a].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...f)}n(a,d,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const d=l.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var sR;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(sR||(sR={}));var iR;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(iR||(iR={}));var Io;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Io||(Io={}));class UT{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Pn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ib(this,_i.join,this.params,this.timeout),this.rejoinTimer=new CB(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Pn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_i.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Lf(this),this.broadcastEndpointURL=kB(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(d=>e==null?void 0:e(Io.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Io.CLOSED));const l={},c={broadcast:i,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){e==null||e(Io.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,g=[];for(let y=0;y<p;y++){const v=f[y],{filter:{event:m,schema:x,table:b,filter:_}}=v,C=d&&d[y];if(C&&C.event===m&&C.schema===x&&C.table===b&&C.filter===_)g.push(Object.assign(Object.assign({},v),{id:C.id}));else{this.unsubscribe(),this.state=Pn.errored,e==null||e(Io.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(Io.SUBSCRIBED);return}}).receive("error",d=>{this.state=Pn.errored,e==null||e(Io.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Io.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Pn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(_i.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const s=new Ib(this,_i.leave,{},e);s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Ib(this,e,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=_i;if(n&&[a,l,c,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var g,y,v;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((v=(y=p.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(p=>p.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var g,y,v,m,x,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const _=p.id,C=(g=p.filter)===null||g===void 0?void 0:g.event;return _&&((y=r.ids)===null||y===void 0?void 0:y.includes(_))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const _=(x=(m=p==null?void 0:p.filter)===null||m===void 0?void 0:m.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return _==="*"||_===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:y,table:v,commit_timestamp:m,type:x,errors:b}=g;f=Object.assign(Object.assign({},{schema:y,table:v,commit_timestamp:m,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(g))}p.callback(f,n)})}_isClosed(){return this.state===Pn.closed}_isJoined(){return this.state===Pn.joined}_isJoining(){return this.state===Pn.joining}_isLeaving(){return this.state===Pn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&UT.isEqual(s.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(_i.close,{},e)}_onError(e){this._on(_i.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=rR(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=rR(e.columns,e.old_record)),r}}const oR=()=>{},pZ=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class gZ{constructor(e,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=sZ,this.params={},this.timeout=_B,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=oR,this.ref=0,this.logger=oR,this.conn=null,this.sendBuffer=[],this.serializer=new aZ,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>wg(async()=>{const{default:l}=await Promise.resolve().then(()=>hh);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${BC.websocket}`,this.httpEndpoint=kB(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new CB(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=rZ),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new mZ(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:iZ}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels=this.channels.filter(n=>n._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case fd.connecting:return ec.Connecting;case fd.open:return ec.Open;case fd.closing:return ec.Closing;default:return ec.Closed}}isConnected(){return this.connectionState()===ec.Open}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new UT(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{r&&n.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),n.joinedOnce&&n._isJoined()&&n._push(_i.access_token,{access_token:r})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(oZ,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:s,payload:i,ref:o}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(n)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(_i.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([pZ],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class mZ{constructor(e,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=fd.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class VT extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Hr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class yZ extends VT{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class UC extends VT{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var vZ=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const TB=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>wg(async()=>{const{default:n}=await Promise.resolve().then(()=>hh);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},xZ=()=>vZ(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield wg(()=>Promise.resolve().then(()=>hh),void 0)).Response:Response}),VC=t=>{if(Array.isArray(t))return t.map(r=>VC(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=VC(n)}),e};var Kc=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const Db=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),wZ=(t,e,r)=>Kc(void 0,void 0,void 0,function*(){const n=yield xZ();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{e(new yZ(Db(s),t.status||500))}).catch(s=>{e(new UC(Db(s),s))}):e(new UC(Db(t),t))}),bZ=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function Sg(t,e,r,n,s,i){return Kc(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(r,bZ(e,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>wZ(l,a,n))})})}function P0(t,e,r,n){return Kc(this,void 0,void 0,function*(){return Sg(t,"GET",e,r,n)})}function Ba(t,e,r,n,s){return Kc(this,void 0,void 0,function*(){return Sg(t,"POST",e,n,s,r)})}function SZ(t,e,r,n,s){return Kc(this,void 0,void 0,function*(){return Sg(t,"PUT",e,n,s,r)})}function _Z(t,e,r,n){return Kc(this,void 0,void 0,function*(){return Sg(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function jB(t,e,r,n,s){return Kc(this,void 0,void 0,function*(){return Sg(t,"DELETE",e,n,s,r)})}var Wn=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const CZ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},aR={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class EZ{constructor(e,r={},n,s){this.url=e,this.headers=r,this.bucketId=n,this.fetch=TB(s)}uploadOrUpdate(e,r,n,s){return Wn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},aR),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(r),d=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(Hr(i))return{data:null,error:i};throw i}})}upload(e,r,n){return Wn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return Wn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let l;const c=Object.assign({upsert:aR.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:d}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(Hr(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,r){return Wn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Ba(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new VT("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(Hr(n))return{data:null,error:n};throw n}})}update(e,r,n){return Wn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Wn(this,void 0,void 0,function*(){try{return{data:yield Ba(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Hr(s))return{data:null,error:s};throw s}})}copy(e,r,n){return Wn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ba(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Hr(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return Wn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Ba(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Hr(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return Wn(this,void 0,void 0,function*(){try{const s=yield Ba(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Hr(s))return{data:null,error:s};throw s}})}download(e,r){return Wn(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield P0(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Hr(a))return{data:null,error:a};throw a}})}info(e){return Wn(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield P0(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:VC(n),error:null}}catch(n){if(Hr(n))return{data:null,error:n};throw n}})}exists(e){return Wn(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield _Z(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Hr(n)&&n instanceof UC){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(e){return Wn(this,void 0,void 0,function*(){try{return{data:yield jB(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(Hr(r))return{data:null,error:r};throw r}})}list(e,r,n){return Wn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},CZ),r),{prefix:e||""});return{data:yield Ba(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Hr(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const kZ="2.7.1",TZ={"X-Client-Info":`storage-js/${kZ}`};var vu=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};class jZ{constructor(e,r={},n){this.url=e,this.headers=Object.assign(Object.assign({},TZ),r),this.fetch=TB(n)}listBuckets(){return vu(this,void 0,void 0,function*(){try{return{data:yield P0(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Hr(e))return{data:null,error:e};throw e}})}getBucket(e){return vu(this,void 0,void 0,function*(){try{return{data:yield P0(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(Hr(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return vu(this,void 0,void 0,function*(){try{return{data:yield Ba(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Hr(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return vu(this,void 0,void 0,function*(){try{return{data:yield SZ(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Hr(n))return{data:null,error:n};throw n}})}emptyBucket(e){return vu(this,void 0,void 0,function*(){try{return{data:yield Ba(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Hr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return vu(this,void 0,void 0,function*(){try{return{data:yield jB(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(Hr(r))return{data:null,error:r};throw r}})}}class AZ extends jZ{constructor(e,r={},n){super(e,r,n)}from(e){return new EZ(this.url,this.headers,e,this.fetch)}}const PZ="2.50.0";let gf="";typeof Deno<"u"?gf="deno":typeof document<"u"?gf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?gf="react-native":gf="node";const NZ={"X-Client-Info":`supabase-js-${gf}/${PZ}`},RZ={headers:NZ},OZ={schema:"public"},MZ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},IZ={};var DZ=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const FZ=t=>{let e;return t?e=t:typeof fetch>"u"?e=hB:e=fetch,(...r)=>e(...r)},LZ=()=>typeof Headers>"u"?fB:Headers,BZ=(t,e,r)=>{const n=FZ(r),s=LZ();return(i,o)=>DZ(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},o),{headers:c}))})};var $Z=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};function UZ(t){return t.endsWith("/")?t:t+"/"}function VZ(t,e){var r,n;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:c,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>$Z(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const AB="2.70.0",Iu=30*1e3,zC=3,Fb=zC*Iu,zZ="http://localhost:9999",HZ="supabase.auth.token",WZ={"X-Client-Info":`gotrue-js/${AB}`},HC="X-Supabase-Api-Version",PB={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},qZ=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,GZ=6e5;let zT=class extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}};function nt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class KZ extends zT{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function YZ(t){return nt(t)&&t.name==="AuthApiError"}class NB extends zT{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Rl extends zT{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Ra extends Rl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function XZ(t){return nt(t)&&t.name==="AuthSessionMissingError"}class wm extends Rl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bm extends Rl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Sm extends Rl{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function JZ(t){return nt(t)&&t.name==="AuthImplicitGrantRedirectError"}class lR extends Rl{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class WC extends Rl{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Lb(t){return nt(t)&&t.name==="AuthRetryableFetchError"}class cR extends Rl{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Bf extends Rl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const N0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),uR=` 	
\r=`.split(""),ZZ=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<uR.length;e+=1)t[uR[e].charCodeAt(0)]=-2;for(let e=0;e<N0.length;e+=1)t[N0[e].charCodeAt(0)]=e;return t})();function dR(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(N0[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(N0[n]),e.queuedBits-=6}}function RB(t,e,r){const n=ZZ[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function hR(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{tQ(o,n,r)};for(let o=0;o<t.length;o+=1)RB(t.charCodeAt(o),s,i);return e.join("")}function QZ(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function eQ(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}QZ(n,e)}}function tQ(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function rQ(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)RB(t.charCodeAt(s),r,n);return new Uint8Array(e)}function nQ(t){const e=[];return eQ(t,r=>e.push(r)),new Uint8Array(e)}function sQ(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>dR(s,r,n)),dR(null,r,n),e.join("")}function iQ(t){return Math.round(Date.now()/1e3)+t}function oQ(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const gi=()=>typeof window<"u"&&typeof document<"u",Hl={tested:!1,writable:!1},$f=()=>{if(!gi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Hl.tested)return Hl.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Hl.tested=!0,Hl.writable=!0}catch{Hl.tested=!0,Hl.writable=!1}return Hl.writable};function aQ(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const OB=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>wg(async()=>{const{default:n}=await Promise.resolve().then(()=>hh);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},lQ=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",MB=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},_m=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Cm=async(t,e)=>{await t.removeItem(e)};class Px{constructor(){this.promise=new Px.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Px.promiseConstructor=Promise;function Bb(t){const e=t.split(".");if(e.length!==3)throw new Bf("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!qZ.test(e[n]))throw new Bf("JWT not in base64url format");return{header:JSON.parse(hR(e[0])),payload:JSON.parse(hR(e[1])),signature:rQ(e[2]),raw:{header:e[0],payload:e[1]}}}async function cQ(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function uQ(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function dQ(t){return("0"+t.toString(16)).substr(-2)}function hQ(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,dQ).join("")}async function fQ(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function pQ(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await fQ(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xu(t,e,r=!1){const n=hQ();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await MB(t,`${e}-code-verifier`,s);const i=await pQ(n);return[i,n===i?"plain":"s256"]}const gQ=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mQ(t){const e=t.headers.get(HC);if(!e||!e.match(gQ))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function yQ(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function vQ(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const xQ=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wu(t){if(!xQ.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var wQ=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const Xl=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),bQ=[502,503,504];async function fR(t){var e;if(!lQ(t))throw new WC(Xl(t),0);if(bQ.includes(t.status))throw new WC(Xl(t),t.status);let r;try{r=await t.json()}catch(i){throw new NB(Xl(i),i)}let n;const s=mQ(t);if(s&&s.getTime()>=PB["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new cR(Xl(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ra}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new cR(Xl(r),t.status,r.weak_password.reasons);throw new KZ(Xl(r),t.status||500,n)}const SQ=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function pt(t,e,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[HC]||(i[HC]=PB["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await _Q(t,e,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function _Q(t,e,r,n,s,i){const o=SQ(e,n,s,i);let a;try{a=await t(r,Object.assign({},o))}catch(l){throw console.error(l),new WC(Xl(l),0)}if(a.ok||await fR(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await fR(l)}}function No(t){var e;let r=null;TQ(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=iQ(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function pR(t){const e=No(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Va(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function CQ(t){return{data:t,error:null}}function EQ(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,o=wQ(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function kQ(t){return t}function TQ(t){return t.access_token&&t.refresh_token&&t.expires_in}const $b=["global","local","others"];var jQ=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class AQ{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=OB(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=$b[0]){if($b.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${$b.join(", ")}`);try{return await pt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await pt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Va})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=jQ(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await pt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:EQ,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(nt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await pt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Va})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await pt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:kQ});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);c[`${v}Page`]=y}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(nt(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){wu(e);try{return await pt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Va})}catch(r){if(nt(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){wu(e);try{return await pt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Va})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){wu(e);try{return await pt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Va})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){wu(e.userId);try{const{data:r,error:n}=await pt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _deleteFactor(e){wu(e.userId),wu(e.id);try{return{data:await pt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}}const PQ={getItem:t=>$f()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{$f()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{$f()&&globalThis.localStorage.removeItem(t)}};function gR(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function NQ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const bu={debug:!!(globalThis&&$f()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class IB extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class RQ extends IB{}async function OQ(t,e,r){bu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),bu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){bu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{bu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw bu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new RQ(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(bu.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}NQ();const MQ={url:zZ,storageKey:HZ,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:WZ,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function mR(t,e,r){return await r()}class Bp{constructor(e){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Bp.nextInstanceID,Bp.nextInstanceID+=1,this.instanceID>0&&gi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},MQ),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new AQ({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=OB(s.fetch),this.lock=s.lock||mR,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:gi()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=OQ:this.lock=mR,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:$f()?this.storage=PQ:(this.memoryStorage={},this.storage=gR(this.memoryStorage)):(this.memoryStorage={},this.storage=gR(this.memoryStorage)),gi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${AB}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=aQ(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),gi()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),JZ(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return nt(r)?{error:r}:{error:new NB("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:No}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(nt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await xu(this.storage,this.storageKey)),i=await pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:g},xform:No})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:No})}else throw new bm("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(nt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:a}=e;r=await pt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:pR})}else if("phone"in e){const{phone:i,password:o,options:a}=e;r=await pt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:pR})}else throw new bm("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new wm}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(nt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,s,i,o,a,l,c,d,h,f,p;let g,y;if("message"in e)g=e.message,y=e.signature;else{const{chain:v,wallet:m,statement:x,options:b}=e;let _;if(gi())if(typeof m=="object")_=m;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))_=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=m}const C=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const T=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:C.host,uri:C.href}),x?{statement:x}:null));let O;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")O=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)O=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)g=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),y=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${C.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${C.href}`,`Issued At: ${(s=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const T=await _.signMessage(new TextEncoder().encode(g),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=T}}try{const{data:v,error:m}=await pt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:sQ(y)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:No});if(m)throw m;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new wm}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:m})}catch(v){if(nt(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(e){const r=await _m(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await pt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:No});if(await Cm(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new wm}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(nt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=e,a=await pt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:No}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new wm}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(r){if(nt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await xu(this.storage,this.storageKey));const{error:h}=await pt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:d}=await pt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new bm("You must provide either an email or phone number.")}catch(a){if(nt(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await pt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:No});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(nt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await xu(this.storage,this.storageKey)),await pt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:CQ})}catch(i){if(nt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Ra;const{error:s}=await pt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(nt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:o}=await pt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:o,error:a}=await pt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new bm("You must provide either an email or phone number and a type")}catch(r){if(nt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await _m(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Fb:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,d)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await pt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Va}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ra}:await pt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Va})})}catch(r){if(nt(r))return XZ(r)&&(await this._removeSession(),await Cm(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Ra;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await xu(this.storage,this.storageKey));const{data:c,error:d}=await pt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Va});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ra;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Bb(e.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(nt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:a}=r;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Ra;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(nt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!gi())throw new Sm("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Sm(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new lR("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Sm("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new lR("No code detected.");const{data:x,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new Sm("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(a);let f=d+h;l&&(f=parseInt(l));const p=f-d;p*1e3<=Iu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const g=f-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,d);const{data:y,error:v}=await this._getUser(i);if(v)throw v;const m={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(n){if(nt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await _m(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(YZ(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Cm(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=oQ(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await xu(this.storage,this.storageKey,!0));try{return await pt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(nt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,c,d;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await pt(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return gi()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(nt(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await pt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await uQ(async s=>(s>0&&await cQ(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await pt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:No})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Lb(i)&&Date.now()+o-n<Iu})}catch(n){if(this._debug(r,"error",n),nt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),gi()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await _m(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Fb;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Fb}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Lb(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Ra;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Px;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ra;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),nt(i)){const o={session:null,error:i};return Lb(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await MB(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Cm(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&gi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Iu);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Iu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Iu}ms, refresh threshold is ${zC} ticks`),s<=zC&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof IB)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!gi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await xu(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await pt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await pt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(nt(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:a}=await pt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(r){if(nt(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await pt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(nt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Bb(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(o=>o.kid===e);if(n||(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+GZ>Date.now()))return n;const{data:s,error:i}=await pt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new Bf("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(o=>o.kid===e),!n)throw new Bf("No matching signing key found in JWKS");return n}async getClaims(e,r={keys:[]}){try{let n=e;if(!n){const{data:p,error:g}=await this.getSession();if(g||!p.session)return{data:null,error:g};n=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Bb(n);if(yQ(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const c=vQ(s.alg),d=await this.fetchJwk(s.kid,r),h=await crypto.subtle.importKey("jwk",d,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,o,nQ(`${a}.${l}`)))throw new Bf("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}}}Bp.nextInstanceID=0;const IQ=Bp;class DQ extends IQ{constructor(e){super(e)}}var FQ=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};class LQ{constructor(e,r,n){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const a=UZ(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:OZ,realtime:IZ,auth:Object.assign(Object.assign({},MZ),{storageKey:c}),global:RZ},h=VZ(n??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=BZ(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new tZ(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new NJ(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new AZ(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return FQ(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:a,debug:l},c,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new DQ({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new gZ(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const BQ=(t,e,r)=>new LQ(t,e,r),$Q="https://qiindeyiaybglwxholgx.supabase.co",UQ="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFpaW5kZXlpYXliZ2x3eGhvbGd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA2NzEwMTgsImV4cCI6MjA2NjI0NzAxOH0.KqsJX0jVKATlAVMR0KIhMM8ogCqv0d2tuZdfAymlcEs",fe=BQ($Q,UQ,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},db:{schema:"public"},global:{headers:{"X-Client-Info":"supabase-js-web"}}});fe.auth.onAuthStateChange((t,e)=>{console.log("Auth state changed:",t),t==="SIGNED_IN"&&(e!=null&&e.user)?(console.log("User signed in:",e.user.email),localStorage.setItem("auth_last_event",JSON.stringify({event:"SIGNED_IN",time:new Date().toISOString(),user:e.user.email}))):t==="SIGNED_OUT"?(console.log("User signed out"),localStorage.setItem("auth_last_event",JSON.stringify({event:"SIGNED_OUT",time:new Date().toISOString()})),Object.keys(localStorage).forEach(r=>{r.startsWith("supabase.auth.")&&localStorage.removeItem(r)}),Object.keys(sessionStorage).forEach(r=>{r.startsWith("supabase.auth.")&&sessionStorage.removeItem(r)}),window.location.pathname.includes("login")||(window.location.href="/login")):t==="TOKEN_REFRESHED"?(console.log("Token refreshed"),localStorage.setItem("auth_last_event",JSON.stringify({event:"TOKEN_REFRESHED",time:new Date().toISOString()}))):t==="USER_UPDATED"&&(console.log("User updated"),localStorage.setItem("auth_last_event",JSON.stringify({event:"USER_UPDATED",time:new Date().toISOString()})))});class We extends Error{constructor(e){super(e.message),this.name="AuthError",this.status=e.status,this.code=e.code,Error.captureStackTrace&&Error.captureStackTrace(this,We)}}class ms{static async signIn(e){try{const{data:r,error:n}=await fe.auth.signInWithPassword({email:e.email,password:e.password});if(n)throw new We({message:n.message,status:400,code:n.name||"SIGN_IN_ERROR"});if(!r.user||!r.session)throw new We({message:"Authentication failed",status:401,code:"AUTH_FAILED"});return await this.updateLastLogin(r.user.id),{user:{id:r.user.id,email:r.user.email||"",profile:0,is_active:!0,status:"active",created_at:r.user.created_at||new Date().toISOString(),modified_at:new Date().toISOString()},session:{access_token:r.session.access_token,refresh_token:r.session.refresh_token,expires_at:r.session.expires_at}}}catch(r){throw r instanceof We?r:new We({message:"An unexpected error occurred during sign in",status:500,code:"UNEXPECTED_ERROR"})}}static async signUp(e){try{const r={email:e.email,password:e.password,options:{data:{full_name:e.full_name}}},{data:n,error:s}=await fe.auth.signUp(r);if(console.log("user Sign up authh",n,s),s)throw new We({message:s.message,status:400,code:s.name||"SIGN_UP_ERROR"});if(!n.user||!n.session)throw new We({message:"Registration failed",status:400,code:"REGISTRATION_FAILED"});const i={user_id:n.user.id,full_name:e.full_name,role:this.validateUserRole(e==null?void 0:e.role)},o=await this.createUserProfile(i);return{user:{id:n.user.id,email:n.user.email||"",profile:o.id,is_active:!0,status:"active",created_at:n.user.created_at||new Date().toISOString(),modified_at:new Date().toISOString()},profile:o,session:{access_token:n.session.access_token,refresh_token:n.session.refresh_token,expires_at:n.session.expires_at}}}catch(r){throw r instanceof We?r:new We({message:"An unexpected error occurred during registration",status:500,code:"UNEXPECTED_ERROR"})}}static async signOut(){try{const{error:e}=await fe.auth.signOut({scope:"global"});if(e)throw new We({message:e.message,status:400,code:e.name||"SIGN_OUT_ERROR"});localStorage.removeItem("supabase.auth.token"),sessionStorage.removeItem("supabase.auth.token"),Object.keys(localStorage).forEach(r=>{r.startsWith("supabase.auth.")&&localStorage.removeItem(r)}),Object.keys(sessionStorage).forEach(r=>{r.startsWith("supabase.auth.")&&sessionStorage.removeItem(r)})}catch(e){throw e instanceof We?e:new We({message:"An unexpected error occurred during sign out",status:500,code:"UNEXPECTED_ERROR"})}}static async getCurrentSession(){try{const{data:e,error:r}=await fe.auth.getSession();if(r)throw new We({message:r.message,status:401,code:r.name||"SESSION_ERROR"});return e.session}catch(e){throw e instanceof We?e:new We({message:"Failed to get current session",status:500,code:"SESSION_FETCH_ERROR"})}}static async getCurrentUser(){try{const{data:e,error:r}=await fe.auth.getUser();if(r)throw new We({message:r.message,status:401,code:r.name||"USER_FETCH_ERROR"});return e.user?{user:{id:e.user.id,email:e.user.email||"",profile:0,is_active:!0,status:"active",created_at:e.user.created_at||new Date().toISOString(),modified_at:new Date().toISOString()},profile:null}:null}catch(e){if(e instanceof We)throw e;return null}}static async getUserProfileByUserId(e){var r;try{console.log("getUserProfileByUserId - Input userId:",e);const n=await fe.from("user_profiles").select("*").eq("user_id",e);if(console.log("getUserProfileByUserId - Response: supabase",n),n.error){if(console.error("getUserProfileByUserId - Database error:",n.error),n.error.message.includes('relation "public.user_profiles" does not exist')){console.log("user_profiles table doesn't exist, running debug..."),await this.debugDatabaseTables();const s=await fe.from("profiles").select("*").eq("id",e);if(console.log("profiles table response:",s),s.error)throw new We({message:`Failed to get user profile from both tables: ${s.error.message}`,status:500,code:"PROFILE_QUERY_ERROR"});if(!s.data||s.data.length===0)return console.log("getUserProfileByUserId - No profile found in profiles table for userId:",e),null;const i=s.data[0];return{id:0,user_id:i.id,full_name:i.full_name||((r=i.email)==null?void 0:r.split("@")[0])||"",role:i.role||"user",profile_image:i.avatar_url,status:!0,created_at:i.created_at,updated_at:i.updated_at}}throw new We({message:`Failed to get user profile: ${n.error.message}`,status:500,code:"PROFILE_QUERY_ERROR"})}if(!n.data||n.data.length===0){console.log("getUserProfileByUserId - No profile found for userId:",e),console.log("Checking what profiles exist in user_profiles table...");const s=await fe.from("user_profiles").select("user_id, full_name").limit(5);return console.log("Sample profiles in table:",s),null}return n.data.length>1&&console.warn(`getUserProfileByUserId - Multiple profiles found for userId: ${e}, returning first one`),console.log("getUserProfileByUserId - Found profile:",n.data[0]),n.data[0]}catch(n){throw console.error("getUserProfileByUserId - Catch error:",n),n instanceof We?n:new We({message:"Failed to get user profile",status:500,code:"USER_PROFILE_FETCH_ERROR"})}}static async createUserProfile(e){var o;const r=this.validateUserRole(e.role),n={id:e.user_id,email:"",full_name:e.full_name,role:r};console.log("createUserProfile - Insert data:",n);let s=await fe.from("user_profiles").insert({user_id:e.user_id,role:r,full_name:e.full_name,status:!0}).select().single();if(s.error&&s.error.message.includes('relation "public.user_profiles" does not exist')){console.log("user_profiles table doesn't exist, using profiles table");const{data:a}=await fe.auth.getUser();n.email=((o=a==null?void 0:a.user)==null?void 0:o.email)||"",s=await fe.from("profiles").insert(n).select().single()}if(s.error)throw console.log("Error creating user profile:",s.error),console.log("Error details:",{message:s.error.message,details:s.error.details,hint:s.error.hint,code:s.error.code}),new We({message:`Failed to create user profile: ${s.error.message}`,status:400,code:"PROFILE_CREATE_ERROR"});console.log("createUserProfile - Success:",s.data);const i=s.data;return i.user_id?i:{id:0,user_id:i.id,full_name:i.full_name,role:i.role,profile_image:i.avatar_url,status:!0,created_at:i.created_at,updated_at:i.updated_at}}static async getUserProfile(e){try{let r=await fe.from("user_profiles").select("*").eq("user_id",e).single();if(r.error&&r.error.message.includes('relation "public.user_profiles" does not exist')&&(r=await fe.from("profiles").select("*").eq("id",e).single(),!r.error&&r.data))return{id:0,user_id:r.data.id,full_name:r.data.full_name,role:r.data.role,profile_image:r.data.avatar_url,status:!0,created_at:r.data.created_at,updated_at:r.data.updated_at};if(r.error)throw new We({message:`Failed to get user profile: ${r.error.message}`,status:404,code:"PROFILE_NOT_FOUND"});return r.data}catch(r){throw r instanceof We?r:new We({message:"Failed to retrieve user profile",status:500,code:"PROFILE_FETCH_ERROR"})}}static async updateUserProfile(e,r){try{let n=await fe.from("user_profiles").update({...r,updated_at:new Date().toISOString()}).eq("user_id",e).select().single();if(n.error&&n.error.message.includes('relation "public.user_profiles" does not exist')){const s={full_name:r.full_name,role:r.role,avatar_url:r.profile_image,updated_at:new Date().toISOString()};if(n=await fe.from("profiles").update(s).eq("id",e).select().single(),!n.error&&n.data)return{id:0,user_id:n.data.id,full_name:n.data.full_name,role:n.data.role,profile_image:n.data.avatar_url,status:!0,created_at:n.data.created_at,updated_at:n.data.updated_at}}if(n.error)throw new We({message:`Failed to update user profile: ${n.error.message}`,status:400,code:"PROFILE_UPDATE_ERROR"});return n.data}catch(n){throw n instanceof We?n:new We({message:"Failed to update user profile",status:500,code:"PROFILE_UPDATE_FAILED"})}}static async uploadProfileImage(e,r){try{const n=r.name.split(".").pop(),i=`profiles/${`${e}-${Date.now()}.${n}`}`,{error:o}=await fe.storage.from("user-profiles").upload(i,r);if(o)throw new We({message:`Failed to upload image: ${o.message}`,status:400,code:"IMAGE_UPLOAD_ERROR"});const{data:{publicUrl:a}}=fe.storage.from("user-profiles").getPublicUrl(i);return await this.updateUserProfile(e,{profile_image:a}),{imageUrl:a}}catch(n){throw n instanceof We?n:new We({message:"Failed to upload profile image",status:500,code:"IMAGE_UPLOAD_FAILED"})}}static async deleteProfileImage(e,r){try{const n=r.split("/"),i=`profiles/${n[n.length-1]}`,{error:o}=await fe.storage.from("user-profiles").remove([i]);o&&console.warn(`Failed to delete image file: ${o.message}`),await this.updateUserProfile(e,{profile_image:void 0})}catch(n){throw n instanceof We?n:new We({message:"Failed to delete profile image",status:500,code:"IMAGE_DELETE_FAILED"})}}static async updateLastLogin(e){await fe.from("users").update({last_login:new Date().toISOString(),modified_at:new Date().toISOString()}).eq("id",e)}static async refreshSession(){try{const{data:e,error:r}=await fe.auth.refreshSession();if(r)throw new We({message:r.message,status:401,code:r.name||"REFRESH_ERROR"});return e.session}catch(e){throw e instanceof We?e:new We({message:"Failed to refresh session",status:500,code:"REFRESH_FAILED"})}}static async resetPassword(e){try{const{error:r}=await fe.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/reset-password`});if(r)throw new We({message:r.message,status:400,code:r.name||"RESET_PASSWORD_ERROR"})}catch(r){throw r instanceof We?r:new We({message:"Failed to send reset password email",status:500,code:"RESET_PASSWORD_FAILED"})}}static validateUserRole(e){return!e||!["admin","user","viewer","vendor","designer","customer"].includes(e)?"user":e}static async debugDatabaseTables(){try{console.log("=== DEBUGGING DATABASE TABLES ===");const e=await fe.from("user_profiles").select("*",{count:"exact"}).limit(1);console.log("user_profiles table response:",e);const r=await fe.from("profiles").select("*",{count:"exact"}).limit(1);return console.log("profiles table response:",r),{user_profiles:e,profiles:r}}catch(e){return console.error("Error debugging tables:",e),null}}static async ensureUserProfile(e,r,n){try{const s=await this.getUserProfileByUserId(e);if(s)return console.log("Profile already exists:",s),s;console.log("No profile found, creating new profile for user:",e);const i={user_id:e,full_name:n||(r==null?void 0:r.split("@")[0])||"User",role:"user"};return await this.createUserProfile(i)}catch(s){throw console.error("Error ensuring user profile:",s),s}}}class dl{static async signIn(e){return await ms.signIn(e)}static async signUp(e){return await ms.signUp(e)}static async signOut(){return await ms.signOut()}static async getCurrentSession(){return await ms.getCurrentSession()}static async getCurrentUser(){return await ms.getCurrentUser()}static async refreshSession(){return await ms.refreshSession()}static async getUserProfileByUserId(e){return await ms.getUserProfileByUserId(e)}static async updateProfile(e,r){throw console.log("UpdateProfile called with:",{userId:e,updates:r}),new Error("Method not implemented")}static async resetPassword(e){return await ms.resetPassword(e)}static validateEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}static validatePassword(e){const r=[];return e.length<8&&r.push("Password must be at least 8 characters long"),/[A-Z]/.test(e)||r.push("Password must contain at least one uppercase letter"),/[a-z]/.test(e)||r.push("Password must contain at least one lowercase letter"),/\d/.test(e)||r.push("Password must contain at least one number"),/[!@#$%^&*(),.?":{}|<>]/.test(e)||r.push("Password must contain at least one special character"),{isValid:r.length===0,errors:r}}static generateUsernameFromEmail(e){return e.split("@")[0].replace(/[^a-zA-Z0-9]/g,"")}}const VQ={user:null,isLoading:!1,error:null,isAuthenticated:!1,isInitialized:!1,accessToken:null,refreshToken:null},Uf=ke("auth/loginUser",async(t,{rejectWithValue:e})=>{try{return await dl.signIn(t)}catch(r){return r instanceof We?e(r.message):e("Login failed. Please check your credentials.")}}),Vf=ke("auth/signUpUser",async(t,{rejectWithValue:e})=>{try{return await dl.signUp(t)}catch(r){return r instanceof We?e(r.message):e("Registration failed. Please try again.")}}),Ub=ke("auth/logoutUser",async(t,{rejectWithValue:e,dispatch:r})=>{try{return await dl.signOut(),window.location.href="/login",null}catch(n){return console.error("Logout error:",n),r(M0()),window.location.href="/login",n instanceof We?e(n.message):e("Logout failed, but local session has been cleared")}}),zf=ke("auth/initializeAuth",async(t,{rejectWithValue:e})=>{try{return await dl.getCurrentUser()}catch(r){return r instanceof We?e(r.message):e("Failed to initialize authentication")}}),Vb=ke("auth/getCurrentUser",async(t,{rejectWithValue:e})=>{try{return await dl.getCurrentUser()}catch(r){return r instanceof We?e(r.message):e("Failed to get current user")}}),R0=ke("auth/refreshSession",async(t,{rejectWithValue:e})=>{try{if(!await dl.refreshSession())throw new Error("No session returned");return await dl.getCurrentUser()}catch(r){return r instanceof We?e(r.message):e("Session refresh failed")}}),DB=Cn({name:"auth",initialState:VQ,reducers:{clearError:t=>{t.error=null},setUser:(t,e)=>{e.payload?(t.user=e.payload,t.isAuthenticated=!0):(t.user=null,t.isAuthenticated=!1)},clearAuth:t=>{t.user=null,t.isAuthenticated=!1,t.error=null,t.accessToken=null,t.refreshToken=null}},extraReducers:t=>{t.addCase(zf.pending,e=>{e.isLoading=!0}).addCase(zf.fulfilled,(e,r)=>{e.isLoading=!1,e.isInitialized=!0,r.payload?(e.user=r.payload.user,e.isAuthenticated=!0):(e.user=null,e.isAuthenticated=!1)}).addCase(zf.rejected,(e,r)=>{e.isLoading=!1,e.isInitialized=!0,e.error=r.payload,e.isAuthenticated=!1}).addCase(Uf.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Uf.fulfilled,(e,r)=>{e.isLoading=!1,e.user=r.payload.user,e.isAuthenticated=!0,e.accessToken=r.payload.session.access_token,e.refreshToken=r.payload.session.refresh_token}).addCase(Uf.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload,e.isAuthenticated=!1}).addCase(Vf.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Vf.fulfilled,(e,r)=>{e.isLoading=!1,e.user=r.payload.user,e.isAuthenticated=!0,e.accessToken=r.payload.session.access_token,e.refreshToken=r.payload.session.refresh_token}).addCase(Vf.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload,e.isAuthenticated=!1}).addCase(Ub.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Ub.fulfilled,e=>{e.isLoading=!1,e.user=null,e.isAuthenticated=!1,e.error=null,e.accessToken=null,e.refreshToken=null}).addCase(Ub.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload,e.user=null,e.isAuthenticated=!1,e.accessToken=null,e.refreshToken=null}).addCase(Vb.pending,e=>{e.isLoading=!0}).addCase(Vb.fulfilled,(e,r)=>{r.payload?(e.user=r.payload.user,e.isAuthenticated=!0):(e.user=null,e.isAuthenticated=!1)}).addCase(Vb.rejected,e=>{e.user=null,e.isAuthenticated=!1}).addCase(R0.fulfilled,(e,r)=>{r.payload?(e.user=r.payload.user,e.isAuthenticated=!0):(e.user=null,e.isAuthenticated=!1)}).addCase(R0.rejected,e=>{e.user=null,e.isAuthenticated=!1})}}),{clearError:O0,setUser:eje,clearAuth:M0}=DB.actions,zQ=t=>t.auth.user,HQ=DB.reducer,WQ={profile:null,isLoading:!1,error:null,isUpdating:!1,updateError:null},ky=ke("userProfile/getUserProfile",async(t,{rejectWithValue:e})=>{var r;try{if(console.log("Redux getUserProfile - Starting with userId:",t),!t||t.trim()==="")return e("User ID is required");let n=await dl.getUserProfileByUserId(t);if(console.log("Redux getUserProfile - Fetched user profile:",n),!n){console.log("Redux getUserProfile - No profile found, attempting to create one");try{const s=await ms.getCurrentUser();s&&s.user.id===t&&(n=await ms.ensureUserProfile(t,s.user.email,(r=s.user.email)==null?void 0:r.split("@")[0]),console.log("Redux getUserProfile - Created new profile:",n))}catch(s){console.error("Redux getUserProfile - Failed to create profile:",s)}if(!n)return e("User profile not found and could not be created")}return n}catch(n){return console.error("Redux getUserProfile - Error fetching user profile:",n),n instanceof We?e(n.message):e("Failed to fetch user profile")}}),zb=ke("userProfile/updateUserProfile",async({userId:t,updates:e},{rejectWithValue:r})=>{try{return await ms.updateUserProfile(t,e)}catch(n){return n instanceof We?r(n.message):r("Failed to update user profile")}}),Hb=ke("userProfile/uploadProfileImage",async({userId:t,imageFile:e},{rejectWithValue:r})=>{try{return(await ms.uploadProfileImage(t,e)).imageUrl}catch(n){return n instanceof We?r(n.message):r("Failed to upload profile image")}}),Wb=ke("userProfile/deleteProfileImage",async({userId:t,imageUrl:e},{rejectWithValue:r})=>{try{return await ms.deleteProfileImage(t,e),null}catch(n){return n instanceof We?r(n.message):r("Failed to delete profile image")}}),qQ=Cn({name:"userProfile",initialState:WQ,reducers:{clearProfileError:t=>{t.error=null,t.updateError=null},setProfile:(t,e)=>{t.profile=e.payload},clearProfile:t=>{t.profile=null,t.error=null,t.updateError=null},updateProfileField:(t,e)=>{t.profile&&(t.profile[e.payload.field]=e.payload.value)}},extraReducers:t=>{t.addCase(ky.pending,e=>{e.isLoading=!0,e.error=null}).addCase(ky.fulfilled,(e,r)=>{e.isLoading=!1,e.profile=r.payload||{},e.error=null}).addCase(ky.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}).addCase(zb.pending,e=>{e.isUpdating=!0,e.updateError=null}).addCase(zb.fulfilled,(e,r)=>{e.isUpdating=!1,e.profile?e.profile={...e.profile,...r.payload}:e.profile=r.payload,e.updateError=null}).addCase(zb.rejected,(e,r)=>{e.isUpdating=!1,e.updateError=r.payload}).addCase(Hb.pending,e=>{e.isUpdating=!0,e.updateError=null}).addCase(Hb.fulfilled,(e,r)=>{e.isUpdating=!1,e.profile&&(e.profile.profile_image=r.payload),e.updateError=null}).addCase(Hb.rejected,(e,r)=>{e.isUpdating=!1,e.updateError=r.payload}).addCase(Wb.pending,e=>{e.isUpdating=!0,e.updateError=null}).addCase(Wb.fulfilled,e=>{e.isUpdating=!1,e.profile&&(e.profile.profile_image=void 0),e.updateError=null}).addCase(Wb.rejected,(e,r)=>{e.isUpdating=!1,e.updateError=r.payload})}}),GQ=t=>t.userProfile.profile,KQ=qQ.reducer,pP=class pP{static async createJob(e){try{const r={title:e.title,jobType:e.jobType,full_image:e.full_image,thumbnail:e.thumbnail,project_id:e.project_id,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:n,error:s}=await fe.from("job").insert(r).select().single();return s?(console.error("Error creating job:",s),{data:null,error:s.message,success:!1}):{data:n,error:null,success:!0}}catch(r){return console.error("Error in createJob:",r),{data:null,error:r.message||"Failed to create job",success:!1}}}static async getJobsByProjectId(e){try{const{data:r,error:n}=await fe.from(this.TABLE_NAME).select("*").eq("project_id",e);return console.log("jobData",r),n?(console.error("Error fetching jobs by project ID:",n),{data:null,error:n.message,success:!1}):{data:r,error:null,success:!0}}catch(r){return console.error("Error in getJobsByProjectId:",r),{data:null,error:r.message||"Failed to fetch jobs",success:!1}}}static async getJobById(e){try{const{data:r,error:n}=await fe.from(this.TABLE_NAME).select("*").eq("id",e).single();return n?(console.error("Error fetching job by ID:",n),{data:null,error:n.message,success:!1}):{data:r,error:null,success:!0}}catch(r){return console.error("Error in getJobById:",r),{data:null,error:r.message||"Failed to fetch job",success:!1}}}static async updateJob(e,r){try{const n={...r,updated_at:new Date().toISOString()},{data:s,error:i}=await fe.from(this.TABLE_NAME).update(n).eq("id",e).select().single();return i?(console.error("Error updating job:",i),{data:null,error:i.message,success:!1}):{data:s,error:null,success:!0}}catch(n){return console.error("Error in updateJob:",n),{data:null,error:n.message||"Failed to update job",success:!1}}}static async deleteJob(e){try{const{error:r}=await fe.from(this.TABLE_NAME).delete().eq("id",e);return r?(console.error("Error deleting job:",r),{data:null,error:r.message,success:!1}):{data:!0,error:null,success:!0}}catch(r){return console.error("Error in deleteJob:",r),{data:null,error:r.message||"Failed to delete job",success:!1}}}static async updateJobSegments(e,r){try{const{data:n,error:s}=await fe.from(this.TABLE_NAME).update({segements:r,updated_at:new Date().toISOString()}).eq("id",e).select().single();return s?(console.error("Error updating job segments:",s),{data:null,error:s.message,success:!1}):{data:n,error:null,success:!0}}catch(n){return console.error("Error in updateJobSegments:",n),{data:null,error:n.message||"Failed to update job segments",success:!1}}}static async getAllJobs(){try{const{data:e,error:r}=await fe.from(this.TABLE_NAME).select("*").order("created_at",{ascending:!1});return r?(console.error("Error fetching all jobs:",r),{data:null,error:r.message,success:!1}):{data:e,error:null,success:!0}}catch(e){return console.error("Error in getAllJobs:",e),{data:null,error:e.message||"Failed to fetch jobs",success:!1}}}static async getJobsByType(e){try{const{data:r,error:n}=await fe.from(this.TABLE_NAME).select("*").eq("jobType",e).order("created_at",{ascending:!1});return n?(console.error("Error fetching jobs by type:",n),{data:null,error:n.message,success:!1}):{data:r,error:null,success:!0}}catch(r){return console.error("Error in getJobsByType:",r),{data:null,error:r.message||"Failed to fetch jobs by type",success:!1}}}static async searchJobsByTitle(e,r){try{let n=fe.from(this.TABLE_NAME).select("*").ilike("title",`%${e}%`);r&&(n=n.eq("project_id",r));const{data:s,error:i}=await n.order("created_at",{ascending:!1});return i?(console.error("Error searching jobs:",i),{data:null,error:i.message,success:!1}):{data:s,error:null,success:!0}}catch(n){return console.error("Error in searchJobsByTitle:",n),{data:null,error:n.message||"Failed to search jobs",success:!1}}}};pP.TABLE_NAME="job";let vo=pP;var YQ=t=>{switch(t){case"success":return ZQ;case"info":return eee;case"warning":return QQ;case"error":return tee;default:return null}},XQ=Array(12).fill(0),JQ=({visible:t})=>ie.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},ie.createElement("div",{className:"sonner-spinner"},XQ.map((e,r)=>ie.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),ZQ=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),QQ=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),eee=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),tee=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),ree=()=>{let[t,e]=ie.useState(document.hidden);return ie.useEffect(()=>{let r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},qC=1,nee=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let r=this.subscribers.indexOf(e);this.subscribers.splice(r,1)}),this.publish=e=>{this.subscribers.forEach(r=>r(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var r;let{message:n,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((r=e.id)==null?void 0:r.length)>0?e.id:qC++,o=this.toasts.find(l=>l.id===i),a=e.dismissible===void 0?!0:e.dismissible;return o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:n}),{...l,...e,id:i,dismissible:a,title:n}):l):this.addToast({title:n,...s,dismissible:a,id:i}),i},this.dismiss=e=>(e||this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:e,dismiss:!0})),e),this.message=(e,r)=>this.create({...r,message:e}),this.error=(e,r)=>this.create({...r,message:e,type:"error"}),this.success=(e,r)=>this.create({...r,type:"success",message:e}),this.info=(e,r)=>this.create({...r,type:"info",message:e}),this.warning=(e,r)=>this.create({...r,type:"warning",message:e}),this.loading=(e,r)=>this.create({...r,type:"loading",message:e}),this.promise=(e,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:e,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));let s=e instanceof Promise?e:e(),i=n!==void 0;return s.then(async o=>{if(iee(o)&&!o.ok){i=!1;let a=typeof r.error=="function"?await r.error(`HTTP error! status: ${o.status}`):r.error,l=typeof r.description=="function"?await r.description(`HTTP error! status: ${o.status}`):r.description;this.create({id:n,type:"error",message:a,description:l})}else if(r.success!==void 0){i=!1;let a=typeof r.success=="function"?await r.success(o):r.success,l=typeof r.description=="function"?await r.description(o):r.description;this.create({id:n,type:"success",message:a,description:l})}}).catch(async o=>{if(r.error!==void 0){i=!1;let a=typeof r.error=="function"?await r.error(o):r.error,l=typeof r.description=="function"?await r.description(o):r.description;this.create({id:n,type:"error",message:a,description:l})}}).finally(()=>{var o;i&&(this.dismiss(n),n=void 0),(o=r.finally)==null||o.call(r)}),n},this.custom=(e,r)=>{let n=(r==null?void 0:r.id)||qC++;return this.create({jsx:e(n),id:n,...r}),n},this.subscribers=[],this.toasts=[]}},ps=new nee,see=(t,e)=>{let r=(e==null?void 0:e.id)||qC++;return ps.addToast({title:t,...e,id:r}),r},iee=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",oee=see,aee=()=>ps.toasts,Ve=Object.assign(oee,{success:ps.success,info:ps.info,warning:ps.warning,error:ps.error,custom:ps.custom,message:ps.message,promise:ps.promise,dismiss:ps.dismiss,loading:ps.loading},{getHistory:aee});function lee(t,{insertAt:e}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}lee(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Em(t){return t.label!==void 0}var cee=3,uee="32px",dee=4e3,hee=356,fee=14,pee=20,gee=200;function mee(...t){return t.filter(Boolean).join(" ")}var yee=t=>{var e,r,n,s,i,o,a,l,c,d;let{invert:h,toast:f,unstyled:p,interacting:g,setHeights:y,visibleToasts:v,heights:m,index:x,toasts:b,expanded:_,removeToast:C,defaultRichColors:T,closeButton:O,style:R,cancelButtonStyle:I,actionButtonStyle:H,className:re="",descriptionClassName:L="",duration:z,position:Y,gap:pe,loadingIcon:Q,expandByDefault:se,classNames:F,icons:K,closeButtonAriaLabel:de="Close toast",pauseWhenPageIsHidden:le,cn:be}=t,[Be,He]=ie.useState(!1),[ht,U]=ie.useState(!1),[D,ee]=ie.useState(!1),[me,Se]=ie.useState(!1),[A,P]=ie.useState(0),[G,ue]=ie.useState(0),Ye=ie.useRef(null),j=ie.useRef(null),E=x===0,S=x+1<=v,k=f.type,N=f.dismissible!==!1,q=f.className||"",W=f.descriptionClassName||"",ne=ie.useMemo(()=>m.findIndex(at=>at.toastId===f.id)||0,[m,f.id]),we=ie.useMemo(()=>{var at;return(at=f.closeButton)!=null?at:O},[f.closeButton,O]),Le=ie.useMemo(()=>f.duration||z||dee,[f.duration,z]),Je=ie.useRef(0),Ue=ie.useRef(0),er=ie.useRef(0),hi=ie.useRef(null),[jo,$h]=Y.split("-"),Zg=ie.useMemo(()=>m.reduce((at,Ut,Ft)=>Ft>=ne?at:at+Ut.height,0),[m,ne]),Uh=ree(),tb=f.invert||h,mu=k==="loading";Ue.current=ie.useMemo(()=>ne*pe+Zg,[ne,Zg]),ie.useEffect(()=>{He(!0)},[]),ie.useLayoutEffect(()=>{if(!Be)return;let at=j.current,Ut=at.style.height;at.style.height="auto";let Ft=at.getBoundingClientRect().height;at.style.height=Ut,ue(Ft),y(Hi=>Hi.find(Wi=>Wi.toastId===f.id)?Hi.map(Wi=>Wi.toastId===f.id?{...Wi,height:Ft}:Wi):[{toastId:f.id,height:Ft,position:f.position},...Hi])},[Be,f.title,f.description,y,f.id]);let _a=ie.useCallback(()=>{U(!0),P(Ue.current),y(at=>at.filter(Ut=>Ut.toastId!==f.id)),setTimeout(()=>{C(f)},gee)},[f,C,y,Ue]);ie.useEffect(()=>{if(f.promise&&k==="loading"||f.duration===1/0||f.type==="loading")return;let at,Ut=Le;return _||g||le&&Uh?(()=>{if(er.current<Je.current){let Ft=new Date().getTime()-Je.current;Ut=Ut-Ft}er.current=new Date().getTime()})():Ut!==1/0&&(Je.current=new Date().getTime(),at=setTimeout(()=>{var Ft;(Ft=f.onAutoClose)==null||Ft.call(f,f),_a()},Ut)),()=>clearTimeout(at)},[_,g,se,f,Le,_a,f.promise,k,le,Uh]),ie.useEffect(()=>{let at=j.current;if(at){let Ut=at.getBoundingClientRect().height;return ue(Ut),y(Ft=>[{toastId:f.id,height:Ut,position:f.position},...Ft]),()=>y(Ft=>Ft.filter(Hi=>Hi.toastId!==f.id))}},[y,f.id]),ie.useEffect(()=>{f.delete&&_a()},[_a,f.delete]);function mq(){return K!=null&&K.loading?ie.createElement("div",{className:"sonner-loader","data-visible":k==="loading"},K.loading):Q?ie.createElement("div",{className:"sonner-loader","data-visible":k==="loading"},Q):ie.createElement(JQ,{visible:k==="loading"})}return ie.createElement("li",{"aria-live":f.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:j,className:be(re,q,F==null?void 0:F.toast,(e=f==null?void 0:f.classNames)==null?void 0:e.toast,F==null?void 0:F.default,F==null?void 0:F[k],(r=f==null?void 0:f.classNames)==null?void 0:r[k]),"data-sonner-toast":"","data-rich-colors":(n=f.richColors)!=null?n:T,"data-styled":!(f.jsx||f.unstyled||p),"data-mounted":Be,"data-promise":!!f.promise,"data-removed":ht,"data-visible":S,"data-y-position":jo,"data-x-position":$h,"data-index":x,"data-front":E,"data-swiping":D,"data-dismissible":N,"data-type":k,"data-invert":tb,"data-swipe-out":me,"data-expanded":!!(_||se&&Be),style:{"--index":x,"--toasts-before":x,"--z-index":b.length-x,"--offset":`${ht?A:Ue.current}px`,"--initial-height":se?"auto":`${G}px`,...R,...f.style},onPointerDown:at=>{mu||!N||(Ye.current=new Date,P(Ue.current),at.target.setPointerCapture(at.pointerId),at.target.tagName!=="BUTTON"&&(ee(!0),hi.current={x:at.clientX,y:at.clientY}))},onPointerUp:()=>{var at,Ut,Ft,Hi;if(me||!N)return;hi.current=null;let Wi=Number(((at=j.current)==null?void 0:at.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Qg=new Date().getTime()-((Ut=Ye.current)==null?void 0:Ut.getTime()),yq=Math.abs(Wi)/Qg;if(Math.abs(Wi)>=pee||yq>.11){P(Ue.current),(Ft=f.onDismiss)==null||Ft.call(f,f),_a(),Se(!0);return}(Hi=j.current)==null||Hi.style.setProperty("--swipe-amount","0px"),ee(!1)},onPointerMove:at=>{var Ut;if(!hi.current||!N)return;let Ft=at.clientY-hi.current.y,Hi=at.clientX-hi.current.x,Wi=(jo==="top"?Math.min:Math.max)(0,Ft),Qg=at.pointerType==="touch"?10:2;Math.abs(Wi)>Qg?(Ut=j.current)==null||Ut.style.setProperty("--swipe-amount",`${Ft}px`):Math.abs(Hi)>Qg&&(hi.current=null)}},we&&!f.jsx?ie.createElement("button",{"aria-label":de,"data-disabled":mu,"data-close-button":!0,onClick:mu||!N?()=>{}:()=>{var at;_a(),(at=f.onDismiss)==null||at.call(f,f)},className:be(F==null?void 0:F.closeButton,(s=f==null?void 0:f.classNames)==null?void 0:s.closeButton)},ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ie.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ie.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,f.jsx||ie.isValidElement(f.title)?f.jsx||f.title:ie.createElement(ie.Fragment,null,k||f.icon||f.promise?ie.createElement("div",{"data-icon":"",className:be(F==null?void 0:F.icon,(i=f==null?void 0:f.classNames)==null?void 0:i.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||mq():null,f.type!=="loading"?f.icon||(K==null?void 0:K[k])||YQ(k):null):null,ie.createElement("div",{"data-content":"",className:be(F==null?void 0:F.content,(o=f==null?void 0:f.classNames)==null?void 0:o.content)},ie.createElement("div",{"data-title":"",className:be(F==null?void 0:F.title,(a=f==null?void 0:f.classNames)==null?void 0:a.title)},f.title),f.description?ie.createElement("div",{"data-description":"",className:be(L,W,F==null?void 0:F.description,(l=f==null?void 0:f.classNames)==null?void 0:l.description)},f.description):null),ie.isValidElement(f.cancel)?f.cancel:f.cancel&&Em(f.cancel)?ie.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||I,onClick:at=>{var Ut,Ft;Em(f.cancel)&&N&&((Ft=(Ut=f.cancel).onClick)==null||Ft.call(Ut,at),_a())},className:be(F==null?void 0:F.cancelButton,(c=f==null?void 0:f.classNames)==null?void 0:c.cancelButton)},f.cancel.label):null,ie.isValidElement(f.action)?f.action:f.action&&Em(f.action)?ie.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||H,onClick:at=>{var Ut,Ft;Em(f.action)&&(at.defaultPrevented||((Ft=(Ut=f.action).onClick)==null||Ft.call(Ut,at),_a()))},className:be(F==null?void 0:F.actionButton,(d=f==null?void 0:f.classNames)==null?void 0:d.actionButton)},f.action.label):null))};function yR(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var vee=t=>{let{invert:e,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:s,closeButton:i,className:o,offset:a,theme:l="light",richColors:c,duration:d,style:h,visibleToasts:f=cee,toastOptions:p,dir:g=yR(),gap:y=fee,loadingIcon:v,icons:m,containerAriaLabel:x="Notifications",pauseWhenPageIsHidden:b,cn:_=mee}=t,[C,T]=ie.useState([]),O=ie.useMemo(()=>Array.from(new Set([r].concat(C.filter(le=>le.position).map(le=>le.position)))),[C,r]),[R,I]=ie.useState([]),[H,re]=ie.useState(!1),[L,z]=ie.useState(!1),[Y,pe]=ie.useState(l!=="system"?l:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Q=ie.useRef(null),se=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=ie.useRef(null),K=ie.useRef(!1),de=ie.useCallback(le=>{var be;(be=C.find(Be=>Be.id===le.id))!=null&&be.delete||ps.dismiss(le.id),T(Be=>Be.filter(({id:He})=>He!==le.id))},[C]);return ie.useEffect(()=>ps.subscribe(le=>{if(le.dismiss){T(be=>be.map(Be=>Be.id===le.id?{...Be,delete:!0}:Be));return}setTimeout(()=>{BL.flushSync(()=>{T(be=>{let Be=be.findIndex(He=>He.id===le.id);return Be!==-1?[...be.slice(0,Be),{...be[Be],...le},...be.slice(Be+1)]:[le,...be]})})})}),[]),ie.useEffect(()=>{if(l!=="system"){pe(l);return}l==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?pe("dark"):pe("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:le})=>{pe(le?"dark":"light")})},[l]),ie.useEffect(()=>{C.length<=1&&re(!1)},[C]),ie.useEffect(()=>{let le=be=>{var Be,He;n.every(ht=>be[ht]||be.code===ht)&&(re(!0),(Be=Q.current)==null||Be.focus()),be.code==="Escape"&&(document.activeElement===Q.current||(He=Q.current)!=null&&He.contains(document.activeElement))&&re(!1)};return document.addEventListener("keydown",le),()=>document.removeEventListener("keydown",le)},[n]),ie.useEffect(()=>{if(Q.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,K.current=!1)}},[Q.current]),C.length?ie.createElement("section",{"aria-label":`${x} ${se}`,tabIndex:-1},O.map((le,be)=>{var Be;let[He,ht]=le.split("-");return ie.createElement("ol",{key:le,dir:g==="auto"?yR():g,tabIndex:-1,ref:Q,className:o,"data-sonner-toaster":!0,"data-theme":Y,"data-y-position":He,"data-x-position":ht,style:{"--front-toast-height":`${((Be=R[0])==null?void 0:Be.height)||0}px`,"--offset":typeof a=="number"?`${a}px`:a||uee,"--width":`${hee}px`,"--gap":`${y}px`,...h},onBlur:U=>{K.current&&!U.currentTarget.contains(U.relatedTarget)&&(K.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:U=>{U.target instanceof HTMLElement&&U.target.dataset.dismissible==="false"||K.current||(K.current=!0,F.current=U.relatedTarget)},onMouseEnter:()=>re(!0),onMouseMove:()=>re(!0),onMouseLeave:()=>{L||re(!1)},onPointerDown:U=>{U.target instanceof HTMLElement&&U.target.dataset.dismissible==="false"||z(!0)},onPointerUp:()=>z(!1)},C.filter(U=>!U.position&&be===0||U.position===le).map((U,D)=>{var ee,me;return ie.createElement(yee,{key:U.id,icons:m,index:D,toast:U,defaultRichColors:c,duration:(ee=p==null?void 0:p.duration)!=null?ee:d,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:e,visibleToasts:f,closeButton:(me=p==null?void 0:p.closeButton)!=null?me:i,interacting:L,position:le,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:de,toasts:C.filter(Se=>Se.position==U.position),heights:R.filter(Se=>Se.position==U.position),setHeights:I,expandByDefault:s,gap:y,loadingIcon:v,expanded:H,pauseWhenPageIsHidden:b,cn:_})}))})):null};const vR=(t,e)=>t instanceof Error?{success:!1,error:t.message}:{success:!1,error:e};class xR{static async getProjectByUserId(e){try{const r=await fe.from("projects").select("*").eq("user_id",e);if(console.log("Response from supabase projects:",r),r.error)throw r.error;return r.data.length===0?{success:!0,data:[],message:"No projects found for this user"}:r.data.length>0?{success:!0,data:await Promise.all(r.data.map(async s=>{const i=[],o=await vo.getJobsByProjectId(s.id);return o.error?Ve.error(`Failed to fetch jobs for project ${s.id}: ${o.error}`):o.data&&i.push(...o.data),{...s,jobData:i}})),message:"Projects fetched successfully"}:r}catch(r){return vR(r,"Failed to fetch projects for user")}}static async createProject(e){try{console.log("Creating project with data:",e);const{data:r,error:n}=await fe.from("projects").insert(e).select().single();if(console.log("data from supabase",r),console.log("error from supabase",n),n)throw n;return console.log("Project created successfully:",r),{success:!0,data:r}}catch(r){return vR(r,"Failed to create project")}}}class FB{static async getProjectByUserId(e){return await xR.getProjectByUserId(e)}static async createProject(e){return await xR.createProject(e)}}const xee={list:[],currentProject:null,currentUserRole:null,projectAccess:[],isLoading:!1,isCreating:!1,isUpdating:!1,isLoadingAccess:!1,error:null},Ty=ke("projects/fetchProjects",async(t,{rejectWithValue:e})=>{try{return(await FB.getProjectByUserId(t)).data||[]}catch(r){return e((r==null?void 0:r.message)||"Failed to fetch projects")}}),pd=ke("projects/createProject",async(t,{rejectWithValue:e})=>{try{const r=await FB.createProject(t);if(!r.success)throw new Error(r.error||"Failed to create project");return r.data}catch(r){return e((r==null?void 0:r.message)||"Failed to create project")}}),qb=ke("projects/updateProject",async({id:t,updates:e},{rejectWithValue:r})=>{try{return await new Promise(n=>setTimeout(n,500)),{id:t,updates:{...e,updated_at:new Date().toISOString()}}}catch(n){return r((n==null?void 0:n.message)||"Failed to update project")}}),Gb=ke("projects/fetchProjectAccess",async(t,{rejectWithValue:e})=>{try{return await new Promise(n=>setTimeout(n,500)),[{userId:"1",email:"admin@example.com",role:"admin",addedAt:new Date().toISOString(),addedBy:"1"},{userId:"2",email:"editor@example.com",role:"editor",addedAt:new Date().toISOString(),addedBy:"1"}]}catch(r){return e((r==null?void 0:r.message)||"Failed to fetch project access")}}),Kb=ke("projects/inviteUserToProject",async({email:t,role:e},{rejectWithValue:r,getState:n})=>{try{await new Promise(a=>setTimeout(a,800));const i=n().auth.user;return{userId:Math.random().toString(36).substr(2,9),email:t,role:e,addedAt:new Date().toISOString(),addedBy:i.id}}catch(s){return r((s==null?void 0:s.message)||"Failed to invite user")}}),Yb=ke("projects/updateUserRole",async({userId:t,role:e},{rejectWithValue:r})=>{try{return await new Promise(n=>setTimeout(n,500)),{userId:t,role:e}}catch(n){return r((n==null?void 0:n.message)||"Failed to update user role")}}),Xb=ke("projects/removeUserFromProject",async({userId:t},{rejectWithValue:e})=>{try{return await new Promise(r=>setTimeout(r,500)),t}catch(r){return e((r==null?void 0:r.message)||"Failed to remove user from project")}}),Jb=ke("projects/toggleProjectPublic",async({projectId:t,isPublic:e},{rejectWithValue:r})=>{try{return await new Promise(s=>setTimeout(s,500)),{projectId:t,visibility:e?"public":"private",updated_at:new Date().toISOString()}}catch(n){return r((n==null?void 0:n.message)||"Failed to update project visibility")}}),LB=Cn({name:"projects",initialState:xee,reducers:{setCurrentProject:(t,e)=>{t.currentProject=e.payload,t.currentUserRole="admin"},clearCurrentProject:t=>{t.currentProject=null,t.currentUserRole=null},clearError:t=>{t.error=null}},extraReducers:t=>{t.addCase(Ty.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Ty.fulfilled,(e,r)=>{e.isLoading=!1,e.list=r.payload}).addCase(Ty.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}).addCase(pd.pending,e=>{e.isCreating=!0,e.error=null}).addCase(pd.fulfilled,(e,r)=>{e.isCreating=!1,e.list.unshift(r.payload)}).addCase(pd.rejected,(e,r)=>{e.isCreating=!1,e.error=r.payload}).addCase(qb.pending,e=>{e.isUpdating=!0,e.error=null}).addCase(qb.fulfilled,(e,r)=>{e.isUpdating=!1;const{id:n,updates:s}=r.payload,i=e.list.findIndex(o=>o.id===n);i!==-1&&(e.list[i]={...e.list[i],...s})}).addCase(qb.rejected,(e,r)=>{e.isUpdating=!1,e.error=r.payload}).addCase(Gb.pending,e=>{e.isLoadingAccess=!0,e.error=null}).addCase(Gb.fulfilled,(e,r)=>{e.isLoadingAccess=!1,e.projectAccess=r.payload}).addCase(Gb.rejected,(e,r)=>{e.isLoadingAccess=!1,e.error=r.payload}).addCase(Kb.pending,e=>{e.error=null}).addCase(Kb.fulfilled,(e,r)=>{e.projectAccess.push(r.payload)}).addCase(Kb.rejected,(e,r)=>{e.error=r.payload}).addCase(Yb.pending,e=>{e.error=null}).addCase(Yb.fulfilled,(e,r)=>{const{userId:n,role:s}=r.payload,i=e.projectAccess.findIndex(o=>o.userId===n);i!==-1&&(e.projectAccess[i].role=s)}).addCase(Yb.rejected,(e,r)=>{e.error=r.payload}).addCase(Xb.pending,e=>{e.error=null}).addCase(Xb.fulfilled,(e,r)=>{const n=r.payload;e.projectAccess=e.projectAccess.filter(s=>s.userId!==n)}).addCase(Xb.rejected,(e,r)=>{e.error=r.payload}).addCase(Jb.pending,e=>{e.isUpdating=!0,e.error=null}).addCase(Jb.fulfilled,(e,r)=>{e.isUpdating=!1;const{projectId:n,visibility:s,updated_at:i}=r.payload,o=e.list.findIndex(a=>a.id===n);o!==-1&&(e.list[o].visibility=s,e.list[o].updated_at=i),e.currentProject&&e.currentProject.id===n&&(e.currentProject.visibility=s,e.currentProject.updated_at=i)}).addCase(Jb.rejected,(e,r)=>{e.isUpdating=!1,e.error=r.payload})}}),{setCurrentProject:rje,clearCurrentProject:nje,clearError:wee}=LB.actions,bee=LB.reducer,See={currentProjectId:null,selectedSegmentType:null,designSettings:{style:"modern",level:1,preserve:["roof","windows"],tone:"warm",intensity:50},currentImageUrl:null,currentJob:null,jobHistory:[],isUploading:!1,error:null},Zb=ke("studio/startDesignJob",async(t,{getState:e,rejectWithValue:r})=>{try{const n=e(),{designSettings:s,currentImageUrl:i,currentProjectId:o}=n.studio;if(!i)throw new Error("No image uploaded");const a={id:Date.now().toString(),status:"loading",progress:0,createdAt:new Date().toISOString()},l={projectId:o,imageUrl:i,settings:s},c=setInterval(()=>{},500);return await new Promise(h=>setTimeout(h,3e3)),clearInterval(c),{...a,status:"completed",progress:100,resultUrl:"https://images.pexels.com/photos/1396122/pexels-photo-1396122.jpeg?auto=compress&cs=tinysrgb&w=800&h=600&dpr=2"}}catch(n){return r(n.message||"Failed to start design job")}}),Hf=ke("studio/uploadImage",async(t,{rejectWithValue:e})=>{try{return await new Promise(n=>setTimeout(n,1500)),{imageUrl:URL.createObjectURL(t)}}catch(r){return e(r.message||"Failed to upload image")}}),_ee=ke("studio/updateJobProgress",async({jobId:t,progress:e})=>({jobId:t,progress:e})),BB=Cn({name:"studio",initialState:See,reducers:{setCurrentProject:(t,e)=>{t.currentProjectId=e.payload},setSelectedSegmentType:(t,e)=>{t.selectedSegmentType=e.payload},updateDesignSettings:(t,e)=>{t.designSettings={...t.designSettings,...e.payload}},setStyle:(t,e)=>{t.designSettings.style=e.payload},setLevel:(t,e)=>{t.designSettings.level=e.payload},updateCurentImage:(t,e)=>{console.log("Redux updateCurentImage action called:",{previous:t.currentImageUrl,new:e.payload}),t.currentImageUrl=e.payload},togglePreserveObject:(t,e)=>{const r=e.payload,n=t.designSettings.preserve;n.includes(r)?t.designSettings.preserve=n.filter(s=>s!==r):t.designSettings.preserve=[...n,r]},setTone:(t,e)=>{t.designSettings.tone=e.payload},setIntensity:(t,e)=>{t.designSettings.intensity=e.payload},clearCurrentImage:t=>{t.currentImageUrl&&URL.revokeObjectURL(t.currentImageUrl),t.currentImageUrl=null},clearError:t=>{t.error=null},cancelCurrentJob:t=>{t.currentJob&&t.currentJob.status==="loading"&&(t.currentJob.status="error",t.currentJob.error="Job cancelled by user")}},extraReducers:t=>{t.addCase(Hf.pending,e=>{e.isUploading=!0,e.error=null}).addCase(Hf.fulfilled,(e,r)=>{e.isUploading=!1,e.currentImageUrl=r.payload.imageUrl}).addCase(Hf.rejected,(e,r)=>{e.isUploading=!1,e.error=r.payload}).addCase(Zb.pending,e=>{e.currentJob={id:Date.now().toString(),status:"loading",progress:0,createdAt:new Date().toISOString()},e.error=null}).addCase(Zb.fulfilled,(e,r)=>{e.currentJob=r.payload,e.jobHistory.unshift(r.payload)}).addCase(Zb.rejected,(e,r)=>{e.currentJob&&(e.currentJob.status="error",e.currentJob.error=r.payload),e.error=r.payload}).addCase(_ee.fulfilled,(e,r)=>{const{jobId:n,progress:s}=r.payload;e.currentJob&&e.currentJob.id===n&&(e.currentJob.progress=s)})}}),{setCurrentProject:Cee,setSelectedSegmentType:wR,updateDesignSettings:sje,setStyle:Eee,setLevel:kee,togglePreserveObject:Tee,setTone:jee,setIntensity:Aee,clearCurrentImage:Pee,clearError:Nee,cancelCurrentJob:ije,updateCurentImage:Ree}=BB.actions,Oee=BB.reducer,Mee={segments:[],activeSegmentId:null,selectedSegmentIds:[],copiedSegment:null,isDrawing:!1,currentPoints:[],canvasHistory:[],historyIndex:-1,maxHistorySize:50,error:null},bR=()=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return t[Math.floor(Math.random()*t.length)]},SR=ke("segments/saveSegments",async(t,{getState:e,rejectWithValue:r})=>{try{const n=e(),{segments:s}=n.segments;return await new Promise(i=>setTimeout(i,500)),s}catch(n){const s=n instanceof Error?n.message:"Failed to save segments";return r(s)}}),GC=ke("segments/loadSegments",async(t,{rejectWithValue:e})=>{try{return await new Promise(r=>setTimeout(r,300)),[]}catch(r){const n=r instanceof Error?r.message:"Failed to load segments";return e(n)}}),$B=Cn({name:"segments",initialState:Mee,reducers:{startDrawing:t=>{t.isDrawing=!0,t.currentPoints=[]},addPoint:(t,e)=>{t.isDrawing&&t.currentPoints.push(e.payload)},finishDrawing:(t,e)=>{if(t.isDrawing&&t.currentPoints.length>=3){const r=Math.max(...t.segments.map(s=>s.zIndex),0),n={id:Date.now().toString(),name:e.payload.name||`Segment ${t.segments.length+1}`,type:e.payload.type||"walls",points:[...t.currentPoints],fillColor:bR(),strokeColor:"#000000",strokeWidth:2,opacity:.7,visible:!0,zIndex:r+1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};t.segments.push(n),t.activeSegmentId=n.id}t.isDrawing=!1,t.currentPoints=[]},cancelDrawing:t=>{t.isDrawing=!1,t.currentPoints=[]},selectSegment:(t,e)=>{t.activeSegmentId=e.payload,e.payload?t.selectedSegmentIds=[e.payload]:t.selectedSegmentIds=[]},selectMultipleSegments:(t,e)=>{t.selectedSegmentIds=e.payload,t.activeSegmentId=e.payload[0]||null},updateSegment:(t,e)=>{const{id:r,updates:n}=e.payload,s=t.segments.findIndex(i=>i.id===r);s!==-1&&(t.segments[s]={...t.segments[s],...n,updatedAt:new Date().toISOString()})},deleteSegment:(t,e)=>{const r=e.payload;t.segments=t.segments.filter(n=>n.id!==r),t.activeSegmentId===r&&(t.activeSegmentId=null),t.selectedSegmentIds=t.selectedSegmentIds.filter(n=>n!==r)},duplicateSegment:(t,e)=>{const r=t.segments.find(n=>n.id===e.payload);if(r){const n=Math.max(...t.segments.map(i=>i.zIndex),0),s={...r,id:Date.now().toString(),name:`${r.name} Copy`,points:r.points.map(i=>({x:i.x+10,y:i.y+10})),zIndex:n+1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};t.segments.push(s),t.activeSegmentId=s.id}},copySegment:(t,e)=>{const r=t.segments.find(n=>n.id===e.payload);r&&(t.copiedSegment={...r})},pasteSegment:t=>{if(t.copiedSegment){const e=Math.max(...t.segments.map(n=>n.zIndex),0),r={...t.copiedSegment,id:Date.now().toString(),name:`${t.copiedSegment.name} Copy`,points:t.copiedSegment.points.map(n=>({x:n.x+20,y:n.y+20})),zIndex:e+1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};t.segments.push(r),t.activeSegmentId=r.id}},clearCopiedSegment:t=>{t.copiedSegment=null},groupSegments:(t,e)=>{const r=e.payload;if(r.length<2)return;const n=`group_${Date.now()}`;r.forEach(s=>{const i=t.segments.find(o=>o.id===s);i&&(i.groupId=n,i.updatedAt=new Date().toISOString())})},ungroupSegments:(t,e)=>{const r=e.payload;t.segments.forEach(n=>{n.groupId===r&&(delete n.groupId,n.updatedAt=new Date().toISOString())})},bringForward:(t,e)=>{const r=t.segments.find(n=>n.id===e.payload);if(r){const n=Math.max(...t.segments.map(s=>s.zIndex));r.zIndex<n&&(r.zIndex+=1,r.updatedAt=new Date().toISOString())}},sendBackward:(t,e)=>{const r=t.segments.find(n=>n.id===e.payload);if(r){const n=Math.min(...t.segments.map(s=>s.zIndex));r.zIndex>n&&(r.zIndex-=1,r.updatedAt=new Date().toISOString())}},bringToFront:(t,e)=>{const r=t.segments.find(n=>n.id===e.payload);if(r){const n=Math.max(...t.segments.map(s=>s.zIndex));r.zIndex=n+1,r.updatedAt=new Date().toISOString()}},sendToBack:(t,e)=>{const r=t.segments.find(n=>n.id===e.payload);if(r){const n=Math.min(...t.segments.map(s=>s.zIndex));r.zIndex=n-1,r.updatedAt=new Date().toISOString()}},assignMaterialToSegment:(t,e)=>{const{segmentId:r,material:n}=e.payload,s=t.segments.find(i=>i.id===r);if(s){const i={materialId:n.id.toString(),materialName:n.title,materialType:"color",previewUrl:n.photo,textureUrl:n.bucket_path,color:n.color,appliedAt:new Date().toISOString()};s.material=i,s.updatedAt=new Date().toISOString(),n.color&&(s.fillColor=n.color)}},removeMaterialFromSegment:(t,e)=>{const r=e.payload,n=t.segments.find(s=>s.id===r);n&&(n.fillColor=bR(),n.material=void 0,n.updatedAt=new Date().toISOString())},saveToHistory:(t,e)=>{const r=e.payload;t.historyIndex<t.canvasHistory.length-1&&(t.canvasHistory=t.canvasHistory.slice(0,t.historyIndex+1)),t.canvasHistory.push(r),t.canvasHistory.length>t.maxHistorySize&&(t.canvasHistory=t.canvasHistory.slice(-t.maxHistorySize)),t.historyIndex=t.canvasHistory.length-1},undo:t=>{t.historyIndex>0&&t.historyIndex--},redo:t=>{t.historyIndex<t.canvasHistory.length-1&&t.historyIndex++},clearHistory:t=>{t.canvasHistory=[],t.historyIndex=-1},clearAllSegments:t=>{t.segments=[],t.activeSegmentId=null,t.selectedSegmentIds=[],t.isDrawing=!1,t.currentPoints=[]},clearError:t=>{t.error=null}},extraReducers:t=>{t.addCase(SR.fulfilled,()=>{}).addCase(SR.rejected,(e,r)=>{e.error=r.payload}).addCase(GC.fulfilled,(e,r)=>{e.segments=r.payload,e.activeSegmentId=null,e.selectedSegmentIds=[]}).addCase(GC.rejected,(e,r)=>{e.error=r.payload})}}),{startDrawing:Iee,addPoint:Dee,finishDrawing:Fee,cancelDrawing:Lee,selectSegment:jy,selectMultipleSegments:oje,updateSegment:_R,deleteSegment:UB,duplicateSegment:Bee,copySegment:I0,pasteSegment:KC,clearCopiedSegment:aje,groupSegments:$ee,ungroupSegments:lje,bringForward:VB,sendBackward:zB,bringToFront:cje,sendToBack:uje,assignMaterialToSegment:dje,removeMaterialFromSegment:Uee,saveToHistory:CR,undo:Vee,redo:zee,clearHistory:hje,clearAllSegments:fje,clearError:pje}=$B.actions,Hee=$B.reducer,gP=class gP{static async createMaterial(e){try{const{data:r,error:n}=await fe.from(this.tableName).insert({...e,is_admin:e.is_admin||!1,finish_needed:e.finish_needed||!1,is_featured:e.is_featured||!1,manufacturer_request:e.manufacturer_request||!1,status:e.status!==void 0?e.status:!0,created:new Date().toISOString(),modified:new Date().toISOString()}).select("*").single();return n?(console.error("Error creating material:",n),{success:!1,error:n.message||"Failed to create material"}):{success:!0,data:r}}catch(r){return console.error("Error creating material:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async getMaterials(e={}){try{const{search:r,user_id:n,role_id:s,material_category_id:i,material_brand_id:o,material_brand_style_id:a,material_type_id:l,color:c,is_admin:d,finish_needed:h,is_featured:f,manufacturer_request:p,status:g,sort_by:y="created",sort_order:v="desc",page:m=1,limit:x=20}=e;let b=fe.from(this.tableName).select("*",{count:"exact"});r&&(b=b.or(`title.ilike.%${r}%,description.ilike.%${r}%`)),n&&(b=b.eq("user_id",n)),s&&(b=b.eq("role_id",s)),i&&(b=b.eq("material_category_id",i)),o&&(b=b.eq("material_brand_id",o)),a&&(b=b.eq("material_brand_style_id",a)),l&&(b=b.eq("material_type_id",l)),c&&(b=b.eq("color",c)),d!==void 0&&(b=b.eq("is_admin",d)),h!==void 0&&(b=b.eq("finish_needed",h)),f!==void 0&&(b=b.eq("is_featured",f)),p!==void 0&&(b=b.eq("manufacturer_request",p)),g!==void 0&&(b=b.eq("status",g)),b=b.order(y,{ascending:v==="asc"});const _=(m-1)*x,C=_+x-1;b=b.range(_,C);const{data:T,error:O,count:R}=await b;if(O)return console.error("Error fetching materials:",O),{success:!1,error:O.message||"Failed to fetch materials"};const I=R||0,H=Math.ceil(I/x);return{success:!0,data:{materials:T,pagination:{page:m,limit:x,total:I,totalPages:H}},total:I,page:m,totalPages:H}}catch(r){return console.error("Error fetching materials:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async getMaterialById(e){try{const{data:r,error:n}=await fe.from(this.tableName).select("*").eq("id",e).single();return n?(console.error("Error fetching material by ID:",n),{success:!1,error:n.message||"Material not found"}):{success:!0,data:r}}catch(r){return console.error("Error fetching material by ID:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async getMaterialsByRoleId(e,r={}){return this.getMaterials({...r,role_id:e})}static async getMaterialsByCategoryId(e,r={}){return this.getMaterials({...r,material_category_id:e})}static async getMaterialsByBrandId(e,r={}){return this.getMaterials({...r,material_brand_id:e})}static async getMaterialsByTypeId(e,r={}){return this.getMaterials({...r,material_type_id:e})}static async updateMaterial(e){try{const{id:r,...n}=e,s={...n,modified:new Date().toISOString()},{data:i,error:o}=await fe.from(this.tableName).update(s).eq("id",r).select("*").single();return o?(console.error("Error updating material:",o),{success:!1,error:o.message||"Failed to update material"}):{success:!0,data:i}}catch(r){return console.error("Error updating material:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async deleteMaterial(e){try{const{error:r}=await fe.from(this.tableName).delete().eq("id",e);return r?(console.error("Error deleting material:",r),{success:!1,error:r.message||"Failed to delete material"}):{success:!0,data:!0}}catch(r){return console.error("Error deleting material:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async toggleMaterialStatus(e){try{const{data:r,error:n}=await fe.from(this.tableName).select("status").eq("id",e).single();if(n)return{success:!1,error:n.message||"Material not found"};const s=!r.status,{data:i,error:o}=await fe.from(this.tableName).update({status:s}).eq("id",e).select("*").single();return o?(console.error("Error toggling material status:",o),{success:!1,error:o.message||"Failed to toggle material status"}):{success:!0,data:i}}catch(r){return console.error("Error toggling material status:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async getMaterialCount(e={}){try{let r=fe.from(this.tableName).select("*",{count:"exact",head:!0});e.search&&(r=r.or(`title.ilike.%${e.search}%,description.ilike.%${e.search}%`)),e.user_id&&(r=r.eq("user_id",e.user_id)),e.role_id&&(r=r.eq("role_id",e.role_id)),e.material_category_id&&(r=r.eq("material_category_id",e.material_category_id)),e.material_brand_id&&(r=r.eq("material_brand_id",e.material_brand_id)),e.material_brand_style_id&&(r=r.eq("material_brand_style_id",e.material_brand_style_id)),e.material_type_id&&(r=r.eq("material_type_id",e.material_type_id)),e.color&&(r=r.eq("color",e.color)),e.is_admin!==void 0&&(r=r.eq("is_admin",e.is_admin)),e.finish_needed!==void 0&&(r=r.eq("finish_needed",e.finish_needed)),e.is_featured!==void 0&&(r=r.eq("is_featured",e.is_featured)),e.manufacturer_request!==void 0&&(r=r.eq("manufacturer_request",e.manufacturer_request)),e.status!==void 0&&(r=r.eq("status",e.status));const{count:n,error:s}=await r;return s?(console.error("Error getting material count:",s),{success:!1,error:s.message||"Failed to get material count"}):{success:!0,data:n||0}}catch(r){return console.error("Error getting material count:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async deleteMaterials(e){try{const{error:r}=await fe.from(this.tableName).delete().in("id",e);return r?(console.error("Error deleting materials:",r),{success:!1,error:r.message||"Failed to delete materials"}):{success:!0,data:!0}}catch(r){return console.error("Error deleting materials:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}};gP.tableName="materials";let fs=gP;class HB{static async createMaterial(e){var r,n,s,i;try{if(!((r=e.title)!=null&&r.trim()))return{success:!1,error:"Material title is required"};if(!e.user_id)return{success:!1,error:"User ID is required"};if(!e.role_id)return{success:!1,error:"Role ID is required"};if(!e.material_category_id)return{success:!1,error:"Material category is required"};if(!e.material_brand_id)return{success:!1,error:"Material brand is required"};if(!e.material_brand_style_id)return{success:!1,error:"Material brand style is required"};if(!((n=e.material_type_id)!=null&&n.trim()))return{success:!1,error:"Material type is required"};const o={...e,title:e.title.trim(),description:(s=e.description)==null?void 0:s.trim(),manufacturer_request_note:(i=e.manufacturer_request_note)==null?void 0:i.trim()},a=await fs.createMaterial(o);return a.success?{success:!0,data:a.data,message:"Material created successfully"}:{success:!1,error:a.error||"Failed to create material"}}catch(o){return console.error("Error in MaterialService.createMaterial:",o),{success:!1,error:o instanceof Error?o.message:"Unknown error occurred"}}}static async getMaterials(e={}){var r,n;try{const s={...e,search:((r=e.search)==null?void 0:r.trim())||void 0,page:Math.max(1,e.page||1),limit:Math.min(100,Math.max(1,e.limit||20))},i=await fs.getMaterials(s);return i.success?{success:!0,data:i.data,message:`Found ${((n=i.data)==null?void 0:n.materials.length)||0} materials`}:{success:!1,error:i.error||"Failed to fetch materials"}}catch(s){return console.error("Error in MaterialService.getMaterials:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error occurred"}}}static async getMaterialById(e){try{if(!e||e<=0)return{success:!1,error:"Valid material ID is required"};const r=await fs.getMaterialById(e);return r.success?{success:!0,data:r.data,message:"Material found successfully"}:{success:!1,error:r.error||"Material not found"}}catch(r){return console.error("Error in MaterialService.getMaterialById:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async getMaterialsByCategoryId(e,r={}){var n;try{if(!e||e<=0)return{success:!1,error:"Valid category ID is required"};const s=await fs.getMaterialsByCategoryId(e,r);return s.success?{success:!0,data:s.data,message:`Found ${((n=s.data)==null?void 0:n.materials.length)||0} materials in category`}:{success:!1,error:s.error||"Failed to fetch materials by category"}}catch(s){return console.error("Error in MaterialService.getMaterialsByCategoryId:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error occurred"}}}static async getMaterialsByBrandId(e,r={}){var n;try{if(!e||e<=0)return{success:!1,error:"Valid brand ID is required"};const s=await fs.getMaterialsByBrandId(e,r);return s.success?{success:!0,data:s.data,message:`Found ${((n=s.data)==null?void 0:n.materials.length)||0} materials for brand`}:{success:!1,error:s.error||"Failed to fetch materials by brand"}}catch(s){return console.error("Error in MaterialService.getMaterialsByBrandId:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error occurred"}}}static async updateMaterial(e){var r,n,s;try{if(!e.id||e.id<=0)return{success:!1,error:"Valid material ID is required"};if(e.title!==void 0&&!e.title.trim())return{success:!1,error:"Material title cannot be empty"};const i={...e,title:(r=e.title)==null?void 0:r.trim(),description:(n=e.description)==null?void 0:n.trim(),manufacturer_request_note:(s=e.manufacturer_request_note)==null?void 0:s.trim()},o=await fs.updateMaterial(i);return o.success?{success:!0,data:o.data,message:"Material updated successfully"}:{success:!1,error:o.error||"Failed to update material"}}catch(i){return console.error("Error in MaterialService.updateMaterial:",i),{success:!1,error:i instanceof Error?i.message:"Unknown error occurred"}}}static async deleteMaterial(e){try{if(!e||e<=0)return{success:!1,error:"Valid material ID is required"};const r=await fs.deleteMaterial(e);return r.success?{success:!0,data:!0,message:"Material deleted successfully"}:{success:!1,error:r.error||"Failed to delete material"}}catch(r){return console.error("Error in MaterialService.deleteMaterial:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async toggleMaterialStatus(e){var r;try{if(!e||e<=0)return{success:!1,error:"Valid material ID is required"};const n=await fs.toggleMaterialStatus(e);return n.success?{success:!0,data:n.data,message:`Material ${(r=n.data)!=null&&r.status?"activated":"deactivated"} successfully`}:{success:!1,error:n.error||"Failed to toggle material status"}}catch(n){return console.error("Error in MaterialService.toggleMaterialStatus:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}static async getMaterialsByTypeId(e,r={}){var n;try{if(!(e!=null&&e.trim()))return{success:!1,error:"Valid type ID is required"};const s=await fs.getMaterialsByTypeId(e,r);return s.success?{success:!0,data:s.data,message:`Found ${((n=s.data)==null?void 0:n.materials.length)||0} materials with type ${e}`}:{success:!1,error:s.error||`Failed to fetch materials by type ${e}`}}catch(s){return console.error("Error in MaterialService.getMaterialsByTypeId:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error occurred"}}}static async getMaterialCount(e={}){try{const r=await fs.getMaterialCount(e);return r.success?{success:!0,data:r.data,message:`Total materials: ${r.data}`}:{success:!1,error:r.error||"Failed to get material count"}}catch(r){return console.error("Error in MaterialService.getMaterialCount:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async deleteMaterials(e){try{if(!e||e.length===0)return{success:!1,error:"Material IDs are required"};const r=e.filter(s=>s>0);if(r.length!==e.length)return{success:!1,error:"All material IDs must be valid positive numbers"};const n=await fs.deleteMaterials(r);return n.success?{success:!0,data:!0,message:`${r.length} materials deleted successfully`}:{success:!1,error:n.error||"Failed to delete materials"}}catch(r){return console.error("Error in MaterialService.deleteMaterials:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async getActiveMaterials(e={}){return this.getMaterials({...e,status:!0})}static async searchMaterials(e,r={}){try{return e!=null&&e.trim()?this.getMaterials({...r,search:e.trim()}):{success:!1,error:"Search query is required"}}catch(n){return console.error("Error in MaterialService.searchMaterials:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}}const Wee={materials:[],pagination:{page:0,limit:0,total:0,totalPages:0},categories:[],selectedCategory:null,searchQuery:"",isLoading:!1,error:null},co=ke("materials/fetchMaterials",async(t={},{rejectWithValue:e})=>{try{const r=await HB.getMaterials(t);return r.success&&r.data?{materials:r.data.materials,pagination:r.data.pagination}:e(r.error||"Failed to fetch materials")}catch(r){return e(r.message||"Failed to fetch materials")}}),Qb=ke("materials/searchMaterials",async({query:t,category:e},{rejectWithValue:r})=>{try{const n={},s=await HB.searchMaterials(t,n);return s.success&&s.data?{materials:s.data.materials,pagination:s.data.pagination}:r(s.error||"Failed to search materials")}catch(n){return r(n.message||"Failed to search materials")}}),WB=Cn({name:"materials",initialState:Wee,reducers:{setSearchQuery:(t,e)=>{t.searchQuery=e.payload},setSelectedCategory:(t,e)=>{t.selectedCategory=e.payload},clearSearch:t=>{t.searchQuery="",t.selectedCategory=null},clearError:t=>{t.error=null},addMaterialPagination:(t,e)=>{t.pagination.page+=e.payload}},extraReducers:t=>{t.addCase(co.pending,e=>{e.isLoading=!0,e.error=null}).addCase(co.fulfilled,(e,r)=>{e.isLoading=!1;const{materials:n,pagination:s}=r.payload;e.materials=n,e.pagination=s||{page:0,limit:0,total:0,totalPages:0}}).addCase(co.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}).addCase(Qb.pending,e=>{e.isLoading=!0}).addCase(Qb.fulfilled,(e,r)=>{e.isLoading=!1;const{materials:n,pagination:s}=r.payload;e.materials=n,e.pagination=s||{page:0,limit:0,total:0,totalPages:0}}).addCase(Qb.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload})}}),{setSearchQuery:gje,setSelectedCategory:mje,clearSearch:yje,clearError:vje,addMaterialPagination:qee}=WB.actions,Gee=WB.reducer,mP=class mP{static async createMaterialSegment(e){try{const{data:r,error:n}=await fe.from(this.tableName).insert({...e,is_active:e.is_active!==void 0?e.is_active:!0,is_visible:e.is_visible!==void 0?e.is_visible:!0,categories:e.categories||[],gallery:e.gallery||[]}).select("*").single();return n?(console.error("Error creating material segment:",n),{success:!1,error:n.message}):{success:!0,data:r}}catch(r){return console.error("Error creating material segment:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async getMaterialSegments(e={}){try{const{search:r,is_active:n,is_visible:s,categories:i,color:o,page:a=1,limit:l=20}=e;let c=fe.from(this.tableName).select("*",{count:"exact"});r&&(c=c.or(`name.ilike.%${r}%,description.ilike.%${r}%,short_code.ilike.%${r}%`)),n!==void 0&&(c=c.eq("is_active",n)),s!==void 0&&(c=c.eq("is_visible",s)),o&&(c=c.or(`color.ilike.%${o}%,color_code.ilike.%${o}%`)),i&&i.length>0&&(c=c.overlaps("categories",i)),c=c.order("index",{ascending:!0});const d=(a-1)*l,h=d+l-1;c=c.range(d,h);const{data:f,error:p,count:g}=await c;if(p)return console.error("Error fetching material segments:",p),{success:!1,error:p.message};const y=g||0,v=Math.ceil(y/l);return{success:!0,data:{segments:f,pagination:{page:a,limit:l,total:y,totalPages:v}},total:y,page:a,totalPages:v}}catch(r){return console.error("Error fetching material segments:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async getMaterialSegmentById(e){try{const{data:r,error:n}=await fe.from(this.tableName).select("*").eq("id",e).single();return n?(console.error("Error fetching material segment by ID:",n),{success:!1,error:n.message}):{success:!0,data:r}}catch(r){return console.error("Error fetching material segment by ID:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async updateMaterialSegment(e){try{const{id:r,...n}=e,{data:s,error:i}=await fe.from(this.tableName).update(n).eq("id",r).select("*").single();return i?(console.error("Error updating material segment:",i),{success:!1,error:i.message}):{success:!0,data:s}}catch(r){return console.error("Error updating material segment:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async deleteMaterialSegment(e){try{const{error:r}=await fe.from(this.tableName).delete().eq("id",e);return r?(console.error("Error deleting material segment:",r),{success:!1,error:r.message}):{success:!0,data:!0}}catch(r){return console.error("Error deleting material segment:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async duplicateMaterialSegment(e){try{const{data:r,error:n}=await fe.from(this.tableName).select("*").eq("id",e).single();if(n)return console.error("Error fetching original segment:",n),{success:!1,error:n.message};const{id:s,...i}=r,o={...i,name:`${i.name} (Copy)`,index:i.index+1},{data:a,error:l}=await fe.from(this.tableName).insert(o).select("*").single();return l?(console.error("Error duplicating material segment:",l),{success:!1,error:l.message}):{success:!0,data:a}}catch(r){return console.error("Error duplicating material segment:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async toggleMaterialSegmentVisibility(e){try{const{data:r,error:n}=await fe.from(this.tableName).select("is_visible").eq("id",e).single();if(n)return console.error("Error fetching current segment:",n),{success:!1,error:n.message};const s=!r.is_visible,{data:i,error:o}=await fe.from(this.tableName).update({is_visible:s}).eq("id",e).select("*").single();return o?(console.error("Error toggling segment visibility:",o),{success:!1,error:o.message}):{success:!0,data:i}}catch(r){return console.error("Error toggling segment visibility:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async toggleMaterialSegmentActive(e){try{const{data:r,error:n}=await fe.from(this.tableName).select("is_active").eq("id",e).single();if(n)return console.error("Error fetching current segment:",n),{success:!1,error:n.message};const s=!r.is_active,{data:i,error:o}=await fe.from(this.tableName).update({is_active:s}).eq("id",e).select("*").single();return o?(console.error("Error toggling segment active status:",o),{success:!1,error:o.message}):{success:!0,data:i}}catch(r){return console.error("Error toggling segment active status:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async reorderMaterialSegments(e){try{const n=e.map((o,a)=>({id:o,index:a})).map(({id:o,index:a})=>fe.from(this.tableName).update({index:a}).eq("id",o).select("*").single()),s=await Promise.all(n);for(const o of s)if(o.error)return console.error("Error reordering segments:",o.error),{success:!1,error:o.error.message};return{success:!0,data:s.map(o=>o.data)}}catch(r){return console.error("Error reordering material segments:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async addToMaterialSegmentGallery(e,r){try{const{data:n,error:s}=await fe.from(this.tableName).select("gallery").eq("id",e).single();if(s)return console.error("Error fetching current segment:",s),{success:!1,error:s.message};const i=[...n.gallery||[],r],{data:o,error:a}=await fe.from(this.tableName).update({gallery:i}).eq("id",e).select("*").single();return a?(console.error("Error adding to gallery:",a),{success:!1,error:a.message}):{success:!0,data:o}}catch(n){return console.error("Error adding to gallery:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}static async removeFromMaterialSegmentGallery(e,r){try{const{data:n,error:s}=await fe.from(this.tableName).select("gallery").eq("id",e).single();if(s)return console.error("Error fetching current segment:",s),{success:!1,error:s.message};const i=(n.gallery||[]).filter(l=>l!==r),{data:o,error:a}=await fe.from(this.tableName).update({gallery:i}).eq("id",e).select("*").single();return a?(console.error("Error removing from gallery:",a),{success:!1,error:a.message}):{success:!0,data:o}}catch(n){return console.error("Error removing from gallery:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}static async searchMaterialSegments(e){try{const{data:r,error:n}=await fe.from(this.tableName).select("*").or(`name.ilike.%${e}%,description.ilike.%${e}%,short_code.ilike.%${e}%`).order("index",{ascending:!0});return n?(console.error("Error searching material segments:",n),{success:!1,error:n.message}):{success:!0,data:r}}catch(r){return console.error("Error searching material segments:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async getMaterialSegmentsByCategory(e){try{const{data:r,error:n}=await fe.from(this.tableName).select("*").contains("categories",[e]).order("index",{ascending:!0});return n?(console.error("Error fetching segments by category:",n),{success:!1,error:n.message}):{success:!0,data:r}}catch(r){return console.error("Error fetching segments by category:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async getMaterialSegmentCategories(){try{const{data:e,error:r}=await fe.from(this.tableName).select("categories").not("categories","is",null);if(r)return console.error("Error fetching categories:",r),{success:!1,error:r.message};const n=e.flatMap(i=>i.categories||[]);return{success:!0,data:[...new Set(n)]}}catch(e){return console.error("Error fetching categories:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}}static async bulkUpdateMaterialSegments(e){try{const r=e.map(({id:i,updates:o})=>fe.from(this.tableName).update(o).eq("id",i).select("*").single()),n=await Promise.all(r);for(const i of n)if(i.error)return console.error("Error in bulk update:",i.error),{success:!1,error:i.error.message};return{success:!0,data:n.map(i=>i.data)}}catch(r){return console.error("Error bulk updating material segments:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async bulkDeleteMaterialSegments(e){try{const{error:r}=await fe.from(this.tableName).delete().in("id",e);return r?(console.error("Error bulk deleting material segments:",r),{success:!1,error:r.message}):{success:!0,data:!0}}catch(r){return console.error("Error bulk deleting material segments:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async getMaterialSegmentCount(e={}){try{let r=fe.from(this.tableName).select("*",{count:"exact",head:!0});e.search&&(r=r.or(`name.ilike.%${e.search}%,description.ilike.%${e.search}%,short_code.ilike.%${e.search}%`)),e.is_active!==void 0&&(r=r.eq("is_active",e.is_active)),e.is_visible!==void 0&&(r=r.eq("is_visible",e.is_visible)),e.color&&(r=r.or(`color.ilike.%${e.color}%,color_code.ilike.%${e.color}%`)),e.categories&&e.categories.length>0&&(r=r.overlaps("categories",e.categories));const{count:n,error:s}=await r;return s?(console.error("Error getting material segment count:",s),{success:!1,error:s.message}):{success:!0,data:n||0}}catch(r){return console.error("Error getting material segment count:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}};mP.tableName="material_segments";let Vr=mP;class Ol{static async createMaterialSegment(e){var r,n,s,i,o,a,l;try{if(!((r=e.name)!=null&&r.trim()))return{success:!1,error:"Material segment name is required"};if(!((n=e.color)!=null&&n.trim()))return{success:!1,error:"Material segment color is required"};if(!((s=e.color_code)!=null&&s.trim()))return{success:!1,error:"Material segment color code is required"};if(!((i=e.short_code)!=null&&i.trim()))return{success:!1,error:"Material segment short code is required"};if(e.index===void 0||e.index<0)return{success:!1,error:"Valid material segment index is required"};const c={...e,name:e.name.trim(),color:e.color.trim(),color_code:e.color_code.trim(),short_code:e.short_code.trim(),description:((o=e.description)==null?void 0:o.trim())||"",icon:((a=e.icon)==null?void 0:a.trim())||"",icon_svg:((l=e.icon_svg)==null?void 0:l.trim())||"",categories:e.categories||[],gallery:e.gallery||[]},d=await Vr.createMaterialSegment(c);return d.success?{success:!0,data:d.data,message:"Material segment created successfully"}:{success:!1,error:d.error||"Failed to create material segment"}}catch(c){return console.error("Error in MaterialSegmentService.createMaterialSegment:",c),{success:!1,error:c instanceof Error?c.message:"Unknown error occurred"}}}static async getMaterialSegments(e={}){try{const r=await Vr.getMaterialSegments(e);return r.success?{success:!0,data:r.data,message:"Material segments fetched successfully"}:{success:!1,error:r.error||"Failed to fetch material segments"}}catch(r){return console.error("Error in MaterialSegmentService.getMaterialSegments:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async getMaterialSegmentById(e){try{if(!e||e<=0)return{success:!1,error:"Valid material segment ID is required"};const r=await Vr.getMaterialSegmentById(e);return r.success?{success:!0,data:r.data,message:"Material segment fetched successfully"}:{success:!1,error:r.error||"Failed to fetch material segment"}}catch(r){return console.error("Error in MaterialSegmentService.getMaterialSegmentById:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async updateMaterialSegment(e){try{if(!e.id||e.id<=0)return{success:!1,error:"Valid material segment ID is required"};if(e.name!==void 0&&!e.name.trim())return{success:!1,error:"Material segment name cannot be empty"};if(e.color!==void 0&&!e.color.trim())return{success:!1,error:"Material segment color cannot be empty"};if(e.color_code!==void 0&&!e.color_code.trim())return{success:!1,error:"Material segment color code cannot be empty"};if(e.short_code!==void 0&&!e.short_code.trim())return{success:!1,error:"Material segment short code cannot be empty"};if(e.index!==void 0&&e.index<0)return{success:!1,error:"Material segment index cannot be negative"};const r={id:e.id};e.name!==void 0&&(r.name=e.name.trim()),e.color!==void 0&&(r.color=e.color.trim()),e.color_code!==void 0&&(r.color_code=e.color_code.trim()),e.short_code!==void 0&&(r.short_code=e.short_code.trim()),e.description!==void 0&&(r.description=e.description.trim()),e.icon!==void 0&&(r.icon=e.icon.trim()),e.icon_svg!==void 0&&(r.icon_svg=e.icon_svg.trim()),e.index!==void 0&&(r.index=e.index),e.is_active!==void 0&&(r.is_active=e.is_active),e.is_visible!==void 0&&(r.is_visible=e.is_visible),e.categories!==void 0&&(r.categories=e.categories),e.gallery!==void 0&&(r.gallery=e.gallery);const n=await Vr.updateMaterialSegment(r);return n.success?{success:!0,data:n.data,message:"Material segment updated successfully"}:{success:!1,error:n.error||"Failed to update material segment"}}catch(r){return console.error("Error in MaterialSegmentService.updateMaterialSegment:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async deleteMaterialSegment(e){try{if(!e||e<=0)return{success:!1,error:"Valid material segment ID is required"};const r=await Vr.deleteMaterialSegment(e);return r.success?{success:!0,data:!0,message:"Material segment deleted successfully"}:{success:!1,error:r.error||"Failed to delete material segment"}}catch(r){return console.error("Error in MaterialSegmentService.deleteMaterialSegment:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async duplicateMaterialSegment(e){try{if(!e||e<=0)return{success:!1,error:"Valid material segment ID is required"};const r=await Vr.duplicateMaterialSegment(e);return r.success?{success:!0,data:r.data,message:"Material segment duplicated successfully"}:{success:!1,error:r.error||"Failed to duplicate material segment"}}catch(r){return console.error("Error in MaterialSegmentService.duplicateMaterialSegment:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async toggleMaterialSegmentVisibility(e){try{if(!e||e<=0)return{success:!1,error:"Valid material segment ID is required"};const r=await Vr.toggleMaterialSegmentVisibility(e);return r.success?{success:!0,data:r.data,message:"Material segment visibility toggled successfully"}:{success:!1,error:r.error||"Failed to toggle material segment visibility"}}catch(r){return console.error("Error in MaterialSegmentService.toggleMaterialSegmentVisibility:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async reorderMaterialSegments(e){try{if(!Array.isArray(e)||e.length===0)return{success:!1,error:"Valid array of material segment IDs is required"};if(e.some(n=>!n||n<=0))return{success:!1,error:"All material segment IDs must be valid positive numbers"};const r=await Vr.reorderMaterialSegments(e);return r.success?{success:!0,data:r.data,message:"Material segments reordered successfully"}:{success:!1,error:r.error||"Failed to reorder material segments"}}catch(r){return console.error("Error in MaterialSegmentService.reorderMaterialSegments:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async addImageToGallery(e,r){try{if(!e||e<=0)return{success:!1,error:"Valid material segment ID is required"};if(!(r!=null&&r.trim()))return{success:!1,error:"Valid image URL is required"};const n=await Vr.addToMaterialSegmentGallery(e,r.trim());return n.success?{success:!0,data:n.data,message:"Image added to gallery successfully"}:{success:!1,error:n.error||"Failed to add image to gallery"}}catch(n){return console.error("Error in MaterialSegmentService.addImageToGallery:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}static async removeImageFromGallery(e,r){try{if(!e||e<=0)return{success:!1,error:"Valid material segment ID is required"};if(!(r!=null&&r.trim()))return{success:!1,error:"Valid image URL is required"};const n=await Vr.removeFromMaterialSegmentGallery(e,r.trim());return n.success?{success:!0,data:n.data,message:"Image removed from gallery successfully"}:{success:!1,error:n.error||"Failed to remove image from gallery"}}catch(n){return console.error("Error in MaterialSegmentService.removeImageFromGallery:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}static async searchMaterialSegments(e,r={}){try{if(!(e!=null&&e.trim()))return{success:!1,error:"Search term is required"};const n={...r,search:e.trim()},s=await Vr.getMaterialSegments(n);return s.success?{success:!0,data:s.data,message:"Material segments search completed successfully"}:{success:!1,error:s.error||"Failed to search material segments"}}catch(n){return console.error("Error in MaterialSegmentService.searchMaterialSegments:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}static async getActiveMaterialSegments(e={}){try{const r={...e,is_active:!0},n=await Vr.getMaterialSegments(r);return n.success?{success:!0,data:n.data,message:"Active material segments fetched successfully"}:{success:!1,error:n.error||"Failed to fetch active material segments"}}catch(r){return console.error("Error in MaterialSegmentService.getActiveMaterialSegments:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async getVisibleMaterialSegments(e={}){try{const r={...e,is_visible:!0},n=await Vr.getMaterialSegments(r);return n.success?{success:!0,data:n.data,message:"Visible material segments fetched successfully"}:{success:!1,error:n.error||"Failed to fetch visible material segments"}}catch(r){return console.error("Error in MaterialSegmentService.getVisibleMaterialSegments:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async getMaterialSegmentsByCategory(e,r={}){try{if(!(e!=null&&e.trim()))return{success:!1,error:"Category is required"};const n={...r,categories:[e.trim()]},s=await Vr.getMaterialSegments(n);return s.success?{success:!0,data:s.data,message:"Material segments by category fetched successfully"}:{success:!1,error:s.error||"Failed to fetch material segments by category"}}catch(n){return console.error("Error in MaterialSegmentService.getMaterialSegmentsByCategory:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}static async bulkUpdateMaterialSegments(e){try{if(!Array.isArray(e)||e.length===0)return{success:!1,error:"Valid array of updates is required"};for(const n of e)if(!n.id||n.id<=0)return{success:!1,error:"All update objects must have valid IDs"};const r=await Vr.bulkUpdateMaterialSegments(e);return r.success?{success:!0,data:r.data,message:"Material segments bulk updated successfully"}:{success:!1,error:r.error||"Failed to bulk update material segments"}}catch(r){return console.error("Error in MaterialSegmentService.bulkUpdateMaterialSegments:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async bulkDeleteMaterialSegments(e){try{if(!Array.isArray(e)||e.length===0)return{success:!1,error:"Valid array of IDs is required"};if(e.some(n=>!n||n<=0))return{success:!1,error:"All IDs must be valid positive numbers"};const r=await Vr.bulkDeleteMaterialSegments(e);return r.success?{success:!0,data:!0,message:"Material segments bulk deleted successfully"}:{success:!1,error:r.error||"Failed to bulk delete material segments"}}catch(r){return console.error("Error in MaterialSegmentService.bulkDeleteMaterialSegments:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}}const Kee={segments:[],selectedSegmentId:null,segmentLoading:!1,error:null,filters:{},pagination:{page:1,limit:10,total:0,totalPages:0}},Wf=ke("materialSegments/fetchAll",async(t,{rejectWithValue:e})=>{try{const r=await Ol.getMaterialSegments(t);return r.success?r.data:e(r.error||"Failed to fetch material segments")}catch(r){return e(r instanceof Error?r.message:"Unknown error")}}),e1=ke("materialSegments/fetchById",async(t,{rejectWithValue:e})=>{try{const r=await Ol.getMaterialSegmentById(t);return r.success?r.data:e(r.error||"Failed to fetch material segment")}catch(r){return e(r instanceof Error?r.message:"Unknown error")}}),t1=ke("materialSegments/create",async(t,{rejectWithValue:e})=>{try{const r=await Ol.createMaterialSegment(t);return r.success?r.data:e(r.error||"Failed to create material segment")}catch(r){return e(r instanceof Error?r.message:"Unknown error")}}),r1=ke("materialSegments/update",async(t,{rejectWithValue:e})=>{try{const r=await Ol.updateMaterialSegment(t);return r.success?r.data:e(r.error||"Failed to update material segment")}catch(r){return e(r instanceof Error?r.message:"Unknown error")}}),n1=ke("materialSegments/delete",async(t,{rejectWithValue:e})=>{try{const r=await Ol.deleteMaterialSegment(t);return r.success?t:e(r.error||"Failed to delete material segment")}catch(r){return e(r instanceof Error?r.message:"Unknown error")}}),s1=ke("materialSegments/duplicate",async(t,{rejectWithValue:e})=>{try{const r=await Ol.duplicateMaterialSegment(t);return r.success?r.data:e(r.error||"Failed to duplicate material segment")}catch(r){return e(r instanceof Error?r.message:"Unknown error")}}),Yee=ke("materialSegments/toggleVisibility",async(t,{rejectWithValue:e})=>{try{const r=await Ol.toggleMaterialSegmentVisibility(t);return r.success?r.data:e(r.error||"Failed to toggle segment visibility")}catch(r){return e(r instanceof Error?r.message:"Unknown error")}}),Xee=ke("materialSegments/reorder",async(t,{rejectWithValue:e})=>{try{const r=await Ol.reorderMaterialSegments(t);return r.success?r.data:e(r.error||"Failed to reorder segments")}catch(r){return e(r instanceof Error?r.message:"Unknown error")}}),Jee=Cn({name:"materialSegments",initialState:Kee,reducers:{selectSegment:(t,e)=>{t.selectedSegmentId=e.payload},clearError:t=>{t.error=null},setFilters:(t,e)=>{t.filters={...t.filters,...e.payload}},clearFilters:t=>{t.filters={}},setPagination:(t,e)=>{t.pagination={...t.pagination,...e.payload}},updateSegmentLocally:(t,e)=>{const{id:r,updates:n}=e.payload,s=t.segments.findIndex(i=>i.id===r);s!==-1&&(t.segments[s]={...t.segments[s],...n})},addSegmentToGallery:(t,e)=>{const{id:r,imageUrl:n}=e.payload,s=t.segments.findIndex(i=>i.id===r);s!==-1&&(t.segments[s].gallery=[...t.segments[s].gallery,n])},removeSegmentFromGallery:(t,e)=>{const{id:r,imageUrl:n}=e.payload,s=t.segments.findIndex(i=>i.id===r);s!==-1&&(t.segments[s].gallery=t.segments[s].gallery.filter(i=>i!==n))}},extraReducers:t=>{t.addCase(Wf.pending,e=>{e.segmentLoading=!0,e.error=null}).addCase(Wf.fulfilled,(e,r)=>{e.segmentLoading=!1,r.payload&&("segments"in r.payload&&"pagination"in r.payload?(e.segments=r.payload.segments,e.pagination=r.payload.pagination):Array.isArray(r.payload)&&(e.segments=r.payload)),e.error=null}).addCase(Wf.rejected,(e,r)=>{e.segmentLoading=!1,e.error=typeof r.payload=="string"?r.payload:r.error.message||"Failed to fetch material segments"}).addCase(e1.pending,e=>{e.segmentLoading=!0,e.error=null}).addCase(e1.fulfilled,(e,r)=>{if(e.segmentLoading=!1,r.payload){const n=e.segments.findIndex(s=>s.id===r.payload.id);n!==-1?e.segments[n]=r.payload:e.segments.push(r.payload)}e.error=null}).addCase(e1.rejected,(e,r)=>{e.segmentLoading=!1,e.error=typeof r.payload=="string"?r.payload:r.error.message||"Failed to fetch material segment"}).addCase(t1.pending,e=>{e.segmentLoading=!0,e.error=null}).addCase(t1.fulfilled,(e,r)=>{e.segmentLoading=!1,r.payload&&e.segments.push(r.payload),e.error=null}).addCase(t1.rejected,(e,r)=>{e.segmentLoading=!1,e.error=typeof r.payload=="string"?r.payload:r.error.message||"Failed to create material segment"}).addCase(r1.pending,e=>{e.segmentLoading=!0,e.error=null}).addCase(r1.fulfilled,(e,r)=>{if(e.segmentLoading=!1,r.payload){const n=e.segments.findIndex(s=>s.id===r.payload.id);n!==-1&&(e.segments[n]=r.payload)}e.error=null}).addCase(r1.rejected,(e,r)=>{e.segmentLoading=!1,e.error=typeof r.payload=="string"?r.payload:r.error.message||"Failed to update material segment"}).addCase(n1.pending,e=>{e.segmentLoading=!0,e.error=null}).addCase(n1.fulfilled,(e,r)=>{e.segmentLoading=!1,e.segments=e.segments.filter(n=>n.id!==r.payload),e.selectedSegmentId===r.payload&&(e.selectedSegmentId=null),e.error=null}).addCase(n1.rejected,(e,r)=>{e.segmentLoading=!1,e.error=typeof r.payload=="string"?r.payload:r.error.message||"Failed to delete material segment"}).addCase(s1.pending,e=>{e.segmentLoading=!0,e.error=null}).addCase(s1.fulfilled,(e,r)=>{e.segmentLoading=!1,r.payload&&e.segments.push(r.payload),e.error=null}).addCase(s1.rejected,(e,r)=>{e.segmentLoading=!1,e.error=typeof r.payload=="string"?r.payload:r.error.message||"Failed to duplicate material segment"}).addCase(Yee.fulfilled,(e,r)=>{if(r.payload){const n=e.segments.findIndex(s=>s.id===r.payload.id);n!==-1&&(e.segments[n]=r.payload)}}).addCase(Xee.fulfilled,(e,r)=>{r.payload&&Array.isArray(r.payload)&&(e.segments=r.payload)})}}),Zee=Jee.reducer,Qee={list:[],currentJob:null,isLoading:!1,isCreating:!1,isUpdating:!1,isDeleting:!1,error:null},vc=ke("jobs/fetchJobsByProject",async(t,{rejectWithValue:e})=>{try{const r=await vo.getJobsByProjectId(t);if(!r.success||!r.data)throw new Error(r.error||"Failed to fetch jobs");return r.data}catch(r){return e((r==null?void 0:r.message)||"Failed to fetch jobs")}}),i1=ke("jobs/fetchJobs",async(t,{rejectWithValue:e})=>{try{const r=await vo.getAllJobs();if(!r.success||!r.data)throw new Error(r.error||"Failed to fetch jobs");return r.data}catch(r){return e((r==null?void 0:r.message)||"Failed to fetch jobs")}}),o1=ke("jobs/fetchJobById",async(t,{rejectWithValue:e})=>{try{const r=await vo.getJobById(t);if(!r.success||!r.data)throw new Error(r.error||"Job not found");return r.data}catch(r){return e((r==null?void 0:r.message)||"Failed to fetch job")}}),rl=ke("jobs/createJob",async(t,{rejectWithValue:e})=>{try{const r=await vo.createJob(t);if(!r.success||!r.data)throw new Error(r.error||"Failed to create job");return r.data}catch(r){return e((r==null?void 0:r.message)||"Failed to create job")}}),a1=ke("jobs/updateJob",async({id:t,updates:e},{rejectWithValue:r})=>{try{const n=await vo.updateJob(t,e);if(!n.success||!n.data)throw new Error(n.error||"Failed to update job");return n.data}catch(n){return r((n==null?void 0:n.message)||"Failed to update job")}}),l1=ke("jobs/deleteJob",async(t,{rejectWithValue:e})=>{try{const r=await vo.deleteJob(t);if(!r.success)throw new Error(r.error||"Failed to delete job");return t}catch(r){return e((r==null?void 0:r.message)||"Failed to delete job")}}),c1=ke("jobs/updateJobSegments",async({id:t,segments:e},{rejectWithValue:r})=>{try{const n=await vo.updateJobSegments(t,e);if(!n.success||!n.data)throw new Error(n.error||"Failed to update job segments");return n.data}catch(n){return r((n==null?void 0:n.message)||"Failed to update job segments")}}),qB=Cn({name:"jobs",initialState:Qee,reducers:{setCurrentJob:(t,e)=>{t.currentJob=e.payload},clearCurrentJob:t=>{t.currentJob=null},clearError:t=>{t.error=null},updateCurrentJobSegments:(t,e)=>{t.currentJob&&(t.currentJob.segements=e.payload,t.currentJob.updated_at=new Date().toISOString())}},extraReducers:t=>{t.addCase(vc.pending,e=>{e.isLoading=!0,e.error=null}).addCase(vc.fulfilled,(e,r)=>{e.isLoading=!1,e.list=r.payload}).addCase(vc.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}).addCase(i1.pending,e=>{e.isLoading=!0,e.error=null}).addCase(i1.fulfilled,(e,r)=>{e.isLoading=!1,e.list=r.payload}).addCase(i1.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}).addCase(o1.pending,e=>{e.isLoading=!0,e.error=null}).addCase(o1.fulfilled,(e,r)=>{e.isLoading=!1,e.currentJob=r.payload}).addCase(o1.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}).addCase(rl.pending,e=>{e.isCreating=!0,e.error=null}).addCase(rl.fulfilled,(e,r)=>{e.isCreating=!1,e.list=[r.payload,...e.list]}).addCase(rl.rejected,(e,r)=>{e.isCreating=!1,e.error=r.payload}).addCase(a1.pending,e=>{e.isUpdating=!0,e.error=null}).addCase(a1.fulfilled,(e,r)=>{e.isUpdating=!1;const n=r.payload,s=e.list.findIndex(i=>i.id===n.id);s!==-1&&(e.list[s]=n),e.currentJob&&e.currentJob.id===n.id&&(e.currentJob=n)}).addCase(a1.rejected,(e,r)=>{e.isUpdating=!1,e.error=r.payload}).addCase(l1.pending,e=>{e.isDeleting=!0,e.error=null}).addCase(l1.fulfilled,(e,r)=>{e.isDeleting=!1;const n=r.payload;e.list=e.list.filter(s=>s.id!==n),e.currentJob&&e.currentJob.id===n&&(e.currentJob=null)}).addCase(l1.rejected,(e,r)=>{e.isDeleting=!1,e.error=r.payload}).addCase(c1.pending,e=>{e.isUpdating=!0,e.error=null}).addCase(c1.fulfilled,(e,r)=>{e.isUpdating=!1;const n=r.payload,s=e.list.findIndex(i=>i.id===n.id);s!==-1&&(e.list[s]=n),e.currentJob&&e.currentJob.id===n.id&&(e.currentJob=n)}).addCase(c1.rejected,(e,r)=>{e.isUpdating=!1,e.error=r.payload})}}),{setCurrentJob:xje,clearCurrentJob:ete,clearError:tte,updateCurrentJobSegments:wje}=qB.actions,rte=t=>t.jobs.list,nte=qB.reducer,ste={logs:{},isLoading:!1,error:null},Ay=ke("activityLogs/fetchActivityLogs",async(t,{rejectWithValue:e})=>{try{await new Promise(n=>setTimeout(n,300));const r=[{id:"log_1",projectId:t,type:"project_created",action:"Project Created",detail:"New project initialized",timestamp:new Date(Date.now()-864e5).toISOString()},{id:"log_2",projectId:t,type:"image_uploaded",action:"Image Uploaded",detail:"Background image added to canvas",timestamp:new Date(Date.now()-36e5).toISOString()},{id:"log_3",projectId:t,type:"style_changed",action:"Style Changed",detail:"Design style updated to Modern",timestamp:new Date(Date.now()-18e5).toISOString(),metadata:{previousStyle:"classic",newStyle:"modern"}}];return{projectId:t,logs:r}}catch(r){return e(r.message||"Failed to fetch activity logs")}}),ER=ke("activityLogs/saveActivityLog",async(t,{rejectWithValue:e})=>{try{return await new Promise(n=>setTimeout(n,100)),{...t,id:`log_${Date.now()}`,timestamp:new Date().toISOString()}}catch(r){return e(r.message||"Failed to save activity log")}}),GB=Cn({name:"activityLogs",initialState:ste,reducers:{logActivity:(t,e)=>{const r={...e.payload,id:`log_${Date.now()}`,timestamp:new Date().toISOString()},n=r.projectId;t.logs[n]||(t.logs[n]=[]),t.logs[n].unshift(r)},clearLogs:(t,e)=>{const r=e.payload;delete t.logs[r]},clearError:t=>{t.error=null}},extraReducers:t=>{t.addCase(Ay.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Ay.fulfilled,(e,r)=>{e.isLoading=!1;const{projectId:n,logs:s}=r.payload;e.logs[n]=s}).addCase(Ay.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}).addCase(ER.fulfilled,(e,r)=>{const n=r.payload,s=n.projectId;e.logs[s]||(e.logs[s]=[]);const i=e.logs[s].findIndex(o=>o.id===n.id);i!==-1?e.logs[s][i]=n:e.logs[s].unshift(n)}).addCase(ER.rejected,(e,r)=>{e.error=r.payload})}}),{logActivity:Js,clearLogs:bje,clearError:Sje}=GB.actions,ite=GB.reducer,u1={swatches:[],currentSwatch:null,favorites:JSON.parse(localStorage.getItem("swatch_favorites")||"[]"),filters:{search:"",category:null,brand:null,style:null,finish:null,coating_type:null,tags:[],segment_types:[],price_range:[0,200],lrv_range:[0,100]},categories:[],brands:[],styles:[],finishes:[],coating_types:[],all_tags:[],all_segment_types:[],isLoading:!1,isCreating:!1,isUpdating:!1,isImporting:!1,error:null,pagination:{page:1,limit:24,total:0,totalPages:0}},Py=ke("swatches/fetchBySlug",async(t,{rejectWithValue:e})=>{try{const r=await fetch(`/api/swatches/${t}`);if(!r.ok)throw new Error("Failed to fetch swatch");return await r.json()}catch(r){return e(r instanceof Error?r.message:"Unknown error")}}),KB=ke("swatches/toggleFavorite",async(t,{getState:e,rejectWithValue:r})=>{try{const s=e().swatches.favorites.includes(t);if(!(await fetch(`/api/swatches/${t}/favorite`,{method:s?"DELETE":"POST"})).ok)throw new Error("Failed to toggle favorite");return{swatchId:t,isFavorite:!s}}catch(n){return r(n instanceof Error?n.message:"Unknown error")}}),d1=ke("swatches/create",async(t,{rejectWithValue:e})=>{try{const r=await fetch("/api/swatches",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to create swatch");return await r.json()}catch(r){return e(r instanceof Error?r.message:"Unknown error")}}),YB=Cn({name:"swatches",initialState:u1,reducers:{setFilters:(t,e)=>{t.filters={...t.filters,...e.payload}},clearFilters:t=>{t.filters=u1.filters},updateFilterCategory:(t,e)=>{t.categories.findIndex(n=>n.id===e.payload.id)===-1&&(t.categories=[e.payload])},updateFilterBrand:(t,e)=>{t.brands.findIndex(n=>n.id===e.payload.id)===-1&&(t.brands=[e.payload])},updateFilterStyle:(t,e)=>{t.styles.findIndex(n=>n.id===e.payload.id)===-1&&(t.styles=[e.payload])},setCurrentSwatch:(t,e)=>{t.currentSwatch=e.payload},clearCurrentSwatch:t=>{t.currentSwatch=null},setPage:(t,e)=>{t.pagination.page=e.payload},clearError:t=>{t.error=null},resetSwatchFilter:()=>u1},extraReducers:t=>{t.addCase(Py.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Py.fulfilled,(e,r)=>{e.isLoading=!1,e.currentSwatch=r.payload}).addCase(Py.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}).addCase(KB.fulfilled,(e,r)=>{const{swatchId:n,isFavorite:s}=r.payload;s?e.favorites.push(n):e.favorites=e.favorites.filter(i=>i!==n),localStorage.setItem("swatch_favorites",JSON.stringify(e.favorites))}).addCase(d1.pending,e=>{e.isCreating=!0,e.error=null}).addCase(d1.fulfilled,(e,r)=>{e.isCreating=!1,e.swatches.unshift(r.payload)}).addCase(d1.rejected,(e,r)=>{e.isCreating=!1,e.error=r.payload})}}),{setFilters:D0,clearFilters:_je,setCurrentSwatch:Cje,clearCurrentSwatch:Eje,setPage:XB,clearError:kje,updateFilterCategory:ote,updateFilterBrand:ate,updateFilterStyle:lte,resetSwatchFilter:cte}=YB.actions,ute=YB.reducer,yP=class yP{static async create(e){var r,n;try{const{data:s,error:i}=await fe.from(this.TABLE_NAME).insert(e).select().single();return i?(console.error("Error creating category:",i),{success:!1,error:i.message}):{data:s,success:!0}}catch(s){const i=s;return{success:!1,error:((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||i.message||"Failed to create category"}}}static async update(e,r){var n,s;try{const{data:i,error:o}=await fe.from(this.TABLE_NAME).update(r).eq("id",e).select().single();return o?(console.error("Error updating category:",o),{success:!1,error:o.message}):{data:i,success:!0}}catch(i){const o=i;return{success:!1,error:((s=(n=o.response)==null?void 0:n.data)==null?void 0:s.message)||o.message||"Failed to update category"}}}static async getAll(e){var r,n;try{let s=fe.from(this.TABLE_NAME).select("*",{count:"exact"});if(e!=null&&e.search&&(s=s.or(`title.ilike.%${e.search}%,description.ilike.%${e.search}%`)),(e==null?void 0:e.status)!==void 0&&(s=s.eq("status",e.status)),e!=null&&e.sort_by){const c=e.sort_order==="asc";s=s.order(e.sort_by,{ascending:c})}else s=s.order("sort_order",{ascending:!0});if(e!=null&&e.page&&(e!=null&&e.limit)){const c=(e.page-1)*e.limit,d=c+e.limit-1;s=s.range(c,d)}const{data:i,error:o,count:a}=await s;if(o)return console.error("Error fetching categories:",o),{success:!1,error:o.message};const l=e!=null&&e.page&&(e!=null&&e.limit)&&a!==null?{total:a,page:e.page,limit:e.limit,totalPages:Math.ceil(a/e.limit)}:void 0;return{data:i,success:!0,meta:l}}catch(s){const i=s;return{success:!1,error:((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||i.message||"Failed to fetch categories"}}}static async findById(e){var r,n;try{const{data:s,error:i}=await fe.from(this.TABLE_NAME).select("*").eq("id",e).single();return i?(console.error("Error fetching category:",i),{success:!1,error:i.message}):{data:s,success:!0}}catch(s){const i=s;return{success:!1,error:((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||i.message||"Failed to fetch category"}}}static async findByName(e,r="slug"){var n,s;try{const{data:i,error:o}=await fe.from(this.TABLE_NAME).select("*").eq(r,e).single();return o?(console.error("Error fetching category:",o),{success:!1,error:o.message}):{data:i,success:!0}}catch(i){const o=i;return{success:!1,error:((s=(n=o.response)==null?void 0:n.data)==null?void 0:s.message)||o.message||"Failed to fetch category"}}}static async delete(e){var r,n;try{const{data:s,error:i}=await fe.from(this.TABLE_NAME).delete().eq("id",e).select().single();return i?(console.error("Error deleting category:",i),{success:!1,error:i.message}):{data:s,success:!0}}catch(s){const i=s;return{success:!1,error:((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||i.message||"Failed to delete category"}}}static async bulkDelete(e){var r,n;try{const{data:s,error:i}=await fe.from(this.TABLE_NAME).delete().in("id",e).select();return i?(console.error("Error bulk deleting categories:",i),{success:!1,error:i.message}):{success:!0,message:`${(s==null?void 0:s.length)||0} categories deleted successfully`}}catch(s){const i=s;return{success:!1,error:((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||i.message||"Failed to delete categories"}}}static async updateStatus(e,r){var n,s;try{const{data:i,error:o}=await fe.from(this.TABLE_NAME).update({status:r}).eq("id",e).select().single();return o?(console.error("Error updating category status:",o),{success:!1,error:o.message}):{data:i,success:!0}}catch(i){const o=i;return{success:!1,error:((s=(n=o.response)==null?void 0:n.data)==null?void 0:s.message)||o.message||"Failed to update category status"}}}static async reorder(e){var r,n;try{const s=e.map(async({id:i,sort_order:o})=>{const{error:a}=await fe.from(this.TABLE_NAME).update({sort_order:o}).eq("id",i);if(a)throw a});return await Promise.all(s),{success:!0,message:"Categories reordered successfully"}}catch(s){const i=s;return{success:!1,error:((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||i.message||"Failed to reorder categories"}}}};yP.TABLE_NAME="material_categories";let mi=yP;class Yu{static getInstance(){return Yu.instance||(Yu.instance=new Yu),Yu.instance}async createCategory(e){try{!e.slug&&e.title&&(e.slug=this.generateSlug(e.title)),e.sort_order||(e.sort_order=await this.getNextSortOrder()),e.status===void 0&&(e.status=!0);const r=await mi.create(e);return r.success&&r.data?{success:!0,data:r.data,message:"Category created successfully"}:{success:!1,error:r.error||"Failed to create category"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}async updateCategory(e,r){try{r.title&&!r.slug&&(r.slug=this.generateSlug(r.title));const n=await mi.update(e,r);return n.success&&n.data?{success:!0,data:n.data,message:"Category updated successfully"}:{success:!1,error:n.error||"Failed to update category"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}async getAllCategories(e){try{const r=await mi.getAll(e);return r.success&&r.data?{success:!0,data:r.data,message:`Retrieved ${r.data.length} categories`}:{success:!1,error:r.error||"Failed to fetch categories"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}async getCategoryById(e){try{const r=await mi.findById(e);return r.success&&r.data?{success:!0,data:r.data,message:"Category retrieved successfully"}:{success:!1,error:r.error||"Category not found"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}async getCategoryByName(e,r="slug"){try{const n=await mi.findByName(e,r);return n.success&&n.data?{success:!0,data:n.data,message:"Category retrieved successfully"}:{success:!1,error:n.error||`Category not found by ${r}`}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}async deleteCategory(e){try{const r=await mi.delete(e);return r.success?{success:!0,message:"Category deleted successfully"}:{success:!1,error:r.error||"Failed to delete category"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}async bulkDeleteCategories(e){try{if(!e||e.length===0)return{success:!1,error:"No category IDs provided"};const r=await mi.bulkDelete(e);return r.success?{success:!0,message:`${e.length} categories deleted successfully`}:{success:!1,error:r.error||"Failed to delete categories"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}async updateCategoryStatus(e,r){try{const n=await mi.updateStatus(e,r);return n.success&&n.data?{success:!0,data:n.data,message:`Category ${r?"activated":"deactivated"} successfully`}:{success:!1,error:n.error||"Failed to update category status"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}async reorderCategories(e){try{if(!e||e.length===0)return{success:!1,error:"No category orders provided"};const r=await mi.reorder(e);return r.success?{success:!0,message:"Categories reordered successfully"}:{success:!1,error:r.error||"Failed to reorder categories"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}async getActiveCategories(){return this.getAllCategories({status:!0,sort_by:"sort_order",sort_order:"asc"})}async searchCategories(e){return this.getAllCategories({search:e,status:!0})}generateSlug(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}async getNextSortOrder(){try{const e=await this.getAllCategories({sort_by:"sort_order",sort_order:"desc",limit:1});return e.success&&e.data&&e.data.length>0?e.data[0].sort_order+1:1}catch{return 1}}}const ui=Yu.getInstance(),kR={categories:[],currentCategory:null,activeCategories:[],isLoading:!1,isCreating:!1,isUpdating:!1,isDeleting:!1,error:null,pagination:{page:1,limit:20,total:0,totalPages:0},filters:{search:"",status:null,sort_by:"sort_order",sort_order:"asc"}},qf=ke("categories/fetchCategories",async(t,{rejectWithValue:e})=>{try{const r=await ui.getAllCategories();if(r.success&&r.data)return{categories:r.data};throw new Error(r.error||"Failed to fetch categories")}catch(r){return e(r instanceof Error?r.message:"Failed to fetch categories")}}),h1=ke("categories/fetchActiveCategories",async(t,{rejectWithValue:e})=>{try{const r=await ui.getActiveCategories();if(r.success&&r.data)return r.data;throw new Error(r.error||"Failed to fetch active categories")}catch(r){return e(r instanceof Error?r.message:"Failed to fetch active categories")}}),f1=ke("categories/fetchCategoryById",async(t,{rejectWithValue:e})=>{try{const r=await ui.getCategoryById(t);if(r.success&&r.data)return r.data;throw new Error(r.error||"Category not found")}catch(r){return e(r instanceof Error?r.message:"Failed to fetch category")}}),p1=ke("categories/fetchCategoryByTitle",async(t,{rejectWithValue:e})=>{try{const r=await ui.getCategoryByName(t,"title");if(r.success&&r.data)return r.data;throw new Error(r.error||"Category not found")}catch(r){return e(r instanceof Error?r.message:"Failed to fetch category by title")}}),g1=ke("categories/fetchCategoryBySlug",async(t,{rejectWithValue:e})=>{try{const r=await ui.getCategoryByName(t,"slug");if(r.success&&r.data)return r.data;throw new Error(r.error||"Category not found")}catch(r){return e(r instanceof Error?r.message:"Failed to fetch category by slug")}}),m1=ke("categories/createCategory",async(t,{rejectWithValue:e})=>{try{const r=await ui.createCategory(t);if(r.success&&r.data)return r.data;throw new Error(r.error||"Failed to create category")}catch(r){return e(r instanceof Error?r.message:"Failed to create category")}}),y1=ke("categories/updateCategory",async({id:t,updates:e},{rejectWithValue:r})=>{try{const n=await ui.updateCategory(t,e);if(n.success&&n.data)return n.data;throw new Error(n.error||"Failed to update category")}catch(n){return r(n instanceof Error?n.message:"Failed to update category")}}),v1=ke("categories/deleteCategory",async(t,{rejectWithValue:e})=>{try{const r=await ui.deleteCategory(t);if(r.success)return{id:t,message:r.message};throw new Error(r.error||"Failed to delete category")}catch(r){return e(r instanceof Error?r.message:"Failed to delete category")}}),x1=ke("categories/bulkDeleteCategories",async(t,{rejectWithValue:e})=>{try{const r=await ui.bulkDeleteCategories(t);if(r.success)return{ids:t,message:r.message};throw new Error(r.error||"Failed to delete categories")}catch(r){return e(r instanceof Error?r.message:"Failed to delete categories")}}),w1=ke("categories/updateCategoryStatus",async({id:t,status:e},{rejectWithValue:r})=>{try{const n=await ui.updateCategoryStatus(t,e);if(n.success&&n.data)return n.data;throw new Error(n.error||"Failed to update category status")}catch(n){return r(n instanceof Error?n.message:"Failed to update category status")}}),b1=ke("categories/reorderCategories",async(t,{rejectWithValue:e})=>{try{const r=await ui.reorderCategories(t);if(r.success)return{categoryOrders:t,message:r.message};throw new Error(r.error||"Failed to reorder categories")}catch(r){return e(r instanceof Error?r.message:"Failed to reorder categories")}}),S1=ke("categories/searchCategories",async(t,{rejectWithValue:e})=>{try{const r=await ui.searchCategories(t);if(r.success&&r.data)return r.data;throw new Error(r.error||"Failed to search categories")}catch(r){return e(r instanceof Error?r.message:"Failed to search categories")}}),dte=Cn({name:"categories",initialState:kR,reducers:{setCurrentCategory:(t,e)=>{t.currentCategory=e.payload},clearCurrentCategory:t=>{t.currentCategory=null},setFilters:(t,e)=>{t.filters={...t.filters,...e.payload}},clearFilters:t=>{t.filters=kR.filters},setPage:(t,e)=>{t.pagination.page=e.payload},setPageLimit:(t,e)=>{t.pagination.limit=e.payload,t.pagination.page=1},clearError:t=>{t.error=null},addCategoryToState:(t,e)=>{t.categories.unshift(e.payload),e.payload.status&&t.activeCategories.unshift(e.payload)},updateCategoryInState:(t,e)=>{var s;const r=t.categories.findIndex(i=>i.id===e.payload.id);r!==-1&&(t.categories[r]=e.payload);const n=t.activeCategories.findIndex(i=>i.id===e.payload.id);e.payload.status?n===-1?t.activeCategories.push(e.payload):t.activeCategories[n]=e.payload:n!==-1&&t.activeCategories.splice(n,1),((s=t.currentCategory)==null?void 0:s.id)===e.payload.id&&(t.currentCategory=e.payload)},removeCategoryFromState:(t,e)=>{var n;const r=e.payload;t.categories=t.categories.filter(s=>s.id!==r),t.activeCategories=t.activeCategories.filter(s=>s.id!==r),((n=t.currentCategory)==null?void 0:n.id)===r&&(t.currentCategory=null)}},extraReducers:t=>{t.addCase(qf.pending,e=>{e.isLoading=!0,e.error=null}).addCase(qf.fulfilled,(e,r)=>{e.isLoading=!1,e.categories=r.payload.categories}).addCase(qf.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}).addCase(h1.pending,e=>{e.isLoading=!0,e.error=null}).addCase(h1.fulfilled,(e,r)=>{e.isLoading=!1,e.activeCategories=r.payload}).addCase(h1.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}).addCase(f1.pending,e=>{e.isLoading=!0,e.error=null}).addCase(f1.fulfilled,(e,r)=>{e.isLoading=!1,e.currentCategory=r.payload}).addCase(f1.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}).addCase(p1.pending,e=>{e.isLoading=!0,e.error=null}).addCase(p1.fulfilled,(e,r)=>{e.isLoading=!1,e.currentCategory=r.payload}).addCase(p1.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}).addCase(g1.pending,e=>{e.isLoading=!0,e.error=null}).addCase(g1.fulfilled,(e,r)=>{e.isLoading=!1,e.currentCategory=r.payload}).addCase(g1.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}).addCase(m1.pending,e=>{e.isCreating=!0,e.error=null}).addCase(m1.fulfilled,(e,r)=>{e.isCreating=!1,e.categories.unshift(r.payload),r.payload.status&&e.activeCategories.unshift(r.payload),e.pagination.total+=1}).addCase(m1.rejected,(e,r)=>{e.isCreating=!1,e.error=r.payload}).addCase(y1.pending,e=>{e.isUpdating=!0,e.error=null}).addCase(y1.fulfilled,(e,r)=>{var o;e.isUpdating=!1;const n=r.payload,s=e.categories.findIndex(a=>a.id===n.id);s!==-1&&(e.categories[s]=n);const i=e.activeCategories.findIndex(a=>a.id===n.id);n.status?i===-1?e.activeCategories.push(n):e.activeCategories[i]=n:i!==-1&&e.activeCategories.splice(i,1),((o=e.currentCategory)==null?void 0:o.id)===n.id&&(e.currentCategory=n)}).addCase(y1.rejected,(e,r)=>{e.isUpdating=!1,e.error=r.payload}).addCase(v1.pending,e=>{e.isDeleting=!0,e.error=null}).addCase(v1.fulfilled,(e,r)=>{var s;e.isDeleting=!1;const{id:n}=r.payload;e.categories=e.categories.filter(i=>i.id!==n),e.activeCategories=e.activeCategories.filter(i=>i.id!==n),((s=e.currentCategory)==null?void 0:s.id)===n&&(e.currentCategory=null),e.pagination.total=Math.max(0,e.pagination.total-1)}).addCase(v1.rejected,(e,r)=>{e.isDeleting=!1,e.error=r.payload}).addCase(x1.pending,e=>{e.isDeleting=!0,e.error=null}).addCase(x1.fulfilled,(e,r)=>{e.isDeleting=!1;const{ids:n}=r.payload;e.categories=e.categories.filter(s=>!n.includes(s.id)),e.activeCategories=e.activeCategories.filter(s=>!n.includes(s.id)),e.currentCategory&&n.includes(e.currentCategory.id)&&(e.currentCategory=null),e.pagination.total=Math.max(0,e.pagination.total-n.length)}).addCase(x1.rejected,(e,r)=>{e.isDeleting=!1,e.error=r.payload}).addCase(w1.pending,e=>{e.isUpdating=!0,e.error=null}).addCase(w1.fulfilled,(e,r)=>{var o;e.isUpdating=!1;const n=r.payload,s=e.categories.findIndex(a=>a.id===n.id);s!==-1&&(e.categories[s]=n);const i=e.activeCategories.findIndex(a=>a.id===n.id);n.status?i===-1?e.activeCategories.push(n):e.activeCategories[i]=n:i!==-1&&e.activeCategories.splice(i,1),((o=e.currentCategory)==null?void 0:o.id)===n.id&&(e.currentCategory=n)}).addCase(w1.rejected,(e,r)=>{e.isUpdating=!1,e.error=r.payload}).addCase(b1.pending,e=>{e.isUpdating=!0,e.error=null}).addCase(b1.fulfilled,(e,r)=>{e.isUpdating=!1;const{categoryOrders:n}=r.payload;n.forEach(({id:s,sort_order:i})=>{const o=e.categories.findIndex(l=>l.id===s);o!==-1&&(e.categories[o].sort_order=i);const a=e.activeCategories.findIndex(l=>l.id===s);a!==-1&&(e.activeCategories[a].sort_order=i)}),e.categories.sort((s,i)=>s.sort_order-i.sort_order),e.activeCategories.sort((s,i)=>s.sort_order-i.sort_order)}).addCase(b1.rejected,(e,r)=>{e.isUpdating=!1,e.error=r.payload}).addCase(S1.pending,e=>{e.isLoading=!0,e.error=null}).addCase(S1.fulfilled,(e,r)=>{e.isLoading=!1,e.categories=r.payload}).addCase(S1.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload})}}),hte=dte.reducer,vP=class vP{static async createBrand(e){try{const r=e.title.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();let n=e.sort_order;if(n===void 0){const{data:o}=await fe.from(this.tableName).select("sort_order").order("sort_order",{ascending:!1}).limit(1).single();n=o?o.sort_order+1:1}const{data:s,error:i}=await fe.from(this.tableName).insert({...e,slug:r,sort_order:n,status:e.status??!0}).select("*").single();if(i)throw new Error(i.message);return{success:!0,data:s}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to create brand"}}}static async updateBrand(e){try{const r={...e};delete r.id,e.title&&(r.slug=e.title.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim());const{data:n,error:s}=await fe.from(this.tableName).update(r).eq("id",e.id).select("*").single();if(s)throw new Error(s.message);return{success:!0,data:n}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to update brand"}}}static async getBrands(e={}){try{let r=fe.from(this.tableName).select("*");e.search&&(r=r.or(`title.ilike.%${e.search}%,description.ilike.%${e.search}%`)),e.material_category_id!==void 0&&(r=r.eq("material_category_id",e.material_category_id)),e.status!==void 0&&(r=r.eq("status",e.status));const n=e.sort_by||"sort_order",s=e.sort_order||"asc";r=r.order(n,{ascending:s==="asc"}),e.limit&&(r=r.limit(e.limit)),e.offset&&(r=r.range(e.offset,e.offset+(e.limit||20)-1));const{data:i,error:o,count:a}=await r;if(o)throw new Error(o.message);return{success:!0,data:i,count:a||0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to fetch brands"}}}static async getActiveBrands(e){const r={status:!0,sort_by:"sort_order",sort_order:"asc"};return e!==void 0&&(r.material_category_id=e),this.getBrands(r)}static async getBrandById(e){try{const{data:r,error:n}=await fe.from(this.tableName).select("*").eq("id",e).single();if(n)throw new Error(n.message);return r?{success:!0,data:r}:{success:!1,error:"Brand not found"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to fetch brand"}}}static async getBrandByName(e,r="title"){try{const{data:n,error:s}=await fe.from(this.tableName).select("*").eq(r,e).single();if(s)throw new Error(s.message);return n?{success:!0,data:n}:{success:!1,error:"Brand not found"}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to fetch brand"}}}static async deleteBrand(e){try{const{error:r}=await fe.from(this.tableName).delete().eq("id",e);if(r)throw new Error(r.message);return{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete brand"}}}static async deleteBrands(e){try{const{error:r}=await fe.from(this.tableName).delete().in("id",e);if(r)throw new Error(r.message);return{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete brands"}}}static async updateBrandStatus(e,r){try{const{data:n,error:s}=await fe.from(this.tableName).update({status:r}).eq("id",e).select("*").single();if(s)throw new Error(s.message);return{success:!0,data:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to update brand status"}}}static async reorderBrands(e){try{const r=e.map(({id:s,sort_order:i})=>fe.from(this.tableName).update({sort_order:i}).eq("id",s)),n=await Promise.all(r);for(const s of n)if(s.error)throw new Error(s.error.message);return{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to reorder brands"}}}static async countBrands(e={}){try{let r=fe.from(this.tableName).select("id",{count:"exact",head:!0});e.search&&(r=r.or(`title.ilike.%${e.search}%,description.ilike.%${e.search}%`)),e.material_category_id!==void 0&&(r=r.eq("material_category_id",e.material_category_id)),e.status!==void 0&&(r=r.eq("status",e.status));const{count:n,error:s}=await r;if(s)throw new Error(s.message);return{success:!0,data:n||0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to count brands"}}}};vP.tableName="material_brand";let tr=vP;class fte{static async getAllBrands(e={}){return tr.getBrands(e)}static async getActiveBrands(e){return tr.getActiveBrands(e)}static async getBrandsByCategory(e,r=!1){const n={material_category_id:e,sort_by:"sort_order",sort_order:"asc"};return r||(n.status=!0),tr.getBrands(n)}static async getBrandById(e){return tr.getBrandById(e)}static async getBrandByTitle(e){return tr.getBrandByName(e,"title")}static async getBrandBySlug(e){return tr.getBrandByName(e,"slug")}static async searchBrands(e,r,n=!0){const s={search:e,sort_by:"title",sort_order:"asc"};return r!==void 0&&(s.material_category_id=r),n&&(s.status=!0),tr.getBrands(s)}static async createBrand(e){var n,s;if(!((n=e.title)!=null&&n.trim()))return{success:!1,error:"Brand title is required"};if(!e.material_category_id||e.material_category_id<=0)return{success:!1,error:"Valid category ID is required"};const r=await this.checkBrandTitleExists(e.title,e.material_category_id);return r.success&&r.data?{success:!1,error:"A brand with this title already exists in this category"}:tr.createBrand({...e,title:e.title.trim(),description:((s=e.description)==null?void 0:s.trim())||null})}static async updateBrand(e){var r;if(!e.id||e.id<=0)return{success:!1,error:"Valid brand ID is required"};if(e.title){const n=e.title.trim();if(!n)return{success:!1,error:"Brand title cannot be empty"};const s=await tr.getBrandById(e.id);if(!s.success||!s.data)return{success:!1,error:"Brand not found"};const i=e.material_category_id||s.data.material_category_id,o=await this.checkBrandTitleExists(n,i,e.id);if(o.success&&o.data)return{success:!1,error:"A brand with this title already exists in this category"};e.title=n}return e.description!==void 0&&(e.description=((r=e.description)==null?void 0:r.trim())||null),tr.updateBrand(e)}static async deleteBrand(e){return!e||e<=0?{success:!1,error:"Valid brand ID is required"}:tr.deleteBrand(e)}static async deleteBrands(e){if(!(e!=null&&e.length))return{success:!1,error:"At least one brand ID is required"};const r=e.filter(n=>n>0);return r.length!==e.length?{success:!1,error:"All brand IDs must be valid positive numbers"}:tr.deleteBrands(r)}static async toggleBrandStatus(e){const r=await tr.getBrandById(e);return!r.success||!r.data?{success:!1,error:"Brand not found"}:tr.updateBrandStatus(e,!r.data.status)}static async updateBrandStatus(e,r){return!e||e<=0?{success:!1,error:"Valid brand ID is required"}:tr.updateBrandStatus(e,r)}static async reorderBrands(e){if(!(e!=null&&e.length))return{success:!1,error:"Brand order data is required"};for(const r of e){if(!r.id||r.id<=0)return{success:!1,error:"All brand IDs must be valid positive numbers"};if(typeof r.sort_order!="number")return{success:!1,error:"All sort orders must be valid numbers"}}return tr.reorderBrands(e)}static async getBrandsCount(e={}){return tr.countBrands(e)}static async getBrandsWithPagination(e=1,r=20,n={}){const s=(e-1)*r,i=await tr.getBrands({...n,limit:r,offset:s});if(!i.success)return{success:!1,error:i.error};const o=await tr.countBrands(n),a=o.success&&o.data||0,l=Math.ceil(a/r);return{success:!0,data:{brands:i.data||[],pagination:{page:e,limit:r,total:a,totalPages:l}}}}static generateSlug(e){return e.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}static async checkBrandTitleExists(e,r,n){const s={search:e,material_category_id:r},i=await tr.getBrands(s);return!i.success||!i.data?{success:!1}:{success:!0,data:i.data.find(a=>a.title.toLowerCase()===e.toLowerCase()&&(!n||a.id!==n))}}}const ds=fte,TR={brands:[],currentBrand:null,activeBrands:[],brandsByCategory:{},isLoading:!1,isCreating:!1,isUpdating:!1,isDeleting:!1,error:null,pagination:{page:1,limit:20,total:0,totalPages:0},filters:{search:"",material_category_id:null,status:null,sort_by:"sort_order",sort_order:"asc"}},Gf=ke("brands/fetchBrands",async(t,{rejectWithValue:e})=>{try{const r=await ds.getAllBrands();if(r.success&&r.data)return{brands:r.data};throw new Error(r.error||"Failed to fetch brands")}catch(r){return e(r instanceof Error?r.message:"Failed to fetch brands")}}),_1=ke("brands/fetchActiveBrands",async(t={},{rejectWithValue:e})=>{try{const r=await ds.getActiveBrands(t.categoryId);if(r.success&&r.data)return{brands:r.data,categoryId:t.categoryId};throw new Error(r.error||"Failed to fetch active brands")}catch(r){return e(r instanceof Error?r.message:"Failed to fetch active brands")}}),C1=ke("brands/fetchBrandsByCategory",async({categoryId:t,includeInactive:e=!1},{rejectWithValue:r})=>{try{const n=await ds.getBrandsByCategory(t,e);if(n.success&&n.data)return{categoryId:t,brands:n.data};throw new Error(n.error||"Failed to fetch brands by category")}catch(n){return r(n instanceof Error?n.message:"Failed to fetch brands by category")}}),E1=ke("brands/fetchBrandById",async(t,{rejectWithValue:e})=>{try{const r=await ds.getBrandById(t);if(r.success&&r.data)return r.data;throw new Error(r.error||"Brand not found")}catch(r){return e(r instanceof Error?r.message:"Failed to fetch brand")}}),k1=ke("brands/fetchBrandByTitle",async(t,{rejectWithValue:e})=>{try{const r=await ds.getBrandByTitle(t);if(r.success&&r.data)return r.data;throw new Error(r.error||"Brand not found")}catch(r){return e(r instanceof Error?r.message:"Failed to fetch brand by title")}}),T1=ke("brands/fetchBrandBySlug",async(t,{rejectWithValue:e})=>{try{const r=await ds.getBrandBySlug(t);if(r.success&&r.data)return r.data;throw new Error(r.error||"Brand not found")}catch(r){return e(r instanceof Error?r.message:"Failed to fetch brand by slug")}}),j1=ke("brands/searchBrands",async({searchTerm:t,categoryId:e,activeOnly:r=!0},{rejectWithValue:n})=>{try{const s=await ds.searchBrands(t,e,r);if(s.success&&s.data)return s.data;throw new Error(s.error||"Failed to search brands")}catch(s){return n(s instanceof Error?s.message:"Failed to search brands")}}),A1=ke("brands/createBrand",async(t,{rejectWithValue:e})=>{try{const r=await ds.createBrand(t);if(r.success&&r.data)return r.data;throw new Error(r.error||"Failed to create brand")}catch(r){return e(r instanceof Error?r.message:"Failed to create brand")}}),P1=ke("brands/updateBrand",async(t,{rejectWithValue:e})=>{try{const r=await ds.updateBrand(t);if(r.success&&r.data)return r.data;throw new Error(r.error||"Failed to update brand")}catch(r){return e(r instanceof Error?r.message:"Failed to update brand")}}),N1=ke("brands/deleteBrand",async(t,{rejectWithValue:e})=>{try{const r=await ds.deleteBrand(t);if(r.success)return t;throw new Error(r.error||"Failed to delete brand")}catch(r){return e(r instanceof Error?r.message:"Failed to delete brand")}}),R1=ke("brands/deleteBrands",async(t,{rejectWithValue:e})=>{try{const r=await ds.deleteBrands(t);if(r.success)return t;throw new Error(r.error||"Failed to delete brands")}catch(r){return e(r instanceof Error?r.message:"Failed to delete brands")}}),O1=ke("brands/toggleBrandStatus",async(t,{rejectWithValue:e})=>{try{const r=await ds.toggleBrandStatus(t);if(r.success&&r.data)return r.data;throw new Error(r.error||"Failed to toggle brand status")}catch(r){return e(r instanceof Error?r.message:"Failed to toggle brand status")}}),M1=ke("brands/updateBrandStatus",async({id:t,status:e},{rejectWithValue:r})=>{try{const n=await ds.updateBrandStatus(t,e);if(n.success&&n.data)return n.data;throw new Error(n.error||"Failed to update brand status")}catch(n){return r(n instanceof Error?n.message:"Failed to update brand status")}}),I1=ke("brands/reorderBrands",async(t,{rejectWithValue:e})=>{try{const r=await ds.reorderBrands(t);if(r.success)return t;throw new Error(r.error||"Failed to reorder brands")}catch(r){return e(r instanceof Error?r.message:"Failed to reorder brands")}}),pte=Cn({name:"brands",initialState:TR,reducers:{clearCurrentBrand:t=>{t.currentBrand=null},clearError:t=>{t.error=null},updateFilters:(t,e)=>{t.filters={...t.filters,...e.payload}},resetFilters:t=>{t.filters=TR.filters},updatePagination:(t,e)=>{t.pagination={...t.pagination,...e.payload}},setCurrentBrand:(t,e)=>{t.currentBrand=e.payload},addBrandOptimistic:(t,e)=>{t.brands.unshift(e.payload),e.payload.status&&t.activeBrands.unshift(e.payload)},updateBrandOptimistic:(t,e)=>{var s;const r=t.brands.findIndex(i=>i.id===e.payload.id);r!==-1&&(t.brands[r]=e.payload);const n=t.activeBrands.findIndex(i=>i.id===e.payload.id);e.payload.status?n===-1?t.activeBrands.push(e.payload):t.activeBrands[n]=e.payload:n!==-1&&t.activeBrands.splice(n,1),((s=t.currentBrand)==null?void 0:s.id)===e.payload.id&&(t.currentBrand=e.payload)},removeBrandOptimistic:(t,e)=>{var r;t.brands=t.brands.filter(n=>n.id!==e.payload),t.activeBrands=t.activeBrands.filter(n=>n.id!==e.payload),((r=t.currentBrand)==null?void 0:r.id)===e.payload&&(t.currentBrand=null)},clearBrandsByCategory:(t,e)=>{delete t.brandsByCategory[e.payload]},clearAllBrands:t=>{t.brands=[],t.activeBrands=[],t.brandsByCategory={},t.currentBrand=null}},extraReducers:t=>{t.addCase(Gf.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Gf.fulfilled,(e,r)=>{e.isLoading=!1,e.brands=r.payload.brands,e.error=null}).addCase(Gf.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}),t.addCase(_1.pending,e=>{e.isLoading=!0,e.error=null}).addCase(_1.fulfilled,(e,r)=>{e.isLoading=!1,e.activeBrands=r.payload.brands,r.payload.categoryId!==void 0&&(e.brandsByCategory[r.payload.categoryId]=r.payload.brands),e.error=null}).addCase(_1.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}),t.addCase(C1.pending,e=>{e.isLoading=!0,e.error=null}).addCase(C1.fulfilled,(e,r)=>{e.isLoading=!1,e.brandsByCategory[r.payload.categoryId]=r.payload.brands,e.error=null}).addCase(C1.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}),t.addCase(E1.pending,e=>{e.isLoading=!0,e.error=null}).addCase(E1.fulfilled,(e,r)=>{e.isLoading=!1,e.currentBrand=r.payload,e.error=null}).addCase(E1.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}),t.addCase(k1.pending,e=>{e.isLoading=!0,e.error=null}).addCase(k1.fulfilled,(e,r)=>{e.isLoading=!1,e.currentBrand=r.payload,e.error=null}).addCase(k1.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}),t.addCase(T1.pending,e=>{e.isLoading=!0,e.error=null}).addCase(T1.fulfilled,(e,r)=>{e.isLoading=!1,e.currentBrand=r.payload,e.error=null}).addCase(T1.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}),t.addCase(j1.pending,e=>{e.isLoading=!0,e.error=null}).addCase(j1.fulfilled,(e,r)=>{e.isLoading=!1,e.brands=r.payload,e.error=null}).addCase(j1.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload}),t.addCase(A1.pending,e=>{e.isCreating=!0,e.error=null}).addCase(A1.fulfilled,(e,r)=>{e.isCreating=!1,e.brands.unshift(r.payload),r.payload.status&&e.activeBrands.unshift(r.payload);const n=r.payload.material_category_id;e.brandsByCategory[n]&&e.brandsByCategory[n].unshift(r.payload),e.error=null}).addCase(A1.rejected,(e,r)=>{e.isCreating=!1,e.error=r.payload}),t.addCase(P1.pending,e=>{e.isUpdating=!0,e.error=null}).addCase(P1.fulfilled,(e,r)=>{var o;e.isUpdating=!1;const n=e.brands.findIndex(a=>a.id===r.payload.id);n!==-1&&(e.brands[n]=r.payload);const s=e.activeBrands.findIndex(a=>a.id===r.payload.id);r.payload.status?s===-1?e.activeBrands.push(r.payload):e.activeBrands[s]=r.payload:s!==-1&&e.activeBrands.splice(s,1);const i=r.payload.material_category_id;if(e.brandsByCategory[i]){const a=e.brandsByCategory[i].findIndex(l=>l.id===r.payload.id);a!==-1&&(e.brandsByCategory[i][a]=r.payload)}((o=e.currentBrand)==null?void 0:o.id)===r.payload.id&&(e.currentBrand=r.payload),e.error=null}).addCase(P1.rejected,(e,r)=>{e.isUpdating=!1,e.error=r.payload}),t.addCase(N1.pending,e=>{e.isDeleting=!0,e.error=null}).addCase(N1.fulfilled,(e,r)=>{var s;e.isDeleting=!1;const n=r.payload;e.brands=e.brands.filter(i=>i.id!==n),e.activeBrands=e.activeBrands.filter(i=>i.id!==n),Object.keys(e.brandsByCategory).forEach(i=>{e.brandsByCategory[parseInt(i)]=e.brandsByCategory[parseInt(i)].filter(o=>o.id!==n)}),((s=e.currentBrand)==null?void 0:s.id)===n&&(e.currentBrand=null),e.error=null}).addCase(N1.rejected,(e,r)=>{e.isDeleting=!1,e.error=r.payload}),t.addCase(R1.pending,e=>{e.isDeleting=!0,e.error=null}).addCase(R1.fulfilled,(e,r)=>{e.isDeleting=!1;const n=r.payload;e.brands=e.brands.filter(s=>!n.includes(s.id)),e.activeBrands=e.activeBrands.filter(s=>!n.includes(s.id)),Object.keys(e.brandsByCategory).forEach(s=>{e.brandsByCategory[parseInt(s)]=e.brandsByCategory[parseInt(s)].filter(i=>!n.includes(i.id))}),e.currentBrand&&n.includes(e.currentBrand.id)&&(e.currentBrand=null),e.error=null}).addCase(R1.rejected,(e,r)=>{e.isDeleting=!1,e.error=r.payload}),t.addCase(O1.pending,e=>{e.isUpdating=!0,e.error=null}).addCase(O1.fulfilled,(e,r)=>{var o;e.isUpdating=!1;const n=e.brands.findIndex(a=>a.id===r.payload.id);n!==-1&&(e.brands[n]=r.payload);const s=e.activeBrands.findIndex(a=>a.id===r.payload.id);r.payload.status?s===-1?e.activeBrands.push(r.payload):e.activeBrands[s]=r.payload:s!==-1&&e.activeBrands.splice(s,1);const i=r.payload.material_category_id;if(e.brandsByCategory[i]){const a=e.brandsByCategory[i].findIndex(l=>l.id===r.payload.id);a!==-1&&(e.brandsByCategory[i][a]=r.payload)}((o=e.currentBrand)==null?void 0:o.id)===r.payload.id&&(e.currentBrand=r.payload),e.error=null}).addCase(O1.rejected,(e,r)=>{e.isUpdating=!1,e.error=r.payload}),t.addCase(M1.pending,e=>{e.isUpdating=!0,e.error=null}).addCase(M1.fulfilled,(e,r)=>{var o;e.isUpdating=!1;const n=e.brands.findIndex(a=>a.id===r.payload.id);n!==-1&&(e.brands[n]=r.payload);const s=e.activeBrands.findIndex(a=>a.id===r.payload.id);r.payload.status?s===-1?e.activeBrands.push(r.payload):e.activeBrands[s]=r.payload:s!==-1&&e.activeBrands.splice(s,1);const i=r.payload.material_category_id;if(e.brandsByCategory[i]){const a=e.brandsByCategory[i].findIndex(l=>l.id===r.payload.id);a!==-1&&(e.brandsByCategory[i][a]=r.payload)}((o=e.currentBrand)==null?void 0:o.id)===r.payload.id&&(e.currentBrand=r.payload),e.error=null}).addCase(M1.rejected,(e,r)=>{e.isUpdating=!1,e.error=r.payload}),t.addCase(I1.pending,e=>{e.isUpdating=!0,e.error=null}).addCase(I1.fulfilled,(e,r)=>{e.isUpdating=!1,r.payload.forEach(({id:s,sort_order:i})=>{var l;const o=e.brands.findIndex(c=>c.id===s);o!==-1&&(e.brands[o].sort_order=i);const a=e.activeBrands.findIndex(c=>c.id===s);a!==-1&&(e.activeBrands[a].sort_order=i),Object.keys(e.brandsByCategory).forEach(c=>{const d=e.brandsByCategory[parseInt(c)].findIndex(h=>h.id===s);d!==-1&&(e.brandsByCategory[parseInt(c)][d].sort_order=i)}),((l=e.currentBrand)==null?void 0:l.id)===s&&(e.currentBrand.sort_order=i)});const n=(s,i)=>s.sort_order-i.sort_order;e.brands.sort(n),e.activeBrands.sort(n),Object.keys(e.brandsByCategory).forEach(s=>{e.brandsByCategory[parseInt(s)].sort(n)}),e.error=null}).addCase(I1.rejected,(e,r)=>{e.isUpdating=!1,e.error=r.payload})}}),gte=pte.reducer,xP=class xP{static async createStyle(e){try{const r=e.title.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();let n=e.sort_order;if(n===void 0){const{data:o}=await fe.from(this.tableName).select("sort_order").order("sort_order",{ascending:!1}).limit(1).single();n=o?o.sort_order+1:1}const{data:s,error:i}=await fe.from(this.tableName).insert({...e,slug:r,sort_order:n,status:e.status??!0}).select("*").single();if(i)throw new Error(i.message);return{success:!0,data:s}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to create style"}}}static async updateStyle(e){try{const r={...e};e.title&&(r.slug=e.title.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim());const{data:n,error:s}=await fe.from(this.tableName).update(r).eq("id",e.id).select("*").single();if(s)throw new Error(s.message);return{success:!0,data:n}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to update style"}}}static async deleteStyle(e){try{const{error:r}=await fe.from(this.tableName).delete().eq("id",e);if(r)throw new Error(r.message);return{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete style"}}}static async deleteStyles(e){try{const{error:r}=await fe.from(this.tableName).delete().in("id",e);if(r)throw new Error(r.message);return{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to delete styles"}}}static async getStyles(e={}){try{let r=fe.from(this.tableName).select("*");e.search&&(r=r.or(`title.ilike.%${e.search}%,description.ilike.%${e.search}%`)),e.material_brand_id!==void 0&&(r=r.eq("material_brand_id",e.material_brand_id)),e.status!==void 0&&(r=r.eq("status",e.status));const n=e.sort_by||"sort_order",s=e.sort_order||"asc";r=r.order(n,{ascending:s==="asc"}),e.limit!==void 0&&(r=r.limit(e.limit)),e.offset!==void 0&&(r=r.range(e.offset,e.offset+(e.limit||20)-1));const{data:i,error:o,count:a}=await r;if(o)throw new Error(o.message);return{success:!0,data:i,count:a||(i==null?void 0:i.length)||0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to fetch styles"}}}static async getActiveStyles(e){const r={status:!0,sort_by:"sort_order",sort_order:"asc"};return e!==void 0&&(r.material_brand_id=e),this.getStyles(r)}static async getStyleById(e){try{const{data:r,error:n}=await fe.from(this.tableName).select("*").eq("id",e).single();if(n)throw new Error(n.message);return{success:!0,data:r}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to fetch style"}}}static async getStyleByName(e,r="title"){try{const{data:n,error:s}=await fe.from(this.tableName).select("*").eq(r,e).single();if(s)throw new Error(s.message);return{success:!0,data:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to fetch style"}}}static async toggleStyleStatus(e){try{const r=await this.getStyleById(e);if(!r.success||!r.data)throw new Error("Style not found");const n=!r.data.status,{data:s,error:i}=await fe.from(this.tableName).update({status:n}).eq("id",e).select("*").single();if(i)throw new Error(i.message);return{success:!0,data:s}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to toggle style status"}}}static async updateStyleStatus(e,r){try{const{data:n,error:s}=await fe.from(this.tableName).update({status:r}).eq("id",e).select("*").single();if(s)throw new Error(s.message);return{success:!0,data:n}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Failed to update style status"}}}static async reorderStyles(e){try{const r=e.map(({id:i,sort_order:o})=>fe.from(this.tableName).update({sort_order:o}).eq("id",i)),s=(await Promise.all(r)).find(i=>i.error);if(s!=null&&s.error)throw new Error(s.error.message);return{success:!0}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Failed to reorder styles"}}}};xP.tableName="material_brand_styles";let zr=xP;class mte{static async getAllStyles(e={}){return zr.getStyles(e)}static async getActiveStyles(e){return zr.getActiveStyles(e)}static async getStylesByBrand(e,r=!1){const n={material_brand_id:e,sort_by:"sort_order",sort_order:"asc"};return r||(n.status=!0),zr.getStyles(n)}static async getStyleById(e){return zr.getStyleById(e)}static async getStyleByTitle(e){return zr.getStyleByName(e,"title")}static async getStyleBySlug(e){return zr.getStyleByName(e,"slug")}static async searchStyles(e,r,n=!0){const s={search:e,sort_by:"title",sort_order:"asc"};return r!==void 0&&(s.material_brand_id=r),n&&(s.status=!0),zr.getStyles(s)}static async createStyle(e){var n;if(!((n=e.title)!=null&&n.trim()))return{success:!1,error:"Style title is required"};if(!e.material_brand_id||e.material_brand_id<=0)return{success:!1,error:"Valid brand ID is required"};const r=await this.searchStyles(e.title,e.material_brand_id,!1);return r.success&&r.data&&r.data.length>0&&r.data.find(i=>i.title.toLowerCase()===e.title.toLowerCase())?{success:!1,error:"A style with this title already exists in this brand"}:zr.createStyle(e)}static async updateStyle(e){if(!e.id||e.id<=0)return{success:!1,error:"Valid style ID is required"};const r=await this.getStyleById(e.id);if(!r.success||!r.data)return{success:!1,error:"Style not found"};if(e.title&&e.title.trim()!==r.data.title){const n=e.material_brand_id||r.data.material_brand_id,s=await this.searchStyles(e.title.trim(),n,!1);if(s.success&&s.data&&s.data.length>0&&s.data.find(o=>o.id!==e.id&&o.title.toLowerCase()===e.title.toLowerCase()))return{success:!1,error:"A style with this title already exists in this brand"}}return zr.updateStyle(e)}static async deleteStyle(e){if(!e||e<=0)return{success:!1,error:"Valid style ID is required"};const r=await this.getStyleById(e);return!r.success||!r.data?{success:!1,error:"Style not found"}:zr.deleteStyle(e)}static async deleteStyles(e){return!e||e.length===0?{success:!1,error:"At least one style ID is required"}:e.filter(n=>!n||n<=0).length>0?{success:!1,error:"All style IDs must be valid positive numbers"}:zr.deleteStyles(e)}static async toggleStyleStatus(e){return!e||e<=0?{success:!1,error:"Valid style ID is required"}:zr.toggleStyleStatus(e)}static async updateStyleStatus(e,r){return!e||e<=0?{success:!1,error:"Valid style ID is required"}:zr.updateStyleStatus(e,r)}static async reorderStyles(e){return!e||e.length===0?{success:!1,error:"Style order data is required"}:e.filter(n=>!n.id||n.id<=0||typeof n.sort_order!="number").length>0?{success:!1,error:"All style entries must have valid ID and sort_order"}:zr.reorderStyles(e)}static async getStylesCountByBrand(e,r=!0){const n={material_brand_id:e};r&&(n.status=!0);const s=await zr.getStyles(n);return s.success?{success:!0,data:s.count||0}:{success:!1,error:s.error}}static async getFeaturedStyles(e=10){const r={status:!0,sort_by:"created_at",sort_order:"desc",limit:e};return zr.getStyles(r)}}const jR={styles:[],currentStyle:null,activeStyles:[],stylesByBrand:{},isLoading:!1,isCreating:!1,isUpdating:!1,isDeleting:!1,error:null,pagination:{page:1,limit:20,total:0,totalPages:0},filters:{search:"",material_brand_id:null,status:null,sort_by:"sort_order",sort_order:"asc"}},Kf=ke("styles/fetchStyles",async(t,{rejectWithValue:e})=>{try{const r=await mte.getAllStyles();if(r.success&&r.data)return{styles:r.data};throw new Error(r.error||"Failed to fetch styles")}catch(r){return e(r instanceof Error?r.message:"Failed to fetch styles")}}),yte=Cn({name:"styles",initialState:jR,reducers:{clearCurrentStyle:t=>{t.currentStyle=null},clearError:t=>{t.error=null},updateFilters:(t,e)=>{t.filters={...t.filters,...e.payload}},resetFilters:t=>{t.filters=jR.filters},updatePagination:(t,e)=>{t.pagination={...t.pagination,...e.payload}},setCurrentStyle:(t,e)=>{t.currentStyle=e.payload},addStyleOptimistic:(t,e)=>{t.styles.unshift(e.payload),e.payload.status&&t.activeStyles.unshift(e.payload)}},extraReducers:t=>{t.addCase(Kf.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Kf.fulfilled,(e,r)=>{e.isLoading=!1,e.styles=r.payload.styles,e.error=null}).addCase(Kf.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload})}}),vte=yte.reducer,wP=class wP{static async fetchInspirationColors(e={}){try{const{search:r,name:n,hex:s,limit:i=50,offset:o=0}=e;let a=fe.from(this.TABLE_NAME).select("*",{count:"exact"});r&&(a=a.or(`name.ilike.%${r}%,hex.ilike.%${r}%`)),n&&(a=a.ilike("name",`%${n}%`)),s&&(a=a.eq("hex",s)),a=a.range(o,o+i-1).order("name",{ascending:!0});const{data:l,error:c,count:d}=await a;return c?(console.error("Error fetching inspiration colors:",c),{success:!1,error:c.message}):{success:!0,data:l,count:d||0,message:`Successfully fetched ${(l==null?void 0:l.length)||0} inspiration colors`}}catch(r){return console.error("Unexpected error in fetchInspirationColors:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}};wP.TABLE_NAME="inspirational_color";let YC=wP;class xte{static async getInspirationColors(e={}){try{const r=await YC.fetchInspirationColors(e);return r.success?{success:!0,data:r.data,message:r.message}:{success:!1,error:r.error||"Failed to fetch inspiration colors"}}catch(r){return console.error("Error in getInspirationColors:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}}const bP=class bP{static async fetchInspirationImages(e={}){try{const{search:r,color_family_id:n,code:s,name:i,status:o=1,limit:a=50,offset:l=0}=e;let c=fe.from(this.TABLE_NAME).select("*",{count:"exact"});r&&(c=c.or(`name.ilike.%${r}%,code.eq.${r}`)),n!==void 0&&(c=c.eq("color_family_id",n)),s!==void 0&&(c=c.eq("code",s)),i&&(c=c.ilike("name",`%${i}%`)),o!==void 0&&(c=c.eq("status",o)),c=c.range(l,l+a-1).order("id",{ascending:!0});const{data:d,error:h,count:f}=await c;return h?(console.error("Error fetching inspiration images:",h),{success:!1,error:h.message}):{success:!0,data:d,count:f||0,message:`Successfully fetched ${(d==null?void 0:d.length)||0} inspiration images`}}catch(r){return console.error("Unexpected error in fetchInspirationImages:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async fetchInspirationImagesPaginated(e=1,r=20,n={}){const s=(e-1)*r,i=await this.fetchInspirationImages({...n,limit:r,offset:s}),o=i.count||0,a=Math.ceil(o/r),l=e<a;return{data:i.data||[],count:o,totalPages:a,currentPage:e,hasMore:l}}static async fetchInspirationImageById(e){try{const{data:r,error:n}=await fe.from(this.TABLE_NAME).select("*").eq("id",e).single();return n?(console.error("Error fetching inspiration image by ID:",n),{success:!1,error:n.message}):r?{success:!0,data:r,message:"Inspiration image fetched successfully"}:{success:!1,error:"Inspiration image not found"}}catch(r){return console.error("Unexpected error in fetchInspirationImageById:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async fetchInspirationImagesByColorFamily(e,r=20){return this.fetchInspirationImages({color_family_id:e,limit:r})}static async searchInspirationImagesByName(e,r=10){return this.fetchInspirationImages({search:e,limit:r})}static async fetchInspirationImagesByCode(e){return this.fetchInspirationImages({code:e})}static async fetchActiveInspirationImages(e=50,r=0){return this.fetchInspirationImages({status:1,limit:e,offset:r})}static async fetchInspirationImagesByStatus(e,r=50){return this.fetchInspirationImages({status:e,limit:r})}static async getInspirationImagesCountByColorFamily(){try{const{data:e,error:r}=await fe.from(this.TABLE_NAME).select("color_family_id").eq("status",1);return r?(console.error("Error getting inspiration images count by color family:",r),{success:!1,error:r.message}):{success:!0,data:(e||[]).reduce((s,i)=>(s[i.color_family_id]=(s[i.color_family_id]||0)+1,s),{}),message:"Successfully fetched inspiration images count by color family"}}catch(e){return console.error("Unexpected error in getInspirationImagesCountByColorFamily:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}}};bP.TABLE_NAME="inspiration_images";let yi=bP;class JB{static async getInspirationImages(e={}){try{const r=await yi.fetchInspirationImages(e);return r.success?{success:!0,data:r.data,message:r.message}:{success:!1,error:r.error||"Failed to fetch inspiration images"}}catch(r){return console.error("Error in getInspirationImages:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async getInspirationImagesPaginated(e=1,r=20,n={}){try{return{success:!0,data:await yi.fetchInspirationImagesPaginated(e,r,n),message:`Successfully fetched page ${e} of inspiration images`}}catch(s){return console.error("Error in getInspirationImagesPaginated:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error occurred"}}}static async getInspirationImageById(e){try{if(!e||e<=0)return{success:!1,error:"Valid image ID is required"};const r=await yi.fetchInspirationImageById(e);return r.success?{success:!0,data:r.data,message:r.message}:{success:!1,error:r.error||"Failed to fetch inspiration image"}}catch(r){return console.error("Error in getInspirationImageById:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async getInspirationImagesByColorFamily(e,r=20){var n;try{if(!e||e<=0)return{success:!1,error:"Valid color family ID is required"};const s=await yi.fetchInspirationImagesByColorFamily(e,r);return s.success?{success:!0,data:s.data,message:`Found ${((n=s.data)==null?void 0:n.length)||0} images for color family ${e}`}:{success:!1,error:s.error||"Failed to fetch inspiration images by color family"}}catch(s){return console.error("Error in getInspirationImagesByColorFamily:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error occurred"}}}static async searchInspirationImages(e,r=10){var n;try{if(!(e!=null&&e.trim()))return{success:!1,error:"Search term is required"};if(e.length<2)return{success:!1,error:"Search term must be at least 2 characters long"};const s=await yi.searchInspirationImagesByName(e,r);return s.success?{success:!0,data:s.data,message:`Found ${((n=s.data)==null?void 0:n.length)||0} images matching "${e}"`}:{success:!1,error:s.error||"Failed to search inspiration images"}}catch(s){return console.error("Error in searchInspirationImages:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error occurred"}}}static async getInspirationImagesByCode(e){try{if(!e||e<=0)return{success:!1,error:"Valid code is required"};const r=await yi.fetchInspirationImagesByCode(e);return r.success?{success:!0,data:r.data,message:r.message}:{success:!1,error:r.error||"Failed to fetch inspiration images by code"}}catch(r){return console.error("Error in getInspirationImagesByCode:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}}static async getActiveInspirationImages(e=50,r=0){try{const n=await yi.fetchActiveInspirationImages(e,r);return n.success?{success:!0,data:n.data,message:n.message}:{success:!1,error:n.error||"Failed to fetch active inspiration images"}}catch(n){return console.error("Error in getActiveInspirationImages:",n),{success:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}static async getInspirationImagesByStatus(e,r=50){var n;try{if(e!==0&&e!==1)return{success:!1,error:"Status must be 0 (inactive) or 1 (active)"};const s=await yi.fetchInspirationImagesByStatus(e,r);return s.success?{success:!0,data:s.data,message:`Found ${((n=s.data)==null?void 0:n.length)||0} ${e===1?"active":"inactive"} images`}:{success:!1,error:s.error||"Failed to fetch inspiration images by status"}}catch(s){return console.error("Error in getInspirationImagesByStatus:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error occurred"}}}static async getInspirationImagesCountByColorFamily(){try{const e=await yi.getInspirationImagesCountByColorFamily();return e.success?{success:!0,data:e.data,message:e.message}:{success:!1,error:e.error||"Failed to get inspiration images count by color family"}}catch(e){return console.error("Error in getInspirationImagesCountByColorFamily:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error occurred"}}}static async getFeaturedInspirationImages(e=10){return this.getActiveInspirationImages(e,0)}}const D1={inspirational_colors:[],pagination:{page:1,pageSize:20,total:0,totalPages:0,hasMore:!1},searchQuery:"",selectedColorId:null,isLoading:!1,error:null},Ny=ke("inspirationalColors/fetchColors",async(t={},{rejectWithValue:e})=>{try{const r=await xte.getInspirationColors(t);return r.success&&r.data?{colors:r.data,message:r.message}:e(r.error||"Failed to fetch inspirational colors")}catch(r){return e(r instanceof Error?r.message:"An unexpected error occurred")}}),wte=Cn({name:"inspirationalColors",initialState:D1,reducers:{setSearchQuery:(t,e)=>{t.searchQuery=e.payload},setSelectedColorId:(t,e)=>{t.selectedColorId=e.payload},clearColors:t=>{t.inspirational_colors=[],t.pagination=D1.pagination},clearError:t=>{t.error=null},resetState:()=>D1},extraReducers:t=>{t.addCase(Ny.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Ny.fulfilled,(e,r)=>{e.isLoading=!1,e.inspirational_colors=r.payload.colors,e.error=null}).addCase(Ny.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload})}}),bte=wte.reducer,F1={Inspirational_images:[],pagination:{page:1,pageSize:20,total:0,totalPages:0,hasMore:!1},searchQuery:"",selectedImageId:null,selectedColorFamilyId:null,statusFilter:1,isLoading:!1,error:null,imageCountByColorFamily:{}},Ry=ke("inspirationalImages/fetchImages",async(t={},{rejectWithValue:e})=>{try{const r=await JB.getInspirationImages(t);return r.success&&r.data?{images:r.data,message:r.message}:e(r.error||"Failed to fetch inspirational images")}catch(r){return e(r instanceof Error?r.message:"An unexpected error occurred")}});ke("inspirationalImages/fetchImagesPaginated",async(t,{rejectWithValue:e})=>{try{const{page:r=1,pageSize:n=20,filters:s={}}=t,i=await JB.getInspirationImagesPaginated(r,n,s);return i.success&&i.data?{images:i.data.data,pagination:{page:i.data.currentPage,pageSize:n,total:i.data.count,totalPages:i.data.totalPages,hasMore:i.data.hasMore},message:i.message}:e(i.error||"Failed to fetch inspirational images")}catch(r){return e(r instanceof Error?r.message:"An unexpected error occurred")}});const Ste=Cn({name:"inspirationalImages",initialState:F1,reducers:{setSearchQuery:(t,e)=>{t.searchQuery=e.payload},setSelectedImageId:(t,e)=>{t.selectedImageId=e.payload},setSelectedColorFamilyId:(t,e)=>{t.selectedColorFamilyId=e.payload},setStatusFilter:(t,e)=>{t.statusFilter=e.payload},clearImages:t=>{t.Inspirational_images=[],t.pagination=F1.pagination},clearError:t=>{t.error=null},resetState:()=>F1},extraReducers:t=>{t.addCase(Ry.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Ry.fulfilled,(e,r)=>{e.isLoading=!1,e.Inspirational_images=r.payload.images,e.error=null}).addCase(Ry.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload})}}),_te=Ste.reducer;function ZB(t,e){return function(){return t.apply(e,arguments)}}const{toString:Cte}=Object.prototype,{getPrototypeOf:HT}=Object,{iterator:Nx,toStringTag:QB}=Symbol,Rx=(t=>e=>{const r=Cte.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Vi=t=>(t=t.toLowerCase(),e=>Rx(e)===t),Ox=t=>e=>typeof e===t,{isArray:ph}=Array,$p=Ox("undefined");function Ete(t){return t!==null&&!$p(t)&&t.constructor!==null&&!$p(t.constructor)&&is(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const e5=Vi("ArrayBuffer");function kte(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&e5(t.buffer),e}const Tte=Ox("string"),is=Ox("function"),t5=Ox("number"),Mx=t=>t!==null&&typeof t=="object",jte=t=>t===!0||t===!1,Oy=t=>{if(Rx(t)!=="object")return!1;const e=HT(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(QB in t)&&!(Nx in t)},Ate=Vi("Date"),Pte=Vi("File"),Nte=Vi("Blob"),Rte=Vi("FileList"),Ote=t=>Mx(t)&&is(t.pipe),Mte=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||is(t.append)&&((e=Rx(t))==="formdata"||e==="object"&&is(t.toString)&&t.toString()==="[object FormData]"))},Ite=Vi("URLSearchParams"),[Dte,Fte,Lte,Bte]=["ReadableStream","Request","Response","Headers"].map(Vi),$te=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _g(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),ph(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{const i=r?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(n=0;n<o;n++)a=i[n],e.call(null,t[a],a,t)}}function r5(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,s;for(;n-- >0;)if(s=r[n],e===s.toLowerCase())return s;return null}const cc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,n5=t=>!$p(t)&&t!==cc;function XC(){const{caseless:t}=n5(this)&&this||{},e={},r=(n,s)=>{const i=t&&r5(e,s)||s;Oy(e[i])&&Oy(n)?e[i]=XC(e[i],n):Oy(n)?e[i]=XC({},n):ph(n)?e[i]=n.slice():e[i]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&_g(arguments[n],r);return e}const Ute=(t,e,r,{allOwnKeys:n}={})=>(_g(e,(s,i)=>{r&&is(s)?t[i]=ZB(s,r):t[i]=s},{allOwnKeys:n}),t),Vte=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),zte=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Hte=(t,e,r,n)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&HT(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},Wte=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},qte=t=>{if(!t)return null;if(ph(t))return t;let e=t.length;if(!t5(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},Gte=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&HT(Uint8Array)),Kte=(t,e)=>{const n=(t&&t[Nx]).call(t);let s;for(;(s=n.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},Yte=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},Xte=Vi("HTMLFormElement"),Jte=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),AR=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),Zte=Vi("RegExp"),s5=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};_g(r,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(n[i]=o||s)}),Object.defineProperties(t,n)},Qte=t=>{s5(t,(e,r)=>{if(is(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(is(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},ere=(t,e)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return ph(t)?n(t):n(String(t).split(e)),r},tre=()=>{},rre=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function nre(t){return!!(t&&is(t.append)&&t[QB]==="FormData"&&t[Nx])}const sre=t=>{const e=new Array(10),r=(n,s)=>{if(Mx(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;const i=ph(n)?[]:{};return _g(n,(o,a)=>{const l=r(o,s+1);!$p(l)&&(i[a]=l)}),e[s]=void 0,i}}return n};return r(t,0)},ire=Vi("AsyncFunction"),ore=t=>t&&(Mx(t)||is(t))&&is(t.then)&&is(t.catch),i5=((t,e)=>t?setImmediate:e?((r,n)=>(cc.addEventListener("message",({source:s,data:i})=>{s===cc&&i===r&&n.length&&n.shift()()},!1),s=>{n.push(s),cc.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",is(cc.postMessage)),are=typeof queueMicrotask<"u"?queueMicrotask.bind(cc):typeof process<"u"&&process.nextTick||i5,lre=t=>t!=null&&is(t[Nx]),te={isArray:ph,isArrayBuffer:e5,isBuffer:Ete,isFormData:Mte,isArrayBufferView:kte,isString:Tte,isNumber:t5,isBoolean:jte,isObject:Mx,isPlainObject:Oy,isReadableStream:Dte,isRequest:Fte,isResponse:Lte,isHeaders:Bte,isUndefined:$p,isDate:Ate,isFile:Pte,isBlob:Nte,isRegExp:Zte,isFunction:is,isStream:Ote,isURLSearchParams:Ite,isTypedArray:Gte,isFileList:Rte,forEach:_g,merge:XC,extend:Ute,trim:$te,stripBOM:Vte,inherits:zte,toFlatObject:Hte,kindOf:Rx,kindOfTest:Vi,endsWith:Wte,toArray:qte,forEachEntry:Kte,matchAll:Yte,isHTMLForm:Xte,hasOwnProperty:AR,hasOwnProp:AR,reduceDescriptors:s5,freezeMethods:Qte,toObjectSet:ere,toCamelCase:Jte,noop:tre,toFiniteNumber:rre,findKey:r5,global:cc,isContextDefined:n5,isSpecCompliantForm:nre,toJSONObject:sre,isAsyncFn:ire,isThenable:ore,setImmediate:i5,asap:are,isIterable:lre};function it(t,e,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}te.inherits(it,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:te.toJSONObject(this.config),code:this.code,status:this.status}}});const o5=it.prototype,a5={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{a5[t]={value:t}});Object.defineProperties(it,a5);Object.defineProperty(o5,"isAxiosError",{value:!0});it.from=(t,e,r,n,s,i)=>{const o=Object.create(o5);return te.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),it.call(o,t.message,e,r,n,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const cre=null;function JC(t){return te.isPlainObject(t)||te.isArray(t)}function l5(t){return te.endsWith(t,"[]")?t.slice(0,-2):t}function PR(t,e,r){return t?t.concat(e).map(function(s,i){return s=l5(s),!r&&i?"["+s+"]":s}).join(r?".":""):e}function ure(t){return te.isArray(t)&&!t.some(JC)}const dre=te.toFlatObject(te,{},null,function(e){return/^is[A-Z]/.test(e)});function Ix(t,e,r){if(!te.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=te.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,v){return!te.isUndefined(v[y])});const n=r.metaTokens,s=r.visitor||d,i=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&te.isSpecCompliantForm(e);if(!te.isFunction(s))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(te.isDate(g))return g.toISOString();if(te.isBoolean(g))return g.toString();if(!l&&te.isBlob(g))throw new it("Blob is not supported. Use a Buffer instead.");return te.isArrayBuffer(g)||te.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function d(g,y,v){let m=g;if(g&&!v&&typeof g=="object"){if(te.endsWith(y,"{}"))y=n?y:y.slice(0,-2),g=JSON.stringify(g);else if(te.isArray(g)&&ure(g)||(te.isFileList(g)||te.endsWith(y,"[]"))&&(m=te.toArray(g)))return y=l5(y),m.forEach(function(b,_){!(te.isUndefined(b)||b===null)&&e.append(o===!0?PR([y],_,i):o===null?y:y+"[]",c(b))}),!1}return JC(g)?!0:(e.append(PR(v,y,i),c(g)),!1)}const h=[],f=Object.assign(dre,{defaultVisitor:d,convertValue:c,isVisitable:JC});function p(g,y){if(!te.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+y.join("."));h.push(g),te.forEach(g,function(m,x){(!(te.isUndefined(m)||m===null)&&s.call(e,m,te.isString(x)?x.trim():x,y,f))===!0&&p(m,y?y.concat(x):[x])}),h.pop()}}if(!te.isObject(t))throw new TypeError("data must be an object");return p(t),e}function NR(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function WT(t,e){this._pairs=[],t&&Ix(t,this,e)}const c5=WT.prototype;c5.append=function(e,r){this._pairs.push([e,r])};c5.toString=function(e){const r=e?function(n){return e.call(this,n,NR)}:NR;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function hre(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function u5(t,e,r){if(!e)return t;const n=r&&r.encode||hre;te.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(s?i=s(e,r):i=te.isURLSearchParams(e)?e.toString():new WT(e,r).toString(n),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class RR{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){te.forEach(this.handlers,function(n){n!==null&&e(n)})}}const d5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},fre=typeof URLSearchParams<"u"?URLSearchParams:WT,pre=typeof FormData<"u"?FormData:null,gre=typeof Blob<"u"?Blob:null,mre={isBrowser:!0,classes:{URLSearchParams:fre,FormData:pre,Blob:gre},protocols:["http","https","file","blob","url","data"]},qT=typeof window<"u"&&typeof document<"u",ZC=typeof navigator=="object"&&navigator||void 0,yre=qT&&(!ZC||["ReactNative","NativeScript","NS"].indexOf(ZC.product)<0),vre=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",xre=qT&&window.location.href||"http://localhost",wre=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:qT,hasStandardBrowserEnv:yre,hasStandardBrowserWebWorkerEnv:vre,navigator:ZC,origin:xre},Symbol.toStringTag,{value:"Module"})),xn={...wre,...mre};function bre(t,e){return Ix(t,new xn.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,i){return xn.isNode&&te.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function Sre(t){return te.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function _re(t){const e={},r=Object.keys(t);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],e[i]=t[i];return e}function h5(t){function e(r,n,s,i){let o=r[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=r.length;return o=!o&&te.isArray(s)?s.length:o,l?(te.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!a):((!s[o]||!te.isObject(s[o]))&&(s[o]=[]),e(r,n,s[o],i)&&te.isArray(s[o])&&(s[o]=_re(s[o])),!a)}if(te.isFormData(t)&&te.isFunction(t.entries)){const r={};return te.forEachEntry(t,(n,s)=>{e(Sre(n),s,r,0)}),r}return null}function Cre(t,e,r){if(te.isString(t))try{return(e||JSON.parse)(t),te.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(t)}const Cg={transitional:d5,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=te.isObject(e);if(i&&te.isHTMLForm(e)&&(e=new FormData(e)),te.isFormData(e))return s?JSON.stringify(h5(e)):e;if(te.isArrayBuffer(e)||te.isBuffer(e)||te.isStream(e)||te.isFile(e)||te.isBlob(e)||te.isReadableStream(e))return e;if(te.isArrayBufferView(e))return e.buffer;if(te.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return bre(e,this.formSerializer).toString();if((a=te.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ix(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),Cre(e)):e}],transformResponse:[function(e){const r=this.transitional||Cg.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(te.isResponse(e)||te.isReadableStream(e))return e;if(e&&te.isString(e)&&(n&&!this.responseType||s)){const o=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?it.from(a,it.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xn.classes.FormData,Blob:xn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};te.forEach(["delete","get","head","post","put","patch"],t=>{Cg.headers[t]={}});const Ere=te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),kre=t=>{const e={};let r,n,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),r=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!r||e[r]&&Ere[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},OR=Symbol("internals");function Jh(t){return t&&String(t).trim().toLowerCase()}function My(t){return t===!1||t==null?t:te.isArray(t)?t.map(My):String(t)}function Tre(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const jre=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function L1(t,e,r,n,s){if(te.isFunction(n))return n.call(this,e,r);if(s&&(e=r),!!te.isString(e)){if(te.isString(n))return e.indexOf(n)!==-1;if(te.isRegExp(n))return n.test(e)}}function Are(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function Pre(t,e){const r=te.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(s,i,o){return this[n].call(this,e,s,i,o)},configurable:!0})})}class os{constructor(e){e&&this.set(e)}set(e,r,n){const s=this;function i(a,l,c){const d=Jh(l);if(!d)throw new Error("header name must be a non-empty string");const h=te.findKey(s,d);(!h||s[h]===void 0||c===!0||c===void 0&&s[h]!==!1)&&(s[h||l]=My(a))}const o=(a,l)=>te.forEach(a,(c,d)=>i(c,d,l));if(te.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(te.isString(e)&&(e=e.trim())&&!jre(e))o(kre(e),r);else if(te.isObject(e)&&te.isIterable(e)){let a={},l,c;for(const d of e){if(!te.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[c=d[0]]=(l=a[c])?te.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}o(a,r)}else e!=null&&i(r,e,n);return this}get(e,r){if(e=Jh(e),e){const n=te.findKey(this,e);if(n){const s=this[n];if(!r)return s;if(r===!0)return Tre(s);if(te.isFunction(r))return r.call(this,s,n);if(te.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Jh(e),e){const n=te.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||L1(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let s=!1;function i(o){if(o=Jh(o),o){const a=te.findKey(n,o);a&&(!r||L1(n,n[a],a,r))&&(delete n[a],s=!0)}}return te.isArray(e)?e.forEach(i):i(e),s}clear(e){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!e||L1(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const r=this,n={};return te.forEach(this,(s,i)=>{const o=te.findKey(n,i);if(o){r[o]=My(s),delete r[i];return}const a=e?Are(i):String(i).trim();a!==i&&delete r[i],r[a]=My(s),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return te.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=e&&te.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[OR]=this[OR]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=Jh(o);n[a]||(Pre(s,o),n[a]=!0)}return te.isArray(e)?e.forEach(i):i(e),this}}os.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);te.reduceDescriptors(os.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});te.freezeMethods(os);function B1(t,e){const r=this||Cg,n=e||r,s=os.from(n.headers);let i=n.data;return te.forEach(t,function(a){i=a.call(r,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function f5(t){return!!(t&&t.__CANCEL__)}function gh(t,e,r){it.call(this,t??"canceled",it.ERR_CANCELED,e,r),this.name="CanceledError"}te.inherits(gh,it,{__CANCEL__:!0});function p5(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new it("Request failed with status code "+r.status,[it.ERR_BAD_REQUEST,it.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Nre(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Rre(t,e){t=t||10;const r=new Array(t),n=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=n[i];o||(o=c),r[s]=l,n[s]=c;let h=i,f=0;for(;h!==s;)f+=r[h++],h=h%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const p=d&&c-d;return p?Math.round(f*1e3/p):void 0}}function Ore(t,e){let r=0,n=1e3/e,s,i;const o=(c,d=Date.now())=>{r=d,s=null,i&&(clearTimeout(i),i=null),t.apply(null,c)};return[(...c)=>{const d=Date.now(),h=d-r;h>=n?o(c,d):(s=c,i||(i=setTimeout(()=>{i=null,o(s)},n-h)))},()=>s&&o(s)]}const F0=(t,e,r=3)=>{let n=0;const s=Rre(50,250);return Ore(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-n,c=s(l),d=o<=a;n=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&d?(a-o)/c:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},r)},MR=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},IR=t=>(...e)=>te.asap(()=>t(...e)),Mre=xn.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,xn.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(xn.origin),xn.navigator&&/(msie|trident)/i.test(xn.navigator.userAgent)):()=>!0,Ire=xn.hasStandardBrowserEnv?{write(t,e,r,n,s,i){const o=[t+"="+encodeURIComponent(e)];te.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),te.isString(n)&&o.push("path="+n),te.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Dre(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Fre(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function g5(t,e,r){let n=!Dre(e);return t&&(n||r==!1)?Fre(t,e):e}const DR=t=>t instanceof os?{...t}:t;function Dc(t,e){e=e||{};const r={};function n(c,d,h,f){return te.isPlainObject(c)&&te.isPlainObject(d)?te.merge.call({caseless:f},c,d):te.isPlainObject(d)?te.merge({},d):te.isArray(d)?d.slice():d}function s(c,d,h,f){if(te.isUndefined(d)){if(!te.isUndefined(c))return n(void 0,c,h,f)}else return n(c,d,h,f)}function i(c,d){if(!te.isUndefined(d))return n(void 0,d)}function o(c,d){if(te.isUndefined(d)){if(!te.isUndefined(c))return n(void 0,c)}else return n(void 0,d)}function a(c,d,h){if(h in e)return n(c,d);if(h in t)return n(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d,h)=>s(DR(c),DR(d),h,!0)};return te.forEach(Object.keys(Object.assign({},t,e)),function(d){const h=l[d]||s,f=h(t[d],e[d],d);te.isUndefined(f)&&h!==a||(r[d]=f)}),r}const m5=t=>{const e=Dc({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;e.headers=o=os.from(o),e.url=u5(g5(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(te.isFormData(r)){if(xn.hasStandardBrowserEnv||xn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...d]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...d].join("; "))}}if(xn.hasStandardBrowserEnv&&(n&&te.isFunction(n)&&(n=n(e)),n||n!==!1&&Mre(e.url))){const c=s&&i&&Ire.read(i);c&&o.set(s,c)}return e},Lre=typeof XMLHttpRequest<"u",Bre=Lre&&function(t){return new Promise(function(r,n){const s=m5(t);let i=s.data;const o=os.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,d,h,f,p,g;function y(){p&&p(),g&&g(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let v=new XMLHttpRequest;v.open(s.method.toUpperCase(),s.url,!0),v.timeout=s.timeout;function m(){if(!v)return;const b=os.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),C={data:!a||a==="text"||a==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:b,config:t,request:v};p5(function(O){r(O),y()},function(O){n(O),y()},C),v=null}"onloadend"in v?v.onloadend=m:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(m)},v.onabort=function(){v&&(n(new it("Request aborted",it.ECONNABORTED,t,v)),v=null)},v.onerror=function(){n(new it("Network Error",it.ERR_NETWORK,t,v)),v=null},v.ontimeout=function(){let _=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const C=s.transitional||d5;s.timeoutErrorMessage&&(_=s.timeoutErrorMessage),n(new it(_,C.clarifyTimeoutError?it.ETIMEDOUT:it.ECONNABORTED,t,v)),v=null},i===void 0&&o.setContentType(null),"setRequestHeader"in v&&te.forEach(o.toJSON(),function(_,C){v.setRequestHeader(C,_)}),te.isUndefined(s.withCredentials)||(v.withCredentials=!!s.withCredentials),a&&a!=="json"&&(v.responseType=s.responseType),c&&([f,g]=F0(c,!0),v.addEventListener("progress",f)),l&&v.upload&&([h,p]=F0(l),v.upload.addEventListener("progress",h),v.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(d=b=>{v&&(n(!b||b.type?new gh(null,t,v):b),v.abort(),v=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const x=Nre(s.url);if(x&&xn.protocols.indexOf(x)===-1){n(new it("Unsupported protocol "+x+":",it.ERR_BAD_REQUEST,t));return}v.send(i||null)})},$re=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,s;const i=function(c){if(!s){s=!0,a();const d=c instanceof Error?c:this.reason;n.abort(d instanceof it?d:new gh(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,i(new it(`timeout ${e} of ms exceeded`,it.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),t=null)};t.forEach(c=>c.addEventListener("abort",i));const{signal:l}=n;return l.unsubscribe=()=>te.asap(a),l}},Ure=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,s;for(;n<r;)s=n+e,yield t.slice(n,s),n=s},Vre=async function*(t,e){for await(const r of zre(t))yield*Ure(r,e)},zre=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},FR=(t,e,r,n)=>{const s=Vre(t,e);let i=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await s.next();if(c){a(),l.close();return}let h=d.byteLength;if(r){let f=i+=h;r(f)}l.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},Dx=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",y5=Dx&&typeof ReadableStream=="function",Hre=Dx&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),v5=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Wre=y5&&v5(()=>{let t=!1;const e=new Request(xn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),LR=64*1024,QC=y5&&v5(()=>te.isReadableStream(new Response("").body)),L0={stream:QC&&(t=>t.body)};Dx&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!L0[e]&&(L0[e]=te.isFunction(t[e])?r=>r[e]():(r,n)=>{throw new it(`Response type '${e}' is not supported`,it.ERR_NOT_SUPPORT,n)})})})(new Response);const qre=async t=>{if(t==null)return 0;if(te.isBlob(t))return t.size;if(te.isSpecCompliantForm(t))return(await new Request(xn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(te.isArrayBufferView(t)||te.isArrayBuffer(t))return t.byteLength;if(te.isURLSearchParams(t)&&(t=t+""),te.isString(t))return(await Hre(t)).byteLength},Gre=async(t,e)=>{const r=te.toFiniteNumber(t.getContentLength());return r??qre(e)},Kre=Dx&&(async t=>{let{url:e,method:r,data:n,signal:s,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:d,withCredentials:h="same-origin",fetchOptions:f}=m5(t);c=c?(c+"").toLowerCase():"text";let p=$re([s,i&&i.toAbortSignal()],o),g;const y=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let v;try{if(l&&Wre&&r!=="get"&&r!=="head"&&(v=await Gre(d,n))!==0){let C=new Request(e,{method:"POST",body:n,duplex:"half"}),T;if(te.isFormData(n)&&(T=C.headers.get("content-type"))&&d.setContentType(T),C.body){const[O,R]=MR(v,F0(IR(l)));n=FR(C.body,LR,O,R)}}te.isString(h)||(h=h?"include":"omit");const m="credentials"in Request.prototype;g=new Request(e,{...f,signal:p,method:r.toUpperCase(),headers:d.normalize().toJSON(),body:n,duplex:"half",credentials:m?h:void 0});let x=await fetch(g,f);const b=QC&&(c==="stream"||c==="response");if(QC&&(a||b&&y)){const C={};["status","statusText","headers"].forEach(I=>{C[I]=x[I]});const T=te.toFiniteNumber(x.headers.get("content-length")),[O,R]=a&&MR(T,F0(IR(a),!0))||[];x=new Response(FR(x.body,LR,O,()=>{R&&R(),y&&y()}),C)}c=c||"text";let _=await L0[te.findKey(L0,c)||"text"](x,t);return!b&&y&&y(),await new Promise((C,T)=>{p5(C,T,{data:_,headers:os.from(x.headers),status:x.status,statusText:x.statusText,config:t,request:g})})}catch(m){throw y&&y(),m&&m.name==="TypeError"&&/Load failed|fetch/i.test(m.message)?Object.assign(new it("Network Error",it.ERR_NETWORK,t,g),{cause:m.cause||m}):it.from(m,m&&m.code,t,g)}}),eE={http:cre,xhr:Bre,fetch:Kre};te.forEach(eE,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const BR=t=>`- ${t}`,Yre=t=>te.isFunction(t)||t===null||t===!1,x5={getAdapter:t=>{t=te.isArray(t)?t:[t];const{length:e}=t;let r,n;const s={};for(let i=0;i<e;i++){r=t[i];let o;if(n=r,!Yre(r)&&(n=eE[(o=String(r)).toLowerCase()],n===void 0))throw new it(`Unknown adapter '${o}'`);if(n)break;s[o||"#"+i]=n}if(!n){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(BR).join(`
`):" "+BR(i[0]):"as no adapter specified";throw new it("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:eE};function $1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new gh(null,t)}function $R(t){return $1(t),t.headers=os.from(t.headers),t.data=B1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),x5.getAdapter(t.adapter||Cg.adapter)(t).then(function(n){return $1(t),n.data=B1.call(t,t.transformResponse,n),n.headers=os.from(n.headers),n},function(n){return f5(n)||($1(t),n&&n.response&&(n.response.data=B1.call(t,t.transformResponse,n.response),n.response.headers=os.from(n.response.headers))),Promise.reject(n)})}const w5="1.10.0",Fx={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Fx[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const UR={};Fx.transitional=function(e,r,n){function s(i,o){return"[Axios v"+w5+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,a)=>{if(e===!1)throw new it(s(o," has been removed"+(r?" in "+r:"")),it.ERR_DEPRECATED);return r&&!UR[o]&&(UR[o]=!0,console.warn(s(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,o,a):!0}};Fx.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function Xre(t,e,r){if(typeof t!="object")throw new it("options must be an object",it.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const i=n[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new it("option "+i+" must be "+l,it.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new it("Unknown option "+i,it.ERR_BAD_OPTION)}}const Iy={assertOptions:Xre,validators:Fx},Gi=Iy.validators;class xc{constructor(e){this.defaults=e||{},this.interceptors={request:new RR,response:new RR}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Dc(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&Iy.assertOptions(n,{silentJSONParsing:Gi.transitional(Gi.boolean),forcedJSONParsing:Gi.transitional(Gi.boolean),clarifyTimeoutError:Gi.transitional(Gi.boolean)},!1),s!=null&&(te.isFunction(s)?r.paramsSerializer={serialize:s}:Iy.assertOptions(s,{encode:Gi.function,serialize:Gi.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Iy.assertOptions(r,{baseUrl:Gi.spelling("baseURL"),withXsrfToken:Gi.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&te.merge(i.common,i[r.method]);i&&te.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),r.headers=os.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let d,h=0,f;if(!l){const g=[$R.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),f=g.length,d=Promise.resolve(r);h<f;)d=d.then(g[h++],g[h++]);return d}f=a.length;let p=r;for(h=0;h<f;){const g=a[h++],y=a[h++];try{p=g(p)}catch(v){y.call(this,v);break}}try{d=$R.call(this,p)}catch(g){return Promise.reject(g)}for(h=0,f=c.length;h<f;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=Dc(this.defaults,e);const r=g5(e.baseURL,e.url,e.allowAbsoluteUrls);return u5(r,e.params,e.paramsSerializer)}}te.forEach(["delete","get","head","options"],function(e){xc.prototype[e]=function(r,n){return this.request(Dc(n||{},{method:e,url:r,data:(n||{}).data}))}});te.forEach(["post","put","patch"],function(e){function r(n){return function(i,o,a){return this.request(Dc(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}xc.prototype[e]=r(),xc.prototype[e+"Form"]=r(!0)});class GT{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{n.subscribe(a),i=a}).then(s);return o.cancel=function(){n.unsubscribe(i)},o},e(function(i,o,a){n.reason||(n.reason=new gh(i,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new GT(function(s){e=s}),cancel:e}}}function Jre(t){return function(r){return t.apply(null,r)}}function Zre(t){return te.isObject(t)&&t.isAxiosError===!0}const tE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(tE).forEach(([t,e])=>{tE[e]=t});function b5(t){const e=new xc(t),r=ZB(xc.prototype.request,e);return te.extend(r,xc.prototype,e,{allOwnKeys:!0}),te.extend(r,e,null,{allOwnKeys:!0}),r.create=function(s){return b5(Dc(t,s))},r}const kr=b5(Cg);kr.Axios=xc;kr.CanceledError=gh;kr.CancelToken=GT;kr.isCancel=f5;kr.VERSION=w5;kr.toFormData=Ix;kr.AxiosError=it;kr.Cancel=kr.CanceledError;kr.all=function(e){return Promise.all(e)};kr.spread=Jre;kr.isAxiosError=Zre;kr.mergeConfig=Dc;kr.AxiosHeaders=os;kr.formToJSON=t=>h5(te.isHTMLForm(t)?new FormData(t):t);kr.getAdapter=x5.getAdapter;kr.HttpStatusCode=tE;kr.default=kr;const rE=kr.create({baseURL:"/api",timeout:1e4,headers:{"Content-Type":"application/json"}});rE.interceptors.request.use(t=>{const r=to.getState().auth.accessToken;return r&&t.headers&&(t.headers.Authorization=`Bearer ${r}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));rE.interceptors.response.use(t=>t,async t=>{var r,n,s,i,o;const e=t.config;if(((r=t.response)==null?void 0:r.status)===401&&!e._retry)if(e._retry=!0,to.getState().auth.refreshToken)try{const c=await to.dispatch(R0());if(R0.fulfilled.match(c)){const h=to.getState().auth.accessToken;if(h&&e.headers)return e.headers.Authorization=`Bearer ${h}`,rE(e)}}catch(c){return to.dispatch(M0()),window.location.href="/login",Promise.reject(c)}else to.dispatch(M0()),window.location.href="/login";return((n=t.response)==null?void 0:n.status)===403?(console.error("Access forbidden - insufficient permissions"),Promise.reject(new Error("You do not have permission to access this resource"))):(((s=t.response)==null?void 0:s.status)===404?console.error("Resource not found"):(i=t.response)!=null&&i.status&&((o=t.response)==null?void 0:o.status)>=500&&console.error("Server error - please try again later"),t.response?Promise.reject(t):(console.error("Network error - please check your connection"),Promise.reject(new Error("Network error - please check your connection"))))});const Qre=t=>to.getState().auth.isAuthenticated,ene=t=>to.getState().auth.isAuthenticated,tne=({getState:t})=>e=>r=>{const n=e(r);return typeof r=="object"&&r!==null&&"type"in r&&typeof r.type=="string"&&r.type.startsWith("auth/")&&(t(),r.type==="auth/initializeAuth/rejected"&&("payload"in r&&r.payload==="Auth session missing!"||console.error(" Auth initialization failed:","payload"in r?r.payload:"Unknown error"))),n},rne=({dispatch:t})=>e=>r=>{if(typeof r=="object"&&r!==null&&"type"in r&&typeof r.type=="string"&&r.type.endsWith("/rejected")&&"payload"in r){const n=r.payload;n==="Auth session missing!"||typeof n=="string"&&(n.includes("Network error")?console.error("Network connectivity issue detected"):n.includes("401")||n.includes("Unauthorized")?t(M0()):(n.includes("403")||n.includes("Forbidden"))&&(console.error("Access denied - redirecting to projects"),window.location.href="/projects"))}return e(r)};class nne{static async getAllPlans(e){try{let r=fe.from("plan_features").select("*");(e==null?void 0:e.is_active)!==void 0&&(r=r.eq("is_active",e.is_active));const n=(e==null?void 0:e.sort_by)||"sort_order",s=(e==null?void 0:e.sort_direction)||"asc";r=r.order(n,{ascending:s==="asc"});const{data:i,error:o}=await r;if(o)throw console.error("Error fetching subscription plans:",o),new Error(`Failed to fetch subscription plans: ${o.message}`);return i||[]}catch(r){throw console.error("Error in getAllPlans:",r),r}}}class sne{static async getAllPlans(e){try{const r=await nne.getAllPlans(e);return console.log("SubscriptionPlanService - getAllPlans:",r.length,"plans fetched"),r}catch(r){throw console.error("SubscriptionPlanService - getAllPlans error:",r),r}}}const VR={subscriptionalPlans:[],activePlans:[],currentPlan:null,plansGroupedByType:{},isLoading:!1,isLoadingActivePlans:!1,isLoadingCurrentPlan:!1,isLoadingGroupedPlans:!1,error:null,activeError:null,currentPlanError:null,groupedPlansError:null,lastFetched:null},Dy=ke("subscriptionPlan/fetchAllPlans",async(t,{rejectWithValue:e})=>{try{console.log("Redux fetchAllSubscriptionPlans - Starting with filters:",t);const r=await sne.getAllPlans(t);return console.log("Redux fetchAllSubscriptionPlans - Fetched plans:",r.length),r}catch(r){console.error("Redux fetchAllSubscriptionPlans - Error:",r);const n=r instanceof Error?r.message:"Failed to fetch subscription plans";return e(n)}}),ine=Cn({name:"subscriptionPlan",initialState:VR,reducers:{clearErrors:t=>{t.error=null,t.activeError=null,t.currentPlanError=null,t.groupedPlansError=null},clearCurrentPlan:t=>{t.currentPlan=null,t.currentPlanError=null},resetSubscriptionPlanState:()=>VR,setCurrentPlan:(t,e)=>{t.currentPlan=e.payload,t.currentPlanError=null}},extraReducers:t=>{t.addCase(Dy.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Dy.fulfilled,(e,r)=>{e.isLoading=!1,e.subscriptionalPlans=r.payload,e.error=null,e.lastFetched=Date.now()}).addCase(Dy.rejected,(e,r)=>{e.isLoading=!1,e.error=r.payload,e.subscriptionalPlans=[]})}}),one=ine.reducer,to=sJ({reducer:{auth:HQ,userProfile:KQ,projects:bee,studio:Oee,segments:Hee,materials:Gee,materialSegments:Zee,jobs:nte,activityLogs:ite,swatches:ute,categories:hte,brands:gte,styles:vte,inspirationalColors:bte,inspirationalImages:_te,subscriptionPlan:one},middleware:t=>t({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"],ignoredPaths:["studio.uploadedImageFile"]}}).concat(tne,rne),devTools:!1}),ane=LT([t=>t.swatches.swatches,t=>t.studio.selectedSegmentType],(t,e)=>e?t.filter(r=>r.segment_types.includes(e)):[]);LT([ane],t=>t.reduce((e,r)=>{const n=r.category;return e[n]||(e[n]=[]),e[n].push(r),e},{}));const KT=w.createContext({});function YT(t){const e=w.useRef(null);return e.current===null&&(e.current=t()),e.current}const Lx=w.createContext(null),XT=w.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class lne extends w.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function cne({children:t,isPresent:e}){const r=w.useId(),n=w.useRef(null),s=w.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=w.useContext(XT);return w.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=s.current;if(e||!n.current||!o||!a)return;n.current.dataset.motionPopId=r;const d=document.createElement("style");return i&&(d.nonce=i),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),u.jsx(lne,{isPresent:e,childRef:n,sizeRef:s,children:w.cloneElement(t,{ref:n})})}const une=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=YT(dne),l=w.useId(),c=w.useCallback(h=>{a.set(h,!0);for(const f of a.values())if(!f)return;n&&n()},[a,n]),d=w.useMemo(()=>({id:l,initial:e,isPresent:r,custom:s,onExitComplete:c,register:h=>(a.set(h,!1),()=>a.delete(h))}),i?[Math.random(),c]:[r,c]);return w.useMemo(()=>{a.forEach((h,f)=>a.set(f,!1))},[r]),w.useEffect(()=>{!r&&!a.size&&n&&n()},[r]),o==="popLayout"&&(t=u.jsx(cne,{isPresent:r,children:t})),u.jsx(Lx.Provider,{value:d,children:t})};function dne(){return new Map}function S5(t=!0){const e=w.useContext(Lx);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=e,i=w.useId();w.useEffect(()=>{t&&s(i)},[t]);const o=w.useCallback(()=>t&&n&&n(i),[i,n,t]);return!r&&n?[!1,o]:[!0]}const km=t=>t.key||"";function zR(t){const e=[];return w.Children.forEach(t,r=>{w.isValidElement(r)&&e.push(r)}),e}const JT=typeof window<"u",_5=JT?w.useLayoutEffect:w.useEffect,hl=({children:t,custom:e,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1})=>{const[a,l]=S5(o),c=w.useMemo(()=>zR(t),[t]),d=o&&!a?[]:c.map(km),h=w.useRef(!0),f=w.useRef(c),p=YT(()=>new Map),[g,y]=w.useState(c),[v,m]=w.useState(c);_5(()=>{h.current=!1,f.current=c;for(let _=0;_<v.length;_++){const C=km(v[_]);d.includes(C)?p.delete(C):p.get(C)!==!0&&p.set(C,!1)}},[v,d.length,d.join("-")]);const x=[];if(c!==g){let _=[...c];for(let C=0;C<v.length;C++){const T=v[C],O=km(T);d.includes(O)||(_.splice(C,0,T),x.push(T))}i==="wait"&&x.length&&(_=x),m(zR(_)),y(c);return}const{forceRender:b}=w.useContext(KT);return u.jsx(u.Fragment,{children:v.map(_=>{const C=km(_),T=o&&!a?!1:c===v||d.includes(C),O=()=>{if(p.has(C))p.set(C,!0);else return;let R=!0;p.forEach(I=>{I||(R=!1)}),R&&(b==null||b(),m(f.current),o&&(l==null||l()),n&&n())};return u.jsx(une,{isPresent:T,initial:!h.current||r?void 0:!1,custom:T?void 0:e,presenceAffectsLayout:s,mode:i,onExitComplete:T?void 0:O,children:_},C)})})},Es=t=>t;let nE=Es;function ZT(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ld=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n},Go=t=>t*1e3,Ko=t=>t/1e3,hne={skipAnimations:!1,useManualTiming:!1};function fne(t){let e=new Set,r=new Set,n=!1,s=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){i.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,d=!1,h=!1)=>{const p=h&&n?e:r;return d&&i.add(c),p.has(c)||p.add(c),c},cancel:c=>{r.delete(c),i.delete(c)},process:c=>{if(o=c,n){s=!0;return}n=!0,[e,r]=[r,e],e.forEach(a),e.clear(),n=!1,s&&(s=!1,l.process(c))}};return l}const Tm=["read","resolveKeyframes","update","preRender","render","postRender"],pne=40;function C5(t,e){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=Tm.reduce((m,x)=>(m[x]=fne(i),m),{}),{read:a,resolveKeyframes:l,update:c,preRender:d,render:h,postRender:f}=o,p=()=>{const m=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(m-s.timestamp,pne),1),s.timestamp=m,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),d.process(s),h.process(s),f.process(s),s.isProcessing=!1,r&&e&&(n=!1,t(p))},g=()=>{r=!0,n=!0,s.isProcessing||t(p)};return{schedule:Tm.reduce((m,x)=>{const b=o[x];return m[x]=(_,C=!1,T=!1)=>(r||g(),b.schedule(_,C,T)),m},{}),cancel:m=>{for(let x=0;x<Tm.length;x++)o[Tm[x]].cancel(m)},state:s,steps:o}}const{schedule:Wt,cancel:fl,state:tn,steps:U1}=C5(typeof requestAnimationFrame<"u"?requestAnimationFrame:Es,!0),E5=w.createContext({strict:!1}),HR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bd={};for(const t in HR)Bd[t]={isEnabled:e=>HR[t].some(r=>!!e[r])};function gne(t){for(const e in t)Bd[e]={...Bd[e],...t[e]}}const mne=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function B0(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||mne.has(t)}let k5=t=>!B0(t);function yne(t){t&&(k5=e=>e.startsWith("on")?!B0(e):t(e))}try{yne(require("@emotion/is-prop-valid").default)}catch{}function vne(t,e,r){const n={};for(const s in t)s==="values"&&typeof t.values=="object"||(k5(s)||r===!0&&B0(s)||!e&&!B0(s)||t.draggable&&s.startsWith("onDrag"))&&(n[s]=t[s]);return n}function xne(t){if(typeof Proxy>"u")return t;const e=new Map,r=(...n)=>t(...n);return new Proxy(r,{get:(n,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const Bx=w.createContext({});function Up(t){return typeof t=="string"||Array.isArray(t)}function $x(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const QT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],e2=["initial",...QT];function Ux(t){return $x(t.animate)||e2.some(e=>Up(t[e]))}function T5(t){return!!(Ux(t)||t.variants)}function wne(t,e){if(Ux(t)){const{initial:r,animate:n}=t;return{initial:r===!1||Up(r)?r:void 0,animate:Up(n)?n:void 0}}return t.inherit!==!1?e:{}}function bne(t){const{initial:e,animate:r}=wne(t,w.useContext(Bx));return w.useMemo(()=>({initial:e,animate:r}),[WR(e),WR(r)])}function WR(t){return Array.isArray(t)?t.join(" "):t}const Sne=Symbol.for("motionComponentSymbol");function Xu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function _ne(t,e,r){return w.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):Xu(r)&&(r.current=n))},[e])}const t2=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Cne="framerAppearId",j5="data-"+t2(Cne),{schedule:r2,cancel:Tje}=C5(queueMicrotask,!1),A5=w.createContext({});function Ene(t,e,r,n,s){var i,o;const{visualElement:a}=w.useContext(Bx),l=w.useContext(E5),c=w.useContext(Lx),d=w.useContext(XT).reducedMotion,h=w.useRef(null);n=n||l.renderer,!h.current&&n&&(h.current=n(t,{visualState:e,parent:a,props:r,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const f=h.current,p=w.useContext(A5);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&kne(h.current,r,s,p);const g=w.useRef(!1);w.useInsertionEffect(()=>{f&&g.current&&f.update(r,c)});const y=r[j5],v=w.useRef(!!y&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,y))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,y)));return _5(()=>{f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),r2.render(f.render),v.current&&f.animationState&&f.animationState.animateChanges())}),w.useEffect(()=>{f&&(!v.current&&f.animationState&&f.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var m;(m=window.MotionHandoffMarkAsComplete)===null||m===void 0||m.call(window,y)}),v.current=!1))}),f}function kne(t,e,r,n){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:P5(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&Xu(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,layoutScroll:l,layoutRoot:c})}function P5(t){if(t)return t.options.allowProjection!==!1?t.projection:P5(t.parent)}function Tne({preloadedFeatures:t,createVisualElement:e,useRender:r,useVisualState:n,Component:s}){var i,o;t&&gne(t);function a(c,d){let h;const f={...w.useContext(XT),...c,layoutId:jne(c)},{isStatic:p}=f,g=bne(c),y=n(c,p);if(!p&&JT){Ane();const v=Pne(f);h=v.MeasureLayout,g.visualElement=Ene(s,y,f,e,v.ProjectionNode)}return u.jsxs(Bx.Provider,{value:g,children:[h&&g.visualElement?u.jsx(h,{visualElement:g.visualElement,...f}):null,r(s,c,_ne(y,g.visualElement,d),y,p,g.visualElement)]})}a.displayName=`motion.${typeof s=="string"?s:`create(${(o=(i=s.displayName)!==null&&i!==void 0?i:s.name)!==null&&o!==void 0?o:""})`}`;const l=w.forwardRef(a);return l[Sne]=s,l}function jne({layoutId:t}){const e=w.useContext(KT).id;return e&&t!==void 0?e+"-"+t:t}function Ane(t,e){w.useContext(E5).strict}function Pne(t){const{drag:e,layout:r}=Bd;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const Nne=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function n2(t){return typeof t!="string"||t.includes("-")?!1:!!(Nne.indexOf(t)>-1||/[A-Z]/u.test(t))}function qR(t){const e=[{},{}];return t==null||t.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function s2(t,e,r,n){if(typeof e=="function"){const[s,i]=qR(n);e=e(r!==void 0?r:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=qR(n);e=e(r!==void 0?r:t.custom,s,i)}return e}const sE=t=>Array.isArray(t),Rne=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),One=t=>sE(t)?t[t.length-1]||0:t,wn=t=>!!(t&&t.getVelocity);function Fy(t){const e=wn(t)?t.get():t;return Rne(e)?e.toValue():e}function Mne({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:r},n,s,i){const o={latestValues:Ine(n,s,i,t),renderState:e()};return r&&(o.onMount=a=>r({props:n,current:a,...o}),o.onUpdate=a=>r(a)),o}const N5=t=>(e,r)=>{const n=w.useContext(Bx),s=w.useContext(Lx),i=()=>Mne(t,e,n,s);return r?i():YT(i)};function Ine(t,e,r,n){const s={},i=n(t,{});for(const f in i)s[f]=Fy(i[f]);let{initial:o,animate:a}=t;const l=Ux(t),c=T5(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=r?r.initial===!1:!1;d=d||o===!1;const h=d?a:o;if(h&&typeof h!="boolean"&&!$x(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const g=s2(t,f[p]);if(g){const{transitionEnd:y,transition:v,...m}=g;for(const x in m){let b=m[x];if(Array.isArray(b)){const _=d?b.length-1:0;b=b[_]}b!==null&&(s[x]=b)}for(const x in y)s[x]=y[x]}}}return s}const mh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Yc=new Set(mh),R5=t=>e=>typeof e=="string"&&e.startsWith(t),O5=R5("--"),Dne=R5("var(--"),i2=t=>Dne(t)?Fne.test(t.split("/*")[0].trim()):!1,Fne=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,M5=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ua=(t,e,r)=>r>e?e:r<t?t:r,yh={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Vp={...yh,transform:t=>ua(0,1,t)},jm={...yh,default:1},Eg=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Oa=Eg("deg"),uo=Eg("%"),qe=Eg("px"),Lne=Eg("vh"),Bne=Eg("vw"),GR={...uo,parse:t=>uo.parse(t)/100,transform:t=>uo.transform(t*100)},$ne={borderWidth:qe,borderTopWidth:qe,borderRightWidth:qe,borderBottomWidth:qe,borderLeftWidth:qe,borderRadius:qe,radius:qe,borderTopLeftRadius:qe,borderTopRightRadius:qe,borderBottomRightRadius:qe,borderBottomLeftRadius:qe,width:qe,maxWidth:qe,height:qe,maxHeight:qe,top:qe,right:qe,bottom:qe,left:qe,padding:qe,paddingTop:qe,paddingRight:qe,paddingBottom:qe,paddingLeft:qe,margin:qe,marginTop:qe,marginRight:qe,marginBottom:qe,marginLeft:qe,backgroundPositionX:qe,backgroundPositionY:qe},Une={rotate:Oa,rotateX:Oa,rotateY:Oa,rotateZ:Oa,scale:jm,scaleX:jm,scaleY:jm,scaleZ:jm,skew:Oa,skewX:Oa,skewY:Oa,distance:qe,translateX:qe,translateY:qe,translateZ:qe,x:qe,y:qe,z:qe,perspective:qe,transformPerspective:qe,opacity:Vp,originX:GR,originY:GR,originZ:qe},KR={...yh,transform:Math.round},o2={...$ne,...Une,zIndex:KR,size:qe,fillOpacity:Vp,strokeOpacity:Vp,numOctaves:KR},Vne={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},zne=mh.length;function Hne(t,e,r){let n="",s=!0;for(let i=0;i<zne;i++){const o=mh[i],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||r){const c=M5(a,o2[o]);if(!l){s=!1;const d=Vne[o]||o;n+=`${d}(${c}) `}r&&(e[o]=c)}}return n=n.trim(),r?n=r(e,s?"":n):s&&(n="none"),n}function a2(t,e,r){const{style:n,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Yc.has(l)){o=!0;continue}else if(O5(l)){s[l]=c;continue}else{const d=M5(c,o2[l]);l.startsWith("origin")?(a=!0,i[l]=d):n[l]=d}}if(e.transform||(o||r?n.transform=Hne(e,t.transform,r):n.transform&&(n.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:d=0}=i;n.transformOrigin=`${l} ${c} ${d}`}}const Wne={offset:"stroke-dashoffset",array:"stroke-dasharray"},qne={offset:"strokeDashoffset",array:"strokeDasharray"};function Gne(t,e,r=1,n=0,s=!0){t.pathLength=1;const i=s?Wne:qne;t[i.offset]=qe.transform(-n);const o=qe.transform(e),a=qe.transform(r);t[i.array]=`${o} ${a}`}function YR(t,e,r){return typeof t=="string"?t:qe.transform(e+r*t)}function Kne(t,e,r){const n=YR(e,t.x,t.width),s=YR(r,t.y,t.height);return`${n} ${s}`}function l2(t,{attrX:e,attrY:r,attrScale:n,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},d,h){if(a2(t,c,h),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:p,dimensions:g}=t;f.transform&&(g&&(p.transform=f.transform),delete f.transform),g&&(s!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=Kne(g,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(f.x=e),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),o!==void 0&&Gne(f,o,a,l,!1)}const c2=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),I5=()=>({...c2(),attrs:{}}),u2=t=>typeof t=="string"&&t.toLowerCase()==="svg";function D5(t,{style:e,vars:r},n,s){Object.assign(t.style,e,s&&s.getProjectionStyles(n));for(const i in r)t.style.setProperty(i,r[i])}const F5=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function L5(t,e,r,n){D5(t,e,void 0,n);for(const s in e.attrs)t.setAttribute(F5.has(s)?s:t2(s),e.attrs[s])}const $0={};function Yne(t){Object.assign($0,t)}function B5(t,{layout:e,layoutId:r}){return Yc.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!$0[t]||t==="opacity")}function d2(t,e,r){var n;const{style:s}=t,i={};for(const o in s)(wn(s[o])||e.style&&wn(e.style[o])||B5(o,t)||((n=r==null?void 0:r.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(i[o]=s[o]);return i}function $5(t,e,r){const n=d2(t,e,r);for(const s in t)if(wn(t[s])||wn(e[s])){const i=mh.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[i]=t[s]}return n}function Xne(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const XR=["x","y","width","height","cx","cy","r"],Jne={useVisualState:N5({scrapeMotionValuesFromProps:$5,createRenderState:I5,onUpdate:({props:t,prevProps:e,current:r,renderState:n,latestValues:s})=>{if(!r)return;let i=!!t.drag;if(!i){for(const a in s)if(Yc.has(a)){i=!0;break}}if(!i)return;let o=!e;if(e)for(let a=0;a<XR.length;a++){const l=XR[a];t[l]!==e[l]&&(o=!0)}o&&Wt.read(()=>{Xne(r,n),Wt.render(()=>{l2(n,s,u2(r.tagName),t.transformTemplate),L5(r,n)})})}})},Zne={useVisualState:N5({scrapeMotionValuesFromProps:d2,createRenderState:c2})};function U5(t,e,r){for(const n in e)!wn(e[n])&&!B5(n,r)&&(t[n]=e[n])}function Qne({transformTemplate:t},e){return w.useMemo(()=>{const r=c2();return a2(r,e,t),Object.assign({},r.vars,r.style)},[e])}function ese(t,e){const r=t.style||{},n={};return U5(n,r,t),Object.assign(n,Qne(t,e)),n}function tse(t,e){const r={},n=ese(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}function rse(t,e,r,n){const s=w.useMemo(()=>{const i=I5();return l2(i,e,u2(n),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};U5(i,t.style,t),s.style={...i,...s.style}}return s}function nse(t=!1){return(r,n,s,{latestValues:i},o)=>{const l=(n2(r)?rse:tse)(n,i,o,r),c=vne(n,typeof r=="string",t),d=r!==w.Fragment?{...c,...l,ref:s}:{},{children:h}=n,f=w.useMemo(()=>wn(h)?h.get():h,[h]);return w.createElement(r,{...d,children:f})}}function sse(t,e){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...n2(n)?Jne:Zne,preloadedFeatures:t,useRender:nse(s),createVisualElement:e,Component:n};return Tne(o)}}function V5(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Vx(t,e,r){const n=t.getProps();return s2(n,e,r!==void 0?r:n.custom,t)}const ise=ZT(()=>window.ScrollTimeline!==void 0);class ose{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,r){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=r}attachTimeline(e,r){const n=this.animations.map(s=>{if(ise()&&s.attachTimeline)return s.attachTimeline(e);if(typeof r=="function")return r(s)});return()=>{n.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let r=0;r<this.animations.length;r++)e=Math.max(e,this.animations[r].duration);return e}runAll(e){this.animations.forEach(r=>r[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class ase extends ose{then(e,r){return Promise.all(this.animations).then(e).catch(r)}}function h2(t,e){return t?t[e]||t.default||t:void 0}const iE=2e4;function z5(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<iE;)e+=r,n=t.next(e);return e>=iE?1/0:e}function f2(t){return typeof t=="function"}function JR(t,e){t.timeline=e,t.onfinish=null}const p2=t=>Array.isArray(t)&&typeof t[0]=="number",lse={linearEasing:void 0};function cse(t,e){const r=ZT(t);return()=>{var n;return(n=lse[e])!==null&&n!==void 0?n:r()}}const U0=cse(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),H5=(t,e,r=10)=>{let n="";const s=Math.max(Math.round(e/r),2);for(let i=0;i<s;i++)n+=t(Ld(0,s-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function W5(t){return!!(typeof t=="function"&&U0()||!t||typeof t=="string"&&(t in oE||U0())||p2(t)||Array.isArray(t)&&t.every(W5))}const mf=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,oE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:mf([0,.65,.55,1]),circOut:mf([.55,0,1,.45]),backIn:mf([.31,.01,.66,-.59]),backOut:mf([.33,1.53,.69,.99])};function q5(t,e){if(t)return typeof t=="function"&&U0()?H5(t,e):p2(t)?mf(t):Array.isArray(t)?t.map(r=>q5(r,e)||oE.easeOut):oE[t]}const vi={x:!1,y:!1};function G5(){return vi.x||vi.y}function use(t,e,r){var n;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const i=(n=void 0)!==null&&n!==void 0?n:s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}function K5(t,e){const r=use(t),n=new AbortController,s={passive:!0,...e,signal:n.signal};return[r,s,()=>n.abort()]}function ZR(t){return e=>{e.pointerType==="touch"||G5()||t(e)}}function dse(t,e,r={}){const[n,s,i]=K5(t,r),o=ZR(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const d=ZR(h=>{c(h),l.removeEventListener("pointerleave",d)});l.addEventListener("pointerleave",d,s)});return n.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const Y5=(t,e)=>e?t===e?!0:Y5(t,e.parentElement):!1,g2=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,hse=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function fse(t){return hse.has(t.tagName)||t.tabIndex!==-1}const yf=new WeakSet;function QR(t){return e=>{e.key==="Enter"&&t(e)}}function V1(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const pse=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=QR(()=>{if(yf.has(r))return;V1(r,"down");const s=QR(()=>{V1(r,"up")}),i=()=>V1(r,"cancel");r.addEventListener("keyup",s,e),r.addEventListener("blur",i,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function eO(t){return g2(t)&&!G5()}function gse(t,e,r={}){const[n,s,i]=K5(t,r),o=a=>{const l=a.currentTarget;if(!eO(a)||yf.has(l))return;yf.add(l);const c=e(a),d=(p,g)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),!(!eO(p)||!yf.has(l))&&(yf.delete(l),typeof c=="function"&&c(p,{success:g}))},h=p=>{d(p,r.useGlobalTarget||Y5(l,p.target))},f=p=>{d(p,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return n.forEach(a=>{!fse(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(r.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),a.addEventListener("focus",c=>pse(c,s),s)}),i}function mse(t){return t==="x"||t==="y"?vi[t]?null:(vi[t]=!0,()=>{vi[t]=!1}):vi.x||vi.y?null:(vi.x=vi.y=!0,()=>{vi.x=vi.y=!1})}const X5=new Set(["width","height","top","left","right","bottom",...mh]);let Ly;function yse(){Ly=void 0}const ho={now:()=>(Ly===void 0&&ho.set(tn.isProcessing||hne.useManualTiming?tn.timestamp:performance.now()),Ly),set:t=>{Ly=t,queueMicrotask(yse)}};function m2(t,e){t.indexOf(e)===-1&&t.push(e)}function y2(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}class v2{constructor(){this.subscriptions=[]}add(e){return m2(this.subscriptions,e),()=>y2(this.subscriptions,e)}notify(e,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,r,n);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function J5(t,e){return e?t*(1e3/e):0}const tO=30,vse=t=>!isNaN(parseFloat(t));class xse{constructor(e,r={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,s=!0)=>{const i=ho.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=ho.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=vse(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new v2);const n=this.events[e].add(r);return e==="change"?()=>{n(),Wt.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e,r=!0){!r||!this.passiveEffect?this.updateAndNotify(e,r):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ho.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>tO)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,tO);return J5(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function zp(t,e){return new xse(t,e)}function wse(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,zp(r))}function bse(t,e){const r=Vx(t,e);let{transitionEnd:n={},transition:s={},...i}=r||{};i={...i,...n};for(const o in i){const a=One(i[o]);wse(t,o,a)}}function Sse(t){return!!(wn(t)&&t.add)}function aE(t,e){const r=t.getValue("willChange");if(Sse(r))return r.add(e)}function Z5(t){return t.props[j5]}const Q5=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,_se=1e-7,Cse=12;function Ese(t,e,r,n,s){let i,o,a=0;do o=e+(r-e)/2,i=Q5(o,n,s)-t,i>0?r=o:e=o;while(Math.abs(i)>_se&&++a<Cse);return o}function kg(t,e,r,n){if(t===e&&r===n)return Es;const s=i=>Ese(i,0,1,t,r);return i=>i===0||i===1?i:Q5(s(i),e,n)}const e$=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,t$=t=>e=>1-t(1-e),r$=kg(.33,1.53,.69,.99),x2=t$(r$),n$=e$(x2),s$=t=>(t*=2)<1?.5*x2(t):.5*(2-Math.pow(2,-10*(t-1))),w2=t=>1-Math.sin(Math.acos(t)),i$=t$(w2),o$=e$(w2),a$=t=>/^0[^.\s]+$/u.test(t);function kse(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||a$(t):!0}const Yf=t=>Math.round(t*1e5)/1e5,b2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Tse(t){return t==null}const jse=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,S2=(t,e)=>r=>!!(typeof r=="string"&&jse.test(r)&&r.startsWith(t)||e&&!Tse(r)&&Object.prototype.hasOwnProperty.call(r,e)),l$=(t,e,r)=>n=>{if(typeof n!="string")return n;const[s,i,o,a]=n.match(b2);return{[t]:parseFloat(s),[e]:parseFloat(i),[r]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Ase=t=>ua(0,255,t),z1={...yh,transform:t=>Math.round(Ase(t))},uc={test:S2("rgb","red"),parse:l$("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+z1.transform(t)+", "+z1.transform(e)+", "+z1.transform(r)+", "+Yf(Vp.transform(n))+")"};function Pse(t){let e="",r="",n="",s="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),s=t.substring(4,5),e+=e,r+=r,n+=n,s+=s),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const lE={test:S2("#"),parse:Pse,transform:uc.transform},Ju={test:S2("hsl","hue"),parse:l$("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+uo.transform(Yf(e))+", "+uo.transform(Yf(r))+", "+Yf(Vp.transform(n))+")"},mn={test:t=>uc.test(t)||lE.test(t)||Ju.test(t),parse:t=>uc.test(t)?uc.parse(t):Ju.test(t)?Ju.parse(t):lE.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?uc.transform(t):Ju.transform(t)},Nse=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Rse(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(b2))===null||e===void 0?void 0:e.length)||0)+(((r=t.match(Nse))===null||r===void 0?void 0:r.length)||0)>0}const c$="number",u$="color",Ose="var",Mse="var(",rO="${}",Ise=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Hp(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(Ise,l=>(mn.test(l)?(n.color.push(i),s.push(u$),r.push(mn.parse(l))):l.startsWith(Mse)?(n.var.push(i),s.push(Ose),r.push(l)):(n.number.push(i),s.push(c$),r.push(parseFloat(l))),++i,rO)).split(rO);return{values:r,split:a,indexes:n,types:s}}function d$(t){return Hp(t).values}function h$(t){const{split:e,types:r}=Hp(t),n=e.length;return s=>{let i="";for(let o=0;o<n;o++)if(i+=e[o],s[o]!==void 0){const a=r[o];a===c$?i+=Yf(s[o]):a===u$?i+=mn.transform(s[o]):i+=s[o]}return i}}const Dse=t=>typeof t=="number"?0:t;function Fse(t){const e=d$(t);return h$(t)(e.map(Dse))}const pl={test:Rse,parse:d$,createTransformer:h$,getAnimatableNone:Fse},Lse=new Set(["brightness","contrast","saturate","opacity"]);function Bse(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(b2)||[];if(!n)return t;const s=r.replace(n,"");let i=Lse.has(e)?1:0;return n!==r&&(i*=100),e+"("+i+s+")"}const $se=/\b([a-z-]*)\(.*?\)/gu,cE={...pl,getAnimatableNone:t=>{const e=t.match($se);return e?e.map(Bse).join(" "):t}},Use={...o2,color:mn,backgroundColor:mn,outlineColor:mn,fill:mn,stroke:mn,borderColor:mn,borderTopColor:mn,borderRightColor:mn,borderBottomColor:mn,borderLeftColor:mn,filter:cE,WebkitFilter:cE},_2=t=>Use[t];function f$(t,e){let r=_2(t);return r!==cE&&(r=pl),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const Vse=new Set(["auto","none","0"]);function zse(t,e,r){let n=0,s;for(;n<t.length&&!s;){const i=t[n];typeof i=="string"&&!Vse.has(i)&&Hp(i).values.length&&(s=t[n]),n++}if(s&&r)for(const i of e)t[i]=f$(r,s)}const nO=t=>t===yh||t===qe,sO=(t,e)=>parseFloat(t.split(", ")[e]),iO=(t,e)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/u);if(s)return sO(s[1],e);{const i=n.match(/^matrix\((.+)\)$/u);return i?sO(i[1],t):0}},Hse=new Set(["x","y","z"]),Wse=mh.filter(t=>!Hse.has(t));function qse(t){const e=[];return Wse.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const $d={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:iO(4,13),y:iO(5,14)};$d.translateX=$d.x;$d.translateY=$d.y;const wc=new Set;let uE=!1,dE=!1;function p$(){if(dE){const t=Array.from(wc).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const s=qse(n);s.length&&(r.set(n,s),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([i,o])=>{var a;(a=n.getValue(i))===null||a===void 0||a.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}dE=!1,uE=!1,wc.forEach(t=>t.complete()),wc.clear()}function g$(){wc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(dE=!0)})}function Gse(){g$(),p$()}class C2{constructor(e,r,n,s,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(wc.add(this),uE||(uE=!0,Wt.read(g$),Wt.resolveKeyframes(p$))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:s}=this;for(let i=0;i<e.length;i++)if(e[i]===null)if(i===0){const o=s==null?void 0:s.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(n&&r){const l=n.readValue(r,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),s&&o===void 0&&s.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),wc.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,wc.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const m$=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Kse=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Yse(t){const e=Kse.exec(t);if(!e)return[,];const[,r,n,s]=e;return[`--${r??n}`,s]}function y$(t,e,r=1){const[n,s]=Yse(t);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const o=i.trim();return m$(o)?parseFloat(o):o}return i2(s)?y$(s,e,r+1):s}const v$=t=>e=>e.test(t),Xse={test:t=>t==="auto",parse:t=>t},x$=[yh,qe,uo,Oa,Bne,Lne,Xse],oO=t=>x$.find(v$(t));class w$ extends C2{constructor(e,r,n,s,i){super(e,r,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),i2(c))){const d=y$(c,r.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!X5.has(n)||e.length!==2)return;const[s,i]=e,o=oO(s),a=oO(i);if(o!==a)if(nO(o)&&nO(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let s=0;s<e.length;s++)kse(e[s])&&n.push(s);n.length&&zse(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=$d[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&e.getValue(n,s).jump(s,!1)}measureEndState(){var e;const{element:r,name:n,unresolvedKeyframes:s}=this;if(!r||!r.current)return;const i=r.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=s.length-1,a=s[o];s[o]=$d[n](r.measureViewportBox(),window.getComputedStyle(r.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{r.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const aO=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(pl.test(t)||t==="0")&&!t.startsWith("url("));function Jse(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function Zse(t,e,r,n){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=aO(s,e),a=aO(i,e);return!o||!a?!1:Jse(t)||(r==="spring"||f2(r))&&n}const Qse=t=>t!==null;function zx(t,{repeat:e,repeatType:r="loop"},n){const s=t.filter(Qse),i=e&&r!=="loop"&&e%2===1?0:s.length-1;return!i||n===void 0?s[i]:n}const eie=40;class b${constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ho.now(),this.options={autoplay:e,delay:r,type:n,repeat:s,repeatDelay:i,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>eie?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Gse(),this._resolved}onKeyframesResolved(e,r){this.resolvedAt=ho.now(),this.hasAttemptedResolve=!0;const{name:n,type:s,velocity:i,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!Zse(e,n,s,i))if(o)this.options.duration=0;else{l&&l(zx(e,this.options,r)),a&&a(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,r);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:r,...d},this.onPostResolved())}onPostResolved(){}then(e,r){return this.currentFinishedPromise.then(e,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Jt=(t,e,r)=>t+(e-t)*r;function H1(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function tie({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let s=0,i=0,o=0;if(!e)s=i=o=r;else{const a=r<.5?r*(1+e):r+e-r*e,l=2*r-a;s=H1(l,a,t+1/3),i=H1(l,a,t),o=H1(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function V0(t,e){return r=>r>0?e:t}const W1=(t,e,r)=>{const n=t*t,s=r*(e*e-n)+n;return s<0?0:Math.sqrt(s)},rie=[lE,uc,Ju],nie=t=>rie.find(e=>e.test(t));function lO(t){const e=nie(t);if(!e)return!1;let r=e.parse(t);return e===Ju&&(r=tie(r)),r}const cO=(t,e)=>{const r=lO(t),n=lO(e);if(!r||!n)return V0(t,e);const s={...r};return i=>(s.red=W1(r.red,n.red,i),s.green=W1(r.green,n.green,i),s.blue=W1(r.blue,n.blue,i),s.alpha=Jt(r.alpha,n.alpha,i),uc.transform(s))},sie=(t,e)=>r=>e(t(r)),Tg=(...t)=>t.reduce(sie),hE=new Set(["none","hidden"]);function iie(t,e){return hE.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function oie(t,e){return r=>Jt(t,e,r)}function E2(t){return typeof t=="number"?oie:typeof t=="string"?i2(t)?V0:mn.test(t)?cO:cie:Array.isArray(t)?S$:typeof t=="object"?mn.test(t)?cO:aie:V0}function S$(t,e){const r=[...t],n=r.length,s=t.map((i,o)=>E2(i)(i,e[o]));return i=>{for(let o=0;o<n;o++)r[o]=s[o](i);return r}}function aie(t,e){const r={...t,...e},n={};for(const s in r)t[s]!==void 0&&e[s]!==void 0&&(n[s]=E2(t[s])(t[s],e[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}}function lie(t,e){var r;const n=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=t.indexes[o][s[o]],l=(r=t.values[a])!==null&&r!==void 0?r:0;n[i]=l,s[o]++}return n}const cie=(t,e)=>{const r=pl.createTransformer(e),n=Hp(t),s=Hp(e);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?hE.has(t)&&!s.values.length||hE.has(e)&&!n.values.length?iie(t,e):Tg(S$(lie(n,s),s.values),r):V0(t,e)};function _$(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?Jt(t,e,r):E2(t)(t,e)}const uie=5;function C$(t,e,r){const n=Math.max(e-uie,0);return J5(r-t(n),e-n)}const rr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},q1=.001;function die({duration:t=rr.duration,bounce:e=rr.bounce,velocity:r=rr.velocity,mass:n=rr.mass}){let s,i,o=1-e;o=ua(rr.minDamping,rr.maxDamping,o),t=ua(rr.minDuration,rr.maxDuration,Ko(t)),o<1?(s=c=>{const d=c*o,h=d*t,f=d-r,p=fE(c,o),g=Math.exp(-h);return q1-f/p*g},i=c=>{const h=c*o*t,f=h*r+r,p=Math.pow(o,2)*Math.pow(c,2)*t,g=Math.exp(-h),y=fE(Math.pow(c,2),o);return(-s(c)+q1>0?-1:1)*((f-p)*g)/y}):(s=c=>{const d=Math.exp(-c*t),h=(c-r)*t+1;return-q1+d*h},i=c=>{const d=Math.exp(-c*t),h=(r-c)*(t*t);return d*h});const a=5/t,l=fie(s,i,a);if(t=Go(t),isNaN(l))return{stiffness:rr.stiffness,damping:rr.damping,duration:t};{const c=Math.pow(l,2)*n;return{stiffness:c,damping:o*2*Math.sqrt(n*c),duration:t}}}const hie=12;function fie(t,e,r){let n=r;for(let s=1;s<hie;s++)n=n-t(n)/e(n);return n}function fE(t,e){return t*Math.sqrt(1-e*e)}const pie=["duration","bounce"],gie=["stiffness","damping","mass"];function uO(t,e){return e.some(r=>t[r]!==void 0)}function mie(t){let e={velocity:rr.velocity,stiffness:rr.stiffness,damping:rr.damping,mass:rr.mass,isResolvedFromDuration:!1,...t};if(!uO(t,gie)&&uO(t,pie))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,i=2*ua(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:rr.mass,stiffness:s,damping:i}}else{const r=die(t);e={...e,...r,mass:rr.mass},e.isResolvedFromDuration=!0}return e}function E$(t=rr.visualDuration,e=rr.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:s}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:d,duration:h,velocity:f,isResolvedFromDuration:p}=mie({...r,velocity:-Ko(r.velocity||0)}),g=f||0,y=c/(2*Math.sqrt(l*d)),v=o-i,m=Ko(Math.sqrt(l/d)),x=Math.abs(v)<5;n||(n=x?rr.restSpeed.granular:rr.restSpeed.default),s||(s=x?rr.restDelta.granular:rr.restDelta.default);let b;if(y<1){const C=fE(m,y);b=T=>{const O=Math.exp(-y*m*T);return o-O*((g+y*m*v)/C*Math.sin(C*T)+v*Math.cos(C*T))}}else if(y===1)b=C=>o-Math.exp(-m*C)*(v+(g+m*v)*C);else{const C=m*Math.sqrt(y*y-1);b=T=>{const O=Math.exp(-y*m*T),R=Math.min(C*T,300);return o-O*((g+y*m*v)*Math.sinh(R)+C*v*Math.cosh(R))/C}}const _={calculatedDuration:p&&h||null,next:C=>{const T=b(C);if(p)a.done=C>=h;else{let O=0;y<1&&(O=C===0?Go(g):C$(b,C,T));const R=Math.abs(O)<=n,I=Math.abs(o-T)<=s;a.done=R&&I}return a.value=a.done?o:T,a},toString:()=>{const C=Math.min(z5(_),iE),T=H5(O=>_.next(C*O).value,C,30);return C+"ms "+T}};return _}function dO({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const h=t[0],f={done:!1,value:h},p=R=>a!==void 0&&R<a||l!==void 0&&R>l,g=R=>a===void 0?l:l===void 0||Math.abs(a-R)<Math.abs(l-R)?a:l;let y=r*e;const v=h+y,m=o===void 0?v:o(v);m!==v&&(y=m-h);const x=R=>-y*Math.exp(-R/n),b=R=>m+x(R),_=R=>{const I=x(R),H=b(R);f.done=Math.abs(I)<=c,f.value=f.done?m:H};let C,T;const O=R=>{p(f.value)&&(C=R,T=E$({keyframes:[f.value,g(f.value)],velocity:C$(b,R,f.value),damping:s,stiffness:i,restDelta:c,restSpeed:d}))};return O(0),{calculatedDuration:null,next:R=>{let I=!1;return!T&&C===void 0&&(I=!0,_(R),O(R)),C!==void 0&&R>=C?T.next(R-C):(!I&&_(R),f)}}}const yie=kg(.42,0,1,1),vie=kg(0,0,.58,1),k$=kg(.42,0,.58,1),xie=t=>Array.isArray(t)&&typeof t[0]!="number",hO={linear:Es,easeIn:yie,easeInOut:k$,easeOut:vie,circIn:w2,circInOut:o$,circOut:i$,backIn:x2,backInOut:n$,backOut:r$,anticipate:s$},fO=t=>{if(p2(t)){nE(t.length===4);const[e,r,n,s]=t;return kg(e,r,n,s)}else if(typeof t=="string")return nE(hO[t]!==void 0),hO[t];return t};function wie(t,e,r){const n=[],s=r||_$,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Es:e;a=Tg(l,a)}n.push(a)}return n}function bie(t,e,{clamp:r=!0,ease:n,mixer:s}={}){const i=t.length;if(nE(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=wie(e,n,s),l=a.length,c=d=>{if(o&&d<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const f=Ld(t[h],t[h+1],d);return a[h](f)};return r?d=>c(ua(t[0],t[i-1],d)):c}function Sie(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const s=Ld(0,e,n);t.push(Jt(r,1,s))}}function _ie(t){const e=[0];return Sie(e,t.length-1),e}function Cie(t,e){return t.map(r=>r*e)}function Eie(t,e){return t.map(()=>e||k$).splice(0,t.length-1)}function z0({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const s=xie(n)?n.map(fO):fO(n),i={done:!1,value:e[0]},o=Cie(r&&r.length===e.length?r:_ie(e),t),a=bie(o,e,{ease:Array.isArray(s)?s:Eie(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}const kie=t=>{const e=({timestamp:r})=>t(r);return{start:()=>Wt.update(e,!0),stop:()=>fl(e),now:()=>tn.isProcessing?tn.timestamp:ho.now()}},Tie={decay:dO,inertia:dO,tween:z0,keyframes:z0,spring:E$},jie=t=>t/100;class k2 extends b${constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:r,motionValue:n,element:s,keyframes:i}=this.options,o=(s==null?void 0:s.KeyframeResolver)||C2,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(i,a,r,n,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:r="keyframes",repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=this.options,a=f2(r)?r:Tie[r]||z0;let l,c;a!==z0&&typeof e[0]!="number"&&(l=Tg(jie,_$(e[0],e[1])),e=[0,100]);const d=a({...this.options,keyframes:e});i==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=z5(d));const{calculatedDuration:h}=d,f=h+s,p=f*(n+1)-s;return{generator:d,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:f,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,r=!1){const{resolved:n}=this;if(!n){const{keyframes:R}=this.options;return{done:!0,value:R[R.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:d,resolvedDuration:h}=n;if(this.startTime===null)return i.next(0);const{delay:f,repeat:p,repeatType:g,repeatDelay:y,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),r?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const m=this.currentTime-f*(this.speed>=0?1:-1),x=this.speed>=0?m<0:m>d;this.currentTime=Math.max(m,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let b=this.currentTime,_=i;if(p){const R=Math.min(this.currentTime,d)/h;let I=Math.floor(R),H=R%1;!H&&R>=1&&(H=1),H===1&&I--,I=Math.min(I,p+1),!!(I%2)&&(g==="reverse"?(H=1-H,y&&(H-=y/h)):g==="mirror"&&(_=o)),b=ua(0,1,H)*h}const C=x?{done:!1,value:l[0]}:_.next(b);a&&(C.value=a(C.value));let{done:T}=C;!x&&c!==null&&(T=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return O&&s!==void 0&&(C.value=zx(l,this.options,s)),v&&v(C.value),O&&this.finish(),C}get duration(){const{resolved:e}=this;return e?Ko(e.calculatedDuration):0}get time(){return Ko(this.currentTime)}set time(e){e=Go(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=Ko(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=kie,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),r&&r();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Aie=new Set(["opacity","clipPath","filter","transform"]);function Pie(t,e,r,{delay:n=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:r};l&&(c.offset=l);const d=q5(a,s);return Array.isArray(d)&&(c.easing=d),t.animate(c,{delay:n,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const Nie=ZT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),H0=10,Rie=2e4;function Oie(t){return f2(t.type)||t.type==="spring"||!W5(t.ease)}function Mie(t,e){const r=new k2({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:t[0]};const s=[];let i=0;for(;!n.done&&i<Rie;)n=r.sample(i),s.push(n.value),i+=H0;return{times:void 0,keyframes:s,duration:i-H0,ease:"linear"}}const T$={anticipate:s$,backInOut:n$,circInOut:o$};function Iie(t){return t in T$}class pO extends b${constructor(e){super(e);const{name:r,motionValue:n,element:s,keyframes:i}=this.options;this.resolver=new w$(i,(o,a)=>this.onKeyframesResolved(o,a),r,n,s),this.resolver.scheduleResolve()}initPlayback(e,r){let{duration:n=300,times:s,ease:i,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof i=="string"&&U0()&&Iie(i)&&(i=T$[i]),Oie(this.options)){const{onComplete:h,onUpdate:f,motionValue:p,element:g,...y}=this.options,v=Mie(e,y);e=v.keyframes,e.length===1&&(e[1]=e[0]),n=v.duration,s=v.times,i=v.ease,o="keyframes"}const d=Pie(a.owner.current,l,e,{...this.options,duration:n,times:s,ease:i});return d.startTime=c??this.calcStartTime(),this.pendingTimeline?(JR(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:h}=this.options;a.set(zx(e,this.options,r)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:n,times:s,type:o,ease:i,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:r}=e;return Ko(r)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:r}=e;return Ko(r.currentTime||0)}set time(e){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=Go(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:r}=e;return r.playbackRate}set speed(e){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:r}=e;return r.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:r}=e;return r.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:r}=this;if(!r)return Es;const{animation:n}=r;JR(n,e)}return Es}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:r}=e;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:r,keyframes:n,duration:s,type:i,ease:o,times:a}=e;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:d,onComplete:h,element:f,...p}=this.options,g=new k2({...p,keyframes:n,duration:s,type:i,ease:o,times:a,isGenerator:!0}),y=Go(this.time);c.setWithVelocity(g.sample(y-H0).value,g.sample(y).value,H0)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:r,name:n,repeatDelay:s,repeatType:i,damping:o,type:a}=e;if(!r||!r.owner||!(r.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=r.owner.getProps();return Nie()&&n&&Aie.has(n)&&!l&&!c&&!s&&i!=="mirror"&&o!==0&&a!=="inertia"}}const Die={type:"spring",stiffness:500,damping:25,restSpeed:10},Fie=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Lie={type:"keyframes",duration:.8},Bie={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$ie=(t,{keyframes:e})=>e.length>2?Lie:Yc.has(t)?t.startsWith("scale")?Fie(e[1]):Die:Bie;function Uie({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const T2=(t,e,r,n={},s,i)=>o=>{const a=h2(n,t)||{},l=a.delay||n.delay||0;let{elapsed:c=0}=n;c=c-Go(l);let d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};Uie(a)||(d={...d,...$ie(t,d)}),d.duration&&(d.duration=Go(d.duration)),d.repeatDelay&&(d.repeatDelay=Go(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),h&&!i&&e.get()!==void 0){const f=zx(d.keyframes,a);if(f!==void 0)return Wt.update(()=>{d.onUpdate(f),d.onComplete()}),new ase([])}return!i&&pO.supports(d)?new pO(d):new k2(d)};function Vie({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function j$(t,e,{delay:r=0,transitionOverride:n,type:s}={}){var i;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;n&&(o=n);const c=[],d=s&&t.animationState&&t.animationState.getState()[s];for(const h in l){const f=t.getValue(h,(i=t.latestValues[h])!==null&&i!==void 0?i:null),p=l[h];if(p===void 0||d&&Vie(d,h))continue;const g={delay:r,...h2(o||{},h)};let y=!1;if(window.MotionHandoffAnimation){const m=Z5(t);if(m){const x=window.MotionHandoffAnimation(m,h,Wt);x!==null&&(g.startTime=x,y=!0)}}aE(t,h),f.start(T2(h,f,p,t.shouldReduceMotion&&X5.has(h)?{type:!1}:g,t,y));const v=f.animation;v&&c.push(v)}return a&&Promise.all(c).then(()=>{Wt.update(()=>{a&&bse(t,a)})}),c}function pE(t,e,r={}){var n;const s=Vx(t,e,r.type==="exit"?(n=t.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(i=r.transitionOverride);const o=s?()=>Promise.all(j$(t,s,r)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=i;return zie(t,e,d+c,h,f,r)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,d]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>d())}else return Promise.all([o(),a(r.delay)])}function zie(t,e,r=0,n=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*n,l=s===1?(c=0)=>c*n:(c=0)=>a-c*n;return Array.from(t.variantChildren).sort(Hie).forEach((c,d)=>{c.notify("AnimationStart",e),o.push(pE(c,e,{...i,delay:r+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function Hie(t,e){return t.sortNodePosition(e)}function Wie(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const s=e.map(i=>pE(t,i,r));n=Promise.all(s)}else if(typeof e=="string")n=pE(t,e,r);else{const s=typeof e=="function"?Vx(t,e,r.custom):e;n=Promise.all(j$(t,s,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}const qie=e2.length;function A$(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?A$(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<qie;r++){const n=e2[r],s=t.props[n];(Up(s)||s===!1)&&(e[n]=s)}return e}const Gie=[...QT].reverse(),Kie=QT.length;function Yie(t){return e=>Promise.all(e.map(({animation:r,options:n})=>Wie(t,r,n)))}function Xie(t){let e=Yie(t),r=gO(),n=!0;const s=l=>(c,d)=>{var h;const f=Vx(t,d,l==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(f){const{transition:p,transitionEnd:g,...y}=f;c={...c,...y,...g}}return c};function i(l){e=l(t)}function o(l){const{props:c}=t,d=A$(t.parent)||{},h=[],f=new Set;let p={},g=1/0;for(let v=0;v<Kie;v++){const m=Gie[v],x=r[m],b=c[m]!==void 0?c[m]:d[m],_=Up(b),C=m===l?x.isActive:null;C===!1&&(g=v);let T=b===d[m]&&b!==c[m]&&_;if(T&&n&&t.manuallyAnimateOnMount&&(T=!1),x.protectedKeys={...p},!x.isActive&&C===null||!b&&!x.prevProp||$x(b)||typeof b=="boolean")continue;const O=Jie(x.prevProp,b);let R=O||m===l&&x.isActive&&!T&&_||v>g&&_,I=!1;const H=Array.isArray(b)?b:[b];let re=H.reduce(s(m),{});C===!1&&(re={});const{prevResolvedValues:L={}}=x,z={...L,...re},Y=se=>{R=!0,f.has(se)&&(I=!0,f.delete(se)),x.needsAnimating[se]=!0;const F=t.getValue(se);F&&(F.liveStyle=!1)};for(const se in z){const F=re[se],K=L[se];if(p.hasOwnProperty(se))continue;let de=!1;sE(F)&&sE(K)?de=!V5(F,K):de=F!==K,de?F!=null?Y(se):f.add(se):F!==void 0&&f.has(se)?Y(se):x.protectedKeys[se]=!0}x.prevProp=b,x.prevResolvedValues=re,x.isActive&&(p={...p,...re}),n&&t.blockInitialAnimation&&(R=!1),R&&(!(T&&O)||I)&&h.push(...H.map(se=>({animation:se,options:{type:m}})))}if(f.size){const v={};f.forEach(m=>{const x=t.getBaseTarget(m),b=t.getValue(m);b&&(b.liveStyle=!0),v[m]=x??null}),h.push({animation:v})}let y=!!h.length;return n&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(y=!1),n=!1,y?e(h):Promise.resolve()}function a(l,c){var d;if(r[l].isActive===c)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),r[l].isActive=c;const h=o(l);for(const f in r)r[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>r,reset:()=>{r=gO(),n=!0}}}function Jie(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!V5(e,t):!1}function Wl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function gO(){return{animate:Wl(!0),whileInView:Wl(),whileHover:Wl(),whileTap:Wl(),whileDrag:Wl(),whileFocus:Wl(),exit:Wl()}}class Ml{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Zie extends Ml{constructor(e){super(e),e.animationState||(e.animationState=Xie(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();$x(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Qie=0;class eoe extends Ml{constructor(){super(...arguments),this.id=Qie++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);r&&!e&&s.then(()=>r(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const toe={animation:{Feature:Zie},exit:{Feature:eoe}};function Wp(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function jg(t){return{point:{x:t.pageX,y:t.pageY}}}const roe=t=>e=>g2(e)&&t(e,jg(e));function Xf(t,e,r,n){return Wp(t,e,roe(r),n)}const mO=(t,e)=>Math.abs(t-e);function noe(t,e){const r=mO(t.x,e.x),n=mO(t.y,e.y);return Math.sqrt(r**2+n**2)}class P${constructor(e,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=K1(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=noe(h.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:g}=h,{timestamp:y}=tn;this.history.push({...g,timestamp:y});const{onStart:v,onMove:m}=this.handlers;f||(v&&v(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=G1(f,this.transformPagePoint),Wt.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=K1(h.type==="pointercancel"?this.lastMoveEventInfo:G1(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,v),g&&g(h,v)},!g2(e))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const o=jg(e),a=G1(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=tn;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=r;d&&d(e,K1(a,this.history)),this.removeListeners=Tg(Xf(this.contextWindow,"pointermove",this.handlePointerMove),Xf(this.contextWindow,"pointerup",this.handlePointerUp),Xf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),fl(this.updatePoint)}}function G1(t,e){return e?{point:e(t.point)}:t}function yO(t,e){return{x:t.x-e.x,y:t.y-e.y}}function K1({point:t},e){return{point:t,delta:yO(t,N$(e)),offset:yO(t,soe(e)),velocity:ioe(e,.1)}}function soe(t){return t[0]}function N$(t){return t[t.length-1]}function ioe(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const s=N$(t);for(;r>=0&&(n=t[r],!(s.timestamp-n.timestamp>Go(e)));)r--;if(!n)return{x:0,y:0};const i=Ko(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const R$=1e-4,ooe=1-R$,aoe=1+R$,O$=.01,loe=0-O$,coe=0+O$;function Ns(t){return t.max-t.min}function uoe(t,e,r){return Math.abs(t-e)<=r}function vO(t,e,r,n=.5){t.origin=n,t.originPoint=Jt(e.min,e.max,t.origin),t.scale=Ns(r)/Ns(e),t.translate=Jt(r.min,r.max,t.origin)-t.originPoint,(t.scale>=ooe&&t.scale<=aoe||isNaN(t.scale))&&(t.scale=1),(t.translate>=loe&&t.translate<=coe||isNaN(t.translate))&&(t.translate=0)}function Jf(t,e,r,n){vO(t.x,e.x,r.x,n?n.originX:void 0),vO(t.y,e.y,r.y,n?n.originY:void 0)}function xO(t,e,r){t.min=r.min+e.min,t.max=t.min+Ns(e)}function doe(t,e,r){xO(t.x,e.x,r.x),xO(t.y,e.y,r.y)}function wO(t,e,r){t.min=e.min-r.min,t.max=t.min+Ns(e)}function Zf(t,e,r){wO(t.x,e.x,r.x),wO(t.y,e.y,r.y)}function hoe(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?Jt(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?Jt(r,t,n.max):Math.min(t,r)),t}function bO(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function foe(t,{top:e,left:r,bottom:n,right:s}){return{x:bO(t.x,r,s),y:bO(t.y,e,n)}}function SO(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function poe(t,e){return{x:SO(t.x,e.x),y:SO(t.y,e.y)}}function goe(t,e){let r=.5;const n=Ns(t),s=Ns(e);return s>n?r=Ld(e.min,e.max-n,t.min):n>s&&(r=Ld(t.min,t.max-s,e.min)),ua(0,1,r)}function moe(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const gE=.35;function yoe(t=gE){return t===!1?t=0:t===!0&&(t=gE),{x:_O(t,"left","right"),y:_O(t,"top","bottom")}}function _O(t,e,r){return{min:CO(t,e),max:CO(t,r)}}function CO(t,e){return typeof t=="number"?t:t[e]||0}const EO=()=>({translate:0,scale:1,origin:0,originPoint:0}),Zu=()=>({x:EO(),y:EO()}),kO=()=>({min:0,max:0}),cr=()=>({x:kO(),y:kO()});function Hs(t){return[t("x"),t("y")]}function M$({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function voe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function xoe(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Y1(t){return t===void 0||t===1}function mE({scale:t,scaleX:e,scaleY:r}){return!Y1(t)||!Y1(e)||!Y1(r)}function Jl(t){return mE(t)||I$(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function I$(t){return TO(t.x)||TO(t.y)}function TO(t){return t&&t!=="0%"}function W0(t,e,r){const n=t-r,s=e*n;return r+s}function jO(t,e,r,n,s){return s!==void 0&&(t=W0(t,s,n)),W0(t,r,n)+e}function yE(t,e=0,r=1,n,s){t.min=jO(t.min,e,r,n,s),t.max=jO(t.max,e,r,n,s)}function D$(t,{x:e,y:r}){yE(t.x,e.translate,e.scale,e.originPoint),yE(t.y,r.translate,r.scale,r.originPoint)}const AO=.999999999999,PO=1.0000000000001;function woe(t,e,r,n=!1){const s=r.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=r[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ed(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,D$(t,o)),n&&Jl(i.latestValues)&&ed(t,i.latestValues))}e.x<PO&&e.x>AO&&(e.x=1),e.y<PO&&e.y>AO&&(e.y=1)}function Qu(t,e){t.min=t.min+e,t.max=t.max+e}function NO(t,e,r,n,s=.5){const i=Jt(t.min,t.max,s);yE(t,e,r,i,n)}function ed(t,e){NO(t.x,e.x,e.scaleX,e.scale,e.originX),NO(t.y,e.y,e.scaleY,e.scale,e.originY)}function F$(t,e){return M$(xoe(t.getBoundingClientRect(),e))}function boe(t,e,r){const n=F$(t,r),{scroll:s}=e;return s&&(Qu(n.x,s.offset.x),Qu(n.y,s.offset.y)),n}const L$=({current:t})=>t?t.ownerDocument.defaultView:null,Soe=new WeakMap;class _oe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=cr(),this.visualElement=e}start(e,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(jg(d).point)},i=(d,h)=>{const{drag:f,dragPropagation:p,onDragStart:g}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=mse(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Hs(v=>{let m=this.getAxisMotionValue(v).get()||0;if(uo.test(m)){const{projection:x}=this.visualElement;if(x&&x.layout){const b=x.layout.layoutBox[v];b&&(m=Ns(b)*(parseFloat(m)/100))}}this.originPoint[v]=m}),g&&Wt.postRender(()=>g(d,h)),aE(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:g,onDrag:y}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:v}=h;if(p&&this.currentDirection===null){this.currentDirection=Coe(v),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,v),this.updateAxis("y",h.point,v),this.visualElement.render(),y&&y(d,h)},a=(d,h)=>this.stop(d,h),l=()=>Hs(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new P$(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:L$(this.visualElement)})}stop(e,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Wt.postRender(()=>i(e,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:s}=this.getProps();if(!n||!Am(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=hoe(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;r&&Xu(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=foe(s.layoutBox,r):this.constraints=!1,this.elastic=yoe(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Hs(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=moe(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!Xu(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=boe(n,s.root,this.visualElement.getTransformPagePoint());let o=poe(s.layout.layoutBox,i);if(r){const a=r(voe(o));this.hasMutatedConstraints=!!a,a&&(o=M$(a))}return o}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Hs(d=>{if(!Am(d,r,this.currentDirection))return;let h=l&&l[d]||{};o&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,g={type:"inertia",velocity:n?e[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,g)});return Promise.all(c).then(a)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return aE(this.visualElement,e),n.start(T2(e,n,0,r,this.visualElement,!1))}stopAnimation(){Hs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Hs(e=>{var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Hs(r=>{const{drag:n}=this.getProps();if(!Am(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[r];i.set(e[r]-Jt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Xu(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Hs(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=goe({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Hs(o=>{if(!Am(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Jt(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;Soe.set(this.visualElement,this);const e=this.visualElement.current,r=Xf(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();Xu(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Wt.read(n);const o=Wp(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Hs(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=gE,dragMomentum:a=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Am(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function Coe(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class Eoe extends Ml{constructor(e){super(e),this.removeGroupControls=Es,this.removeListeners=Es,this.controls=new _oe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Es}unmount(){this.removeGroupControls(),this.removeListeners()}}const RO=t=>(e,r)=>{t&&Wt.postRender(()=>t(e,r))};class koe extends Ml{constructor(){super(...arguments),this.removePointerDownListener=Es}onPointerDown(e){this.session=new P$(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:L$(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:RO(e),onStart:RO(r),onMove:n,onEnd:(i,o)=>{delete this.session,s&&Wt.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=Xf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const By={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function OO(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Zh={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(qe.test(t))t=parseFloat(t);else return t;const r=OO(t,e.target.x),n=OO(t,e.target.y);return`${r}% ${n}%`}},Toe={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,s=pl.parse(t);if(s.length>5)return n;const i=pl.createTransformer(t),o=typeof s[0]!="number"?1:0,a=r.x.scale*e.x,l=r.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=Jt(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class joe extends w.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=e;Yne(Aoe),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),By.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Wt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),r2.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function B$(t){const[e,r]=S5(),n=w.useContext(KT);return u.jsx(joe,{...t,layoutGroup:n,switchLayoutGroup:w.useContext(A5),isPresent:e,safeToRemove:r})}const Aoe={borderRadius:{...Zh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Zh,borderTopRightRadius:Zh,borderBottomLeftRadius:Zh,borderBottomRightRadius:Zh,boxShadow:Toe};function Poe(t,e,r){const n=wn(t)?t:zp(t);return n.start(T2("",n,e,r)),n.animation}function Noe(t){return t instanceof SVGElement&&t.tagName!=="svg"}const Roe=(t,e)=>t.depth-e.depth;class Ooe{constructor(){this.children=[],this.isDirty=!1}add(e){m2(this.children,e),this.isDirty=!0}remove(e){y2(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Roe),this.isDirty=!1,this.children.forEach(e)}}function Moe(t,e){const r=ho.now(),n=({timestamp:s})=>{const i=s-r;i>=e&&(fl(n),t(i-e))};return Wt.read(n,!0),()=>fl(n)}const $$=["TopLeft","TopRight","BottomLeft","BottomRight"],Ioe=$$.length,MO=t=>typeof t=="string"?parseFloat(t):t,IO=t=>typeof t=="number"||qe.test(t);function Doe(t,e,r,n,s,i){s?(t.opacity=Jt(0,r.opacity!==void 0?r.opacity:1,Foe(n)),t.opacityExit=Jt(e.opacity!==void 0?e.opacity:1,0,Loe(n))):i&&(t.opacity=Jt(e.opacity!==void 0?e.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<Ioe;o++){const a=`border${$$[o]}Radius`;let l=DO(e,a),c=DO(r,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||IO(l)===IO(c)?(t[a]=Math.max(Jt(MO(l),MO(c),n),0),(uo.test(c)||uo.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||r.rotate)&&(t.rotate=Jt(e.rotate||0,r.rotate||0,n))}function DO(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Foe=U$(0,.5,i$),Loe=U$(.5,.95,Es);function U$(t,e,r){return n=>n<t?0:n>e?1:r(Ld(t,e,n))}function FO(t,e){t.min=e.min,t.max=e.max}function Us(t,e){FO(t.x,e.x),FO(t.y,e.y)}function LO(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function BO(t,e,r,n,s){return t-=e,t=W0(t,1/r,n),s!==void 0&&(t=W0(t,1/s,n)),t}function Boe(t,e=0,r=1,n=.5,s,i=t,o=t){if(uo.test(e)&&(e=parseFloat(e),e=Jt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Jt(i.min,i.max,n);t===i&&(a-=e),t.min=BO(t.min,e,r,a,s),t.max=BO(t.max,e,r,a,s)}function $O(t,e,[r,n,s],i,o){Boe(t,e[r],e[n],e[s],e.scale,i,o)}const $oe=["x","scaleX","originX"],Uoe=["y","scaleY","originY"];function UO(t,e,r,n){$O(t.x,e,$oe,r?r.x:void 0,n?n.x:void 0),$O(t.y,e,Uoe,r?r.y:void 0,n?n.y:void 0)}function VO(t){return t.translate===0&&t.scale===1}function V$(t){return VO(t.x)&&VO(t.y)}function zO(t,e){return t.min===e.min&&t.max===e.max}function Voe(t,e){return zO(t.x,e.x)&&zO(t.y,e.y)}function HO(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function z$(t,e){return HO(t.x,e.x)&&HO(t.y,e.y)}function WO(t){return Ns(t.x)/Ns(t.y)}function qO(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class zoe{constructor(){this.members=[]}add(e){m2(this.members,e),e.scheduleRender()}remove(e){if(y2(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(s=>e===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Hoe(t,e,r){let n="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(r==null?void 0:r.z)||0;if((s||i||o)&&(n=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:c,rotate:d,rotateX:h,rotateY:f,skewX:p,skewY:g}=r;c&&(n=`perspective(${c}px) ${n}`),d&&(n+=`rotate(${d}deg) `),h&&(n+=`rotateX(${h}deg) `),f&&(n+=`rotateY(${f}deg) `),p&&(n+=`skewX(${p}deg) `),g&&(n+=`skewY(${g}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(n+=`scale(${a}, ${l})`),n||"none"}const Zl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},vf=typeof window<"u"&&window.MotionDebug!==void 0,X1=["","X","Y","Z"],Woe={visibility:"hidden"},GO=1e3;let qoe=0;function J1(t,e,r,n){const{latestValues:s}=e;s[t]&&(r[t]=s[t],e.setStaticValue(t,0),n&&(n[t]=0))}function H$(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=Z5(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",Wt,!(s||i))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&H$(n)}function W$({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=qoe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,vf&&(Zl.totalNodes=Zl.resolvedTargetDeltas=Zl.recalculatedProjection=0),this.nodes.forEach(Yoe),this.nodes.forEach(eae),this.nodes.forEach(tae),this.nodes.forEach(Xoe),vf&&window.MotionDebug.record(Zl)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ooe)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new v2),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Noe(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Moe(f,250),By.hasAnimatedSinceResize&&(By.hasAnimatedSinceResize=!1,this.nodes.forEach(YO))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||d.getDefaultTransition()||oae,{onLayoutAnimationStart:v,onLayoutAnimationComplete:m}=d.getProps(),x=!this.targetLayout||!z$(this.targetLayout,g)||p,b=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,b);const _={...h2(y,"layout"),onPlay:v,onComplete:m};(d.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else f||YO(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,fl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(rae),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&H$(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(KO);return}this.isUpdating||this.nodes.forEach(Zoe),this.isUpdating=!1,this.nodes.forEach(Qoe),this.nodes.forEach(Goe),this.nodes.forEach(Koe),this.clearAllSnapshots();const a=ho.now();tn.delta=ua(0,1e3/60,a-tn.timestamp),tn.timestamp=a,tn.isProcessing=!0,U1.update.process(tn),U1.preRender.process(tn),U1.render.process(tn),tn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,r2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Joe),this.sharedNodes.forEach(nae)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Wt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Wt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=cr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!V$(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&(a||Jl(this.latestValues)||d)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),aae(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return cr();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(lae))){const{scroll:d}=this.root;d&&(Qu(l.x,d.offset.x),Qu(l.y,d.offset.y))}return l}removeElementScroll(o){var a;const l=cr();if(Us(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Us(l,o),Qu(l.x,h.offset.x),Qu(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=cr();Us(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ed(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Jl(d.latestValues)&&ed(l,d.latestValues)}return Jl(this.latestValues)&&ed(l,this.latestValues),l}removeTransform(o){const a=cr();Us(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Jl(c.latestValues))continue;mE(c.latestValues)&&c.updateSnapshot();const d=cr(),h=c.measurePageBox();Us(d,h),UO(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return Jl(this.latestValues)&&UO(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==tn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=tn.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=cr(),this.relativeTargetOrigin=cr(),Zf(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Us(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=cr(),this.targetWithTransforms=cr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),doe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Us(this.target,this.layout.layoutBox),D$(this.target,this.targetDelta)):Us(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=cr(),this.relativeTargetOrigin=cr(),Zf(this.relativeTargetOrigin,this.target,p.target),Us(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}vf&&Zl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||mE(this.parent.latestValues)||I$(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===tn.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Us(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;woe(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=cr());const{target:g}=a;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(LO(this.prevProjectionDelta.x,this.projectionDelta.x),LO(this.prevProjectionDelta.y,this.projectionDelta.y)),Jf(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!qO(this.projectionDelta.x,this.prevProjectionDelta.x)||!qO(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),vf&&Zl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Zu(),this.projectionDelta=Zu(),this.projectionDeltaWithTransform=Zu()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},h=Zu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=cr(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,y=p!==g,v=this.getStack(),m=!v||v.members.length<=1,x=!!(y&&!m&&this.options.crossfade===!0&&!this.path.some(iae));this.animationProgress=0;let b;this.mixTargetDelta=_=>{const C=_/1e3;XO(h.x,o.x,C),XO(h.y,o.y,C),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Zf(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sae(this.relativeTarget,this.relativeTargetOrigin,f,C),b&&Voe(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=cr()),Us(b,this.relativeTarget)),y&&(this.animationValues=d,Doe(d,c,this.latestValues,C,x,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(fl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Wt.update(()=>{By.hasAnimatedSinceResize=!0,this.currentAnimation=Poe(0,GO,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(GO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&q$(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||cr();const h=Ns(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=Ns(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}Us(a,l),ed(a,d),Jf(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new zoe),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&J1("z",o,c,this.animationValues);for(let d=0;d<X1.length;d++)J1(`rotate${X1[d]}`,o,c,this.animationValues),J1(`skew${X1[d]}`,o,c,this.animationValues);o.render();for(const d in c)o.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Woe;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Fy(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Fy(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Jl(this.latestValues)&&(y.transform=d?d({},""):"none",this.hasProjected=!1),y}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=Hoe(this.projectionDeltaWithTransform,this.treeScale,f),d&&(c.transform=d(f,c.transform));const{x:p,y:g}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const y in $0){if(f[y]===void 0)continue;const{correct:v,applyTo:m}=$0[y],x=c.transform==="none"?f[y]:v(f[y],h);if(m){const b=m.length;for(let _=0;_<b;_++)c[m[_]]=x}else c[y]=x}return this.options.layoutId&&(c.pointerEvents=h===this?Fy(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(KO),this.root.sharedNodes.clear()}}}function Goe(t){t.updateLayout()}function Koe(t){var e;const r=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&r&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:i}=t.options,o=r.source!==t.layout.source;i==="size"?Hs(h=>{const f=o?r.measuredBox[h]:r.layoutBox[h],p=Ns(f);f.min=n[h].min,f.max=f.min+p}):q$(i,r.layoutBox,n)&&Hs(h=>{const f=o?r.measuredBox[h]:r.layoutBox[h],p=Ns(n[h]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const a=Zu();Jf(a,n,r.layoutBox);const l=Zu();o?Jf(l,t.applyTransform(s,!0),r.measuredBox):Jf(l,n,r.layoutBox);const c=!V$(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const g=cr();Zf(g,r.layoutBox,f.layoutBox);const y=cr();Zf(y,n,p.layoutBox),z$(g,y)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=g,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function Yoe(t){vf&&Zl.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Xoe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Joe(t){t.clearSnapshot()}function KO(t){t.clearMeasurements()}function Zoe(t){t.isLayoutDirty=!1}function Qoe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function YO(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function eae(t){t.resolveTargetDelta()}function tae(t){t.calcProjection()}function rae(t){t.resetSkewAndRotation()}function nae(t){t.removeLeadSnapshot()}function XO(t,e,r){t.translate=Jt(e.translate,0,r),t.scale=Jt(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function JO(t,e,r,n){t.min=Jt(e.min,r.min,n),t.max=Jt(e.max,r.max,n)}function sae(t,e,r,n){JO(t.x,e.x,r.x,n),JO(t.y,e.y,r.y,n)}function iae(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const oae={duration:.45,ease:[.4,0,.1,1]},ZO=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),QO=ZO("applewebkit/")&&!ZO("chrome/")?Math.round:Es;function eM(t){t.min=QO(t.min),t.max=QO(t.max)}function aae(t){eM(t.x),eM(t.y)}function q$(t,e,r){return t==="position"||t==="preserve-aspect"&&!uoe(WO(e),WO(r),.2)}function lae(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const cae=W$({attachResizeListener:(t,e)=>Wp(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Z1={current:void 0},G$=W$({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Z1.current){const t=new cae({});t.mount(window),t.setOptions({layoutScroll:!0}),Z1.current=t}return Z1.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),uae={pan:{Feature:koe},drag:{Feature:Eoe,ProjectionNode:G$,MeasureLayout:B$}};function tM(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,i=n[s];i&&Wt.postRender(()=>i(e,jg(e)))}class dae extends Ml{mount(){const{current:e}=this.node;e&&(this.unmount=dse(e,r=>(tM(this.node,r,"Start"),n=>tM(this.node,n,"End"))))}unmount(){}}class hae extends Ml{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Tg(Wp(this.node.current,"focus",()=>this.onFocus()),Wp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function rM(t,e,r){const{props:n}=t;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),i=n[s];i&&Wt.postRender(()=>i(e,jg(e)))}class fae extends Ml{mount(){const{current:e}=this.node;e&&(this.unmount=gse(e,r=>(rM(this.node,r,"Start"),(n,{success:s})=>rM(this.node,n,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const vE=new WeakMap,Q1=new WeakMap,pae=t=>{const e=vE.get(t.target);e&&e(t)},gae=t=>{t.forEach(pae)};function mae({root:t,...e}){const r=t||document;Q1.has(r)||Q1.set(r,{});const n=Q1.get(r),s=JSON.stringify(e);return n[s]||(n[s]=new IntersectionObserver(gae,{root:t,...e})),n[s]}function yae(t,e,r){const n=mae(e);return vE.set(t,r),n.observe(t),()=>{vE.delete(t),n.unobserve(t)}}const vae={some:0,all:1};class xae extends Ml{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=e,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:vae[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=c?d:h;f&&f(l)};return yae(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(wae(e,r))&&this.startObserver()}unmount(){}}function wae({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const bae={inView:{Feature:xae},tap:{Feature:fae},focus:{Feature:hae},hover:{Feature:dae}},Sae={layout:{ProjectionNode:G$,MeasureLayout:B$}},xE={current:null},K$={current:!1};function _ae(){if(K$.current=!0,!!JT)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>xE.current=t.matches;t.addListener(e),e()}else xE.current=!1}const Cae=[...x$,mn,pl],Eae=t=>Cae.find(v$(t)),nM=new WeakMap;function kae(t,e,r){for(const n in e){const s=e[n],i=r[n];if(wn(s))t.addValue(n,s);else if(wn(i))t.addValue(n,zp(s,{owner:t}));else if(i!==s)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(n);t.addValue(n,zp(o!==void 0?o:s,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const sM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Tae{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=C2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=ho.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Wt.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:d}=o;this.onUpdate=d,this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Ux(r),this.isVariantNode=T5(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(r,{},this);for(const p in f){const g=f[p];l[p]!==void 0&&wn(g)&&g.set(l[p],!1)}}mount(e){this.current=e,nM.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),K$.current||_ae(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:xE.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){nM.delete(this.current),this.projection&&this.projection.unmount(),fl(this.notifyUpdate),fl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const r=this.features[e];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Yc.has(e),s=r.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Wt.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Bd){const r=Bd[e];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):cr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<sM.length;n++){const s=sM[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=kae(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=zp(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){var n;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(m$(s)||a$(s))?s=parseFloat(s):!Eae(s)&&pl.test(r)&&(s=f$(e,r)),this.setBaseTarget(e,wn(s)?s.get():s)),wn(s)?s.get():s}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var r;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const o=s2(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);o&&(s=o[e])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!wn(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new v2),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}}class Y$ extends Tae{constructor(){super(...arguments),this.KeyframeResolver=w$}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;wn(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function jae(t){return window.getComputedStyle(t)}class Aae extends Y${constructor(){super(...arguments),this.type="html",this.renderInstance=D5}readValueFromInstance(e,r){if(Yc.has(r)){const n=_2(r);return n&&n.default||0}else{const n=jae(e),s=(O5(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:r}){return F$(e,r)}build(e,r,n){a2(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return d2(e,r,n)}}class Pae extends Y${constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=cr}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(Yc.has(r)){const n=_2(r);return n&&n.default||0}return r=F5.has(r)?r:t2(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return $5(e,r,n)}build(e,r,n){l2(e,r,this.isSVGTag,n.transformTemplate)}renderInstance(e,r,n,s){L5(e,r,n,s)}mount(e){this.isSVGTag=u2(e.tagName),super.mount(e)}}const Nae=(t,e)=>n2(t)?new Pae(e):new Aae(e,{allowProjection:t!==w.Fragment}),Rae=sse({...toe,...bae,...uae,...Sae},Nae),ze=xne(Rae);var Ag=t=>t.type==="checkbox",td=t=>t instanceof Date,On=t=>t==null;const X$=t=>typeof t=="object";var Tr=t=>!On(t)&&!Array.isArray(t)&&X$(t)&&!td(t),J$=t=>Tr(t)&&t.target?Ag(t.target)?t.target.checked:t.target.value:t,Oae=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Z$=(t,e)=>t.has(Oae(e)),Mae=t=>{const e=t.constructor&&t.constructor.prototype;return Tr(e)&&e.hasOwnProperty("isPrototypeOf")},j2=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function qn(t){let e;const r=Array.isArray(t);if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(j2&&(t instanceof Blob||t instanceof FileList))&&(r||Tr(t)))if(e=r?[]:{},!r&&!Mae(t))e=t;else for(const n in t)t.hasOwnProperty(n)&&(e[n]=qn(t[n]));else return t;return e}var Hx=t=>Array.isArray(t)?t.filter(Boolean):[],ir=t=>t===void 0,Ee=(t,e,r)=>{if(!e||!Tr(t))return r;const n=Hx(e.split(/[,[\].]+?/)).reduce((s,i)=>On(s)?s:s[i],t);return ir(n)||n===t?ir(t[e])?r:t[e]:n},Ks=t=>typeof t=="boolean",A2=t=>/^\w*$/.test(t),Q$=t=>Hx(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Tt=(t,e,r)=>{let n=-1;const s=A2(e)?[e]:Q$(e),i=s.length,o=i-1;for(;++n<i;){const a=s[n];let l=r;if(n!==o){const c=t[a];l=Tr(c)||Array.isArray(c)?c:isNaN(+s[n+1])?{}:[]}if(a==="__proto__")return;t[a]=l,t=t[a]}return t};const q0={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ji={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ao={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},eU=ie.createContext(null),Wx=()=>ie.useContext(eU),Iae=t=>{const{children:e,...r}=t;return ie.createElement(eU.Provider,{value:r},e)};var tU=(t,e,r,n=!0)=>{const s={defaultValues:e._defaultValues};for(const i in t)Object.defineProperty(s,i,{get:()=>{const o=i;return e._proxyFormState[o]!==ji.all&&(e._proxyFormState[o]=!n||ji.all),r&&(r[o]=!0),t[o]}});return s},Gn=t=>Tr(t)&&!Object.keys(t).length,rU=(t,e,r,n)=>{r(t);const{name:s,...i}=t;return Gn(i)||Object.keys(i).length>=Object.keys(e).length||Object.keys(i).find(o=>e[o]===(!n||ji.all))},Qf=t=>Array.isArray(t)?t:[t],nU=(t,e,r)=>!t||!e||t===e||Qf(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n)));function P2(t){const e=ie.useRef(t);e.current=t,ie.useEffect(()=>{const r=!t.disabled&&e.current.subject&&e.current.subject.subscribe({next:e.current.next});return()=>{r&&r.unsubscribe()}},[t.disabled])}function Dae(t){const e=Wx(),{control:r=e.control,disabled:n,name:s,exact:i}=t||{},[o,a]=ie.useState(r._formState),l=ie.useRef(!0),c=ie.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=ie.useRef(s);return d.current=s,P2({disabled:n,next:h=>l.current&&nU(d.current,h.name,i)&&rU(h,c.current,r._updateFormState)&&a({...r._formState,...h}),subject:r._subjects.state}),ie.useEffect(()=>(l.current=!0,c.current.isValid&&r._updateValid(!0),()=>{l.current=!1}),[r]),tU(o,r,c.current,!1)}var io=t=>typeof t=="string",sU=(t,e,r,n,s)=>io(t)?(n&&e.watch.add(t),Ee(r,t,s)):Array.isArray(t)?t.map(i=>(n&&e.watch.add(i),Ee(r,i))):(n&&(e.watchAll=!0),r);function Fae(t){const e=Wx(),{control:r=e.control,name:n,defaultValue:s,disabled:i,exact:o}=t||{},a=ie.useRef(n);a.current=n,P2({disabled:i,subject:r._subjects.values,next:d=>{nU(a.current,d.name,o)&&c(qn(sU(a.current,r._names,d.values||r._formValues,!1,s)))}});const[l,c]=ie.useState(r._getWatch(n,s));return ie.useEffect(()=>r._removeUnmounted()),l}function Lae(t){const e=Wx(),{name:r,disabled:n,control:s=e.control,shouldUnregister:i}=t,o=Z$(s._names.array,r),a=Fae({control:s,name:r,defaultValue:Ee(s._formValues,r,Ee(s._defaultValues,r,t.defaultValue)),exact:!0}),l=Dae({control:s,name:r,exact:!0}),c=ie.useRef(s.register(r,{...t.rules,value:a,...Ks(t.disabled)?{disabled:t.disabled}:{}}));return ie.useEffect(()=>{const d=s._options.shouldUnregister||i,h=(f,p)=>{const g=Ee(s._fields,f);g&&g._f&&(g._f.mount=p)};if(h(r,!0),d){const f=qn(Ee(s._options.defaultValues,r));Tt(s._defaultValues,r,f),ir(Ee(s._formValues,r))&&Tt(s._formValues,r,f)}return()=>{(o?d&&!s._state.action:d)?s.unregister(r):h(r,!1)}},[r,s,o,i]),ie.useEffect(()=>{Ee(s._fields,r)&&s._updateDisabledField({disabled:n,fields:s._fields,name:r,value:Ee(s._fields,r)._f.value})},[n,r,s]),{field:{name:r,value:a,...Ks(n)||l.disabled?{disabled:l.disabled||n}:{},onChange:ie.useCallback(d=>c.current.onChange({target:{value:J$(d),name:r},type:q0.CHANGE}),[r]),onBlur:ie.useCallback(()=>c.current.onBlur({target:{value:Ee(s._formValues,r),name:r},type:q0.BLUR}),[r,s]),ref:ie.useCallback(d=>{const h=Ee(s._fields,r);h&&d&&(h._f.ref={focus:()=>d.focus(),select:()=>d.select(),setCustomValidity:f=>d.setCustomValidity(f),reportValidity:()=>d.reportValidity()})},[s._fields,r])},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ee(l.errors,r)},isDirty:{enumerable:!0,get:()=>!!Ee(l.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Ee(l.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Ee(l.validatingFields,r)},error:{enumerable:!0,get:()=>Ee(l.errors,r)}})}}const Bae=t=>t.render(Lae(t));var iU=(t,e,r,n,s)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:s||!0}}:{},iM=t=>({isOnSubmit:!t||t===ji.onSubmit,isOnBlur:t===ji.onBlur,isOnChange:t===ji.onChange,isOnAll:t===ji.all,isOnTouch:t===ji.onTouched}),oM=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const ep=(t,e,r,n)=>{for(const s of r||Object.keys(t)){const i=Ee(t,s);if(i){const{_f:o,...a}=i;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],s)&&!n)return!0;if(o.ref&&e(o.ref,o.name)&&!n)return!0;if(ep(a,e))break}else if(Tr(a)&&ep(a,e))break}}};var $ae=(t,e,r)=>{const n=Qf(Ee(t,r));return Tt(n,"root",e[r]),Tt(t,r,n),t},N2=t=>t.type==="file",Uo=t=>typeof t=="function",G0=t=>{if(!j2)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},$y=t=>io(t),R2=t=>t.type==="radio",K0=t=>t instanceof RegExp;const aM={value:!1,isValid:!1},lM={value:!0,isValid:!0};var oU=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!ir(t[0].attributes.value)?ir(t[0].value)||t[0].value===""?lM:{value:t[0].value,isValid:!0}:lM:aM}return aM};const cM={isValid:!1,value:null};var aU=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,cM):cM;function uM(t,e,r="validate"){if($y(t)||Array.isArray(t)&&t.every($y)||Ks(t)&&!t)return{type:r,message:$y(t)?t:"",ref:e}}var Su=t=>Tr(t)&&!K0(t)?t:{value:t,message:""},dM=async(t,e,r,n,s)=>{const{ref:i,refs:o,required:a,maxLength:l,minLength:c,min:d,max:h,pattern:f,validate:p,name:g,valueAsNumber:y,mount:v,disabled:m}=t._f,x=Ee(e,g);if(!v||m)return{};const b=o?o[0]:i,_=L=>{n&&b.reportValidity&&(b.setCustomValidity(Ks(L)?"":L||""),b.reportValidity())},C={},T=R2(i),O=Ag(i),R=T||O,I=(y||N2(i))&&ir(i.value)&&ir(x)||G0(i)&&i.value===""||x===""||Array.isArray(x)&&!x.length,H=iU.bind(null,g,r,C),re=(L,z,Y,pe=Ao.maxLength,Q=Ao.minLength)=>{const se=L?z:Y;C[g]={type:L?pe:Q,message:se,ref:i,...H(L?pe:Q,se)}};if(s?!Array.isArray(x)||!x.length:a&&(!R&&(I||On(x))||Ks(x)&&!x||O&&!oU(o).isValid||T&&!aU(o).isValid)){const{value:L,message:z}=$y(a)?{value:!!a,message:a}:Su(a);if(L&&(C[g]={type:Ao.required,message:z,ref:b,...H(Ao.required,z)},!r))return _(z),C}if(!I&&(!On(d)||!On(h))){let L,z;const Y=Su(h),pe=Su(d);if(!On(x)&&!isNaN(x)){const Q=i.valueAsNumber||x&&+x;On(Y.value)||(L=Q>Y.value),On(pe.value)||(z=Q<pe.value)}else{const Q=i.valueAsDate||new Date(x),se=de=>new Date(new Date().toDateString()+" "+de),F=i.type=="time",K=i.type=="week";io(Y.value)&&x&&(L=F?se(x)>se(Y.value):K?x>Y.value:Q>new Date(Y.value)),io(pe.value)&&x&&(z=F?se(x)<se(pe.value):K?x<pe.value:Q<new Date(pe.value))}if((L||z)&&(re(!!L,Y.message,pe.message,Ao.max,Ao.min),!r))return _(C[g].message),C}if((l||c)&&!I&&(io(x)||s&&Array.isArray(x))){const L=Su(l),z=Su(c),Y=!On(L.value)&&x.length>+L.value,pe=!On(z.value)&&x.length<+z.value;if((Y||pe)&&(re(Y,L.message,z.message),!r))return _(C[g].message),C}if(f&&!I&&io(x)){const{value:L,message:z}=Su(f);if(K0(L)&&!x.match(L)&&(C[g]={type:Ao.pattern,message:z,ref:i,...H(Ao.pattern,z)},!r))return _(z),C}if(p){if(Uo(p)){const L=await p(x,e),z=uM(L,b);if(z&&(C[g]={...z,...H(Ao.validate,z.message)},!r))return _(z.message),C}else if(Tr(p)){let L={};for(const z in p){if(!Gn(L)&&!r)break;const Y=uM(await p[z](x,e),b,z);Y&&(L={...Y,...H(z,Y.message)},_(Y.message),r&&(C[g]=L))}if(!Gn(L)&&(C[g]={ref:b,...L},!r))return C}}return _(!0),C};function Uae(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=ir(t)?n++:t[e[n++]];return t}function Vae(t){for(const e in t)if(t.hasOwnProperty(e)&&!ir(t[e]))return!1;return!0}function Nr(t,e){const r=Array.isArray(e)?e:A2(e)?[e]:Q$(e),n=r.length===1?t:Uae(t,r),s=r.length-1,i=r[s];return n&&delete n[i],s!==0&&(Tr(n)&&Gn(n)||Array.isArray(n)&&Vae(n))&&Nr(t,r.slice(0,-1)),t}var eS=()=>{let t=[];return{get observers(){return t},next:s=>{for(const i of t)i.next&&i.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(i=>i!==s)}}),unsubscribe:()=>{t=[]}}},Y0=t=>On(t)||!X$(t);function za(t,e){if(Y0(t)||Y0(e))return t===e;if(td(t)&&td(e))return t.getTime()===e.getTime();const r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(const s of r){const i=t[s];if(!n.includes(s))return!1;if(s!=="ref"){const o=e[s];if(td(i)&&td(o)||Tr(i)&&Tr(o)||Array.isArray(i)&&Array.isArray(o)?!za(i,o):i!==o)return!1}}return!0}var lU=t=>t.type==="select-multiple",zae=t=>R2(t)||Ag(t),tS=t=>G0(t)&&t.isConnected,cU=t=>{for(const e in t)if(Uo(t[e]))return!0;return!1};function X0(t,e={}){const r=Array.isArray(t);if(Tr(t)||r)for(const n in t)Array.isArray(t[n])||Tr(t[n])&&!cU(t[n])?(e[n]=Array.isArray(t[n])?[]:{},X0(t[n],e[n])):On(t[n])||(e[n]=!0);return e}function uU(t,e,r){const n=Array.isArray(t);if(Tr(t)||n)for(const s in t)Array.isArray(t[s])||Tr(t[s])&&!cU(t[s])?ir(e)||Y0(r[s])?r[s]=Array.isArray(t[s])?X0(t[s],[]):{...X0(t[s])}:uU(t[s],On(e)?{}:e[s],r[s]):r[s]=!za(t[s],e[s]);return r}var Pm=(t,e)=>uU(t,e,X0(e)),dU=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>ir(t)?t:e?t===""?NaN:t&&+t:r&&io(t)?new Date(t):n?n(t):t;function rS(t){const e=t.ref;if(!(t.refs?t.refs.every(r=>r.disabled):e.disabled))return N2(e)?e.files:R2(e)?aU(t.refs).value:lU(e)?[...e.selectedOptions].map(({value:r})=>r):Ag(e)?oU(t.refs).value:dU(ir(e.value)?t.ref.value:e.value,t)}var Hae=(t,e,r,n)=>{const s={};for(const i of t){const o=Ee(e,i);o&&Tt(s,i,o._f)}return{criteriaMode:r,names:[...t],fields:s,shouldUseNativeValidation:n}},Qh=t=>ir(t)?t:K0(t)?t.source:Tr(t)?K0(t.value)?t.value.source:t.value:t;const hM="AsyncFunction";var Wae=t=>(!t||!t.validate)&&!!(Uo(t.validate)&&t.validate.constructor.name===hM||Tr(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===hM)),qae=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate);function fM(t,e,r){const n=Ee(t,r);if(n||A2(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const i=s.join("."),o=Ee(e,i),a=Ee(t,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(a&&a.type)return{name:i,error:a};s.pop()}return{name:r}}var Gae=(t,e,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(e||t):(r?n.isOnBlur:s.isOnBlur)?!t:(r?n.isOnChange:s.isOnChange)?t:!0,Kae=(t,e)=>!Hx(Ee(t,e)).length&&Nr(t,e);const Yae={mode:ji.onSubmit,reValidateMode:ji.onChange,shouldFocusError:!0};function Xae(t={}){let e={...Yae,...t},r={submitCount:0,isDirty:!1,isLoading:Uo(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},s=Tr(e.defaultValues)||Tr(e.values)?qn(e.defaultValues||e.values)||{}:{},i=e.shouldUnregister?{}:qn(s),o={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:eS(),array:eS(),state:eS()},f=iM(e.mode),p=iM(e.reValidateMode),g=e.criteriaMode===ji.all,y=S=>k=>{clearTimeout(c),c=setTimeout(S,k)},v=async S=>{if(d.isValid||S){const k=e.resolver?Gn((await R()).errors):await H(n,!0);k!==r.isValid&&h.state.next({isValid:k})}},m=(S,k)=>{(d.isValidating||d.validatingFields)&&((S||Array.from(a.mount)).forEach(N=>{N&&(k?Tt(r.validatingFields,N,k):Nr(r.validatingFields,N))}),h.state.next({validatingFields:r.validatingFields,isValidating:!Gn(r.validatingFields)}))},x=(S,k=[],N,q,W=!0,ne=!0)=>{if(q&&N){if(o.action=!0,ne&&Array.isArray(Ee(n,S))){const we=N(Ee(n,S),q.argA,q.argB);W&&Tt(n,S,we)}if(ne&&Array.isArray(Ee(r.errors,S))){const we=N(Ee(r.errors,S),q.argA,q.argB);W&&Tt(r.errors,S,we),Kae(r.errors,S)}if(d.touchedFields&&ne&&Array.isArray(Ee(r.touchedFields,S))){const we=N(Ee(r.touchedFields,S),q.argA,q.argB);W&&Tt(r.touchedFields,S,we)}d.dirtyFields&&(r.dirtyFields=Pm(s,i)),h.state.next({name:S,isDirty:L(S,k),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Tt(i,S,k)},b=(S,k)=>{Tt(r.errors,S,k),h.state.next({errors:r.errors})},_=S=>{r.errors=S,h.state.next({errors:r.errors,isValid:!1})},C=(S,k,N,q)=>{const W=Ee(n,S);if(W){const ne=Ee(i,S,ir(N)?Ee(s,S):N);ir(ne)||q&&q.defaultChecked||k?Tt(i,S,k?ne:rS(W._f)):pe(S,ne),o.mount&&v()}},T=(S,k,N,q,W)=>{let ne=!1,we=!1;const Le={name:S},Je=!!(Ee(n,S)&&Ee(n,S)._f&&Ee(n,S)._f.disabled);if(!N||q){d.isDirty&&(we=r.isDirty,r.isDirty=Le.isDirty=L(),ne=we!==Le.isDirty);const Ue=Je||za(Ee(s,S),k);we=!!(!Je&&Ee(r.dirtyFields,S)),Ue||Je?Nr(r.dirtyFields,S):Tt(r.dirtyFields,S,!0),Le.dirtyFields=r.dirtyFields,ne=ne||d.dirtyFields&&we!==!Ue}if(N){const Ue=Ee(r.touchedFields,S);Ue||(Tt(r.touchedFields,S,N),Le.touchedFields=r.touchedFields,ne=ne||d.touchedFields&&Ue!==N)}return ne&&W&&h.state.next(Le),ne?Le:{}},O=(S,k,N,q)=>{const W=Ee(r.errors,S),ne=d.isValid&&Ks(k)&&r.isValid!==k;if(t.delayError&&N?(l=y(()=>b(S,N)),l(t.delayError)):(clearTimeout(c),l=null,N?Tt(r.errors,S,N):Nr(r.errors,S)),(N?!za(W,N):W)||!Gn(q)||ne){const we={...q,...ne&&Ks(k)?{isValid:k}:{},errors:r.errors,name:S};r={...r,...we},h.state.next(we)}},R=async S=>{m(S,!0);const k=await e.resolver(i,e.context,Hae(S||a.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return m(S),k},I=async S=>{const{errors:k}=await R(S);if(S)for(const N of S){const q=Ee(k,N);q?Tt(r.errors,N,q):Nr(r.errors,N)}else r.errors=k;return k},H=async(S,k,N={valid:!0})=>{for(const q in S){const W=S[q];if(W){const{_f:ne,...we}=W;if(ne){const Le=a.array.has(ne.name),Je=W._f&&Wae(W._f);Je&&d.validatingFields&&m([q],!0);const Ue=await dM(W,i,g,e.shouldUseNativeValidation&&!k,Le);if(Je&&d.validatingFields&&m([q]),Ue[ne.name]&&(N.valid=!1,k))break;!k&&(Ee(Ue,ne.name)?Le?$ae(r.errors,Ue,ne.name):Tt(r.errors,ne.name,Ue[ne.name]):Nr(r.errors,ne.name))}!Gn(we)&&await H(we,k,N)}}return N.valid},re=()=>{for(const S of a.unMount){const k=Ee(n,S);k&&(k._f.refs?k._f.refs.every(N=>!tS(N)):!tS(k._f.ref))&&U(S)}a.unMount=new Set},L=(S,k)=>(S&&k&&Tt(i,S,k),!za(le(),s)),z=(S,k,N)=>sU(S,a,{...o.mount?i:ir(k)?s:io(S)?{[S]:k}:k},N,k),Y=S=>Hx(Ee(o.mount?i:s,S,t.shouldUnregister?Ee(s,S,[]):[])),pe=(S,k,N={})=>{const q=Ee(n,S);let W=k;if(q){const ne=q._f;ne&&(!ne.disabled&&Tt(i,S,dU(k,ne)),W=G0(ne.ref)&&On(k)?"":k,lU(ne.ref)?[...ne.ref.options].forEach(we=>we.selected=W.includes(we.value)):ne.refs?Ag(ne.ref)?ne.refs.length>1?ne.refs.forEach(we=>(!we.defaultChecked||!we.disabled)&&(we.checked=Array.isArray(W)?!!W.find(Le=>Le===we.value):W===we.value)):ne.refs[0]&&(ne.refs[0].checked=!!W):ne.refs.forEach(we=>we.checked=we.value===W):N2(ne.ref)?ne.ref.value="":(ne.ref.value=W,ne.ref.type||h.values.next({name:S,values:{...i}})))}(N.shouldDirty||N.shouldTouch)&&T(S,W,N.shouldTouch,N.shouldDirty,!0),N.shouldValidate&&de(S)},Q=(S,k,N)=>{for(const q in k){const W=k[q],ne=`${S}.${q}`,we=Ee(n,ne);(a.array.has(S)||!Y0(W)||we&&!we._f)&&!td(W)?Q(ne,W,N):pe(ne,W,N)}},se=(S,k,N={})=>{const q=Ee(n,S),W=a.array.has(S),ne=qn(k);Tt(i,S,ne),W?(h.array.next({name:S,values:{...i}}),(d.isDirty||d.dirtyFields)&&N.shouldDirty&&h.state.next({name:S,dirtyFields:Pm(s,i),isDirty:L(S,ne)})):q&&!q._f&&!On(ne)?Q(S,ne,N):pe(S,ne,N),oM(S,a)&&h.state.next({...r}),h.values.next({name:o.mount?S:void 0,values:{...i}})},F=async S=>{o.mount=!0;const k=S.target;let N=k.name,q=!0;const W=Ee(n,N),ne=()=>k.type?rS(W._f):J$(S),we=Le=>{q=Number.isNaN(Le)||za(Le,Ee(i,N,Le))};if(W){let Le,Je;const Ue=ne(),er=S.type===q0.BLUR||S.type===q0.FOCUS_OUT,hi=!qae(W._f)&&!e.resolver&&!Ee(r.errors,N)&&!W._f.deps||Gae(er,Ee(r.touchedFields,N),r.isSubmitted,p,f),jo=oM(N,a,er);Tt(i,N,Ue),er?(W._f.onBlur&&W._f.onBlur(S),l&&l(0)):W._f.onChange&&W._f.onChange(S);const $h=T(N,Ue,er,!1),Zg=!Gn($h)||jo;if(!er&&h.values.next({name:N,type:S.type,values:{...i}}),hi)return d.isValid&&(t.mode==="onBlur"?er&&v():v()),Zg&&h.state.next({name:N,...jo?{}:$h});if(!er&&jo&&h.state.next({...r}),e.resolver){const{errors:Uh}=await R([N]);if(we(Ue),q){const tb=fM(r.errors,n,N),mu=fM(Uh,n,tb.name||N);Le=mu.error,N=mu.name,Je=Gn(Uh)}}else m([N],!0),Le=(await dM(W,i,g,e.shouldUseNativeValidation))[N],m([N]),we(Ue),q&&(Le?Je=!1:d.isValid&&(Je=await H(n,!0)));q&&(W._f.deps&&de(W._f.deps),O(N,Je,Le,$h))}},K=(S,k)=>{if(Ee(r.errors,k)&&S.focus)return S.focus(),1},de=async(S,k={})=>{let N,q;const W=Qf(S);if(e.resolver){const ne=await I(ir(S)?S:W);N=Gn(ne),q=S?!W.some(we=>Ee(ne,we)):N}else S?(q=(await Promise.all(W.map(async ne=>{const we=Ee(n,ne);return await H(we&&we._f?{[ne]:we}:we)}))).every(Boolean),!(!q&&!r.isValid)&&v()):q=N=await H(n);return h.state.next({...!io(S)||d.isValid&&N!==r.isValid?{}:{name:S},...e.resolver||!S?{isValid:N}:{},errors:r.errors}),k.shouldFocus&&!q&&ep(n,K,S?W:a.mount),q},le=S=>{const k={...o.mount?i:s};return ir(S)?k:io(S)?Ee(k,S):S.map(N=>Ee(k,N))},be=(S,k)=>({invalid:!!Ee((k||r).errors,S),isDirty:!!Ee((k||r).dirtyFields,S),error:Ee((k||r).errors,S),isValidating:!!Ee(r.validatingFields,S),isTouched:!!Ee((k||r).touchedFields,S)}),Be=S=>{S&&Qf(S).forEach(k=>Nr(r.errors,k)),h.state.next({errors:S?r.errors:{}})},He=(S,k,N)=>{const q=(Ee(n,S,{_f:{}})._f||{}).ref,W=Ee(r.errors,S)||{},{ref:ne,message:we,type:Le,...Je}=W;Tt(r.errors,S,{...Je,...k,ref:q}),h.state.next({name:S,errors:r.errors,isValid:!1}),N&&N.shouldFocus&&q&&q.focus&&q.focus()},ht=(S,k)=>Uo(S)?h.values.subscribe({next:N=>S(z(void 0,k),N)}):z(S,k,!0),U=(S,k={})=>{for(const N of S?Qf(S):a.mount)a.mount.delete(N),a.array.delete(N),k.keepValue||(Nr(n,N),Nr(i,N)),!k.keepError&&Nr(r.errors,N),!k.keepDirty&&Nr(r.dirtyFields,N),!k.keepTouched&&Nr(r.touchedFields,N),!k.keepIsValidating&&Nr(r.validatingFields,N),!e.shouldUnregister&&!k.keepDefaultValue&&Nr(s,N);h.values.next({values:{...i}}),h.state.next({...r,...k.keepDirty?{isDirty:L()}:{}}),!k.keepIsValid&&v()},D=({disabled:S,name:k,field:N,fields:q,value:W})=>{if(Ks(S)&&o.mount||S){const ne=S?void 0:ir(W)?rS(N?N._f:Ee(q,k)._f):W;Tt(i,k,ne),T(k,ne,!1,!1,!0)}},ee=(S,k={})=>{let N=Ee(n,S);const q=Ks(k.disabled)||Ks(t.disabled);return Tt(n,S,{...N||{},_f:{...N&&N._f?N._f:{ref:{name:S}},name:S,mount:!0,...k}}),a.mount.add(S),N?D({field:N,disabled:Ks(k.disabled)?k.disabled:t.disabled,name:S,value:k.value}):C(S,!0,k.value),{...q?{disabled:k.disabled||t.disabled}:{},...e.progressive?{required:!!k.required,min:Qh(k.min),max:Qh(k.max),minLength:Qh(k.minLength),maxLength:Qh(k.maxLength),pattern:Qh(k.pattern)}:{},name:S,onChange:F,onBlur:F,ref:W=>{if(W){ee(S,k),N=Ee(n,S);const ne=ir(W.value)&&W.querySelectorAll&&W.querySelectorAll("input,select,textarea")[0]||W,we=zae(ne),Le=N._f.refs||[];if(we?Le.find(Je=>Je===ne):ne===N._f.ref)return;Tt(n,S,{_f:{...N._f,...we?{refs:[...Le.filter(tS),ne,...Array.isArray(Ee(s,S))?[{}]:[]],ref:{type:ne.type,name:S}}:{ref:ne}}}),C(S,!1,void 0,ne)}else N=Ee(n,S,{}),N._f&&(N._f.mount=!1),(e.shouldUnregister||k.shouldUnregister)&&!(Z$(a.array,S)&&o.action)&&a.unMount.add(S)}}},me=()=>e.shouldFocusError&&ep(n,K,a.mount),Se=S=>{Ks(S)&&(h.state.next({disabled:S}),ep(n,(k,N)=>{const q=Ee(n,N);q&&(k.disabled=q._f.disabled||S,Array.isArray(q._f.refs)&&q._f.refs.forEach(W=>{W.disabled=q._f.disabled||S}))},0,!1))},A=(S,k)=>async N=>{let q;N&&(N.preventDefault&&N.preventDefault(),N.persist&&N.persist());let W=qn(i);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:ne,values:we}=await R();r.errors=ne,W=we}else await H(n);if(Nr(r.errors,"root"),Gn(r.errors)){h.state.next({errors:{}});try{await S(W,N)}catch(ne){q=ne}}else k&&await k({...r.errors},N),me(),setTimeout(me);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Gn(r.errors)&&!q,submitCount:r.submitCount+1,errors:r.errors}),q)throw q},P=(S,k={})=>{Ee(n,S)&&(ir(k.defaultValue)?se(S,qn(Ee(s,S))):(se(S,k.defaultValue),Tt(s,S,qn(k.defaultValue))),k.keepTouched||Nr(r.touchedFields,S),k.keepDirty||(Nr(r.dirtyFields,S),r.isDirty=k.defaultValue?L(S,qn(Ee(s,S))):L()),k.keepError||(Nr(r.errors,S),d.isValid&&v()),h.state.next({...r}))},G=(S,k={})=>{const N=S?qn(S):s,q=qn(N),W=Gn(S),ne=W?s:q;if(k.keepDefaultValues||(s=N),!k.keepValues){if(k.keepDirtyValues)for(const we of a.mount)Ee(r.dirtyFields,we)?Tt(ne,we,Ee(i,we)):se(we,Ee(ne,we));else{if(j2&&ir(S))for(const we of a.mount){const Le=Ee(n,we);if(Le&&Le._f){const Je=Array.isArray(Le._f.refs)?Le._f.refs[0]:Le._f.ref;if(G0(Je)){const Ue=Je.closest("form");if(Ue){Ue.reset();break}}}}n={}}i=t.shouldUnregister?k.keepDefaultValues?qn(s):{}:qn(ne),h.array.next({values:{...ne}}),h.values.next({values:{...ne}})}a={mount:k.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!k.keepIsValid||!!k.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:k.keepSubmitCount?r.submitCount:0,isDirty:W?!1:k.keepDirty?r.isDirty:!!(k.keepDefaultValues&&!za(S,s)),isSubmitted:k.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:W?{}:k.keepDirtyValues?k.keepDefaultValues&&i?Pm(s,i):r.dirtyFields:k.keepDefaultValues&&S?Pm(s,S):k.keepDirty?r.dirtyFields:{},touchedFields:k.keepTouched?r.touchedFields:{},errors:k.keepErrors?r.errors:{},isSubmitSuccessful:k.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},ue=(S,k)=>G(Uo(S)?S(i):S,k);return{control:{register:ee,unregister:U,getFieldState:be,handleSubmit:A,setError:He,_executeSchema:R,_getWatch:z,_getDirty:L,_updateValid:v,_removeUnmounted:re,_updateFieldArray:x,_updateDisabledField:D,_getFieldArray:Y,_reset:G,_resetDefaultValues:()=>Uo(e.defaultValues)&&e.defaultValues().then(S=>{ue(S,e.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:S=>{r={...r,...S}},_disableForm:Se,_subjects:h,_proxyFormState:d,_setErrors:_,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(S){o=S},get _defaultValues(){return s},get _names(){return a},set _names(S){a=S},get _formState(){return r},set _formState(S){r=S},get _options(){return e},set _options(S){e={...e,...S}}},trigger:de,register:ee,handleSubmit:A,watch:ht,setValue:se,getValues:le,reset:ue,resetField:P,clearErrors:Be,unregister:U,setError:He,setFocus:(S,k={})=>{const N=Ee(n,S),q=N&&N._f;if(q){const W=q.refs?q.refs[0]:q.ref;W.focus&&(W.focus(),k.shouldSelect&&W.select())}},getFieldState:be}}function O2(t={}){const e=ie.useRef(),r=ie.useRef(),[n,s]=ie.useState({isDirty:!1,isValidating:!1,isLoading:Uo(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Uo(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...Xae(t),formState:n});const i=e.current.control;return i._options=t,P2({subject:i._subjects.state,next:o=>{rU(o,i._proxyFormState,i._updateFormState,!0)&&s({...i._formState})}}),ie.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),ie.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),ie.useEffect(()=>{t.values&&!za(t.values,r.current)?(i._reset(t.values,i._options.resetOptions),r.current=t.values,s(o=>({...o}))):i._resetDefaultValues()},[t.values,i]),ie.useEffect(()=>{t.errors&&i._setErrors(t.errors)},[t.errors,i]),ie.useEffect(()=>{i._state.mount||(i._updateValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),ie.useEffect(()=>{t.shouldUnregister&&i._subjects.values.next({values:i._getWatch()})},[t.shouldUnregister,i]),e.current.formState=tU(n,i),e.current}const pM=(t,e,r)=>{if(t&&"reportValidity"in t){const n=Ee(r,e);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},hU=(t,e)=>{for(const r in e.fields){const n=e.fields[r];n&&n.ref&&"reportValidity"in n.ref?pM(n.ref,r,t):n.refs&&n.refs.forEach(s=>pM(s,r,t))}},Jae=(t,e)=>{e.shouldUseNativeValidation&&hU(t,e);const r={};for(const n in t){const s=Ee(e.fields,n),i=Object.assign(t[n]||{},{ref:s&&s.ref});if(Zae(e.names||Object.keys(t),n)){const o=Object.assign({},Ee(r,n));Tt(o,"root",i),Tt(r,n,o)}else Tt(r,n,i)}return r},Zae=(t,e)=>t.some(r=>r.startsWith(e+"."));var Qae=function(t,e){for(var r={};t.length;){var n=t[0],s=n.code,i=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var a=n.unionErrors[0].errors[0];r[o]={message:a.message,type:a.code}}else r[o]={message:i,type:s};if("unionErrors"in n&&n.unionErrors.forEach(function(d){return d.errors.forEach(function(h){return t.push(h)})}),e){var l=r[o].types,c=l&&l[n.code];r[o]=iU(o,e,r,s,c?[].concat(c,n.message):n.message)}t.shift()}return r},M2=function(t,e,r){return r===void 0&&(r={}),function(n,s,i){try{return Promise.resolve(function(o,a){try{var l=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(c){return i.shouldUseNativeValidation&&hU({},i),{errors:{},values:r.raw?n:c}})}catch(c){return a(c)}return l&&l.then?l.then(void 0,a):l}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:Jae(Qae(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},_t;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(_t||(_t={}));var gM;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(gM||(gM={}));const Oe=_t.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),tc=t=>{switch(typeof t){case"undefined":return Oe.undefined;case"string":return Oe.string;case"number":return isNaN(t)?Oe.nan:Oe.number;case"boolean":return Oe.boolean;case"function":return Oe.function;case"bigint":return Oe.bigint;case"symbol":return Oe.symbol;case"object":return Array.isArray(t)?Oe.array:t===null?Oe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Oe.promise:typeof Map<"u"&&t instanceof Map?Oe.map:typeof Set<"u"&&t instanceof Set?Oe.set:typeof Date<"u"&&t instanceof Date?Oe.date:Oe.object;default:return Oe.unknown}},ve=_t.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ni extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(r(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return s(this),n}static assert(e){if(!(e instanceof ni))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,_t.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(e(s))):n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}ni.create=t=>new ni(t);const qp=(t,e)=>{let r;switch(t.code){case ve.invalid_type:t.received===Oe.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case ve.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,_t.jsonStringifyReplacer)}`;break;case ve.unrecognized_keys:r=`Unrecognized key(s) in object: ${_t.joinValues(t.keys,", ")}`;break;case ve.invalid_union:r="Invalid input";break;case ve.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${_t.joinValues(t.options)}`;break;case ve.invalid_enum_value:r=`Invalid enum value. Expected ${_t.joinValues(t.options)}, received '${t.received}'`;break;case ve.invalid_arguments:r="Invalid function arguments";break;case ve.invalid_return_type:r="Invalid function return type";break;case ve.invalid_date:r="Invalid date";break;case ve.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:_t.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case ve.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case ve.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case ve.custom:r="Invalid input";break;case ve.invalid_intersection_types:r="Intersection results could not be merged";break;case ve.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case ve.not_finite:r="Number must be finite";break;default:r=e.defaultError,_t.assertNever(t)}return{message:r}};let ele=qp;function wE(){return ele}const bE=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const l=n.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}};function Ae(t,e){const r=wE(),n=bE({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===qp?void 0:qp].filter(s=>!!s)});t.common.issues.push(n)}class Ln{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return Xe;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r){const i=await s.key,o=await s.value;n.push({key:i,value:o})}return Ln.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Xe;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}}const Xe=Object.freeze({status:"aborted"}),xf=t=>({status:"dirty",value:t}),us=t=>({status:"valid",value:t}),mM=t=>t.status==="aborted",yM=t=>t.status==="dirty",J0=t=>t.status==="valid",Z0=t=>typeof Promise<"u"&&t instanceof Promise;function Q0(t,e,r,n){if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function fU(t,e,r,n,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,r),r}var $e;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})($e||($e={}));var wf,bf;class xo{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const vM=(t,e)=>{if(J0(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new ni(t.common.issues);return this._error=r,this._error}}};function ot(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{var l,c;const{message:d}=t;return o.code==="invalid_enum_value"?{message:d??a.defaultError}:typeof a.data>"u"?{message:(l=d??n)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(c=d??r)!==null&&c!==void 0?c:a.defaultError}},description:s}}class gt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return tc(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:tc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ln,ctx:{common:e.parent.common,data:e.data,parsedType:tc(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(Z0(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;const s={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tc(e)},i=this._parseSync({data:e,path:s.path,parent:s});return vM(s,i)}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tc(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(Z0(s)?s:Promise.resolve(s));return vM(n,i)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:ve.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new ha({schema:this,typeName:Ke.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Yo.create(this,this._def)}nullable(){return Lc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return fo.create(this,this._def)}promise(){return Kp.create(this,this._def)}or(e){return rv.create([this,e],this._def)}and(e){return nv.create(this,e,this._def)}transform(e){return new ha({...ot(this._def),schema:this,typeName:Ke.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new lv({...ot(this._def),innerType:this,defaultValue:r,typeName:Ke.ZodDefault})}brand(){return new yU({typeName:Ke.ZodBranded,type:this,...ot(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new cv({...ot(this._def),innerType:this,catchValue:r,typeName:Ke.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return qx.create(this,e)}readonly(){return uv.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const tle=/^c[^\s-]{8,}$/i,rle=/^[0-9a-z]+$/,nle=/^[0-9A-HJKMNP-TV-Z]{26}$/,sle=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ile=/^[a-z0-9_-]{21}$/i,ole=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ale=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,lle="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let nS;const cle=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ule=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,dle=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,pU="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",hle=new RegExp(`^${pU}$`);function gU(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function fle(t){return new RegExp(`^${gU(t)}$`)}function ple(t){let e=`${pU}T${gU(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function gle(t,e){return!!((e==="v4"||!e)&&cle.test(t)||(e==="v6"||!e)&&ule.test(t))}class Vo extends gt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Oe.string){const i=this._getOrReturnCtx(e);return Ae(i,{code:ve.invalid_type,expected:Oe.string,received:i.parsedType}),Xe}const n=new Ln;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Ae(s,{code:ve.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Ae(s,{code:ve.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?Ae(s,{code:ve.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Ae(s,{code:ve.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")ale.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"email",code:ve.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")nS||(nS=new RegExp(lle,"u")),nS.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"emoji",code:ve.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")sle.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"uuid",code:ve.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")ile.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"nanoid",code:ve.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")tle.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"cuid",code:ve.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")rle.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"cuid2",code:ve.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")nle.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"ulid",code:ve.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Ae(s,{validation:"url",code:ve.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"regex",code:ve.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Ae(s,{code:ve.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ae(s,{code:ve.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ae(s,{code:ve.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?ple(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{code:ve.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?hle.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{code:ve.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?fle(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{code:ve.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?ole.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"duration",code:ve.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?gle(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"ip",code:ve.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?dle.test(e.data)||(s=this._getOrReturnCtx(e,s),Ae(s,{validation:"base64",code:ve.invalid_string,message:i.message}),n.dirty()):_t.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:ve.invalid_string,...$e.errToObj(n)})}_addCheck(e){return new Vo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...$e.errToObj(e)})}url(e){return this._addCheck({kind:"url",...$e.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...$e.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...$e.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...$e.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...$e.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...$e.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...$e.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...$e.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...$e.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...$e.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...$e.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...$e.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...$e.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...$e.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...$e.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...$e.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...$e.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...$e.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...$e.errToObj(r)})}nonempty(e){return this.min(1,$e.errToObj(e))}trim(){return new Vo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Vo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Vo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Vo.create=t=>{var e;return new Vo({checks:[],typeName:Ke.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...ot(t)})};function mle(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Ud extends gt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Oe.number){const i=this._getOrReturnCtx(e);return Ae(i,{code:ve.invalid_type,expected:Oe.number,received:i.parsedType}),Xe}let n;const s=new Ln;for(const i of this._def.checks)i.kind==="int"?_t.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Ae(n,{code:ve.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),Ae(n,{code:ve.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),Ae(n,{code:ve.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?mle(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),Ae(n,{code:ve.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Ae(n,{code:ve.not_finite,message:i.message}),s.dirty()):_t.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,$e.toString(r))}gt(e,r){return this.setLimit("min",e,!1,$e.toString(r))}lte(e,r){return this.setLimit("max",e,!0,$e.toString(r))}lt(e,r){return this.setLimit("max",e,!1,$e.toString(r))}setLimit(e,r,n,s){return new Ud({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:$e.toString(s)}]})}_addCheck(e){return new Ud({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:$e.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:$e.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:$e.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:$e.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:$e.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:$e.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:$e.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:$e.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:$e.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&_t.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}Ud.create=t=>new Ud({checks:[],typeName:Ke.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...ot(t)});class Vd extends gt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Oe.bigint){const i=this._getOrReturnCtx(e);return Ae(i,{code:ve.invalid_type,expected:Oe.bigint,received:i.parsedType}),Xe}let n;const s=new Ln;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),Ae(n,{code:ve.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),Ae(n,{code:ve.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Ae(n,{code:ve.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):_t.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,$e.toString(r))}gt(e,r){return this.setLimit("min",e,!1,$e.toString(r))}lte(e,r){return this.setLimit("max",e,!0,$e.toString(r))}lt(e,r){return this.setLimit("max",e,!1,$e.toString(r))}setLimit(e,r,n,s){return new Vd({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:$e.toString(s)}]})}_addCheck(e){return new Vd({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:$e.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:$e.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:$e.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:$e.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:$e.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Vd.create=t=>{var e;return new Vd({checks:[],typeName:Ke.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...ot(t)})};class SE extends gt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Oe.boolean){const n=this._getOrReturnCtx(e);return Ae(n,{code:ve.invalid_type,expected:Oe.boolean,received:n.parsedType}),Xe}return us(e.data)}}SE.create=t=>new SE({typeName:Ke.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...ot(t)});class Gp extends gt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Oe.date){const i=this._getOrReturnCtx(e);return Ae(i,{code:ve.invalid_type,expected:Oe.date,received:i.parsedType}),Xe}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Ae(i,{code:ve.invalid_date}),Xe}const n=new Ln;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Ae(s,{code:ve.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Ae(s,{code:ve.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):_t.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Gp({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:$e.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:$e.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}Gp.create=t=>new Gp({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ke.ZodDate,...ot(t)});class _E extends gt{_parse(e){if(this._getType(e)!==Oe.symbol){const n=this._getOrReturnCtx(e);return Ae(n,{code:ve.invalid_type,expected:Oe.symbol,received:n.parsedType}),Xe}return us(e.data)}}_E.create=t=>new _E({typeName:Ke.ZodSymbol,...ot(t)});class ev extends gt{_parse(e){if(this._getType(e)!==Oe.undefined){const n=this._getOrReturnCtx(e);return Ae(n,{code:ve.invalid_type,expected:Oe.undefined,received:n.parsedType}),Xe}return us(e.data)}}ev.create=t=>new ev({typeName:Ke.ZodUndefined,...ot(t)});class tv extends gt{_parse(e){if(this._getType(e)!==Oe.null){const n=this._getOrReturnCtx(e);return Ae(n,{code:ve.invalid_type,expected:Oe.null,received:n.parsedType}),Xe}return us(e.data)}}tv.create=t=>new tv({typeName:Ke.ZodNull,...ot(t)});class CE extends gt{constructor(){super(...arguments),this._any=!0}_parse(e){return us(e.data)}}CE.create=t=>new CE({typeName:Ke.ZodAny,...ot(t)});class gd extends gt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return us(e.data)}}gd.create=t=>new gd({typeName:Ke.ZodUnknown,...ot(t)});class gl extends gt{_parse(e){const r=this._getOrReturnCtx(e);return Ae(r,{code:ve.invalid_type,expected:Oe.never,received:r.parsedType}),Xe}}gl.create=t=>new gl({typeName:Ke.ZodNever,...ot(t)});class EE extends gt{_parse(e){if(this._getType(e)!==Oe.undefined){const n=this._getOrReturnCtx(e);return Ae(n,{code:ve.invalid_type,expected:Oe.void,received:n.parsedType}),Xe}return us(e.data)}}EE.create=t=>new EE({typeName:Ke.ZodVoid,...ot(t)});class fo extends gt{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==Oe.array)return Ae(r,{code:ve.invalid_type,expected:Oe.array,received:r.parsedType}),Xe;if(s.exactLength!==null){const o=r.data.length>s.exactLength.value,a=r.data.length<s.exactLength.value;(o||a)&&(Ae(r,{code:o?ve.too_big:ve.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(Ae(r,{code:ve.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(Ae(r,{code:ve.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>s.type._parseAsync(new xo(r,o,r.path,a)))).then(o=>Ln.mergeArray(n,o));const i=[...r.data].map((o,a)=>s.type._parseSync(new xo(r,o,r.path,a)));return Ln.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new fo({...this._def,minLength:{value:e,message:$e.toString(r)}})}max(e,r){return new fo({...this._def,maxLength:{value:e,message:$e.toString(r)}})}length(e,r){return new fo({...this._def,exactLength:{value:e,message:$e.toString(r)}})}nonempty(e){return this.min(1,e)}}fo.create=(t,e)=>new fo({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ke.ZodArray,...ot(e)});function Du(t){if(t instanceof nr){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=Yo.create(Du(n))}return new nr({...t._def,shape:()=>e})}else return t instanceof fo?new fo({...t._def,type:Du(t.element)}):t instanceof Yo?Yo.create(Du(t.unwrap())):t instanceof Lc?Lc.create(Du(t.unwrap())):t instanceof da?da.create(t.items.map(e=>Du(e))):t}class nr extends gt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=_t.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==Oe.object){const c=this._getOrReturnCtx(e);return Ae(c,{code:ve.invalid_type,expected:Oe.object,received:c.parsedType}),Xe}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof gl&&this._def.unknownKeys==="strip"))for(const c in s.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const d=i[c],h=s.data[c];l.push({key:{status:"valid",value:c},value:d._parse(new xo(s,h,s.path,c)),alwaysSet:c in s.data})}if(this._def.catchall instanceof gl){const c=this._def.unknownKeys;if(c==="passthrough")for(const d of a)l.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(c==="strict")a.length>0&&(Ae(s,{code:ve.unrecognized_keys,keys:a}),n.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const d of a){const h=s.data[d];l.push({key:{status:"valid",value:d},value:c._parse(new xo(s,h,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const c=[];for(const d of l){const h=await d.key,f=await d.value;c.push({key:h,value:f,alwaysSet:d.alwaysSet})}return c}).then(c=>Ln.mergeObjectSync(n,c)):Ln.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return $e.errToObj,new nr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var s,i,o,a;const l=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,r,n).message)!==null&&o!==void 0?o:n.defaultError;return r.code==="unrecognized_keys"?{message:(a=$e.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new nr({...this._def,unknownKeys:"strip"})}passthrough(){return new nr({...this._def,unknownKeys:"passthrough"})}extend(e){return new nr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new nr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ke.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new nr({...this._def,catchall:e})}pick(e){const r={};return _t.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new nr({...this._def,shape:()=>r})}omit(e){const r={};return _t.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new nr({...this._def,shape:()=>r})}deepPartial(){return Du(this)}partial(e){const r={};return _t.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}),new nr({...this._def,shape:()=>r})}required(e){const r={};return _t.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Yo;)i=i._def.innerType;r[n]=i}}),new nr({...this._def,shape:()=>r})}keyof(){return mU(_t.objectKeys(this.shape))}}nr.create=(t,e)=>new nr({shape:()=>t,unknownKeys:"strip",catchall:gl.create(),typeName:Ke.ZodObject,...ot(e)});nr.strictCreate=(t,e)=>new nr({shape:()=>t,unknownKeys:"strict",catchall:gl.create(),typeName:Ke.ZodObject,...ot(e)});nr.lazycreate=(t,e)=>new nr({shape:t,unknownKeys:"strip",catchall:gl.create(),typeName:Ke.ZodObject,...ot(e)});class rv extends gt{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new ni(a.ctx.common.issues));return Ae(r,{code:ve.invalid_union,unionErrors:o}),Xe}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const l of n){const c={...r,common:{...r.common,issues:[]},parent:null},d=l._parseSync({data:r.data,path:r.path,parent:c});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(l=>new ni(l));return Ae(r,{code:ve.invalid_union,unionErrors:a}),Xe}}get options(){return this._def.options}}rv.create=(t,e)=>new rv({options:t,typeName:Ke.ZodUnion,...ot(e)});const Ro=t=>t instanceof iv?Ro(t.schema):t instanceof ha?Ro(t.innerType()):t instanceof ov?[t.value]:t instanceof Fc?t.options:t instanceof av?_t.objectValues(t.enum):t instanceof lv?Ro(t._def.innerType):t instanceof ev?[void 0]:t instanceof tv?[null]:t instanceof Yo?[void 0,...Ro(t.unwrap())]:t instanceof Lc?[null,...Ro(t.unwrap())]:t instanceof yU||t instanceof uv?Ro(t.unwrap()):t instanceof cv?Ro(t._def.innerType):[];class I2 extends gt{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Oe.object)return Ae(r,{code:ve.invalid_type,expected:Oe.object,received:r.parsedType}),Xe;const n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(Ae(r,{code:ve.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Xe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const s=new Map;for(const i of r){const o=Ro(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new I2({typeName:Ke.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...ot(n)})}}function kE(t,e){const r=tc(t),n=tc(e);if(t===e)return{valid:!0,data:t};if(r===Oe.object&&n===Oe.object){const s=_t.objectKeys(e),i=_t.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const l=kE(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(r===Oe.array&&n===Oe.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],l=kE(o,a);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return r===Oe.date&&n===Oe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class nv extends gt{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(mM(i)||mM(o))return Xe;const a=kE(i.value,o.value);return a.valid?((yM(i)||yM(o))&&r.dirty(),{status:r.value,value:a.data}):(Ae(n,{code:ve.invalid_intersection_types}),Xe)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}nv.create=(t,e,r)=>new nv({left:t,right:e,typeName:Ke.ZodIntersection,...ot(r)});class da extends gt{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Oe.array)return Ae(n,{code:ve.invalid_type,expected:Oe.array,received:n.parsedType}),Xe;if(n.data.length<this._def.items.length)return Ae(n,{code:ve.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Xe;!this._def.rest&&n.data.length>this._def.items.length&&(Ae(n,{code:ve.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new xo(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>Ln.mergeArray(r,o)):Ln.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new da({...this._def,rest:e})}}da.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new da({items:t,typeName:Ke.ZodTuple,rest:null,...ot(e)})};class sv extends gt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Oe.object)return Ae(n,{code:ve.invalid_type,expected:Oe.object,received:n.parsedType}),Xe;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in n.data)s.push({key:i._parse(new xo(n,a,n.path,a)),value:o._parse(new xo(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?Ln.mergeObjectAsync(r,s):Ln.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof gt?new sv({keyType:e,valueType:r,typeName:Ke.ZodRecord,...ot(n)}):new sv({keyType:Vo.create(),valueType:e,typeName:Ke.ZodRecord,...ot(r)})}}class TE extends gt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Oe.map)return Ae(n,{code:ve.invalid_type,expected:Oe.map,received:n.parsedType}),Xe;const s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([a,l],c)=>({key:s._parse(new xo(n,a,n.path,[c,"key"])),value:i._parse(new xo(n,l,n.path,[c,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,d=await l.value;if(c.status==="aborted"||d.status==="aborted")return Xe;(c.status==="dirty"||d.status==="dirty")&&r.dirty(),a.set(c.value,d.value)}return{status:r.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,d=l.value;if(c.status==="aborted"||d.status==="aborted")return Xe;(c.status==="dirty"||d.status==="dirty")&&r.dirty(),a.set(c.value,d.value)}return{status:r.value,value:a}}}}TE.create=(t,e,r)=>new TE({valueType:e,keyType:t,typeName:Ke.ZodMap,...ot(r)});class zd extends gt{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Oe.set)return Ae(n,{code:ve.invalid_type,expected:Oe.set,received:n.parsedType}),Xe;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(Ae(n,{code:ve.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(Ae(n,{code:ve.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const i=this._def.valueType;function o(l){const c=new Set;for(const d of l){if(d.status==="aborted")return Xe;d.status==="dirty"&&r.dirty(),c.add(d.value)}return{status:r.value,value:c}}const a=[...n.data.values()].map((l,c)=>i._parse(new xo(n,l,n.path,c)));return n.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,r){return new zd({...this._def,minSize:{value:e,message:$e.toString(r)}})}max(e,r){return new zd({...this._def,maxSize:{value:e,message:$e.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}zd.create=(t,e)=>new zd({valueType:t,minSize:null,maxSize:null,typeName:Ke.ZodSet,...ot(e)});class tp extends gt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Oe.function)return Ae(r,{code:ve.invalid_type,expected:Oe.function,received:r.parsedType}),Xe;function n(a,l){return bE({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,wE(),qp].filter(c=>!!c),issueData:{code:ve.invalid_arguments,argumentsError:l}})}function s(a,l){return bE({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,wE(),qp].filter(c=>!!c),issueData:{code:ve.invalid_return_type,returnTypeError:l}})}const i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof Kp){const a=this;return us(async function(...l){const c=new ni([]),d=await a._def.args.parseAsync(l,i).catch(p=>{throw c.addIssue(n(l,p)),c}),h=await Reflect.apply(o,this,d);return await a._def.returns._def.type.parseAsync(h,i).catch(p=>{throw c.addIssue(s(h,p)),c})})}else{const a=this;return us(function(...l){const c=a._def.args.safeParse(l,i);if(!c.success)throw new ni([n(l,c.error)]);const d=Reflect.apply(o,this,c.data),h=a._def.returns.safeParse(d,i);if(!h.success)throw new ni([s(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new tp({...this._def,args:da.create(e).rest(gd.create())})}returns(e){return new tp({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new tp({args:e||da.create([]).rest(gd.create()),returns:r||gd.create(),typeName:Ke.ZodFunction,...ot(n)})}}class iv extends gt{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}iv.create=(t,e)=>new iv({getter:t,typeName:Ke.ZodLazy,...ot(e)});class ov extends gt{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return Ae(r,{received:r.data,code:ve.invalid_literal,expected:this._def.value}),Xe}return{status:"valid",value:e.data}}get value(){return this._def.value}}ov.create=(t,e)=>new ov({value:t,typeName:Ke.ZodLiteral,...ot(e)});function mU(t,e){return new Fc({values:t,typeName:Ke.ZodEnum,...ot(e)})}class Fc extends gt{constructor(){super(...arguments),wf.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return Ae(r,{expected:_t.joinValues(n),received:r.parsedType,code:ve.invalid_type}),Xe}if(Q0(this,wf)||fU(this,wf,new Set(this._def.values)),!Q0(this,wf).has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return Ae(r,{received:r.data,code:ve.invalid_enum_value,options:n}),Xe}return us(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return Fc.create(e,{...this._def,...r})}exclude(e,r=this._def){return Fc.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}}wf=new WeakMap;Fc.create=mU;class av extends gt{constructor(){super(...arguments),bf.set(this,void 0)}_parse(e){const r=_t.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Oe.string&&n.parsedType!==Oe.number){const s=_t.objectValues(r);return Ae(n,{expected:_t.joinValues(s),received:n.parsedType,code:ve.invalid_type}),Xe}if(Q0(this,bf)||fU(this,bf,new Set(_t.getValidEnumValues(this._def.values))),!Q0(this,bf).has(e.data)){const s=_t.objectValues(r);return Ae(n,{received:n.data,code:ve.invalid_enum_value,options:s}),Xe}return us(e.data)}get enum(){return this._def.values}}bf=new WeakMap;av.create=(t,e)=>new av({values:t,typeName:Ke.ZodNativeEnum,...ot(e)});class Kp extends gt{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Oe.promise&&r.common.async===!1)return Ae(r,{code:ve.invalid_type,expected:Oe.promise,received:r.parsedType}),Xe;const n=r.parsedType===Oe.promise?r.data:Promise.resolve(r.data);return us(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Kp.create=(t,e)=>new Kp({type:t,typeName:Ke.ZodPromise,...ot(e)});class ha extends gt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ke.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Ae(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async a=>{if(r.value==="aborted")return Xe;const l=await this._def.schema._parseAsync({data:a,path:n.path,parent:n});return l.status==="aborted"?Xe:l.status==="dirty"||r.value==="dirty"?xf(l.value):l});{if(r.value==="aborted")return Xe;const a=this._def.schema._parseSync({data:o,path:n.path,parent:n});return a.status==="aborted"?Xe:a.status==="dirty"||r.value==="dirty"?xf(a.value):a}}if(s.type==="refinement"){const o=a=>{const l=s.refinement(a,i);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Xe:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?Xe:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!J0(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>J0(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:r.value,value:a})):o);_t.assertNever(s)}}ha.create=(t,e,r)=>new ha({schema:t,typeName:Ke.ZodEffects,effect:e,...ot(r)});ha.createWithPreprocess=(t,e,r)=>new ha({schema:e,effect:{type:"preprocess",transform:t},typeName:Ke.ZodEffects,...ot(r)});class Yo extends gt{_parse(e){return this._getType(e)===Oe.undefined?us(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Yo.create=(t,e)=>new Yo({innerType:t,typeName:Ke.ZodOptional,...ot(e)});class Lc extends gt{_parse(e){return this._getType(e)===Oe.null?us(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Lc.create=(t,e)=>new Lc({innerType:t,typeName:Ke.ZodNullable,...ot(e)});class lv extends gt{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===Oe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}lv.create=(t,e)=>new lv({innerType:t,typeName:Ke.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ot(e)});class cv extends gt{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Z0(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ni(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new ni(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}cv.create=(t,e)=>new cv({innerType:t,typeName:Ke.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ot(e)});class jE extends gt{_parse(e){if(this._getType(e)!==Oe.nan){const n=this._getOrReturnCtx(e);return Ae(n,{code:ve.invalid_type,expected:Oe.nan,received:n.parsedType}),Xe}return{status:"valid",value:e.data}}}jE.create=t=>new jE({typeName:Ke.ZodNaN,...ot(t)});class yU extends gt{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class qx extends gt{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Xe:i.status==="dirty"?(r.dirty(),xf(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Xe:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new qx({in:e,out:r,typeName:Ke.ZodPipeline})}}class uv extends gt{_parse(e){const r=this._def.innerType._parse(e),n=s=>(J0(s)&&(s.value=Object.freeze(s.value)),s);return Z0(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}}uv.create=(t,e)=>new uv({innerType:t,typeName:Ke.ZodReadonly,...ot(e)});nr.lazycreate;var Ke;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ke||(Ke={}));const Zs=Vo.create;Ud.create;jE.create;Vd.create;SE.create;Gp.create;_E.create;ev.create;tv.create;const yle=CE.create;gd.create;gl.create;EE.create;fo.create;const D2=nr.create;nr.strictCreate;rv.create;I2.create;nv.create;da.create;sv.create;TE.create;zd.create;tp.create;iv.create;ov.create;const Uy=Fc.create;av.create;Kp.create;ha.create;Yo.create;Lc.create;ha.createWithPreprocess;qx.create;function vle(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function Gx(...t){return e=>t.forEach(r=>vle(r,e))}function rt(...t){return w.useCallback(Gx(...t),t)}var fa=w.forwardRef((t,e)=>{const{children:r,...n}=t,s=w.Children.toArray(r),i=s.find(xle);if(i){const o=i.props.children,a=s.map(l=>l===i?w.Children.count(o)>1?w.Children.only(null):w.isValidElement(o)?o.props.children:null:l);return u.jsx(AE,{...n,ref:e,children:w.isValidElement(o)?w.cloneElement(o,void 0,a):null})}return u.jsx(AE,{...n,ref:e,children:r})});fa.displayName="Slot";var AE=w.forwardRef((t,e)=>{const{children:r,...n}=t;if(w.isValidElement(r)){const s=ble(r);return w.cloneElement(r,{...wle(n,r.props),ref:e?Gx(e,s):s})}return w.Children.count(r)>1?w.Children.only(null):null});AE.displayName="SlotClone";var vU=({children:t})=>u.jsx(u.Fragment,{children:t});function xle(t){return w.isValidElement(t)&&t.type===vU}function wle(t,e){const r={...e};for(const n in e){const s=t[n],i=e[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...a)=>{i(...a),s(...a)}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...t,...r}}function ble(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function xU(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(r=xU(t[e]))&&(n&&(n+=" "),n+=r);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function Sle(){for(var t,e,r=0,n="";r<arguments.length;)(t=arguments[r++])&&(e=xU(t))&&(n&&(n+=" "),n+=e);return n}const xM=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,wM=Sle,Kx=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return wM(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(c=>{const d=r==null?void 0:r[c],h=i==null?void 0:i[c];if(d===null)return null;const f=xM(d)||xM(h);return s[c][f]}),a=r&&Object.entries(r).reduce((c,d)=>{let[h,f]=d;return f===void 0||(c[h]=f),c},{}),l=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((c,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(g=>{let[y,v]=g;return Array.isArray(v)?v.includes({...i,...a}[y]):{...i,...a}[y]===v})?[...c,h,f]:c},[]);return wM(t,o,l,r==null?void 0:r.class,r==null?void 0:r.className)};function wU(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=wU(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function _le(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=wU(t))&&(n&&(n+=" "),n+=e);return n}const F2="-",Cle=t=>{const e=kle(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const a=o.split(F2);return a[0]===""&&a.length!==1&&a.shift(),bU(a,e)||Ele(o)},getConflictingClassGroupIds:(o,a)=>{const l=r[o]||[];return a&&n[o]?[...l,...n[o]]:l}}},bU=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),s=n?bU(t.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(F2);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},bM=/^\[(.+)\]$/,Ele=t=>{if(bM.test(t)){const e=bM.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},kle=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return jle(Object.entries(t.classGroups),r).forEach(([i,o])=>{PE(o,n,i,e)}),n},PE=(t,e,r,n)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:SM(e,s);i.classGroupId=r;return}if(typeof s=="function"){if(Tle(s)){PE(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,o])=>{PE(o,SM(e,i),r,n)})})},SM=(t,e)=>{let r=t;return e.split(F2).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},Tle=t=>t.isThemeGetter,jle=(t,e)=>e?t.map(([r,n])=>{const s=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[r,s]}):t,Ale=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const s=(i,o)=>{r.set(i,o),e++,e>t&&(e=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){r.has(i)?r.set(i,o):s(i,o)}}},SU="!",Ple=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let c=0,d=0,h;for(let v=0;v<a.length;v++){let m=a[v];if(c===0){if(m===s&&(n||a.slice(v,v+i)===e)){l.push(a.slice(d,v)),d=v+i;continue}if(m==="/"){h=v;continue}}m==="["?c++:m==="]"&&c--}const f=l.length===0?a:a.substring(d),p=f.startsWith(SU),g=p?f.substring(1):f,y=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:y}};return r?a=>r({className:a,parseClassName:o}):o},Nle=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},Rle=t=>({cache:Ale(t.cacheSize),parseClassName:Ple(t),...Cle(t)}),Ole=/\s+/,Mle=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(Ole);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=r(c);let g=!!p,y=n(g?f.substring(0,p):f);if(!y){if(!g){a=c+(a.length>0?" "+a:a);continue}if(y=n(f),!y){a=c+(a.length>0?" "+a:a);continue}g=!1}const v=Nle(d).join(":"),m=h?v+SU:v,x=m+y;if(i.includes(x))continue;i.push(x);const b=s(y,g);for(let _=0;_<b.length;++_){const C=b[_];i.push(m+C)}a=c+(a.length>0?" "+a:a)}return a};function Ile(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=_U(e))&&(n&&(n+=" "),n+=r);return n}const _U=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=_U(t[n]))&&(r&&(r+=" "),r+=e);return r};function Dle(t,...e){let r,n,s,i=o;function o(l){const c=e.reduce((d,h)=>h(d),t());return r=Rle(c),n=r.cache.get,s=r.cache.set,i=a,a(l)}function a(l){const c=n(l);if(c)return c;const d=Mle(l,r);return s(l,d),d}return function(){return i(Ile.apply(null,arguments))}}const Vt=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},CU=/^\[(?:([a-z-]+):)?(.+)\]$/i,Fle=/^\d+\/\d+$/,Lle=new Set(["px","full","screen"]),Ble=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,$le=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Ule=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Vle=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,zle=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Po=t=>md(t)||Lle.has(t)||Fle.test(t),Ea=t=>vh(t,"length",Jle),md=t=>!!t&&!Number.isNaN(Number(t)),sS=t=>vh(t,"number",md),ef=t=>!!t&&Number.isInteger(Number(t)),Hle=t=>t.endsWith("%")&&md(t.slice(0,-1)),lt=t=>CU.test(t),ka=t=>Ble.test(t),Wle=new Set(["length","size","percentage"]),qle=t=>vh(t,Wle,EU),Gle=t=>vh(t,"position",EU),Kle=new Set(["image","url"]),Yle=t=>vh(t,Kle,Qle),Xle=t=>vh(t,"",Zle),tf=()=>!0,vh=(t,e,r)=>{const n=CU.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},Jle=t=>$le.test(t)&&!Ule.test(t),EU=()=>!1,Zle=t=>Vle.test(t),Qle=t=>zle.test(t),ece=()=>{const t=Vt("colors"),e=Vt("spacing"),r=Vt("blur"),n=Vt("brightness"),s=Vt("borderColor"),i=Vt("borderRadius"),o=Vt("borderSpacing"),a=Vt("borderWidth"),l=Vt("contrast"),c=Vt("grayscale"),d=Vt("hueRotate"),h=Vt("invert"),f=Vt("gap"),p=Vt("gradientColorStops"),g=Vt("gradientColorStopPositions"),y=Vt("inset"),v=Vt("margin"),m=Vt("opacity"),x=Vt("padding"),b=Vt("saturate"),_=Vt("scale"),C=Vt("sepia"),T=Vt("skew"),O=Vt("space"),R=Vt("translate"),I=()=>["auto","contain","none"],H=()=>["auto","hidden","clip","visible","scroll"],re=()=>["auto",lt,e],L=()=>[lt,e],z=()=>["",Po,Ea],Y=()=>["auto",md,lt],pe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Q=()=>["solid","dashed","dotted","double","none"],se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],K=()=>["","0",lt],de=()=>["auto","avoid","all","avoid-page","page","left","right","column"],le=()=>[md,lt];return{cacheSize:500,separator:":",theme:{colors:[tf],spacing:[Po,Ea],blur:["none","",ka,lt],brightness:le(),borderColor:[t],borderRadius:["none","","full",ka,lt],borderSpacing:L(),borderWidth:z(),contrast:le(),grayscale:K(),hueRotate:le(),invert:K(),gap:L(),gradientColorStops:[t],gradientColorStopPositions:[Hle,Ea],inset:re(),margin:re(),opacity:le(),padding:L(),saturate:le(),scale:le(),sepia:K(),skew:le(),space:L(),translate:L()},classGroups:{aspect:[{aspect:["auto","square","video",lt]}],container:["container"],columns:[{columns:[ka]}],"break-after":[{"break-after":de()}],"break-before":[{"break-before":de()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...pe(),lt]}],overflow:[{overflow:H()}],"overflow-x":[{"overflow-x":H()}],"overflow-y":[{"overflow-y":H()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ef,lt]}],basis:[{basis:re()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",lt]}],grow:[{grow:K()}],shrink:[{shrink:K()}],order:[{order:["first","last","none",ef,lt]}],"grid-cols":[{"grid-cols":[tf]}],"col-start-end":[{col:["auto",{span:["full",ef,lt]},lt]}],"col-start":[{"col-start":Y()}],"col-end":[{"col-end":Y()}],"grid-rows":[{"grid-rows":[tf]}],"row-start-end":[{row:["auto",{span:[ef,lt]},lt]}],"row-start":[{"row-start":Y()}],"row-end":[{"row-end":Y()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",lt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",lt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[O]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[O]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",lt,e]}],"min-w":[{"min-w":[lt,e,"min","max","fit"]}],"max-w":[{"max-w":[lt,e,"none","full","min","max","fit","prose",{screen:[ka]},ka]}],h:[{h:[lt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[lt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[lt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[lt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ka,Ea]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",sS]}],"font-family":[{font:[tf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",lt]}],"line-clamp":[{"line-clamp":["none",md,sS]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Po,lt]}],"list-image":[{"list-image":["none",lt]}],"list-style-type":[{list:["none","disc","decimal",lt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[m]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[m]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Po,Ea]}],"underline-offset":[{"underline-offset":["auto",Po,lt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",lt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",lt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[m]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...pe(),Gle]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",qle]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Yle]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[m]}],"border-style":[{border:[...Q(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[m]}],"divide-style":[{divide:Q()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Q()]}],"outline-offset":[{"outline-offset":[Po,lt]}],"outline-w":[{outline:[Po,Ea]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[m]}],"ring-offset-w":[{"ring-offset":[Po,Ea]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ka,Xle]}],"shadow-color":[{shadow:[tf]}],opacity:[{opacity:[m]}],"mix-blend":[{"mix-blend":[...se(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":se()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ka,lt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[m]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",lt]}],duration:[{duration:le()}],ease:[{ease:["linear","in","out","in-out",lt]}],delay:[{delay:le()}],animate:[{animate:["none","spin","ping","pulse","bounce",lt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[ef,lt]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",lt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",lt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",lt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Po,Ea,sS]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},tce=Dle(ece);function xe(...t){return tce(_le(t))}const rce=Kx("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),ge=w.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...s},i)=>{const o=n?fa:"button";return u.jsx(o,{className:xe(rce({variant:e,size:r,className:t})),ref:i,...s})});ge.displayName="Button";const Ai=w.forwardRef(({className:t,type:e,...r},n)=>u.jsx("input",{type:e,className:xe("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...r}));Ai.displayName="Input";const Ge=w.forwardRef(({className:t,...e},r)=>u.jsx("div",{ref:r,className:xe("rounded-xl border bg-card text-card-foreground shadow",t),...e}));Ge.displayName="Card";const vt=w.forwardRef(({className:t,...e},r)=>u.jsx("div",{ref:r,className:xe("flex flex-col space-y-1.5 p-6",t),...e}));vt.displayName="CardHeader";const St=w.forwardRef(({className:t,...e},r)=>u.jsx("h3",{ref:r,className:xe("font-semibold leading-none tracking-tight",t),...e}));St.displayName="CardTitle";const Xc=w.forwardRef(({className:t,...e},r)=>u.jsx("p",{ref:r,className:xe("text-sm text-muted-foreground",t),...e}));Xc.displayName="CardDescription";const tt=w.forwardRef(({className:t,...e},r)=>u.jsx("div",{ref:r,className:xe("p-6 pt-0",t),...e}));tt.displayName="CardContent";const nce=w.forwardRef(({className:t,...e},r)=>u.jsx("div",{ref:r,className:xe("flex items-center p-6 pt-0",t),...e}));nce.displayName="CardFooter";const sce=Kx("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ml=w.forwardRef(({className:t,variant:e,...r},n)=>u.jsx("div",{ref:n,role:"alert",className:xe(sce({variant:e}),t),...r}));ml.displayName="Alert";const ice=w.forwardRef(({className:t,...e},r)=>u.jsx("h5",{ref:r,className:xe("mb-1 font-medium leading-none tracking-tight",t),...e}));ice.displayName="AlertTitle";const yl=w.forwardRef(({className:t,...e},r)=>u.jsx("div",{ref:r,className:xe("text-sm [&_p]:leading-relaxed",t),...e}));yl.displayName="AlertDescription";var oce=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Fe=oce.reduce((t,e)=>{const r=w.forwardRef((n,s)=>{const{asChild:i,...o}=n,a=i?fa:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),u.jsx(a,{...o,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function kU(t,e){t&&lh.flushSync(()=>t.dispatchEvent(e))}var ace="Label",TU=w.forwardRef((t,e)=>u.jsx(Fe.label,{...t,ref:e,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));TU.displayName=ace;var jU=TU;const lce=Kx("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Rr=w.forwardRef(({className:t,...e},r)=>u.jsx(jU,{ref:r,className:xe(lce(),t),...e}));Rr.displayName=jU.displayName;const L2=Iae,AU=w.createContext({}),vs=({...t})=>u.jsx(AU.Provider,{value:{name:t.name},children:u.jsx(Bae,{...t})}),Yx=()=>{const t=w.useContext(AU),e=w.useContext(PU),{getFieldState:r,formState:n}=Wx(),s=r(t.name,n);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=e;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...s}},PU=w.createContext({}),Xn=w.forwardRef(({className:t,...e},r)=>{const n=w.useId();return u.jsx(PU.Provider,{value:{id:n},children:u.jsx("div",{ref:r,className:xe("space-y-2",t),...e})})});Xn.displayName="FormItem";const Jn=w.forwardRef(({className:t,...e},r)=>{const{error:n,formItemId:s}=Yx();return u.jsx(Rr,{ref:r,className:xe(n&&"text-destructive",t),htmlFor:s,...e})});Jn.displayName="FormLabel";const Zn=w.forwardRef(({...t},e)=>{const{error:r,formItemId:n,formDescriptionId:s,formMessageId:i}=Yx();return u.jsx(fa,{ref:e,id:n,"aria-describedby":r?`${s} ${i}`:`${s}`,"aria-invalid":!!r,...t})});Zn.displayName="FormControl";const cce=w.forwardRef(({className:t,...e},r)=>{const{formDescriptionId:n}=Yx();return u.jsx("p",{ref:r,id:n,className:xe("text-[0.8rem] text-muted-foreground",t),...e})});cce.displayName="FormDescription";const xs=w.forwardRef(({className:t,children:e,...r},n)=>{const{error:s,formMessageId:i}=Yx(),o=s?String(s==null?void 0:s.message):e;return o?u.jsx("p",{ref:n,id:i,className:xe("text-[0.8rem] font-medium text-destructive",t),...r,children:o}):null});xs.displayName="FormMessage";/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uce=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),NU=(...t)=>t.filter((e,r,n)=>!!e&&n.indexOf(e)===r).join(" ");/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dce={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hce=w.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...a},l)=>w.createElement("svg",{ref:l,...dce,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:NU("lucide",s),...a},[...o.map(([c,d])=>w.createElement(c,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=(t,e)=>{const r=w.forwardRef(({className:n,...s},i)=>w.createElement(hce,{ref:i,iconNode:e,className:NU(`lucide-${uce(t)}`,n),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=Ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=Ce("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fce=Ce("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pce=Ce("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=Ce("Badge",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gce=Ce("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=Ce("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mce=Ce("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yce=Ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=Ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=Ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=Ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=Ce("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=Ce("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=Ce("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=Ce("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=Ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=Ce("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=Ce("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=Ce("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=Ce("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vce=Ce("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UU=Ce("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=Ce("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=Ce("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=Ce("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=Ce("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xce=Ce("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wce=Ce("Focus",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=Ce("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bce=Ce("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=Ce("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sce=Ce("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ce=Ce("Group",[["path",{d:"M3 7V5c0-1.1.9-2 2-2h2",key:"adw53z"}],["path",{d:"M17 3h2c1.1 0 2 .9 2 2v2",key:"an4l38"}],["path",{d:"M21 17v2c0 1.1-.9 2-2 2h-2",key:"144t0e"}],["path",{d:"M7 21H5c-1.1 0-2-.9-2-2v-2",key:"rtnfgi"}],["rect",{width:"7",height:"5",x:"7",y:"7",rx:"1",key:"1eyiv7"}],["rect",{width:"7",height:"5",x:"10",y:"12",rx:"1",key:"1qlmkx"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=Ce("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cce=Ce("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=Ce("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=Ce("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=Ce("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ece=Ce("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kce=Ce("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tce=Ce("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=Ce("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=Ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=Ce("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jce=Ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=Ce("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ace=Ce("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=Ce("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=Ce("Paintbrush",[["path",{d:"m14.622 17.897-10.68-2.913",key:"vj2p1u"}],["path",{d:"M18.376 2.622a1 1 0 1 1 3.002 3.002L17.36 9.643a.5.5 0 0 0 0 .707l.944.944a2.41 2.41 0 0 1 0 3.408l-.944.944a.5.5 0 0 1-.707 0L8.354 7.348a.5.5 0 0 1 0-.707l.944-.944a2.41 2.41 0 0 1 3.408 0l.944.944a.5.5 0 0 0 .707 0z",key:"18tc5c"}],["path",{d:"M9 8c-1.804 2.71-3.97 3.46-6.583 3.948a.507.507 0 0 0-.302.819l7.32 8.883a1 1 0 0 0 1.185.204C12.735 20.405 16 16.792 16 15",key:"ytzfxy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=Ce("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pce=Ce("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=Ce("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nce=Ce("Pentagon",[["path",{d:"M10.83 2.38a2 2 0 0 1 2.34 0l8 5.74a2 2 0 0 1 .73 2.25l-3.04 9.26a2 2 0 0 1-1.9 1.37H7.04a2 2 0 0 1-1.9-1.37L2.1 10.37a2 2 0 0 1 .73-2.25z",key:"2hea0t"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rce=Ce("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oce=Ce("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=Ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mce=Ce("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ice=Ce("Rows3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M21 9H3",key:"1338ky"}],["path",{d:"M21 15H3",key:"9uk58r"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dce=Ce("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=Ce("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=Ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=Ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=Ce("Shapes",[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=Ce("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=Ce("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=Ce("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fce=Ce("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lce=Ce("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=Ce("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bce=Ce("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=Ce("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=Ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ce=Ce("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uce=Ce("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vce=Ce("Ungroup",[["rect",{width:"8",height:"6",x:"5",y:"4",rx:"1",key:"nzclkv"}],["rect",{width:"8",height:"6",x:"11",y:"14",rx:"1",key:"4tytwb"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=Ce("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=Ce("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=Ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=Ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=Ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=Ce("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),zce=()=>{const t=Ar(),{isAuthenticated:e,isInitialized:r}=Ze(o=>o.auth),{materials:n,isLoading:s}=Ze(o=>o.materials),i=w.useCallback(async()=>{try{const o=await t(Wf());Wf.fulfilled.match(o)&&o.payload&&Array.isArray(o.payload)&&console.log("Material segments fetched successfully:",o.payload)}catch(o){console.error("Error fetching categories:",o)}},[t]);return w.useEffect(()=>{if(!e||!r){console.log("User not authenticated or auth not initialized, skipping data fetch");return}!s&&n.length===0&&i()},[e,r,i,s]),null},Hce=()=>{const t=Ar(),{isAuthenticated:e,isInitialized:r}=Ze(c=>c.auth),{inspirational_colors:n,isLoading:s}=Ze(c=>c.inspirationalColors),{Inspirational_images:i,isLoading:o}=Ze(c=>c.inspirationalImages);w.useEffect(()=>{e&&r&&(!s&&n.length===0&&a(),!o&&i.length===0&&l())},[e,r,t,n,s,i,o]);const a=async()=>{try{await t(Ny({})).unwrap()}catch(c){console.error("Error fetching inspirational colors:",c)}},l=async()=>{try{await t(Ry({})).unwrap()}catch(c){console.error("Error fetching inspirational images:",c)}};return null},Wce=()=>{const t=Ar(),{isAuthenticated:e,isInitialized:r}=Ze(o=>o.auth),{subscriptionalPlans:n,isLoading:s}=Ze(o=>o.subscriptionPlan);w.useEffect(()=>{e&&r&&!s&&n.length===0&&i()},[e,r,n,s]);const i=async()=>{try{const o=await t(Dy({})).unwrap();o&&o.length>0&&console.log("Fetched Subscription Plans:",o)}catch(o){console.error("Error fetching subscription plans:",o),Ve.error("Failed to fetch subscription plans. Please try again later.")}};return null},XU=()=>{const t=Ar(),{isAuthenticated:e,isInitialized:r}=Ze(y=>y.auth),{categories:n,isLoading:s}=Ze(y=>y.categories),{brands:i,isLoading:o}=Ze(y=>y.brands),{materials:a,isLoading:l}=Ze(y=>y.materials),{styles:c,isLoading:d}=Ze(y=>y.styles),h=w.useCallback(async()=>{try{const y=await t(qf());qf.fulfilled.match(y)&&console.log("Categories fetched successfully:",y.payload)}catch(y){console.error("Error fetching categories:",y)}},[t]),f=w.useCallback(async()=>{try{const y=await t(Kf());Kf.fulfilled.match(y)&&console.log("Styles fetched successfully:",y.payload)}catch(y){console.error("Error fetching styles:",y)}},[t]),p=w.useCallback(async()=>{try{const y=await t(Gf());Gf.fulfilled.match(y)&&console.log("Brands fetched successfully:",y.payload)}catch(y){console.error("Error fetching brands:",y)}},[t]),g=w.useCallback(async()=>{try{const y=await t(co({page:1,limit:100}));co.fulfilled.match(y)&&console.log("Materials fetched successfully:",y.payload)}catch(y){console.error("Error fetching materials:",y)}},[t]);return w.useEffect(()=>{if(!e||!r){console.log("User not authenticated or auth not initialized, skipping data fetch");return}n.length===0&&!s?(console.log("Fetching categories..."),h()):n.length>0&&console.log("Categories already loaded, skipping fetch"),i.length===0&&!o?(console.log("Fetching brands..."),p()):i.length>0&&console.log("Brands already loaded, skipping fetch"),a.length===0&&!l?(console.log("Fetching materials..."),g()):a.length>0&&console.log("Materials already loaded, skipping fetch"),c.length===0&&!d?(console.log("Fetching styles..."),f()):console.log("Styles already loaded, skipping fetch")},[e,r,n.length,i.length,a.length,c.length,d,s,o,l,h,p,g,f]),u.jsxs(u.Fragment,{children:[u.jsx(zce,{}),u.jsx(Hce,{}),u.jsx(Wce,{})]})},qce=D2({email:Zs().min(1,"Email is required").email("Please enter a valid email address"),password:Zs().min(1,"Password is required").min(6,"Password must be at least 6 characters")});function Gce(){const t=Ar(),e=ci(),{isLoading:r,error:n,isAuthenticated:s}=Ze(c=>c.auth),[i,o]=w.useState(!1),a=O2({resolver:M2(qce),defaultValues:{email:"",password:""}});w.useEffect(()=>{s&&e("/projects",{replace:!0})},[s,e]),w.useEffect(()=>{t(O0())},[t]);const l=async c=>{t(O0());const d=await t(Uf({email:c.email,password:c.password}));Uf.fulfilled.match(d)&&e("/projects",{replace:!0})};return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted/20 p-4",children:[u.jsx(ze.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.5,ease:"easeOut"},className:"w-full max-w-md",children:u.jsxs(Ge,{className:"shadow-2xl border-0 bg-card/50 backdrop-blur-sm",children:[u.jsxs(vt,{className:"space-y-4 pb-8",children:[u.jsx(ze.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"mx-auto w-12 h-12 bg-primary rounded-xl flex items-center justify-center",children:u.jsx(_M,{className:"h-6 w-6 text-primary-foreground"})}),u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx(St,{className:"text-2xl font-bold",children:"Welcome Back"}),u.jsx(Xc,{className:"text-muted-foreground",children:"Sign in to your account to continue"})]})]}),u.jsxs(tt,{className:"space-y-6",children:[n&&u.jsx(ze.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},transition:{duration:.3},children:u.jsx(ml,{variant:"destructive",className:"border-destructive/50 bg-destructive/5",children:u.jsx(yl,{className:"text-sm",children:n})})}),u.jsx(L2,{...a,children:u.jsxs("form",{onSubmit:a.handleSubmit(l),className:"space-y-4",children:[u.jsx(vs,{control:a.control,name:"email",render:({field:c})=>u.jsxs(Xn,{children:[u.jsx(Jn,{className:"text-sm font-medium",children:"Email address"}),u.jsx(Zn,{children:u.jsxs("div",{className:"relative",children:[u.jsx(np,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),u.jsx(Ai,{...c,type:"email",placeholder:"Enter your email",className:"pl-10 h-11 transition-all duration-200 focus:ring-2 focus:ring-primary/20",disabled:r})]})}),u.jsx(xs,{className:"text-xs"})]})}),u.jsx(vs,{control:a.control,name:"password",render:({field:c})=>u.jsxs(Xn,{children:[u.jsx(Jn,{className:"text-sm font-medium",children:"Password"}),u.jsx(Zn,{children:u.jsxs("div",{className:"relative",children:[u.jsx(Bc,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),u.jsx(Ai,{...c,type:i?"text":"password",placeholder:"Enter your password",className:"pl-10 pr-10 h-11 transition-all duration-200 focus:ring-2 focus:ring-primary/20",disabled:r}),u.jsx(ge,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-11 px-3 py-2 hover:bg-transparent",onClick:()=>o(!i),disabled:r,children:i?u.jsx($2,{className:"h-4 w-4 text-muted-foreground"}):u.jsx(Jc,{className:"h-4 w-4 text-muted-foreground"})})]})}),u.jsx(xs,{className:"text-xs"})]})}),u.jsx(ze.div,{whileHover:{scale:1.01},whileTap:{scale:.99},children:u.jsx(ge,{type:"submit",className:"w-full h-11 text-sm font-medium",disabled:r,children:r?u.jsxs(u.Fragment,{children:[u.jsx(Hd,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):u.jsxs(u.Fragment,{children:[u.jsx(_M,{className:"mr-2 h-4 w-4"}),"Sign in"]})})})]})}),u.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Don't have an account?"," ",u.jsx(ff,{to:"/signup",className:"text-primary hover:underline font-medium",children:"Sign up here"})]})]})]})}),u.jsx(XU,{})]})})}function Zc(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}var Kce=["color"],Yce=w.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,s=Zc(t,Kce);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),Xce=["color"],q2=w.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,s=Zc(t,Xce);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),Jce=["color"],JU=w.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,s=Zc(t,Jce);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),Zce=["color"],Qce=w.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,s=Zc(t,Zce);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),eue=["color"],tue=w.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,s=Zc(t,eue);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),rue=["color"],nue=w.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,s=Zc(t,rue);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:n,fillRule:"evenodd",clipRule:"evenodd"}))}),sue=["color"],iue=w.forwardRef(function(t,e){var r=t.color,n=r===void 0?"currentColor":r,s=Zc(t,sue);return w.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),w.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:n}))});function eg(t,[e,r]){return Math.min(r,Math.max(e,t))}function _e(t,e,{checkForDefaultPrevented:r=!0}={}){return function(s){if(t==null||t(s),r===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function oue(t,e=[]){let r=[];function n(i,o){const a=w.createContext(o),l=r.length;r=[...r,o];function c(h){const{scope:f,children:p,...g}=h,y=(f==null?void 0:f[t][l])||a,v=w.useMemo(()=>g,Object.values(g));return u.jsx(y.Provider,{value:v,children:p})}function d(h,f){const p=(f==null?void 0:f[t][l])||a,g=w.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,d]}const s=()=>{const i=r.map(o=>w.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return w.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[n,aue(s,...e)]}function aue(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function Pg(t){const e=t+"CollectionProvider",[r,n]=oue(e),[s,i]=r(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:g,children:y}=p,v=ie.useRef(null),m=ie.useRef(new Map).current;return u.jsx(s,{scope:g,itemMap:m,collectionRef:v,children:y})};o.displayName=e;const a=t+"CollectionSlot",l=ie.forwardRef((p,g)=>{const{scope:y,children:v}=p,m=i(a,y),x=rt(g,m.collectionRef);return u.jsx(fa,{ref:x,children:v})});l.displayName=a;const c=t+"CollectionItemSlot",d="data-radix-collection-item",h=ie.forwardRef((p,g)=>{const{scope:y,children:v,...m}=p,x=ie.useRef(null),b=rt(g,x),_=i(c,y);return ie.useEffect(()=>(_.itemMap.set(x,{ref:x,...m}),()=>void _.itemMap.delete(x))),u.jsx(fa,{[d]:"",ref:b,children:v})});h.displayName=c;function f(p){const g=i(t+"CollectionConsumer",p);return ie.useCallback(()=>{const v=g.collectionRef.current;if(!v)return[];const m=Array.from(v.querySelectorAll(`[${d}]`));return Array.from(g.itemMap.values()).sort((_,C)=>m.indexOf(_.ref.current)-m.indexOf(C.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:l,ItemSlot:h},f,n]}function lue(t,e){const r=w.createContext(e),n=i=>{const{children:o,...a}=i,l=w.useMemo(()=>a,Object.values(a));return u.jsx(r.Provider,{value:l,children:o})};n.displayName=t+"Provider";function s(i){const o=w.useContext(r);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[n,s]}function $s(t,e=[]){let r=[];function n(i,o){const a=w.createContext(o),l=r.length;r=[...r,o];const c=h=>{var m;const{scope:f,children:p,...g}=h,y=((m=f==null?void 0:f[t])==null?void 0:m[l])||a,v=w.useMemo(()=>g,Object.values(g));return u.jsx(y.Provider,{value:v,children:p})};c.displayName=i+"Provider";function d(h,f){var y;const p=((y=f==null?void 0:f[t])==null?void 0:y[l])||a,g=w.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=r.map(o=>w.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return w.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[n,cue(s,...e)]}function cue(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}var uue=w.createContext(void 0);function Qc(t){const e=w.useContext(uue);return t||e||"ltr"}function Sr(t){const e=w.useRef(t);return w.useEffect(()=>{e.current=t}),w.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function due(t,e=globalThis==null?void 0:globalThis.document){const r=Sr(t);w.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var hue="DismissableLayer",OE="dismissableLayer.update",fue="dismissableLayer.pointerDownOutside",pue="dismissableLayer.focusOutside",EM,ZU=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ng=w.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,c=w.useContext(ZU),[d,h]=w.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=w.useState({}),g=rt(e,O=>h(O)),y=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),m=y.indexOf(v),x=d?y.indexOf(d):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,_=x>=m,C=yue(O=>{const R=O.target,I=[...c.branches].some(H=>H.contains(R));!_||I||(s==null||s(O),o==null||o(O),O.defaultPrevented||a==null||a())},f),T=vue(O=>{const R=O.target;[...c.branches].some(H=>H.contains(R))||(i==null||i(O),o==null||o(O),O.defaultPrevented||a==null||a())},f);return due(O=>{x===c.layers.size-1&&(n==null||n(O),!O.defaultPrevented&&a&&(O.preventDefault(),a()))},f),w.useEffect(()=>{if(d)return r&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(EM=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),kM(),()=>{r&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=EM)}},[d,f,r,c]),w.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),kM())},[d,c]),w.useEffect(()=>{const O=()=>p({});return document.addEventListener(OE,O),()=>document.removeEventListener(OE,O)},[]),u.jsx(Fe.div,{...l,ref:g,style:{pointerEvents:b?_?"auto":"none":void 0,...t.style},onFocusCapture:_e(t.onFocusCapture,T.onFocusCapture),onBlurCapture:_e(t.onBlurCapture,T.onBlurCapture),onPointerDownCapture:_e(t.onPointerDownCapture,C.onPointerDownCapture)})});Ng.displayName=hue;var gue="DismissableLayerBranch",mue=w.forwardRef((t,e)=>{const r=w.useContext(ZU),n=w.useRef(null),s=rt(e,n);return w.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),u.jsx(Fe.div,{...t,ref:s})});mue.displayName=gue;function yue(t,e=globalThis==null?void 0:globalThis.document){const r=Sr(t),n=w.useRef(!1),s=w.useRef(()=>{});return w.useEffect(()=>{const i=a=>{if(a.target&&!n.current){let l=function(){QU(fue,r,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function vue(t,e=globalThis==null?void 0:globalThis.document){const r=Sr(t),n=w.useRef(!1);return w.useEffect(()=>{const s=i=>{i.target&&!n.current&&QU(pue,r,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function kM(){const t=new CustomEvent(OE);document.dispatchEvent(t)}function QU(t,e,r,{discrete:n}){const s=r.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&s.addEventListener(t,e,{once:!0}),n?kU(s,i):s.dispatchEvent(i)}var iS=0;function G2(){w.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??TM()),document.body.insertAdjacentElement("beforeend",t[1]??TM()),iS++,()=>{iS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),iS--}},[])}function TM(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var oS="focusScope.autoFocusOnMount",aS="focusScope.autoFocusOnUnmount",jM={bubbles:!1,cancelable:!0},xue="FocusScope",ew=w.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=w.useState(null),c=Sr(s),d=Sr(i),h=w.useRef(null),f=rt(e,y=>l(y)),p=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(n){let y=function(b){if(p.paused||!a)return;const _=b.target;a.contains(_)?h.current=_:Ma(h.current,{select:!0})},v=function(b){if(p.paused||!a)return;const _=b.relatedTarget;_!==null&&(a.contains(_)||Ma(h.current,{select:!0}))},m=function(b){if(document.activeElement===document.body)for(const C of b)C.removedNodes.length>0&&Ma(a)};document.addEventListener("focusin",y),document.addEventListener("focusout",v);const x=new MutationObserver(m);return a&&x.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",v),x.disconnect()}}},[n,a,p.paused]),w.useEffect(()=>{if(a){PM.add(p);const y=document.activeElement;if(!a.contains(y)){const m=new CustomEvent(oS,jM);a.addEventListener(oS,c),a.dispatchEvent(m),m.defaultPrevented||(wue(Eue(e6(a)),{select:!0}),document.activeElement===y&&Ma(a))}return()=>{a.removeEventListener(oS,c),setTimeout(()=>{const m=new CustomEvent(aS,jM);a.addEventListener(aS,d),a.dispatchEvent(m),m.defaultPrevented||Ma(y??document.body,{select:!0}),a.removeEventListener(aS,d),PM.remove(p)},0)}}},[a,c,d,p]);const g=w.useCallback(y=>{if(!r&&!n||p.paused)return;const v=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,m=document.activeElement;if(v&&m){const x=y.currentTarget,[b,_]=bue(x);b&&_?!y.shiftKey&&m===_?(y.preventDefault(),r&&Ma(b,{select:!0})):y.shiftKey&&m===b&&(y.preventDefault(),r&&Ma(_,{select:!0})):m===x&&y.preventDefault()}},[r,n,p.paused]);return u.jsx(Fe.div,{tabIndex:-1,...o,ref:f,onKeyDown:g})});ew.displayName=xue;function wue(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(Ma(n,{select:e}),document.activeElement!==r)return}function bue(t){const e=e6(t),r=AM(e,t),n=AM(e.reverse(),t);return[r,n]}function e6(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function AM(t,e){for(const r of t)if(!Sue(r,{upTo:e}))return r}function Sue(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function _ue(t){return t instanceof HTMLInputElement&&"select"in t}function Ma(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&_ue(t)&&e&&t.select()}}var PM=Cue();function Cue(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=NM(t,e),t.unshift(e)},remove(e){var r;t=NM(t,e),(r=t[0])==null||r.resume()}}}function NM(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function Eue(t){return t.filter(e=>e.tagName!=="A")}var Fr=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},kue=D4.useId||(()=>{}),Tue=0;function ks(t){const[e,r]=w.useState(kue());return Fr(()=>{r(n=>n??String(Tue++))},[t]),e?`radix-${e}`:""}const jue=["top","right","bottom","left"],vl=Math.min,ws=Math.max,pv=Math.round,Nm=Math.floor,xl=t=>({x:t,y:t}),Aue={left:"right",right:"left",bottom:"top",top:"bottom"},Pue={start:"end",end:"start"};function ME(t,e,r){return ws(t,vl(e,r))}function pa(t,e){return typeof t=="function"?t(e):t}function ga(t){return t.split("-")[0]}function xh(t){return t.split("-")[1]}function K2(t){return t==="x"?"y":"x"}function Y2(t){return t==="y"?"height":"width"}function wl(t){return["top","bottom"].includes(ga(t))?"y":"x"}function X2(t){return K2(wl(t))}function Nue(t,e,r){r===void 0&&(r=!1);const n=xh(t),s=X2(t),i=Y2(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=gv(o)),[o,gv(o)]}function Rue(t){const e=gv(t);return[IE(t),e,IE(e)]}function IE(t){return t.replace(/start|end/g,e=>Pue[e])}function Oue(t,e,r){const n=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return r?e?s:n:e?n:s;case"left":case"right":return e?i:o;default:return[]}}function Mue(t,e,r,n){const s=xh(t);let i=Oue(ga(t),r==="start",n);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(IE)))),i}function gv(t){return t.replace(/left|right|bottom|top/g,e=>Aue[e])}function Iue(t){return{top:0,right:0,bottom:0,left:0,...t}}function t6(t){return typeof t!="number"?Iue(t):{top:t,right:t,bottom:t,left:t}}function mv(t){const{x:e,y:r,width:n,height:s}=t;return{width:n,height:s,top:r,left:e,right:e+n,bottom:r+s,x:e,y:r}}function RM(t,e,r){let{reference:n,floating:s}=t;const i=wl(e),o=X2(e),a=Y2(o),l=ga(e),c=i==="y",d=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,f=n[a]/2-s[a]/2;let p;switch(l){case"top":p={x:d,y:n.y-s.height};break;case"bottom":p={x:d,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:h};break;case"left":p={x:n.x-s.width,y:h};break;default:p={x:n.x,y:n.y}}switch(xh(e)){case"start":p[o]-=f*(r&&c?-1:1);break;case"end":p[o]+=f*(r&&c?-1:1);break}return p}const Due=async(t,e,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:o}=r,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=RM(c,n,l),f=n,p={},g=0;for(let y=0;y<a.length;y++){const{name:v,fn:m}=a[y],{x,y:b,data:_,reset:C}=await m({x:d,y:h,initialPlacement:n,placement:f,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});d=x??d,h=b??h,p={...p,[v]:{...p[v],..._}},C&&g<=50&&(g++,typeof C=="object"&&(C.placement&&(f=C.placement),C.rects&&(c=C.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):C.rects),{x:d,y:h}=RM(c,f,l)),y=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:p}};async function tg(t,e){var r;e===void 0&&(e={});const{x:n,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=pa(e,t),g=t6(p),v=a[f?h==="floating"?"reference":"floating":h],m=mv(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(v)))==null||r?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:d,strategy:l})),x=h==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),_=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},C=mv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:x,offsetParent:b,strategy:l}):x);return{top:(m.top-C.top+g.top)/_.y,bottom:(C.bottom-m.bottom+g.bottom)/_.y,left:(m.left-C.left+g.left)/_.x,right:(C.right-m.right+g.right)/_.x}}const Fue=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:d=0}=pa(t,e)||{};if(c==null)return{};const h=t6(d),f={x:r,y:n},p=X2(s),g=Y2(p),y=await o.getDimensions(c),v=p==="y",m=v?"top":"left",x=v?"bottom":"right",b=v?"clientHeight":"clientWidth",_=i.reference[g]+i.reference[p]-f[p]-i.floating[g],C=f[p]-i.reference[p],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let O=T?T[b]:0;(!O||!await(o.isElement==null?void 0:o.isElement(T)))&&(O=a.floating[b]||i.floating[g]);const R=_/2-C/2,I=O/2-y[g]/2-1,H=vl(h[m],I),re=vl(h[x],I),L=H,z=O-y[g]-re,Y=O/2-y[g]/2+R,pe=ME(L,Y,z),Q=!l.arrow&&xh(s)!=null&&Y!==pe&&i.reference[g]/2-(Y<L?H:re)-y[g]/2<0,se=Q?Y<L?Y-L:Y-z:0;return{[p]:f[p]+se,data:{[p]:pe,centerOffset:Y-pe-se,...Q&&{alignmentOffset:se}},reset:Q}}}),Lue=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...v}=pa(t,e);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const m=ga(s),x=wl(a),b=ga(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(c.floating)),C=f||(b||!y?[gv(a)]:Rue(a)),T=g!=="none";!f&&T&&C.push(...Mue(a,y,g,_));const O=[a,...C],R=await tg(e,v),I=[];let H=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&I.push(R[m]),h){const Y=Nue(s,o,_);I.push(R[Y[0]],R[Y[1]])}if(H=[...H,{placement:s,overflows:I}],!I.every(Y=>Y<=0)){var re,L;const Y=(((re=i.flip)==null?void 0:re.index)||0)+1,pe=O[Y];if(pe)return{data:{index:Y,overflows:H},reset:{placement:pe}};let Q=(L=H.filter(se=>se.overflows[0]<=0).sort((se,F)=>se.overflows[1]-F.overflows[1])[0])==null?void 0:L.placement;if(!Q)switch(p){case"bestFit":{var z;const se=(z=H.filter(F=>{if(T){const K=wl(F.placement);return K===x||K==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(K=>K>0).reduce((K,de)=>K+de,0)]).sort((F,K)=>F[1]-K[1])[0])==null?void 0:z[0];se&&(Q=se);break}case"initialPlacement":Q=a;break}if(s!==Q)return{reset:{placement:Q}}}return{}}}};function OM(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function MM(t){return jue.some(e=>t[e]>=0)}const Bue=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...s}=pa(t,e);switch(n){case"referenceHidden":{const i=await tg(e,{...s,elementContext:"reference"}),o=OM(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:MM(o)}}}case"escaped":{const i=await tg(e,{...s,altBoundary:!0}),o=OM(i,r.floating);return{data:{escapedOffsets:o,escaped:MM(o)}}}default:return{}}}}};async function $ue(t,e){const{placement:r,platform:n,elements:s}=t,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=ga(r),a=xh(r),l=wl(r)==="y",c=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,h=pa(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&typeof g=="number"&&(p=a==="end"?g*-1:g),l?{x:p*d,y:f*c}:{x:f*c,y:p*d}}const Uue=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await $ue(e,t);return o===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},Vue=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:m,y:x}=v;return{x:m,y:x}}},...l}=pa(t,e),c={x:r,y:n},d=await tg(e,l),h=wl(ga(s)),f=K2(h);let p=c[f],g=c[h];if(i){const v=f==="y"?"top":"left",m=f==="y"?"bottom":"right",x=p+d[v],b=p-d[m];p=ME(x,p,b)}if(o){const v=h==="y"?"top":"left",m=h==="y"?"bottom":"right",x=g+d[v],b=g-d[m];g=ME(x,g,b)}const y=a.fn({...e,[f]:p,[h]:g});return{...y,data:{x:y.x-r,y:y.y-n,enabled:{[f]:i,[h]:o}}}}}},zue=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=pa(t,e),d={x:r,y:n},h=wl(s),f=K2(h);let p=d[f],g=d[h];const y=pa(a,e),v=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const b=f==="y"?"height":"width",_=i.reference[f]-i.floating[b]+v.mainAxis,C=i.reference[f]+i.reference[b]-v.mainAxis;p<_?p=_:p>C&&(p=C)}if(c){var m,x;const b=f==="y"?"width":"height",_=["top","left"].includes(ga(s)),C=i.reference[h]-i.floating[b]+(_&&((m=o.offset)==null?void 0:m[h])||0)+(_?0:v.crossAxis),T=i.reference[h]+i.reference[b]+(_?0:((x=o.offset)==null?void 0:x[h])||0)-(_?v.crossAxis:0);g<C?g=C:g>T&&(g=T)}return{[f]:p,[h]:g}}}},Hue=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...c}=pa(t,e),d=await tg(e,c),h=ga(s),f=xh(s),p=wl(s)==="y",{width:g,height:y}=i.floating;let v,m;h==="top"||h==="bottom"?(v=h,m=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(m=h,v=f==="end"?"top":"bottom");const x=y-d.top-d.bottom,b=g-d.left-d.right,_=vl(y-d[v],x),C=vl(g-d[m],b),T=!e.middlewareData.shift;let O=_,R=C;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(R=b),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(O=x),T&&!f){const H=ws(d.left,0),re=ws(d.right,0),L=ws(d.top,0),z=ws(d.bottom,0);p?R=g-2*(H!==0||re!==0?H+re:ws(d.left,d.right)):O=y-2*(L!==0||z!==0?L+z:ws(d.top,d.bottom))}await l({...e,availableWidth:R,availableHeight:O});const I=await o.getDimensions(a.floating);return g!==I.width||y!==I.height?{reset:{rects:!0}}:{}}}};function tw(){return typeof window<"u"}function wh(t){return r6(t)?(t.nodeName||"").toLowerCase():"#document"}function Ts(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Eo(t){var e;return(e=(r6(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function r6(t){return tw()?t instanceof Node||t instanceof Ts(t).Node:!1}function Fi(t){return tw()?t instanceof Element||t instanceof Ts(t).Element:!1}function wo(t){return tw()?t instanceof HTMLElement||t instanceof Ts(t).HTMLElement:!1}function IM(t){return!tw()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ts(t).ShadowRoot}function Rg(t){const{overflow:e,overflowX:r,overflowY:n,display:s}=Li(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(s)}function Wue(t){return["table","td","th"].includes(wh(t))}function rw(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function J2(t){const e=Z2(),r=Fi(t)?Li(t):t;return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function que(t){let e=bl(t);for(;wo(e)&&!qd(e);){if(J2(e))return e;if(rw(e))return null;e=bl(e)}return null}function Z2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function qd(t){return["html","body","#document"].includes(wh(t))}function Li(t){return Ts(t).getComputedStyle(t)}function nw(t){return Fi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function bl(t){if(wh(t)==="html")return t;const e=t.assignedSlot||t.parentNode||IM(t)&&t.host||Eo(t);return IM(e)?e.host:e}function n6(t){const e=bl(t);return qd(e)?t.ownerDocument?t.ownerDocument.body:t.body:wo(e)&&Rg(e)?e:n6(e)}function rg(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const s=n6(t),i=s===((n=t.ownerDocument)==null?void 0:n.body),o=Ts(s);if(i){const a=DE(o);return e.concat(o,o.visualViewport||[],Rg(s)?s:[],a&&r?rg(a):[])}return e.concat(s,rg(s,[],r))}function DE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function s6(t){const e=Li(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=wo(t),i=s?t.offsetWidth:r,o=s?t.offsetHeight:n,a=pv(r)!==i||pv(n)!==o;return a&&(r=i,n=o),{width:r,height:n,$:a}}function Q2(t){return Fi(t)?t:t.contextElement}function vd(t){const e=Q2(t);if(!wo(e))return xl(1);const r=e.getBoundingClientRect(),{width:n,height:s,$:i}=s6(e);let o=(i?pv(r.width):r.width)/n,a=(i?pv(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Gue=xl(0);function i6(t){const e=Ts(t);return!Z2()||!e.visualViewport?Gue:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Kue(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==Ts(t)?!1:e}function $c(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const s=t.getBoundingClientRect(),i=Q2(t);let o=xl(1);e&&(n?Fi(n)&&(o=vd(n)):o=vd(t));const a=Kue(i,r,n)?i6(i):xl(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,d=s.width/o.x,h=s.height/o.y;if(i){const f=Ts(i),p=n&&Fi(n)?Ts(n):n;let g=f,y=DE(g);for(;y&&n&&p!==g;){const v=vd(y),m=y.getBoundingClientRect(),x=Li(y),b=m.left+(y.clientLeft+parseFloat(x.paddingLeft))*v.x,_=m.top+(y.clientTop+parseFloat(x.paddingTop))*v.y;l*=v.x,c*=v.y,d*=v.x,h*=v.y,l+=b,c+=_,g=Ts(y),y=DE(g)}}return mv({width:d,height:h,x:l,y:c})}function Yue(t){let{elements:e,rect:r,offsetParent:n,strategy:s}=t;const i=s==="fixed",o=Eo(n),a=e?rw(e.floating):!1;if(n===o||a&&i)return r;let l={scrollLeft:0,scrollTop:0},c=xl(1);const d=xl(0),h=wo(n);if((h||!h&&!i)&&((wh(n)!=="body"||Rg(o))&&(l=nw(n)),wo(n))){const f=$c(n);c=vd(n),d.x=f.x+n.clientLeft,d.y=f.y+n.clientTop}return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+d.x,y:r.y*c.y-l.scrollTop*c.y+d.y}}function Xue(t){return Array.from(t.getClientRects())}function FE(t,e){const r=nw(t).scrollLeft;return e?e.left+r:$c(Eo(t)).left+r}function Jue(t){const e=Eo(t),r=nw(t),n=t.ownerDocument.body,s=ws(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),i=ws(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+FE(t);const a=-r.scrollTop;return Li(n).direction==="rtl"&&(o+=ws(e.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:a}}function Zue(t,e){const r=Ts(t),n=Eo(t),s=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const c=Z2();(!c||c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function Que(t,e){const r=$c(t,!0,e==="fixed"),n=r.top+t.clientTop,s=r.left+t.clientLeft,i=wo(t)?vd(t):xl(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,c=n*i.y;return{width:o,height:a,x:l,y:c}}function DM(t,e,r){let n;if(e==="viewport")n=Zue(t,r);else if(e==="document")n=Jue(Eo(t));else if(Fi(e))n=Que(e,r);else{const s=i6(t);n={...e,x:e.x-s.x,y:e.y-s.y}}return mv(n)}function o6(t,e){const r=bl(t);return r===e||!Fi(r)||qd(r)?!1:Li(r).position==="fixed"||o6(r,e)}function ede(t,e){const r=e.get(t);if(r)return r;let n=rg(t,[],!1).filter(a=>Fi(a)&&wh(a)!=="body"),s=null;const i=Li(t).position==="fixed";let o=i?bl(t):t;for(;Fi(o)&&!qd(o);){const a=Li(o),l=J2(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Rg(o)&&!l&&o6(t,o))?n=n.filter(d=>d!==o):s=a,o=bl(o)}return e.set(t,n),n}function tde(t){let{element:e,boundary:r,rootBoundary:n,strategy:s}=t;const o=[...r==="clippingAncestors"?rw(e)?[]:ede(e,this._c):[].concat(r),n],a=o[0],l=o.reduce((c,d)=>{const h=DM(e,d,s);return c.top=ws(h.top,c.top),c.right=vl(h.right,c.right),c.bottom=vl(h.bottom,c.bottom),c.left=ws(h.left,c.left),c},DM(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function rde(t){const{width:e,height:r}=s6(t);return{width:e,height:r}}function nde(t,e,r){const n=wo(e),s=Eo(e),i=r==="fixed",o=$c(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=xl(0);if(n||!n&&!i)if((wh(e)!=="body"||Rg(s))&&(a=nw(e)),n){const p=$c(e,!0,i,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else s&&(l.x=FE(s));let c=0,d=0;if(s&&!n&&!i){const p=s.getBoundingClientRect();d=p.top+a.scrollTop,c=p.left+a.scrollLeft-FE(s,p)}const h=o.left+a.scrollLeft-l.x-c,f=o.top+a.scrollTop-l.y-d;return{x:h,y:f,width:o.width,height:o.height}}function lS(t){return Li(t).position==="static"}function FM(t,e){if(!wo(t)||Li(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Eo(t)===r&&(r=r.ownerDocument.body),r}function a6(t,e){const r=Ts(t);if(rw(t))return r;if(!wo(t)){let s=bl(t);for(;s&&!qd(s);){if(Fi(s)&&!lS(s))return s;s=bl(s)}return r}let n=FM(t,e);for(;n&&Wue(n)&&lS(n);)n=FM(n,e);return n&&qd(n)&&lS(n)&&!J2(n)?r:n||que(t)||r}const sde=async function(t){const e=this.getOffsetParent||a6,r=this.getDimensions,n=await r(t.floating);return{reference:nde(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function ide(t){return Li(t).direction==="rtl"}const ode={convertOffsetParentRelativeRectToViewportRelativeRect:Yue,getDocumentElement:Eo,getClippingRect:tde,getOffsetParent:a6,getElementRects:sde,getClientRects:Xue,getDimensions:rde,getScale:vd,isElement:Fi,isRTL:ide};function ade(t,e){let r=null,n;const s=Eo(t);function i(){var a;clearTimeout(n),(a=r)==null||a.disconnect(),r=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const{left:c,top:d,width:h,height:f}=t.getBoundingClientRect();if(a||e(),!h||!f)return;const p=Nm(d),g=Nm(s.clientWidth-(c+h)),y=Nm(s.clientHeight-(d+f)),v=Nm(c),x={rootMargin:-p+"px "+-g+"px "+-y+"px "+-v+"px",threshold:ws(0,vl(1,l))||1};let b=!0;function _(C){const T=C[0].intersectionRatio;if(T!==l){if(!b)return o();T?o(!1,T):n=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{r=new IntersectionObserver(_,{...x,root:s.ownerDocument})}catch{r=new IntersectionObserver(_,x)}r.observe(t)}return o(!0),i}function lde(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=Q2(t),d=s||i?[...c?rg(c):[],...rg(e)]:[];d.forEach(m=>{s&&m.addEventListener("scroll",r,{passive:!0}),i&&m.addEventListener("resize",r)});const h=c&&a?ade(c,r):null;let f=-1,p=null;o&&(p=new ResizeObserver(m=>{let[x]=m;x&&x.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(e)})),r()}),c&&!l&&p.observe(c),p.observe(e));let g,y=l?$c(t):null;l&&v();function v(){const m=$c(t);y&&(m.x!==y.x||m.y!==y.y||m.width!==y.width||m.height!==y.height)&&r(),y=m,g=requestAnimationFrame(v)}return r(),()=>{var m;d.forEach(x=>{s&&x.removeEventListener("scroll",r),i&&x.removeEventListener("resize",r)}),h==null||h(),(m=p)==null||m.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const cde=Uue,ude=Vue,dde=Lue,hde=Hue,fde=Bue,LM=Fue,pde=zue,gde=(t,e,r)=>{const n=new Map,s={platform:ode,...r},i={...s.platform,_c:n};return Due(t,e,{...s,platform:i})};var zy=typeof document<"u"?w.useLayoutEffect:w.useEffect;function yv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!yv(t[n],e[n]))return!1;return!0}if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&t.$$typeof)&&!yv(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function l6(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function BM(t,e){const r=l6(t);return Math.round(e*r)/r}function cS(t){const e=w.useRef(t);return zy(()=>{e.current=t}),e}function mde(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[d,h]=w.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=w.useState(n);yv(f,n)||p(n);const[g,y]=w.useState(null),[v,m]=w.useState(null),x=w.useCallback(F=>{F!==T.current&&(T.current=F,y(F))},[]),b=w.useCallback(F=>{F!==O.current&&(O.current=F,m(F))},[]),_=i||g,C=o||v,T=w.useRef(null),O=w.useRef(null),R=w.useRef(d),I=l!=null,H=cS(l),re=cS(s),L=cS(c),z=w.useCallback(()=>{if(!T.current||!O.current)return;const F={placement:e,strategy:r,middleware:f};re.current&&(F.platform=re.current),gde(T.current,O.current,F).then(K=>{const de={...K,isPositioned:L.current!==!1};Y.current&&!yv(R.current,de)&&(R.current=de,lh.flushSync(()=>{h(de)}))})},[f,e,r,re,L]);zy(()=>{c===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,h(F=>({...F,isPositioned:!1})))},[c]);const Y=w.useRef(!1);zy(()=>(Y.current=!0,()=>{Y.current=!1}),[]),zy(()=>{if(_&&(T.current=_),C&&(O.current=C),_&&C){if(H.current)return H.current(_,C,z);z()}},[_,C,z,H,I]);const pe=w.useMemo(()=>({reference:T,floating:O,setReference:x,setFloating:b}),[x,b]),Q=w.useMemo(()=>({reference:_,floating:C}),[_,C]),se=w.useMemo(()=>{const F={position:r,left:0,top:0};if(!Q.floating)return F;const K=BM(Q.floating,d.x),de=BM(Q.floating,d.y);return a?{...F,transform:"translate("+K+"px, "+de+"px)",...l6(Q.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:K,top:de}},[r,a,Q.floating,d.x,d.y]);return w.useMemo(()=>({...d,update:z,refs:pe,elements:Q,floatingStyles:se}),[d,z,pe,Q,se])}const yde=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:s}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?LM({element:n.current,padding:s}).fn(r):{}:n?LM({element:n,padding:s}).fn(r):{}}}},vde=(t,e)=>({...cde(t),options:[t,e]}),xde=(t,e)=>({...ude(t),options:[t,e]}),wde=(t,e)=>({...pde(t),options:[t,e]}),bde=(t,e)=>({...dde(t),options:[t,e]}),Sde=(t,e)=>({...hde(t),options:[t,e]}),_de=(t,e)=>({...fde(t),options:[t,e]}),Cde=(t,e)=>({...yde(t),options:[t,e]});var Ede="Arrow",c6=w.forwardRef((t,e)=>{const{children:r,width:n=10,height:s=5,...i}=t;return u.jsx(Fe.svg,{...i,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:u.jsx("polygon",{points:"0,0 30,0 15,10"})})});c6.displayName=Ede;var kde=c6;function Tde(t,e=[]){let r=[];function n(i,o){const a=w.createContext(o),l=r.length;r=[...r,o];function c(h){const{scope:f,children:p,...g}=h,y=(f==null?void 0:f[t][l])||a,v=w.useMemo(()=>g,Object.values(g));return u.jsx(y.Provider,{value:v,children:p})}function d(h,f){const p=(f==null?void 0:f[t][l])||a,g=w.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,d]}const s=()=>{const i=r.map(o=>w.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return w.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[n,jde(s,...e)]}function jde(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function sw(t){const[e,r]=w.useState(void 0);return Fr(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;r({width:o,height:a})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var ej="Popper",[u6,bh]=Tde(ej),[Ade,d6]=u6(ej),h6=t=>{const{__scopePopper:e,children:r}=t,[n,s]=w.useState(null);return u.jsx(Ade,{scope:e,anchor:n,onAnchorChange:s,children:r})};h6.displayName=ej;var f6="PopperAnchor",p6=w.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...s}=t,i=d6(f6,r),o=w.useRef(null),a=rt(e,o);return w.useEffect(()=>{i.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:u.jsx(Fe.div,{...s,ref:a})});p6.displayName=f6;var tj="PopperContent",[Pde,Nde]=u6(tj),g6=w.forwardRef((t,e)=>{var D,ee,me,Se,A,P;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:g,...y}=t,v=d6(tj,r),[m,x]=w.useState(null),b=rt(e,G=>x(G)),[_,C]=w.useState(null),T=sw(_),O=(T==null?void 0:T.width)??0,R=(T==null?void 0:T.height)??0,I=n+(i!=="center"?"-"+i:""),H=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},re=Array.isArray(c)?c:[c],L=re.length>0,z={padding:H,boundary:re.filter(Ode),altBoundary:L},{refs:Y,floatingStyles:pe,placement:Q,isPositioned:se,middlewareData:F}=mde({strategy:"fixed",placement:I,whileElementsMounted:(...G)=>lde(...G,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[vde({mainAxis:s+R,alignmentAxis:o}),l&&xde({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?wde():void 0,...z}),l&&bde({...z}),Sde({...z,apply:({elements:G,rects:ue,availableWidth:Ye,availableHeight:j})=>{const{width:E,height:S}=ue.reference,k=G.floating.style;k.setProperty("--radix-popper-available-width",`${Ye}px`),k.setProperty("--radix-popper-available-height",`${j}px`),k.setProperty("--radix-popper-anchor-width",`${E}px`),k.setProperty("--radix-popper-anchor-height",`${S}px`)}}),_&&Cde({element:_,padding:a}),Mde({arrowWidth:O,arrowHeight:R}),f&&_de({strategy:"referenceHidden",...z})]}),[K,de]=v6(Q),le=Sr(g);Fr(()=>{se&&(le==null||le())},[se,le]);const be=(D=F.arrow)==null?void 0:D.x,Be=(ee=F.arrow)==null?void 0:ee.y,He=((me=F.arrow)==null?void 0:me.centerOffset)!==0,[ht,U]=w.useState();return Fr(()=>{m&&U(window.getComputedStyle(m).zIndex)},[m]),u.jsx("div",{ref:Y.setFloating,"data-radix-popper-content-wrapper":"",style:{...pe,transform:se?pe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ht,"--radix-popper-transform-origin":[(Se=F.transformOrigin)==null?void 0:Se.x,(A=F.transformOrigin)==null?void 0:A.y].join(" "),...((P=F.hide)==null?void 0:P.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:u.jsx(Pde,{scope:r,placedSide:K,onArrowChange:C,arrowX:be,arrowY:Be,shouldHideArrow:He,children:u.jsx(Fe.div,{"data-side":K,"data-align":de,...y,ref:b,style:{...y.style,animation:se?void 0:"none"}})})})});g6.displayName=tj;var m6="PopperArrow",Rde={top:"bottom",right:"left",bottom:"top",left:"right"},y6=w.forwardRef(function(e,r){const{__scopePopper:n,...s}=e,i=Nde(m6,n),o=Rde[i.placedSide];return u.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:u.jsx(kde,{...s,ref:r,style:{...s.style,display:"block"}})})});y6.displayName=m6;function Ode(t){return t!==null}var Mde=t=>({name:"transformOrigin",options:t,fn(e){var v,m,x;const{placement:r,rects:n,middlewareData:s}=e,o=((v=s.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,d]=v6(r),h={start:"0%",center:"50%",end:"100%"}[d],f=(((m=s.arrow)==null?void 0:m.x)??0)+a/2,p=(((x=s.arrow)==null?void 0:x.y)??0)+l/2;let g="",y="";return c==="bottom"?(g=o?h:`${f}px`,y=`${-l}px`):c==="top"?(g=o?h:`${f}px`,y=`${n.floating.height+l}px`):c==="right"?(g=`${-l}px`,y=o?h:`${p}px`):c==="left"&&(g=`${n.floating.width+l}px`,y=o?h:`${p}px`),{data:{x:g,y}}}});function v6(t){const[e,r="center"]=t.split("-");return[e,r]}var rj=h6,nj=p6,sj=g6,ij=y6,Ide="Portal",iw=w.forwardRef((t,e)=>{var a;const{container:r,...n}=t,[s,i]=w.useState(!1);Fr(()=>i(!0),[]);const o=r||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?BL.createPortal(u.jsx(Fe.div,{...n,ref:e}),o):null});iw.displayName=Ide;function Rs({prop:t,defaultProp:e,onChange:r=()=>{}}){const[n,s]=Dde({defaultProp:e,onChange:r}),i=t!==void 0,o=i?t:n,a=Sr(r),l=w.useCallback(c=>{if(i){const h=typeof c=="function"?c(t):c;h!==t&&a(h)}else s(c)},[i,t,s,a]);return[o,l]}function Dde({defaultProp:t,onChange:e}){const r=w.useState(t),[n]=r,s=w.useRef(n),i=Sr(e);return w.useEffect(()=>{s.current!==n&&(i(n),s.current=n)},[n,s,i]),r}function ow(t){const e=w.useRef({value:t,previous:t});return w.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var Fde="VisuallyHidden",oj=w.forwardRef((t,e)=>u.jsx(Fe.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));oj.displayName=Fde;var Lde=oj,Bde=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},_u=new WeakMap,Rm=new WeakMap,Om={},uS=0,x6=function(t){return t&&(t.host||x6(t.parentNode))},$de=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=x6(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},Ude=function(t,e,r,n){var s=$de(e,Array.isArray(t)?t:[t]);Om[r]||(Om[r]=new WeakMap);var i=Om[r],o=[],a=new Set,l=new Set(s),c=function(h){!h||a.has(h)||(a.add(h),c(h.parentNode))};s.forEach(c);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(f){if(a.has(f))d(f);else try{var p=f.getAttribute(n),g=p!==null&&p!=="false",y=(_u.get(f)||0)+1,v=(i.get(f)||0)+1;_u.set(f,y),i.set(f,v),o.push(f),y===1&&g&&Rm.set(f,!0),v===1&&f.setAttribute(r,"true"),g||f.setAttribute(n,"true")}catch(m){console.error("aria-hidden: cannot operate on ",f,m)}})};return d(e),a.clear(),uS++,function(){o.forEach(function(h){var f=_u.get(h)-1,p=i.get(h)-1;_u.set(h,f),i.set(h,p),f||(Rm.has(h)||h.removeAttribute(n),Rm.delete(h)),p||h.removeAttribute(r)}),uS--,uS||(_u=new WeakMap,_u=new WeakMap,Rm=new WeakMap,Om={})}},aj=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),s=Bde(t);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),Ude(n,s,r,"aria-hidden")):function(){return null}},ro=function(){return ro=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ro.apply(this,arguments)};function w6(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function lj(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((n=n.apply(t,e||[])).next())})}function cj(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(d){return l([c,d])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,s=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(d){c=[6,d],s=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function b6(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vde(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}var Hy="right-scroll-bar-position",Wy="width-before-scroll-bar",zde="with-scroll-bars-hidden",Hde="--removed-body-scroll-bar-size";function dS(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Wde(t,e){var r=w.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=e,r.facade}var qde=typeof window<"u"?w.useLayoutEffect:w.useEffect,$M=new WeakMap;function Gde(t,e){var r=Wde(null,function(n){return t.forEach(function(s){return dS(s,n)})});return qde(function(){var n=$M.get(r);if(n){var s=new Set(n),i=new Set(t),o=r.current;s.forEach(function(a){i.has(a)||dS(a,null)}),i.forEach(function(a){s.has(a)||dS(a,o)})}$M.set(r,t)},[t]),r}function Kde(t){return t}function Yde(t,e){e===void 0&&(e=Kde);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(i){var o=e(i,n);return r.push(o),function(){r=r.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(a){return i(a)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var a=r;r=[],a.forEach(i),o=r}var l=function(){var d=o;o=[],d.forEach(i)},c=function(){return Promise.resolve().then(l)};c(),r={push:function(d){o.push(d),c()},filter:function(d){return o=o.filter(d),r}}}};return s}function Xde(t){t===void 0&&(t={});var e=Yde(null);return e.options=ro({async:!0,ssr:!1},t),e}var S6=function(t){var e=t.sideCar,r=w6(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return w.createElement(n,ro({},r))};S6.isSideCarExport=!0;function Jde(t,e){return t.useMedium(e),S6}var _6=Xde(),hS=function(){},aw=w.forwardRef(function(t,e){var r=w.useRef(null),n=w.useState({onScrollCapture:hS,onWheelCapture:hS,onTouchMoveCapture:hS}),s=n[0],i=n[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,d=t.enabled,h=t.shards,f=t.sideCar,p=t.noIsolation,g=t.inert,y=t.allowPinchZoom,v=t.as,m=v===void 0?"div":v,x=t.gapMode,b=w6(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=f,C=Gde([r,e]),T=ro(ro({},b),s);return w.createElement(w.Fragment,null,d&&w.createElement(_,{sideCar:_6,removeScrollBar:c,shards:h,noIsolation:p,inert:g,setCallbacks:i,allowPinchZoom:!!y,lockRef:r,gapMode:x}),o?w.cloneElement(w.Children.only(a),ro(ro({},T),{ref:C})):w.createElement(m,ro({},T,{className:l,ref:C}),a))});aw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};aw.classNames={fullWidth:Wy,zeroRight:Hy};var Zde=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Qde(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Zde();return e&&t.setAttribute("nonce",e),t}function ehe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function the(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var rhe=function(){var t=0,e=null;return{add:function(r){t==0&&(e=Qde())&&(ehe(e,r),the(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},nhe=function(){var t=rhe();return function(e,r){w.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},C6=function(){var t=nhe(),e=function(r){var n=r.styles,s=r.dynamic;return t(n,s),null};return e},she={left:0,top:0,right:0,gap:0},fS=function(t){return parseInt(t||"",10)||0},ihe=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[fS(r),fS(n),fS(s)]},ohe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return she;var e=ihe(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},ahe=C6(),xd="data-scroll-locked",lhe=function(t,e,r,n){var s=t.left,i=t.top,o=t.right,a=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(zde,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(xd,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Hy,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(Wy,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(Hy," .").concat(Hy,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Wy," .").concat(Wy,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(xd,`] {
    `).concat(Hde,": ").concat(a,`px;
  }
`)},UM=function(){var t=parseInt(document.body.getAttribute(xd)||"0",10);return isFinite(t)?t:0},che=function(){w.useEffect(function(){return document.body.setAttribute(xd,(UM()+1).toString()),function(){var t=UM()-1;t<=0?document.body.removeAttribute(xd):document.body.setAttribute(xd,t.toString())}},[])},uhe=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,s=n===void 0?"margin":n;che();var i=w.useMemo(function(){return ohe(s)},[s]);return w.createElement(ahe,{styles:lhe(i,!e,s,r?"":"!important")})},LE=!1;if(typeof window<"u")try{var Mm=Object.defineProperty({},"passive",{get:function(){return LE=!0,!0}});window.addEventListener("test",Mm,Mm),window.removeEventListener("test",Mm,Mm)}catch{LE=!1}var Cu=LE?{passive:!1}:!1,dhe=function(t){return t.tagName==="TEXTAREA"},E6=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!dhe(t)&&r[e]==="visible")},hhe=function(t){return E6(t,"overflowY")},fhe=function(t){return E6(t,"overflowX")},VM=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=k6(t,n);if(s){var i=T6(t,n),o=i[1],a=i[2];if(o>a)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},phe=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},ghe=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},k6=function(t,e){return t==="v"?hhe(e):fhe(e)},T6=function(t,e){return t==="v"?phe(e):ghe(e)},mhe=function(t,e){return t==="h"&&e==="rtl"?-1:1},yhe=function(t,e,r,n,s){var i=mhe(t,window.getComputedStyle(e).direction),o=i*n,a=r.target,l=e.contains(a),c=!1,d=o>0,h=0,f=0;do{var p=T6(t,a),g=p[0],y=p[1],v=p[2],m=y-v-i*g;(g||m)&&k6(t,a)&&(h+=m,f+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(f)<1||!s))&&(c=!0),c},Im=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},zM=function(t){return[t.deltaX,t.deltaY]},HM=function(t){return t&&"current"in t?t.current:t},vhe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},xhe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},whe=0,Eu=[];function bhe(t){var e=w.useRef([]),r=w.useRef([0,0]),n=w.useRef(),s=w.useState(whe++)[0],i=w.useState(C6)[0],o=w.useRef(t);w.useEffect(function(){o.current=t},[t]),w.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=Vde([t.lockRef.current],(t.shards||[]).map(HM),!0).filter(Boolean);return y.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=w.useCallback(function(y,v){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var m=Im(y),x=r.current,b="deltaX"in y?y.deltaX:x[0]-m[0],_="deltaY"in y?y.deltaY:x[1]-m[1],C,T=y.target,O=Math.abs(b)>Math.abs(_)?"h":"v";if("touches"in y&&O==="h"&&T.type==="range")return!1;var R=VM(O,T);if(!R)return!0;if(R?C=O:(C=O==="v"?"h":"v",R=VM(O,T)),!R)return!1;if(!n.current&&"changedTouches"in y&&(b||_)&&(n.current=C),!C)return!0;var I=n.current||C;return yhe(I,v,y,I==="h"?b:_,!0)},[]),l=w.useCallback(function(y){var v=y;if(!(!Eu.length||Eu[Eu.length-1]!==i)){var m="deltaY"in v?zM(v):Im(v),x=e.current.filter(function(C){return C.name===v.type&&(C.target===v.target||v.target===C.shadowParent)&&vhe(C.delta,m)})[0];if(x&&x.should){v.cancelable&&v.preventDefault();return}if(!x){var b=(o.current.shards||[]).map(HM).filter(Boolean).filter(function(C){return C.contains(v.target)}),_=b.length>0?a(v,b[0]):!o.current.noIsolation;_&&v.cancelable&&v.preventDefault()}}},[]),c=w.useCallback(function(y,v,m,x){var b={name:y,delta:v,target:m,should:x,shadowParent:She(m)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(_){return _!==b})},1)},[]),d=w.useCallback(function(y){r.current=Im(y),n.current=void 0},[]),h=w.useCallback(function(y){c(y.type,zM(y),y.target,a(y,t.lockRef.current))},[]),f=w.useCallback(function(y){c(y.type,Im(y),y.target,a(y,t.lockRef.current))},[]);w.useEffect(function(){return Eu.push(i),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Cu),document.addEventListener("touchmove",l,Cu),document.addEventListener("touchstart",d,Cu),function(){Eu=Eu.filter(function(y){return y!==i}),document.removeEventListener("wheel",l,Cu),document.removeEventListener("touchmove",l,Cu),document.removeEventListener("touchstart",d,Cu)}},[]);var p=t.removeScrollBar,g=t.inert;return w.createElement(w.Fragment,null,g?w.createElement(i,{styles:xhe(s)}):null,p?w.createElement(uhe,{gapMode:t.gapMode}):null)}function She(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const _he=Jde(_6,bhe);var lw=w.forwardRef(function(t,e){return w.createElement(aw,ro({},t,{ref:e,sideCar:_he}))});lw.classNames=aw.classNames;var Che=[" ","Enter","ArrowUp","ArrowDown"],Ehe=[" ","Enter"],Og="Select",[cw,uw,khe]=Pg(Og),[Sh,Aje]=$s(Og,[khe,bh]),dw=bh(),[The,Il]=Sh(Og),[jhe,Ahe]=Sh(Og),j6=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:c,name:d,autoComplete:h,disabled:f,required:p,form:g}=t,y=dw(e),[v,m]=w.useState(null),[x,b]=w.useState(null),[_,C]=w.useState(!1),T=Qc(c),[O=!1,R]=Rs({prop:n,defaultProp:s,onChange:i}),[I,H]=Rs({prop:o,defaultProp:a,onChange:l}),re=w.useRef(null),L=v?g||!!v.closest("form"):!0,[z,Y]=w.useState(new Set),pe=Array.from(z).map(Q=>Q.props.value).join(";");return u.jsx(rj,{...y,children:u.jsxs(The,{required:p,scope:e,trigger:v,onTriggerChange:m,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:_,onValueNodeHasChildrenChange:C,contentId:ks(),value:I,onValueChange:H,open:O,onOpenChange:R,dir:T,triggerPointerDownPosRef:re,disabled:f,children:[u.jsx(cw.Provider,{scope:e,children:u.jsx(jhe,{scope:t.__scopeSelect,onNativeOptionAdd:w.useCallback(Q=>{Y(se=>new Set(se).add(Q))},[]),onNativeOptionRemove:w.useCallback(Q=>{Y(se=>{const F=new Set(se);return F.delete(Q),F})},[]),children:r})}),L?u.jsxs(Q6,{"aria-hidden":!0,required:p,tabIndex:-1,name:d,autoComplete:h,value:I,onChange:Q=>H(Q.target.value),disabled:f,form:g,children:[I===void 0?u.jsx("option",{value:""}):null,Array.from(z)]},pe):null]})})};j6.displayName=Og;var A6="SelectTrigger",P6=w.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...s}=t,i=dw(r),o=Il(A6,r),a=o.disabled||n,l=rt(e,o.onTriggerChange),c=uw(r),d=w.useRef("touch"),[h,f,p]=e8(y=>{const v=c().filter(b=>!b.disabled),m=v.find(b=>b.value===o.value),x=t8(v,y,m);x!==void 0&&o.onValueChange(x.value)}),g=y=>{a||(o.onOpenChange(!0),p()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return u.jsx(nj,{asChild:!0,...i,children:u.jsx(Fe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":Z6(o.value)?"":void 0,...s,ref:l,onClick:_e(s.onClick,y=>{y.currentTarget.focus(),d.current!=="mouse"&&g(y)}),onPointerDown:_e(s.onPointerDown,y=>{d.current=y.pointerType;const v=y.target;v.hasPointerCapture(y.pointerId)&&v.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(g(y),y.preventDefault())}),onKeyDown:_e(s.onKeyDown,y=>{const v=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&f(y.key),!(v&&y.key===" ")&&Che.includes(y.key)&&(g(),y.preventDefault())})})})});P6.displayName=A6;var N6="SelectValue",R6=w.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,children:i,placeholder:o="",...a}=t,l=Il(N6,r),{onValueNodeHasChildrenChange:c}=l,d=i!==void 0,h=rt(e,l.onValueNodeChange);return Fr(()=>{c(d)},[c,d]),u.jsx(Fe.span,{...a,ref:h,style:{pointerEvents:"none"},children:Z6(l.value)?u.jsx(u.Fragment,{children:o}):i})});R6.displayName=N6;var Phe="SelectIcon",O6=w.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...s}=t;return u.jsx(Fe.span,{"aria-hidden":!0,...s,ref:e,children:n||""})});O6.displayName=Phe;var Nhe="SelectPortal",M6=t=>u.jsx(iw,{asChild:!0,...t});M6.displayName=Nhe;var Uc="SelectContent",I6=w.forwardRef((t,e)=>{const r=Il(Uc,t.__scopeSelect),[n,s]=w.useState();if(Fr(()=>{s(new DocumentFragment)},[]),!r.open){const i=n;return i?lh.createPortal(u.jsx(D6,{scope:t.__scopeSelect,children:u.jsx(cw.Slot,{scope:t.__scopeSelect,children:u.jsx("div",{children:t.children})})}),i):null}return u.jsx(F6,{...t,ref:e})});I6.displayName=Uc;var xi=10,[D6,Dl]=Sh(Uc),Rhe="SelectContentImpl",F6=w.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:y,avoidCollisions:v,...m}=t,x=Il(Uc,r),[b,_]=w.useState(null),[C,T]=w.useState(null),O=rt(e,D=>_(D)),[R,I]=w.useState(null),[H,re]=w.useState(null),L=uw(r),[z,Y]=w.useState(!1),pe=w.useRef(!1);w.useEffect(()=>{if(b)return aj(b)},[b]),G2();const Q=w.useCallback(D=>{const[ee,...me]=L().map(P=>P.ref.current),[Se]=me.slice(-1),A=document.activeElement;for(const P of D)if(P===A||(P==null||P.scrollIntoView({block:"nearest"}),P===ee&&C&&(C.scrollTop=0),P===Se&&C&&(C.scrollTop=C.scrollHeight),P==null||P.focus(),document.activeElement!==A))return},[L,C]),se=w.useCallback(()=>Q([R,b]),[Q,R,b]);w.useEffect(()=>{z&&se()},[z,se]);const{onOpenChange:F,triggerPointerDownPosRef:K}=x;w.useEffect(()=>{if(b){let D={x:0,y:0};const ee=Se=>{var A,P;D={x:Math.abs(Math.round(Se.pageX)-(((A=K.current)==null?void 0:A.x)??0)),y:Math.abs(Math.round(Se.pageY)-(((P=K.current)==null?void 0:P.y)??0))}},me=Se=>{D.x<=10&&D.y<=10?Se.preventDefault():b.contains(Se.target)||F(!1),document.removeEventListener("pointermove",ee),K.current=null};return K.current!==null&&(document.addEventListener("pointermove",ee),document.addEventListener("pointerup",me,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ee),document.removeEventListener("pointerup",me,{capture:!0})}}},[b,F,K]),w.useEffect(()=>{const D=()=>F(!1);return window.addEventListener("blur",D),window.addEventListener("resize",D),()=>{window.removeEventListener("blur",D),window.removeEventListener("resize",D)}},[F]);const[de,le]=e8(D=>{const ee=L().filter(A=>!A.disabled),me=ee.find(A=>A.ref.current===document.activeElement),Se=t8(ee,D,me);Se&&setTimeout(()=>Se.ref.current.focus())}),be=w.useCallback((D,ee,me)=>{const Se=!pe.current&&!me;(x.value!==void 0&&x.value===ee||Se)&&(I(D),Se&&(pe.current=!0))},[x.value]),Be=w.useCallback(()=>b==null?void 0:b.focus(),[b]),He=w.useCallback((D,ee,me)=>{const Se=!pe.current&&!me;(x.value!==void 0&&x.value===ee||Se)&&re(D)},[x.value]),ht=n==="popper"?BE:L6,U=ht===BE?{side:a,sideOffset:l,align:c,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:y,avoidCollisions:v}:{};return u.jsx(D6,{scope:r,content:b,viewport:C,onViewportChange:T,itemRefCallback:be,selectedItem:R,onItemLeave:Be,itemTextRefCallback:He,focusSelectedItem:se,selectedItemText:H,position:n,isPositioned:z,searchRef:de,children:u.jsx(lw,{as:fa,allowPinchZoom:!0,children:u.jsx(ew,{asChild:!0,trapped:x.open,onMountAutoFocus:D=>{D.preventDefault()},onUnmountAutoFocus:_e(s,D=>{var ee;(ee=x.trigger)==null||ee.focus({preventScroll:!0}),D.preventDefault()}),children:u.jsx(Ng,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:D=>D.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:u.jsx(ht,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:D=>D.preventDefault(),...m,...U,onPlaced:()=>Y(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...m.style},onKeyDown:_e(m.onKeyDown,D=>{const ee=D.ctrlKey||D.altKey||D.metaKey;if(D.key==="Tab"&&D.preventDefault(),!ee&&D.key.length===1&&le(D.key),["ArrowUp","ArrowDown","Home","End"].includes(D.key)){let Se=L().filter(A=>!A.disabled).map(A=>A.ref.current);if(["ArrowUp","End"].includes(D.key)&&(Se=Se.slice().reverse()),["ArrowUp","ArrowDown"].includes(D.key)){const A=D.target,P=Se.indexOf(A);Se=Se.slice(P+1)}setTimeout(()=>Q(Se)),D.preventDefault()}})})})})})})});F6.displayName=Rhe;var Ohe="SelectItemAlignedPosition",L6=w.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...s}=t,i=Il(Uc,r),o=Dl(Uc,r),[a,l]=w.useState(null),[c,d]=w.useState(null),h=rt(e,O=>d(O)),f=uw(r),p=w.useRef(!1),g=w.useRef(!0),{viewport:y,selectedItem:v,selectedItemText:m,focusSelectedItem:x}=o,b=w.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&c&&y&&v&&m){const O=i.trigger.getBoundingClientRect(),R=c.getBoundingClientRect(),I=i.valueNode.getBoundingClientRect(),H=m.getBoundingClientRect();if(i.dir!=="rtl"){const A=H.left-R.left,P=I.left-A,G=O.left-P,ue=O.width+G,Ye=Math.max(ue,R.width),j=window.innerWidth-xi,E=eg(P,[xi,Math.max(xi,j-Ye)]);a.style.minWidth=ue+"px",a.style.left=E+"px"}else{const A=R.right-H.right,P=window.innerWidth-I.right-A,G=window.innerWidth-O.right-P,ue=O.width+G,Ye=Math.max(ue,R.width),j=window.innerWidth-xi,E=eg(P,[xi,Math.max(xi,j-Ye)]);a.style.minWidth=ue+"px",a.style.right=E+"px"}const re=f(),L=window.innerHeight-xi*2,z=y.scrollHeight,Y=window.getComputedStyle(c),pe=parseInt(Y.borderTopWidth,10),Q=parseInt(Y.paddingTop,10),se=parseInt(Y.borderBottomWidth,10),F=parseInt(Y.paddingBottom,10),K=pe+Q+z+F+se,de=Math.min(v.offsetHeight*5,K),le=window.getComputedStyle(y),be=parseInt(le.paddingTop,10),Be=parseInt(le.paddingBottom,10),He=O.top+O.height/2-xi,ht=L-He,U=v.offsetHeight/2,D=v.offsetTop+U,ee=pe+Q+D,me=K-ee;if(ee<=He){const A=re.length>0&&v===re[re.length-1].ref.current;a.style.bottom="0px";const P=c.clientHeight-y.offsetTop-y.offsetHeight,G=Math.max(ht,U+(A?Be:0)+P+se),ue=ee+G;a.style.height=ue+"px"}else{const A=re.length>0&&v===re[0].ref.current;a.style.top="0px";const G=Math.max(He,pe+y.offsetTop+(A?be:0)+U)+me;a.style.height=G+"px",y.scrollTop=ee-He+y.offsetTop}a.style.margin=`${xi}px 0`,a.style.minHeight=de+"px",a.style.maxHeight=L+"px",n==null||n(),requestAnimationFrame(()=>p.current=!0)}},[f,i.trigger,i.valueNode,a,c,y,v,m,i.dir,n]);Fr(()=>b(),[b]);const[_,C]=w.useState();Fr(()=>{c&&C(window.getComputedStyle(c).zIndex)},[c]);const T=w.useCallback(O=>{O&&g.current===!0&&(b(),x==null||x(),g.current=!1)},[b,x]);return u.jsx(Ihe,{scope:r,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:T,children:u.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:u.jsx(Fe.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});L6.displayName=Ohe;var Mhe="SelectPopperPosition",BE=w.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=xi,...i}=t,o=dw(r);return u.jsx(sj,{...o,...i,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});BE.displayName=Mhe;var[Ihe,uj]=Sh(Uc,{}),$E="SelectViewport",B6=w.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...s}=t,i=Dl($E,r),o=uj($E,r),a=rt(e,i.onViewportChange),l=w.useRef(0);return u.jsxs(u.Fragment,{children:[u.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),u.jsx(cw.Slot,{scope:r,children:u.jsx(Fe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:_e(s.onScroll,c=>{const d=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const p=Math.abs(l.current-d.scrollTop);if(p>0){const g=window.innerHeight-xi*2,y=parseFloat(h.style.minHeight),v=parseFloat(h.style.height),m=Math.max(y,v);if(m<g){const x=m+p,b=Math.min(g,x),_=x-b;h.style.height=b+"px",h.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,h.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});B6.displayName=$E;var $6="SelectGroup",[Dhe,Fhe]=Sh($6),Lhe=w.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=ks();return u.jsx(Dhe,{scope:r,id:s,children:u.jsx(Fe.div,{role:"group","aria-labelledby":s,...n,ref:e})})});Lhe.displayName=$6;var U6="SelectLabel",V6=w.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=Fhe(U6,r);return u.jsx(Fe.div,{id:s.id,...n,ref:e})});V6.displayName=U6;var vv="SelectItem",[Bhe,z6]=Sh(vv),H6=w.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:i,...o}=t,a=Il(vv,r),l=Dl(vv,r),c=a.value===n,[d,h]=w.useState(i??""),[f,p]=w.useState(!1),g=rt(e,x=>{var b;return(b=l.itemRefCallback)==null?void 0:b.call(l,x,n,s)}),y=ks(),v=w.useRef("touch"),m=()=>{s||(a.onValueChange(n),a.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return u.jsx(Bhe,{scope:r,value:n,disabled:s,textId:y,isSelected:c,onItemTextChange:w.useCallback(x=>{h(b=>b||((x==null?void 0:x.textContent)??"").trim())},[]),children:u.jsx(cw.ItemSlot,{scope:r,value:n,disabled:s,textValue:d,children:u.jsx(Fe.div,{role:"option","aria-labelledby":y,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:g,onFocus:_e(o.onFocus,()=>p(!0)),onBlur:_e(o.onBlur,()=>p(!1)),onClick:_e(o.onClick,()=>{v.current!=="mouse"&&m()}),onPointerUp:_e(o.onPointerUp,()=>{v.current==="mouse"&&m()}),onPointerDown:_e(o.onPointerDown,x=>{v.current=x.pointerType}),onPointerMove:_e(o.onPointerMove,x=>{var b;v.current=x.pointerType,s?(b=l.onItemLeave)==null||b.call(l):v.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:_e(o.onPointerLeave,x=>{var b;x.currentTarget===document.activeElement&&((b=l.onItemLeave)==null||b.call(l))}),onKeyDown:_e(o.onKeyDown,x=>{var _;((_=l.searchRef)==null?void 0:_.current)!==""&&x.key===" "||(Ehe.includes(x.key)&&m(),x.key===" "&&x.preventDefault())})})})})});H6.displayName=vv;var Sf="SelectItemText",W6=w.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:s,...i}=t,o=Il(Sf,r),a=Dl(Sf,r),l=z6(Sf,r),c=Ahe(Sf,r),[d,h]=w.useState(null),f=rt(e,m=>h(m),l.onItemTextChange,m=>{var x;return(x=a.itemTextRefCallback)==null?void 0:x.call(a,m,l.value,l.disabled)}),p=d==null?void 0:d.textContent,g=w.useMemo(()=>u.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:y,onNativeOptionRemove:v}=c;return Fr(()=>(y(g),()=>v(g)),[y,v,g]),u.jsxs(u.Fragment,{children:[u.jsx(Fe.span,{id:l.textId,...i,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?lh.createPortal(i.children,o.valueNode):null]})});W6.displayName=Sf;var q6="SelectItemIndicator",G6=w.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return z6(q6,r).isSelected?u.jsx(Fe.span,{"aria-hidden":!0,...n,ref:e}):null});G6.displayName=q6;var UE="SelectScrollUpButton",K6=w.forwardRef((t,e)=>{const r=Dl(UE,t.__scopeSelect),n=uj(UE,t.__scopeSelect),[s,i]=w.useState(!1),o=rt(e,n.onScrollButtonChange);return Fr(()=>{if(r.viewport&&r.isPositioned){let a=function(){const c=l.scrollTop>0;i(c)};const l=r.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[r.viewport,r.isPositioned]),s?u.jsx(X6,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=r;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});K6.displayName=UE;var VE="SelectScrollDownButton",Y6=w.forwardRef((t,e)=>{const r=Dl(VE,t.__scopeSelect),n=uj(VE,t.__scopeSelect),[s,i]=w.useState(!1),o=rt(e,n.onScrollButtonChange);return Fr(()=>{if(r.viewport&&r.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<c;i(d)};const l=r.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[r.viewport,r.isPositioned]),s?u.jsx(X6,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=r;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});Y6.displayName=VE;var X6=w.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=t,i=Dl("SelectScrollButton",r),o=w.useRef(null),a=uw(r),l=w.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return w.useEffect(()=>()=>l(),[l]),Fr(()=>{var d;const c=a().find(h=>h.ref.current===document.activeElement);(d=c==null?void 0:c.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),u.jsx(Fe.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:_e(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:_e(s.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:_e(s.onPointerLeave,()=>{l()})})}),$he="SelectSeparator",J6=w.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return u.jsx(Fe.div,{"aria-hidden":!0,...n,ref:e})});J6.displayName=$he;var zE="SelectArrow",Uhe=w.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,s=dw(r),i=Il(zE,r),o=Dl(zE,r);return i.open&&o.position==="popper"?u.jsx(ij,{...s,...n,ref:e}):null});Uhe.displayName=zE;function Z6(t){return t===""||t===void 0}var Q6=w.forwardRef((t,e)=>{const{value:r,...n}=t,s=w.useRef(null),i=rt(e,s),o=ow(r);return w.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==r&&d){const h=new Event("change",{bubbles:!0});d.call(a,r),a.dispatchEvent(h)}},[o,r]),u.jsx(oj,{asChild:!0,children:u.jsx("select",{...n,ref:i,defaultValue:r})})});Q6.displayName="BubbleSelect";function e8(t){const e=Sr(t),r=w.useRef(""),n=w.useRef(0),s=w.useCallback(o=>{const a=r.current+o;e(a),function l(c){r.current=c,window.clearTimeout(n.current),c!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=w.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,i]}function t8(t,e,r){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let o=Vhe(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==r));const l=o.find(c=>c.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==r?l:void 0}function Vhe(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var zhe=j6,r8=P6,Hhe=R6,Whe=O6,qhe=M6,n8=I6,Ghe=B6,s8=V6,i8=H6,Khe=W6,Yhe=G6,o8=K6,a8=Y6,l8=J6;const bc=zhe,Sc=Hhe,nl=w.forwardRef(({className:t,children:e,...r},n)=>u.jsxs(r8,{ref:n,className:xe("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,u.jsx(Whe,{asChild:!0,children:u.jsx(Yce,{className:"h-4 w-4 opacity-50"})})]}));nl.displayName=r8.displayName;const c8=w.forwardRef(({className:t,...e},r)=>u.jsx(o8,{ref:r,className:xe("flex cursor-default items-center justify-center py-1",t),...e,children:u.jsx(tue,{})}));c8.displayName=o8.displayName;const u8=w.forwardRef(({className:t,...e},r)=>u.jsx(a8,{ref:r,className:xe("flex cursor-default items-center justify-center py-1",t),...e,children:u.jsx(JU,{})}));u8.displayName=a8.displayName;const sl=w.forwardRef(({className:t,children:e,position:r="popper",...n},s)=>u.jsx(qhe,{children:u.jsxs(n8,{ref:s,className:xe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[u.jsx(c8,{}),u.jsx(Ghe,{className:xe("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),u.jsx(u8,{})]})}));sl.displayName=n8.displayName;const Xhe=w.forwardRef(({className:t,...e},r)=>u.jsx(s8,{ref:r,className:xe("px-2 py-1.5 text-sm font-semibold",t),...e}));Xhe.displayName=s8.displayName;const ki=w.forwardRef(({className:t,children:e,...r},n)=>u.jsxs(i8,{ref:n,className:xe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[u.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(Yhe,{children:u.jsx(q2,{className:"h-4 w-4"})})}),u.jsx(Khe,{children:e})]}));ki.displayName=i8.displayName;const Jhe=w.forwardRef(({className:t,...e},r)=>u.jsx(l8,{ref:r,className:xe("-mx-1 my-1 h-px bg-muted",t),...e}));Jhe.displayName=l8.displayName;const Zhe=D2({full_name:Zs().min(1,"Full name is required").min(2,"Full name must be at least 2 characters").max(50,"Full name must be less than 50 characters"),email:Zs().min(1,"Email is required").email("Please enter a valid email address"),password:Zs().min(1,"Password is required").min(8,"Password must be at least 8 characters").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"Password must contain at least one lowercase letter, one uppercase letter, and one number"),confirmPassword:Zs().min(1,"Please confirm your password"),phone:Zs().optional().refine(t=>!t||t.trim()===""?!0:/^[+]?[\d\s\-()]{10,}$/.test(t),"Please enter a valid phone number"),role:Uy(["admin","designer","viewer","vendor","user"]).optional().default("user"),dob:Zs().optional().refine(t=>{if(!t)return!0;const e=new Date(t),n=new Date().getFullYear()-e.getFullYear();return n>=13&&n<=120},"You must be at least 13 years old")}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),Qhe=[{value:"user",label:"User",description:"Basic user access"},{value:"designer",label:"Designer",description:"Design and create projects"},{value:"viewer",label:"Viewer",description:"View-only access"},{value:"vendor",label:"Vendor",description:"Material supplier"},{value:"admin",label:"Admin",description:"Administrative access"}];function efe(){const t=Ar(),e=ci(),{isLoading:r,error:n,isAuthenticated:s}=Ze(h=>h.auth),[i,o]=w.useState(!1),[a,l]=w.useState(!1),c=O2({resolver:M2(Zhe),defaultValues:{full_name:"",email:"",password:"",confirmPassword:"",phone:"",role:"user",dob:""}});w.useEffect(()=>{s&&e("/projects",{replace:!0})},[s,e]),w.useEffect(()=>{t(O0())},[t]);const d=async h=>{t(O0());const f={email:h.email,password:h.password,full_name:h.full_name,phone:h.phone,role:h.role},p=await t(Vf(f));Vf.fulfilled.match(p)&&e("/projects",{replace:!0})};return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted/20 p-4",children:u.jsx(ze.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.5,ease:"easeOut"},className:"w-full max-w-lg",children:u.jsxs(Ge,{className:"shadow-2xl border-0 bg-card/50 backdrop-blur-sm",children:[u.jsxs(vt,{className:"space-y-4 pb-8",children:[u.jsx(ze.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"mx-auto w-12 h-12 bg-primary rounded-xl flex items-center justify-center",children:u.jsx(CM,{className:"h-6 w-6 text-primary-foreground"})}),u.jsxs("div",{className:"text-center space-y-2",children:[u.jsx(St,{className:"text-2xl font-bold",children:"Create Account"}),u.jsx(Xc,{className:"text-muted-foreground",children:"Join us and start creating amazing projects"})]})]}),u.jsxs(tt,{className:"space-y-6",children:[u.jsx("div",{className:"flex items-center justify-center",children:u.jsxs(ff,{to:"/login",className:"inline-flex items-center text-sm text-muted-foreground hover:text-primary transition-colors",children:[u.jsx(Yp,{className:"mr-2 h-4 w-4"}),"Back to Sign In"]})}),n&&u.jsx(ze.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},transition:{duration:.3},children:u.jsx(ml,{variant:"destructive",className:"border-destructive/50 bg-destructive/5",children:u.jsx(yl,{className:"text-sm",children:n})})}),u.jsx(L2,{...c,children:u.jsxs("form",{onSubmit:c.handleSubmit(d),className:"space-y-4",children:[u.jsx(vs,{control:c.control,name:"full_name",render:({field:h})=>u.jsxs(Xn,{children:[u.jsx(Jn,{className:"text-sm font-medium",children:"Full Name *"}),u.jsx(Zn,{children:u.jsxs("div",{className:"relative",children:[u.jsx(Vy,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),u.jsx(Ai,{...h,placeholder:"Enter your full name",className:"pl-10 h-11 transition-all duration-200 focus:ring-2 focus:ring-primary/20",disabled:r})]})}),u.jsx(xs,{className:"text-xs"})]})}),u.jsx(vs,{control:c.control,name:"email",render:({field:h})=>u.jsxs(Xn,{children:[u.jsx(Jn,{className:"text-sm font-medium",children:"Email Address *"}),u.jsx(Zn,{children:u.jsxs("div",{className:"relative",children:[u.jsx(np,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),u.jsx(Ai,{...h,type:"email",placeholder:"Enter your email",className:"pl-10 h-11 transition-all duration-200 focus:ring-2 focus:ring-primary/20",disabled:r})]})}),u.jsx(xs,{className:"text-xs"})]})}),u.jsx(vs,{control:c.control,name:"role",render:({field:h})=>u.jsxs(Xn,{children:[u.jsx(Jn,{className:"text-sm font-medium",children:"Account Type"}),u.jsxs(bc,{onValueChange:h.onChange,value:h.value,disabled:r,children:[u.jsx(Zn,{children:u.jsx(nl,{className:"h-11",children:u.jsx(Sc,{placeholder:"Select your role"})})}),u.jsx(sl,{children:Qhe.map(f=>u.jsx(ki,{value:f.value,children:u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:f.label}),u.jsx("div",{className:"text-xs text-muted-foreground",children:f.description})]})},f.value))})]}),u.jsx(xs,{className:"text-xs"})]})}),u.jsx(vs,{control:c.control,name:"password",render:({field:h})=>u.jsxs(Xn,{children:[u.jsx(Jn,{className:"text-sm font-medium",children:"Password *"}),u.jsx(Zn,{children:u.jsxs("div",{className:"relative",children:[u.jsx(Bc,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),u.jsx(Ai,{...h,type:i?"text":"password",placeholder:"Create a password",className:"pl-10 pr-10 h-11 transition-all duration-200 focus:ring-2 focus:ring-primary/20",disabled:r}),u.jsx(ge,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-11 px-3 py-2 hover:bg-transparent",onClick:()=>o(!i),disabled:r,children:i?u.jsx($2,{className:"h-4 w-4 text-muted-foreground"}):u.jsx(Jc,{className:"h-4 w-4 text-muted-foreground"})})]})}),u.jsx(xs,{className:"text-xs"})]})}),u.jsx(vs,{control:c.control,name:"confirmPassword",render:({field:h})=>u.jsxs(Xn,{children:[u.jsx(Jn,{className:"text-sm font-medium",children:"Confirm Password *"}),u.jsx(Zn,{children:u.jsxs("div",{className:"relative",children:[u.jsx(Bc,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),u.jsx(Ai,{...h,type:i?"text":"password",placeholder:"Confirm your password",className:"pl-10 h-11 transition-all duration-200 focus:ring-2 focus:ring-primary/20",disabled:r})]})}),u.jsx(xs,{className:"text-xs"})]})}),u.jsx("div",{className:"pt-2",children:u.jsxs(ge,{type:"button",variant:"ghost",size:"sm",onClick:()=>l(!a),className:"text-xs text-muted-foreground hover:text-primary p-0 h-auto",children:[a?"Hide":"Show"," Advanced Options"]})}),a&&u.jsx(ze.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 border-t pt-4",children:u.jsx(vs,{control:c.control,name:"phone",render:({field:h})=>u.jsxs(Xn,{children:[u.jsx(Jn,{className:"text-sm font-medium",children:"Phone Number (Optional)"}),u.jsx(Zn,{children:u.jsxs("div",{className:"relative",children:[u.jsx(Rce,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),u.jsx(Ai,{...h,type:"tel",placeholder:"Enter your phone number",className:"pl-10 h-11 transition-all duration-200 focus:ring-2 focus:ring-primary/20",disabled:r})]})}),u.jsx(xs,{className:"text-xs"})]})})}),u.jsx(ze.div,{whileHover:{scale:1.01},whileTap:{scale:.99},className:"pt-4",children:u.jsx(ge,{type:"submit",className:"w-full h-11 text-sm font-medium",disabled:r,children:r?u.jsxs(u.Fragment,{children:[u.jsx(Hd,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):u.jsxs(u.Fragment,{children:[u.jsx(CM,{className:"mr-2 h-4 w-4"}),"Create Account"]})})})]})}),u.jsx("div",{className:"text-center text-xs text-muted-foreground",children:u.jsxs("p",{children:["By creating an account, you agree to our"," ",u.jsx(ff,{to:"/terms",className:"text-primary hover:underline",children:"Terms of Service"})," ","and"," ",u.jsx(ff,{to:"/privacy",className:"text-primary hover:underline",children:"Privacy Policy"}),"."]})}),u.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Already have an account?"," ",u.jsx(ff,{to:"/login",className:"text-primary hover:underline font-medium",children:"Sign in here"})]})]})]})})})}const tfe=Kx("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function dt({className:t,variant:e,...r}){return u.jsx("div",{className:xe(tfe({variant:e}),t),...r})}function rfe(t,e=[]){let r=[];function n(i,o){const a=w.createContext(o),l=r.length;r=[...r,o];function c(h){const{scope:f,children:p,...g}=h,y=(f==null?void 0:f[t][l])||a,v=w.useMemo(()=>g,Object.values(g));return u.jsx(y.Provider,{value:v,children:p})}function d(h,f){const p=(f==null?void 0:f[t][l])||a,g=w.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,d]}const s=()=>{const i=r.map(o=>w.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return w.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[n,nfe(s,...e)]}function nfe(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}var dj="Progress",hj=100,[sfe,Pje]=rfe(dj),[ife,ofe]=sfe(dj),d8=w.forwardRef((t,e)=>{const{__scopeProgress:r,value:n=null,max:s,getValueLabel:i=afe,...o}=t;(s||s===0)&&!WM(s)&&console.error(lfe(`${s}`,"Progress"));const a=WM(s)?s:hj;n!==null&&!qM(n,a)&&console.error(cfe(`${n}`,"Progress"));const l=qM(n,a)?n:null,c=xv(l)?i(l,a):void 0;return u.jsx(ife,{scope:r,value:l,max:a,children:u.jsx(Fe.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":xv(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":p8(l,a),"data-value":l??void 0,"data-max":a,...o,ref:e})})});d8.displayName=dj;var h8="ProgressIndicator",f8=w.forwardRef((t,e)=>{const{__scopeProgress:r,...n}=t,s=ofe(h8,r);return u.jsx(Fe.div,{"data-state":p8(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...n,ref:e})});f8.displayName=h8;function afe(t,e){return`${Math.round(t/e*100)}%`}function p8(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function xv(t){return typeof t=="number"}function WM(t){return xv(t)&&!isNaN(t)&&t>0}function qM(t,e){return xv(t)&&!isNaN(t)&&t<=e&&t>=0}function lfe(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${hj}\`.`}function cfe(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${hj} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var g8=d8,ufe=f8;const hw=w.forwardRef(({className:t,value:e,...r},n)=>u.jsx(g8,{ref:n,className:xe("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...r,children:u.jsx(ufe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));hw.displayName=g8.displayName;function kt({className:t,...e}){return u.jsx("div",{className:xe("animate-pulse rounded-md bg-primary/10",t),...e})}function dfe(t,e){return w.useReducer((r,n)=>e[r][n]??r,t)}var En=t=>{const{present:e,children:r}=t,n=hfe(e),s=typeof r=="function"?r({present:n.isPresent}):w.Children.only(r),i=rt(n.ref,ffe(s));return typeof r=="function"||n.isPresent?w.cloneElement(s,{ref:i}):null};En.displayName="Presence";function hfe(t){const[e,r]=w.useState(),n=w.useRef({}),s=w.useRef(t),i=w.useRef("none"),o=t?"mounted":"unmounted",[a,l]=dfe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const c=Dm(n.current);i.current=a==="mounted"?c:"none"},[a]),Fr(()=>{const c=n.current,d=s.current;if(d!==t){const f=i.current,p=Dm(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),Fr(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=p=>{const y=Dm(n.current).includes(p.animationName);if(p.target===e&&y&&(l("ANIMATION_END"),!s.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},f=p=>{p.target===e&&(i.current=Dm(n.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:w.useCallback(c=>{c&&(n.current=getComputedStyle(c)),r(c)},[])}}function Dm(t){return(t==null?void 0:t.animationName)||"none"}function ffe(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function pfe(t,e=[]){let r=[];function n(i,o){const a=w.createContext(o),l=r.length;r=[...r,o];function c(h){const{scope:f,children:p,...g}=h,y=(f==null?void 0:f[t][l])||a,v=w.useMemo(()=>g,Object.values(g));return u.jsx(y.Provider,{value:v,children:p})}function d(h,f){const p=(f==null?void 0:f[t][l])||a,g=w.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return c.displayName=i+"Provider",[c,d]}const s=()=>{const i=r.map(o=>w.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return w.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[n,gfe(s,...e)]}function gfe(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((a,{useScope:l,scopeName:c})=>{const h=l(i)[`__scope${c}`];return{...a,...h}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}var pS="rovingFocusGroup.onEntryFocus",mfe={bubbles:!1,cancelable:!0},fw="RovingFocusGroup",[HE,m8,yfe]=Pg(fw),[vfe,pw]=pfe(fw,[yfe]),[xfe,wfe]=vfe(fw),y8=w.forwardRef((t,e)=>u.jsx(HE.Provider,{scope:t.__scopeRovingFocusGroup,children:u.jsx(HE.Slot,{scope:t.__scopeRovingFocusGroup,children:u.jsx(bfe,{...t,ref:e})})}));y8.displayName=fw;var bfe=w.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:d=!1,...h}=t,f=w.useRef(null),p=rt(e,f),g=Qc(i),[y=null,v]=Rs({prop:o,defaultProp:a,onChange:l}),[m,x]=w.useState(!1),b=Sr(c),_=m8(r),C=w.useRef(!1),[T,O]=w.useState(0);return w.useEffect(()=>{const R=f.current;if(R)return R.addEventListener(pS,b),()=>R.removeEventListener(pS,b)},[b]),u.jsx(xfe,{scope:r,orientation:n,dir:g,loop:s,currentTabStopId:y,onItemFocus:w.useCallback(R=>v(R),[v]),onItemShiftTab:w.useCallback(()=>x(!0),[]),onFocusableItemAdd:w.useCallback(()=>O(R=>R+1),[]),onFocusableItemRemove:w.useCallback(()=>O(R=>R-1),[]),children:u.jsx(Fe.div,{tabIndex:m||T===0?-1:0,"data-orientation":n,...h,ref:p,style:{outline:"none",...t.style},onMouseDown:_e(t.onMouseDown,()=>{C.current=!0}),onFocus:_e(t.onFocus,R=>{const I=!C.current;if(R.target===R.currentTarget&&I&&!m){const H=new CustomEvent(pS,mfe);if(R.currentTarget.dispatchEvent(H),!H.defaultPrevented){const re=_().filter(Q=>Q.focusable),L=re.find(Q=>Q.active),z=re.find(Q=>Q.id===y),pe=[L,z,...re].filter(Boolean).map(Q=>Q.ref.current);w8(pe,d)}}C.current=!1}),onBlur:_e(t.onBlur,()=>x(!1))})})}),v8="RovingFocusGroupItem",x8=w.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:i,...o}=t,a=ks(),l=i||a,c=wfe(v8,r),d=c.currentTabStopId===l,h=m8(r),{onFocusableItemAdd:f,onFocusableItemRemove:p}=c;return w.useEffect(()=>{if(n)return f(),()=>p()},[n,f,p]),u.jsx(HE.ItemSlot,{scope:r,id:l,focusable:n,active:s,children:u.jsx(Fe.span,{tabIndex:d?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:_e(t.onMouseDown,g=>{n?c.onItemFocus(l):g.preventDefault()}),onFocus:_e(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:_e(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){c.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const y=Cfe(g,c.orientation,c.dir);if(y!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let m=h().filter(x=>x.focusable).map(x=>x.ref.current);if(y==="last")m.reverse();else if(y==="prev"||y==="next"){y==="prev"&&m.reverse();const x=m.indexOf(g.currentTarget);m=c.loop?Efe(m,x+1):m.slice(x+1)}setTimeout(()=>w8(m))}})})})});x8.displayName=v8;var Sfe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function _fe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Cfe(t,e,r){const n=_fe(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Sfe[n]}function w8(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function Efe(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var b8=y8,S8=x8,WE=["Enter"," "],kfe=["ArrowDown","PageUp","Home"],_8=["ArrowUp","PageDown","End"],Tfe=[...kfe,..._8],jfe={ltr:[...WE,"ArrowRight"],rtl:[...WE,"ArrowLeft"]},Afe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Mg="Menu",[ng,Pfe,Nfe]=Pg(Mg),[eu,C8]=$s(Mg,[Nfe,bh,pw]),gw=bh(),E8=pw(),[Rfe,tu]=eu(Mg),[Ofe,Ig]=eu(Mg),k8=t=>{const{__scopeMenu:e,open:r=!1,children:n,dir:s,onOpenChange:i,modal:o=!0}=t,a=gw(e),[l,c]=w.useState(null),d=w.useRef(!1),h=Sr(i),f=Qc(s);return w.useEffect(()=>{const p=()=>{d.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>d.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),u.jsx(rj,{...a,children:u.jsx(Rfe,{scope:e,open:r,onOpenChange:h,content:l,onContentChange:c,children:u.jsx(Ofe,{scope:e,onClose:w.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:f,modal:o,children:n})})})};k8.displayName=Mg;var Mfe="MenuAnchor",fj=w.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=gw(r);return u.jsx(nj,{...s,...n,ref:e})});fj.displayName=Mfe;var pj="MenuPortal",[Ife,T8]=eu(pj,{forceMount:void 0}),j8=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:s}=t,i=tu(pj,e);return u.jsx(Ife,{scope:e,forceMount:r,children:u.jsx(En,{present:r||i.open,children:u.jsx(iw,{asChild:!0,container:s,children:n})})})};j8.displayName=pj;var si="MenuContent",[Dfe,gj]=eu(si),A8=w.forwardRef((t,e)=>{const r=T8(si,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,i=tu(si,t.__scopeMenu),o=Ig(si,t.__scopeMenu);return u.jsx(ng.Provider,{scope:t.__scopeMenu,children:u.jsx(En,{present:n||i.open,children:u.jsx(ng.Slot,{scope:t.__scopeMenu,children:o.modal?u.jsx(Ffe,{...s,ref:e}):u.jsx(Lfe,{...s,ref:e})})})})}),Ffe=w.forwardRef((t,e)=>{const r=tu(si,t.__scopeMenu),n=w.useRef(null),s=rt(e,n);return w.useEffect(()=>{const i=n.current;if(i)return aj(i)},[]),u.jsx(mj,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:_e(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),Lfe=w.forwardRef((t,e)=>{const r=tu(si,t.__scopeMenu);return u.jsx(mj,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),mj=w.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:p,disableOutsideScroll:g,...y}=t,v=tu(si,r),m=Ig(si,r),x=gw(r),b=E8(r),_=Pfe(r),[C,T]=w.useState(null),O=w.useRef(null),R=rt(e,O,v.onContentChange),I=w.useRef(0),H=w.useRef(""),re=w.useRef(0),L=w.useRef(null),z=w.useRef("right"),Y=w.useRef(0),pe=g?lw:w.Fragment,Q=g?{as:fa,allowPinchZoom:!0}:void 0,se=K=>{var D,ee;const de=H.current+K,le=_().filter(me=>!me.disabled),be=document.activeElement,Be=(D=le.find(me=>me.ref.current===be))==null?void 0:D.textValue,He=le.map(me=>me.textValue),ht=Xfe(He,de,Be),U=(ee=le.find(me=>me.textValue===ht))==null?void 0:ee.ref.current;(function me(Se){H.current=Se,window.clearTimeout(I.current),Se!==""&&(I.current=window.setTimeout(()=>me(""),1e3))})(de),U&&setTimeout(()=>U.focus())};w.useEffect(()=>()=>window.clearTimeout(I.current),[]),G2();const F=w.useCallback(K=>{var le,be;return z.current===((le=L.current)==null?void 0:le.side)&&Zfe(K,(be=L.current)==null?void 0:be.area)},[]);return u.jsx(Dfe,{scope:r,searchRef:H,onItemEnter:w.useCallback(K=>{F(K)&&K.preventDefault()},[F]),onItemLeave:w.useCallback(K=>{var de;F(K)||((de=O.current)==null||de.focus(),T(null))},[F]),onTriggerLeave:w.useCallback(K=>{F(K)&&K.preventDefault()},[F]),pointerGraceTimerRef:re,onPointerGraceIntentChange:w.useCallback(K=>{L.current=K},[]),children:u.jsx(pe,{...Q,children:u.jsx(ew,{asChild:!0,trapped:s,onMountAutoFocus:_e(i,K=>{var de;K.preventDefault(),(de=O.current)==null||de.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:u.jsx(Ng,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:p,children:u.jsx(b8,{asChild:!0,...b,dir:m.dir,orientation:"vertical",loop:n,currentTabStopId:C,onCurrentTabStopIdChange:T,onEntryFocus:_e(l,K=>{m.isUsingKeyboardRef.current||K.preventDefault()}),preventScrollOnEntryFocus:!0,children:u.jsx(sj,{role:"menu","aria-orientation":"vertical","data-state":W8(v.open),"data-radix-menu-content":"",dir:m.dir,...x,...y,ref:R,style:{outline:"none",...y.style},onKeyDown:_e(y.onKeyDown,K=>{const le=K.target.closest("[data-radix-menu-content]")===K.currentTarget,be=K.ctrlKey||K.altKey||K.metaKey,Be=K.key.length===1;le&&(K.key==="Tab"&&K.preventDefault(),!be&&Be&&se(K.key));const He=O.current;if(K.target!==He||!Tfe.includes(K.key))return;K.preventDefault();const U=_().filter(D=>!D.disabled).map(D=>D.ref.current);_8.includes(K.key)&&U.reverse(),Kfe(U)}),onBlur:_e(t.onBlur,K=>{K.currentTarget.contains(K.target)||(window.clearTimeout(I.current),H.current="")}),onPointerMove:_e(t.onPointerMove,sg(K=>{const de=K.target,le=Y.current!==K.clientX;if(K.currentTarget.contains(de)&&le){const be=K.clientX>Y.current?"right":"left";z.current=be,Y.current=K.clientX}}))})})})})})})});A8.displayName=si;var Bfe="MenuGroup",yj=w.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return u.jsx(Fe.div,{role:"group",...n,ref:e})});yj.displayName=Bfe;var $fe="MenuLabel",P8=w.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return u.jsx(Fe.div,{...n,ref:e})});P8.displayName=$fe;var wv="MenuItem",GM="menu.itemSelect",mw=w.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...s}=t,i=w.useRef(null),o=Ig(wv,t.__scopeMenu),a=gj(wv,t.__scopeMenu),l=rt(e,i),c=w.useRef(!1),d=()=>{const h=i.current;if(!r&&h){const f=new CustomEvent(GM,{bubbles:!0,cancelable:!0});h.addEventListener(GM,p=>n==null?void 0:n(p),{once:!0}),kU(h,f),f.defaultPrevented?c.current=!1:o.onClose()}};return u.jsx(N8,{...s,ref:l,disabled:r,onClick:_e(t.onClick,d),onPointerDown:h=>{var f;(f=t.onPointerDown)==null||f.call(t,h),c.current=!0},onPointerUp:_e(t.onPointerUp,h=>{var f;c.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:_e(t.onKeyDown,h=>{const f=a.searchRef.current!=="";r||f&&h.key===" "||WE.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});mw.displayName=wv;var N8=w.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...i}=t,o=gj(wv,r),a=E8(r),l=w.useRef(null),c=rt(e,l),[d,h]=w.useState(!1),[f,p]=w.useState("");return w.useEffect(()=>{const g=l.current;g&&p((g.textContent??"").trim())},[i.children]),u.jsx(ng.ItemSlot,{scope:r,disabled:n,textValue:s??f,children:u.jsx(S8,{asChild:!0,...a,focusable:!n,children:u.jsx(Fe.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:c,onPointerMove:_e(t.onPointerMove,sg(g=>{n?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:_e(t.onPointerLeave,sg(g=>o.onItemLeave(g))),onFocus:_e(t.onFocus,()=>h(!0)),onBlur:_e(t.onBlur,()=>h(!1))})})})}),Ufe="MenuCheckboxItem",R8=w.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...s}=t;return u.jsx(F8,{scope:t.__scopeMenu,checked:r,children:u.jsx(mw,{role:"menuitemcheckbox","aria-checked":bv(r)?"mixed":r,...s,ref:e,"data-state":xj(r),onSelect:_e(s.onSelect,()=>n==null?void 0:n(bv(r)?!0:!r),{checkForDefaultPrevented:!1})})})});R8.displayName=Ufe;var O8="MenuRadioGroup",[Vfe,zfe]=eu(O8,{value:void 0,onValueChange:()=>{}}),M8=w.forwardRef((t,e)=>{const{value:r,onValueChange:n,...s}=t,i=Sr(n);return u.jsx(Vfe,{scope:t.__scopeMenu,value:r,onValueChange:i,children:u.jsx(yj,{...s,ref:e})})});M8.displayName=O8;var I8="MenuRadioItem",D8=w.forwardRef((t,e)=>{const{value:r,...n}=t,s=zfe(I8,t.__scopeMenu),i=r===s.value;return u.jsx(F8,{scope:t.__scopeMenu,checked:i,children:u.jsx(mw,{role:"menuitemradio","aria-checked":i,...n,ref:e,"data-state":xj(i),onSelect:_e(n.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,r)},{checkForDefaultPrevented:!1})})})});D8.displayName=I8;var vj="MenuItemIndicator",[F8,Hfe]=eu(vj,{checked:!1}),L8=w.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...s}=t,i=Hfe(vj,r);return u.jsx(En,{present:n||bv(i.checked)||i.checked===!0,children:u.jsx(Fe.span,{...s,ref:e,"data-state":xj(i.checked)})})});L8.displayName=vj;var Wfe="MenuSeparator",B8=w.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return u.jsx(Fe.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});B8.displayName=Wfe;var qfe="MenuArrow",$8=w.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,s=gw(r);return u.jsx(ij,{...s,...n,ref:e})});$8.displayName=qfe;var Gfe="MenuSub",[Nje,U8]=eu(Gfe),_f="MenuSubTrigger",V8=w.forwardRef((t,e)=>{const r=tu(_f,t.__scopeMenu),n=Ig(_f,t.__scopeMenu),s=U8(_f,t.__scopeMenu),i=gj(_f,t.__scopeMenu),o=w.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=i,c={__scopeMenu:t.__scopeMenu},d=w.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return w.useEffect(()=>d,[d]),w.useEffect(()=>{const h=a.current;return()=>{window.clearTimeout(h),l(null)}},[a,l]),u.jsx(fj,{asChild:!0,...c,children:u.jsx(N8,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":W8(r.open),...t,ref:Gx(e,s.onTriggerChange),onClick:h=>{var f;(f=t.onClick)==null||f.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:_e(t.onPointerMove,sg(h=>{i.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:_e(t.onPointerLeave,sg(h=>{var p,g;d();const f=(p=r.content)==null?void 0:p.getBoundingClientRect();if(f){const y=(g=r.content)==null?void 0:g.dataset.side,v=y==="right",m=v?-5:5,x=f[v?"left":"right"],b=f[v?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+m,y:h.clientY},{x,y:f.top},{x:b,y:f.top},{x:b,y:f.bottom},{x,y:f.bottom}],side:y}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:_e(t.onKeyDown,h=>{var p;const f=i.searchRef.current!=="";t.disabled||f&&h.key===" "||jfe[n.dir].includes(h.key)&&(r.onOpenChange(!0),(p=r.content)==null||p.focus(),h.preventDefault())})})})});V8.displayName=_f;var z8="MenuSubContent",H8=w.forwardRef((t,e)=>{const r=T8(si,t.__scopeMenu),{forceMount:n=r.forceMount,...s}=t,i=tu(si,t.__scopeMenu),o=Ig(si,t.__scopeMenu),a=U8(z8,t.__scopeMenu),l=w.useRef(null),c=rt(e,l);return u.jsx(ng.Provider,{scope:t.__scopeMenu,children:u.jsx(En,{present:n||i.open,children:u.jsx(ng.Slot,{scope:t.__scopeMenu,children:u.jsx(mj,{id:a.contentId,"aria-labelledby":a.triggerId,...s,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=l.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:_e(t.onFocusOutside,d=>{d.target!==a.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:_e(t.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:_e(t.onKeyDown,d=>{var p;const h=d.currentTarget.contains(d.target),f=Afe[o.dir].includes(d.key);h&&f&&(i.onOpenChange(!1),(p=a.trigger)==null||p.focus(),d.preventDefault())})})})})})});H8.displayName=z8;function W8(t){return t?"open":"closed"}function bv(t){return t==="indeterminate"}function xj(t){return bv(t)?"indeterminate":t?"checked":"unchecked"}function Kfe(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function Yfe(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function Xfe(t,e,r){const s=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,i=r?t.indexOf(r):-1;let o=Yfe(t,Math.max(i,0));s.length===1&&(o=o.filter(c=>c!==r));const l=o.find(c=>c.toLowerCase().startsWith(s.toLowerCase()));return l!==r?l:void 0}function Jfe(t,e){const{x:r,y:n}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,d=e[o].y;l>n!=d>n&&r<(c-a)*(n-l)/(d-l)+a&&(s=!s)}return s}function Zfe(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return Jfe(r,e)}function sg(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Qfe=k8,epe=fj,tpe=j8,rpe=A8,npe=yj,spe=P8,ipe=mw,ope=R8,ape=M8,lpe=D8,cpe=L8,upe=B8,dpe=$8,hpe=V8,fpe=H8,wj="DropdownMenu",[ppe,Rje]=$s(wj,[C8]),zn=C8(),[gpe,q8]=ppe(wj),G8=t=>{const{__scopeDropdownMenu:e,children:r,dir:n,open:s,defaultOpen:i,onOpenChange:o,modal:a=!0}=t,l=zn(e),c=w.useRef(null),[d=!1,h]=Rs({prop:s,defaultProp:i,onChange:o});return u.jsx(gpe,{scope:e,triggerId:ks(),triggerRef:c,contentId:ks(),open:d,onOpenChange:h,onOpenToggle:w.useCallback(()=>h(f=>!f),[h]),modal:a,children:u.jsx(Qfe,{...l,open:d,onOpenChange:h,dir:n,modal:a,children:r})})};G8.displayName=wj;var K8="DropdownMenuTrigger",Y8=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=t,i=q8(K8,r),o=zn(r);return u.jsx(epe,{asChild:!0,...o,children:u.jsx(Fe.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:Gx(e,i.triggerRef),onPointerDown:_e(t.onPointerDown,a=>{!n&&a.button===0&&a.ctrlKey===!1&&(i.onOpenToggle(),i.open||a.preventDefault())}),onKeyDown:_e(t.onKeyDown,a=>{n||(["Enter"," "].includes(a.key)&&i.onOpenToggle(),a.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});Y8.displayName=K8;var mpe="DropdownMenuPortal",X8=t=>{const{__scopeDropdownMenu:e,...r}=t,n=zn(e);return u.jsx(tpe,{...n,...r})};X8.displayName=mpe;var J8="DropdownMenuContent",Z8=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=q8(J8,r),i=zn(r),o=w.useRef(!1);return u.jsx(rpe,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...n,ref:e,onCloseAutoFocus:_e(t.onCloseAutoFocus,a=>{var l;o.current||(l=s.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:_e(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;(!s.modal||d)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Z8.displayName=J8;var ype="DropdownMenuGroup",vpe=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=zn(r);return u.jsx(npe,{...s,...n,ref:e})});vpe.displayName=ype;var xpe="DropdownMenuLabel",Q8=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=zn(r);return u.jsx(spe,{...s,...n,ref:e})});Q8.displayName=xpe;var wpe="DropdownMenuItem",eV=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=zn(r);return u.jsx(ipe,{...s,...n,ref:e})});eV.displayName=wpe;var bpe="DropdownMenuCheckboxItem",tV=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=zn(r);return u.jsx(ope,{...s,...n,ref:e})});tV.displayName=bpe;var Spe="DropdownMenuRadioGroup",_pe=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=zn(r);return u.jsx(ape,{...s,...n,ref:e})});_pe.displayName=Spe;var Cpe="DropdownMenuRadioItem",rV=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=zn(r);return u.jsx(lpe,{...s,...n,ref:e})});rV.displayName=Cpe;var Epe="DropdownMenuItemIndicator",nV=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=zn(r);return u.jsx(cpe,{...s,...n,ref:e})});nV.displayName=Epe;var kpe="DropdownMenuSeparator",sV=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=zn(r);return u.jsx(upe,{...s,...n,ref:e})});sV.displayName=kpe;var Tpe="DropdownMenuArrow",jpe=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=zn(r);return u.jsx(dpe,{...s,...n,ref:e})});jpe.displayName=Tpe;var Ape="DropdownMenuSubTrigger",iV=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=zn(r);return u.jsx(hpe,{...s,...n,ref:e})});iV.displayName=Ape;var Ppe="DropdownMenuSubContent",oV=w.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,s=zn(r);return u.jsx(fpe,{...s,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});oV.displayName=Ppe;var Npe=G8,Rpe=Y8,Ope=X8,aV=Z8,lV=Q8,cV=eV,uV=tV,dV=rV,hV=nV,fV=sV,pV=iV,gV=oV;const bj=Npe,Sj=Rpe,Mpe=w.forwardRef(({className:t,inset:e,children:r,...n},s)=>u.jsxs(pV,{ref:s,className:xe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...n,children:[r,u.jsx(Qce,{className:"ml-auto h-4 w-4"})]}));Mpe.displayName=pV.displayName;const Ipe=w.forwardRef(({className:t,...e},r)=>u.jsx(gV,{ref:r,className:xe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));Ipe.displayName=gV.displayName;const yw=w.forwardRef(({className:t,sideOffset:e=4,...r},n)=>u.jsx(Ope,{children:u.jsx(aV,{ref:n,sideOffset:e,className:xe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));yw.displayName=aV.displayName;const nn=w.forwardRef(({className:t,inset:e,...r},n)=>u.jsx(cV,{ref:n,className:xe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...r}));nn.displayName=cV.displayName;const Dpe=w.forwardRef(({className:t,children:e,checked:r,...n},s)=>u.jsxs(uV,{ref:s,className:xe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(hV,{children:u.jsx(q2,{className:"h-4 w-4"})})}),e]}));Dpe.displayName=uV.displayName;const Fpe=w.forwardRef(({className:t,children:e,...r},n)=>u.jsxs(dV,{ref:n,className:xe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[u.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:u.jsx(hV,{children:u.jsx(iue,{className:"h-4 w-4 fill-current"})})}),e]}));Fpe.displayName=dV.displayName;const Lpe=w.forwardRef(({className:t,inset:e,...r},n)=>u.jsx(lV,{ref:n,className:xe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));Lpe.displayName=lV.displayName;const Sv=w.forwardRef(({className:t,...e},r)=>u.jsx(fV,{ref:r,className:xe("-mx-1 my-1 h-px bg-muted",t),...e}));Sv.displayName=fV.displayName;const Bpe=({userId:t,resetUserProfile:e})=>{const r=Ar(),n=w.useRef(!0),s=w.useCallback(async i=>{try{(await r(ky(i))).meta.requestStatus,n.current=!0,e==null||e()}catch(o){n.current=!0,e==null||e(),console.error("Error fetching user profile:",o)}},[r,e]);return w.useEffect(()=>{t&&n.current&&(n.current=!1,s(t))},[t,s]),null},$pe=()=>{const t=w.useRef(!1),[e,r]=ie.useState(null),n=Ze(zQ);w.useEffect(()=>{n&&n.id?(t.current=!0,r(n.id)):t.current=!1},[n]);const s=()=>{t.current=!1,r(null)};return u.jsx(u.Fragment,{children:t.current&&e&&u.jsx(Bpe,{userId:e,resetUserProfile:s})})};var _j="Dialog",[mV,Oje]=$s(_j),[Upe,zi]=mV(_j),yV=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=w.useRef(null),l=w.useRef(null),[c=!1,d]=Rs({prop:n,defaultProp:s,onChange:i});return u.jsx(Upe,{scope:e,triggerRef:a,contentRef:l,contentId:ks(),titleId:ks(),descriptionId:ks(),open:c,onOpenChange:d,onOpenToggle:w.useCallback(()=>d(h=>!h),[d]),modal:o,children:r})};yV.displayName=_j;var vV="DialogTrigger",xV=w.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=zi(vV,r),i=rt(e,s.triggerRef);return u.jsx(Fe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":kj(s.open),...n,ref:i,onClick:_e(t.onClick,s.onOpenToggle)})});xV.displayName=vV;var Cj="DialogPortal",[Vpe,wV]=mV(Cj,{forceMount:void 0}),bV=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:s}=t,i=zi(Cj,e);return u.jsx(Vpe,{scope:e,forceMount:r,children:w.Children.map(n,o=>u.jsx(En,{present:r||i.open,children:u.jsx(iw,{asChild:!0,container:s,children:o})}))})};bV.displayName=Cj;var _v="DialogOverlay",SV=w.forwardRef((t,e)=>{const r=wV(_v,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,i=zi(_v,t.__scopeDialog);return i.modal?u.jsx(En,{present:n||i.open,children:u.jsx(zpe,{...s,ref:e})}):null});SV.displayName=_v;var zpe=w.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=zi(_v,r);return u.jsx(lw,{as:fa,allowPinchZoom:!0,shards:[s.contentRef],children:u.jsx(Fe.div,{"data-state":kj(s.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),Vc="DialogContent",_V=w.forwardRef((t,e)=>{const r=wV(Vc,t.__scopeDialog),{forceMount:n=r.forceMount,...s}=t,i=zi(Vc,t.__scopeDialog);return u.jsx(En,{present:n||i.open,children:i.modal?u.jsx(Hpe,{...s,ref:e}):u.jsx(Wpe,{...s,ref:e})})});_V.displayName=Vc;var Hpe=w.forwardRef((t,e)=>{const r=zi(Vc,t.__scopeDialog),n=w.useRef(null),s=rt(e,r.contentRef,n);return w.useEffect(()=>{const i=n.current;if(i)return aj(i)},[]),u.jsx(CV,{...t,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:_e(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:_e(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:_e(t.onFocusOutside,i=>i.preventDefault())})}),Wpe=w.forwardRef((t,e)=>{const r=zi(Vc,t.__scopeDialog),n=w.useRef(!1),s=w.useRef(!1);return u.jsx(CV,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(n.current||(a=r.triggerRef.current)==null||a.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((c=r.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),CV=w.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=zi(Vc,r),l=w.useRef(null),c=rt(e,l);return G2(),u.jsxs(u.Fragment,{children:[u.jsx(ew,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:u.jsx(Ng,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":kj(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),u.jsxs(u.Fragment,{children:[u.jsx(qpe,{titleId:a.titleId}),u.jsx(Kpe,{contentRef:l,descriptionId:a.descriptionId})]})]})}),Ej="DialogTitle",EV=w.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=zi(Ej,r);return u.jsx(Fe.h2,{id:s.titleId,...n,ref:e})});EV.displayName=Ej;var kV="DialogDescription",TV=w.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=zi(kV,r);return u.jsx(Fe.p,{id:s.descriptionId,...n,ref:e})});TV.displayName=kV;var jV="DialogClose",AV=w.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,s=zi(jV,r);return u.jsx(Fe.button,{type:"button",...n,ref:e,onClick:_e(t.onClick,()=>s.onOpenChange(!1))})});AV.displayName=jV;function kj(t){return t?"open":"closed"}var PV="DialogTitleWarning",[Mje,NV]=lue(PV,{contentName:Vc,titleName:Ej,docsSlug:"dialog"}),qpe=({titleId:t})=>{const e=NV(PV),r=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return w.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},Gpe="DialogDescriptionWarning",Kpe=({contentRef:t,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${NV(Gpe).contentName}}.`;return w.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(n))},[n,t,e]),null},Ype=yV,Xpe=xV,Jpe=bV,RV=SV,OV=_V,MV=EV,IV=TV,Zpe=AV;const Qpe=Ype,ege=Xpe,tge=Jpe,DV=w.forwardRef(({className:t,...e},r)=>u.jsx(RV,{ref:r,className:xe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));DV.displayName=RV.displayName;const FV=w.forwardRef(({className:t,children:e,...r},n)=>u.jsxs(tge,{children:[u.jsx(DV,{}),u.jsxs(OV,{ref:n,className:xe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[e,u.jsxs(Zpe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[u.jsx(nue,{className:"h-4 w-4"}),u.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));FV.displayName=OV.displayName;const LV=({className:t,...e})=>u.jsx("div",{className:xe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});LV.displayName="DialogHeader";const BV=w.forwardRef(({className:t,...e},r)=>u.jsx(MV,{ref:r,className:xe("text-lg font-semibold leading-none tracking-tight",t),...e}));BV.displayName=MV.displayName;const $V=w.forwardRef(({className:t,...e},r)=>u.jsx(IV,{ref:r,className:xe("text-sm text-muted-foreground",t),...e}));$V.displayName=IV.displayName;const UV=w.forwardRef(({className:t,...e},r)=>u.jsx("textarea",{className:xe("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));UV.displayName="Textarea";var Tj="Switch",[rge,Ije]=$s(Tj),[nge,sge]=rge(Tj),VV=w.forwardRef((t,e)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:i,required:o,disabled:a,value:l="on",onCheckedChange:c,form:d,...h}=t,[f,p]=w.useState(null),g=rt(e,b=>p(b)),y=w.useRef(!1),v=f?d||!!f.closest("form"):!0,[m=!1,x]=Rs({prop:s,defaultProp:i,onChange:c});return u.jsxs(nge,{scope:r,checked:m,disabled:a,children:[u.jsx(Fe.button,{type:"button",role:"switch","aria-checked":m,"aria-required":o,"data-state":WV(m),"data-disabled":a?"":void 0,disabled:a,value:l,...h,ref:g,onClick:_e(t.onClick,b=>{x(_=>!_),v&&(y.current=b.isPropagationStopped(),y.current||b.stopPropagation())})}),v&&u.jsx(ige,{control:f,bubbles:!y.current,name:n,value:l,checked:m,required:o,disabled:a,form:d,style:{transform:"translateX(-100%)"}})]})});VV.displayName=Tj;var zV="SwitchThumb",HV=w.forwardRef((t,e)=>{const{__scopeSwitch:r,...n}=t,s=sge(zV,r);return u.jsx(Fe.span,{"data-state":WV(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:e})});HV.displayName=zV;var ige=t=>{const{control:e,checked:r,bubbles:n=!0,...s}=t,i=w.useRef(null),o=ow(r),a=sw(e);return w.useEffect(()=>{const l=i.current,c=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==r&&h){const f=new Event("click",{bubbles:n});h.call(l,r),l.dispatchEvent(f)}},[o,r,n]),u.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:i,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function WV(t){return t?"checked":"unchecked"}var qV=VV,oge=HV;const jj=w.forwardRef(({className:t,...e},r)=>u.jsx(qV,{className:xe("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:r,children:u.jsx(oge,{className:xe("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));jj.displayName=qV.displayName;const age=t=>({setHttpHandler(e){t.httpHandler=e},httpHandler(){return t.httpHandler},updateHttpClientConfig(e,r){var n;(n=t.httpHandler)==null||n.updateHttpClientConfig(e,r)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}),lge=t=>({httpHandler:t.httpHandler()});var KM;(function(t){t.HEADER="header",t.QUERY="query"})(KM||(KM={}));var YM;(function(t){t.HEADER="header",t.QUERY="query"})(YM||(YM={}));var ig;(function(t){t.HTTP="http",t.HTTPS="https"})(ig||(ig={}));var Cv;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(Cv||(Cv={}));var XM;(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(XM||(XM={}));const qE="__smithy_context";var JM;(function(t){t.PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services"})(JM||(JM={}));var ZM;(function(t){t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0"})(ZM||(ZM={}));class jr{constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const r=new jr({...e,headers:{...e.headers}});return r.query&&(r.query=cge(r.query)),r}static isInstance(e){if(!e)return!1;const r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return jr.clone(this)}}function cge(t){return Object.keys(t).reduce((e,r)=>{const n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}class Gd{constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}}function uge(t){return e=>async r=>{var s,i;const{request:n}=r;return jr.isInstance(n)&&n.body&&t.runtime==="node"&&((i=(s=t.requestHandler)==null?void 0:s.constructor)==null?void 0:i.name)!=="FetchHttpHandler"&&(n.headers={...n.headers,Expect:"100-continue"}),e({...r,request:n})}}const dge={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},hge=t=>({applyToStack:e=>{e.add(uge(t),dge)}}),Kd={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},fge=Kd.WHEN_SUPPORTED,gS={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},pge=Kd.WHEN_SUPPORTED;var It;(function(t){t.MD5="MD5",t.CRC32="CRC32",t.CRC32C="CRC32C",t.CRC64NVME="CRC64NVME",t.SHA1="SHA1",t.SHA256="SHA256"})(It||(It={}));var QM;(function(t){t.HEADER="header",t.TRAILER="trailer"})(QM||(QM={}));const GE=It.CRC32;var eI;(function(t){t.ENV="env",t.CONFIG="shared config entry"})(eI||(eI={}));function gge(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}function xr(t,e,r){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=r}const tI=t=>{var e,r;return Gd.isInstance(t)?((e=t.headers)==null?void 0:e.date)??((r=t.headers)==null?void 0:r.Date):void 0},Aj=t=>new Date(Date.now()+t),mge=(t,e)=>Math.abs(Aj(e).getTime()-t)>=3e5,rI=(t,e)=>{const r=Date.parse(t);return mge(r,e)?r-Date.now():e},sp=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},GV=async t=>{var c,d,h;const e=sp("context",t.context),r=sp("config",t.config),n=(h=(d=(c=e.endpointV2)==null?void 0:c.properties)==null?void 0:d.authSchemes)==null?void 0:h[0],i=await sp("signer",r.signer)(n),o=t==null?void 0:t.signingRegion,a=t==null?void 0:t.signingRegionSet,l=t==null?void 0:t.signingName;return{config:r,signer:i,signingRegion:o,signingRegionSet:a,signingName:l}};class KV{async sign(e,r,n){var h;if(!jr.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const s=await GV(n),{config:i,signer:o}=s;let{signingRegion:a,signingName:l}=s;const c=n.context;if(((h=c==null?void 0:c.authSchemes)==null?void 0:h.length)??!1){const[f,p]=c.authSchemes;(f==null?void 0:f.name)==="sigv4a"&&(p==null?void 0:p.name)==="sigv4"&&(a=(p==null?void 0:p.signingRegion)??a,l=(p==null?void 0:p.signingName)??l)}return await o.sign(e,{signingDate:Aj(i.systemClockOffset),signingRegion:a,signingService:l})}errorHandler(e){return r=>{const n=r.ServerTime??tI(r.$response);if(n){const s=sp("config",e.config),i=s.systemClockOffset;s.systemClockOffset=rI(n,s.systemClockOffset),s.systemClockOffset!==i&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(e,r){const n=tI(e);if(n){const s=sp("config",r.config);s.systemClockOffset=rI(n,s.systemClockOffset)}}}class yge extends KV{async sign(e,r,n){var f;if(!jr.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const{config:s,signer:i,signingRegion:o,signingRegionSet:a,signingName:l}=await GV(n),d=(await((f=s.sigv4aSigningRegionSet)==null?void 0:f.call(s))??a??[o]).join(",");return await i.sign(e,{signingDate:Aj(s.systemClockOffset),signingRegion:d,signingService:l})}}const _h=t=>t[qE]||(t[qE]={}),Mi=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},vge=(t,e)=>{if(!e||e.length===0)return t;const r=[];for(const n of e)for(const s of t)s.schemeId.split("#")[1]===n&&r.push(s);for(const n of t)r.find(({schemeId:s})=>s===n.schemeId)||r.push(n);return r};function xge(t){const e=new Map;for(const r of t)e.set(r.schemeId,r);return e}const wge=(t,e)=>(r,n)=>async s=>{var h;const i=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,n,s.input)),o=t.authSchemePreference?await t.authSchemePreference():[],a=vge(i,o),l=xge(t.httpAuthSchemes),c=_h(n),d=[];for(const f of a){const p=l.get(f.schemeId);if(!p){d.push(`HttpAuthScheme \`${f.schemeId}\` was not enabled for this service.`);continue}const g=p.identityProvider(await e.identityProviderConfigProvider(t));if(!g){d.push(`HttpAuthScheme \`${f.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:y={},signingProperties:v={}}=((h=f.propertiesExtractor)==null?void 0:h.call(f,t,n))||{};f.identityProperties=Object.assign(f.identityProperties||{},y),f.signingProperties=Object.assign(f.signingProperties||{},v),c.selectedHttpAuthScheme={httpAuthOption:f,identity:await g(f.identityProperties),signer:p.signer};break}if(!c.selectedHttpAuthScheme)throw new Error(d.join(`
`));return r(s)},bge={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},Sge=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(wge(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),bge)}}),_ge=(t,e)=>(r,n)=>async s=>{var o,a,l,c;const{response:i}=await r(s);try{const d=await e(i,t);return{response:i,output:d}}catch(d){if(Object.defineProperty(d,"$response",{value:i}),!("$metadata"in d)){const h="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{d.message+=`
  `+h}catch{!n.logger||((a=(o=n.logger)==null?void 0:o.constructor)==null?void 0:a.name)==="NoOpLogger"?console.warn(h):(c=(l=n.logger)==null?void 0:l.warn)==null||c.call(l,h)}typeof d.$responseBodyText<"u"&&d.$response&&(d.$response.body=d.$responseBodyText);try{if(Gd.isInstance(i)){const{headers:f={}}=i,p=Object.entries(f);d.$metadata={httpStatusCode:i.statusCode,requestId:mS(/^x-[\w-]+-request-?id$/,p),extendedRequestId:mS(/^x-[\w-]+-id-2$/,p),cfId:mS(/^x-[\w-]+-cf-id$/,p)}}}catch{}}throw d}},mS=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1],Cge=(t,e)=>(r,n)=>async s=>{var l;const i=t,o=(l=n.endpointV2)!=null&&l.url&&i.urlParser?async()=>i.urlParser(n.endpointV2.url):i.endpoint;if(!o)throw new Error("No valid endpoint provider available.");const a=await e(s.input,{...t,endpoint:o});return r({...s,request:a})},Ege={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Pj={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function ru(t,e,r){return{applyToStack:n=>{n.add(_ge(t,r),Ege),n.add(Cge(t,e),Pj)}}}Pj.name;const kge=t=>e=>{throw e},Tge=(t,e)=>{},jge=t=>(e,r)=>async n=>{if(!jr.isInstance(n.request))return e(n);const i=_h(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:o={}},identity:a,signer:l}=i,c=await e({...n,request:await l.sign(n.request,a,o)}).catch((l.errorHandler||kge)(o));return(l.successHandler||Tge)(c.response,o),c},YV={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},Age=t=>({applyToStack:e=>{e.addRelativeTo(jge(),YV)}}),wd=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},Sl={},Ch=new Array(64);for(let t=0,e=65,r=90;t+e<=r;t++){const n=String.fromCharCode(t+e);Sl[n]=t,Ch[t]=n}for(let t=0,e=97,r=122;t+e<=r;t++){const n=String.fromCharCode(t+e),s=t+26;Sl[n]=s,Ch[s]=n}for(let t=0;t<10;t++){Sl[t.toString(10)]=t+52;const e=t.toString(10),r=t+52;Sl[e]=r,Ch[r]=e}Sl["+"]=62;Ch[62]="+";Sl["/"]=63;Ch[63]="/";const bd=6,ip=8,Pge=63,Nj=t=>{let e=t.length/4*3;t.slice(-2)==="=="?e-=2:t.slice(-1)==="="&&e--;const r=new ArrayBuffer(e),n=new DataView(r);for(let s=0;s<t.length;s+=4){let i=0,o=0;for(let c=s,d=s+3;c<=d;c++)if(t[c]!=="="){if(!(t[c]in Sl))throw new TypeError(`Invalid character ${t[c]} in base64 string.`);i|=Sl[t[c]]<<(d-c)*bd,o+=bd}else i>>=bd;const a=s/4*3;i>>=o%ip;const l=Math.floor(o/ip);for(let c=0;c<l;c++){const d=(l-c-1)*ip;n.setUint8(a+c,(i&255<<d)>>d)}}return new Uint8Array(r)},zc=t=>new TextEncoder().encode(t),Yd=t=>typeof t=="string"?zc(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),Rj=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(t)};function vw(t){let e;typeof t=="string"?e=zc(t):e=t;const r=typeof e=="object"&&typeof e.length=="number",n=typeof e=="object"&&typeof e.byteOffset=="number"&&typeof e.byteLength=="number";if(!r&&!n)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let s="";for(let i=0;i<e.length;i+=3){let o=0,a=0;for(let c=i,d=Math.min(i+3,e.length);c<d;c++)o|=e[c]<<(d-c-1)*ip,a+=ip;const l=Math.ceil(a/bd);o<<=l*bd-a;for(let c=1;c<=l;c++){const d=(l-c)*bd;s+=Ch[(o&Pge<<d)>>d]}s+="==".slice(0,4-l)}return s}function Nge(t,e="utf-8"){return e==="base64"?vw(t):Rj(t)}function Rge(t,e){return e==="base64"?_c.mutate(Nj(t)):_c.mutate(zc(t))}class _c extends Uint8Array{static fromString(e,r="utf-8"){switch(typeof e){case"string":return Rge(e,r);default:throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}}static mutate(e){return Object.setPrototypeOf(e,_c.prototype),e}transformToString(e="utf-8"){return Nge(this,e)}}const Oge=typeof ReadableStream=="function"?ReadableStream:function(){};class Mge extends Oge{}const KE=t=>{var e;return typeof ReadableStream=="function"&&(((e=t==null?void 0:t.constructor)==null?void 0:e.name)===ReadableStream.name||t instanceof ReadableStream)},Ige=({expectedChecksum:t,checksum:e,source:r,checksumSourceLocation:n,base64Encoder:s})=>{var l;if(!KE(r))throw new Error(`@smithy/util-stream: unsupported source type ${((l=r==null?void 0:r.constructor)==null?void 0:l.name)??r} in ChecksumStream.`);const i=s??vw;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");const o=new TransformStream({start(){},async transform(c,d){e.update(c),d.enqueue(c)},async flush(c){const d=await e.digest(),h=i(d);if(t!==h){const f=new Error(`Checksum mismatch: expected "${t}" but received "${h}" in response header "${n}".`);c.error(f)}else c.terminate()}});r.pipeThrough(o);const a=o.readable;return Object.setPrototypeOf(a,Mge.prototype),a};class Dge{constructor(e){this.allocByteArray=e,this.byteLength=0,this.byteArrays=[]}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(this.byteArrays.length===1){const n=this.byteArrays[0];return this.reset(),n}const e=this.allocByteArray(this.byteLength);let r=0;for(let n=0;n<this.byteArrays.length;++n){const s=this.byteArrays[n];e.set(s,r),r+=s.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}}function Fge(t,e,r){const n=t.getReader();let s=!1,i=0;const o=["",new Dge(c=>new Uint8Array(c))];let a=-1;const l=async c=>{const{value:d,done:h}=await n.read(),f=d;if(h){if(a!==-1){const p=yS(o,a);op(p)>0&&c.enqueue(p)}c.close()}else{const p=$ge(f,!1);if(a!==p&&(a>=0&&c.enqueue(yS(o,a)),a=p),a===-1){c.enqueue(f);return}const g=op(f);i+=g;const y=op(o[a]);if(g>=e&&y===0)c.enqueue(f);else{const v=Bge(o,a,f);!s&&i>e*2&&(s=!0,r==null||r.warn(`@smithy/util-stream - stream chunk size ${g} is below threshold of ${e}, automatically buffering.`)),v>=e?c.enqueue(yS(o,a)):await l(c)}}};return new ReadableStream({pull:l})}const Lge=Fge;function Bge(t,e,r){switch(e){case 0:return t[0]+=r,op(t[0]);case 1:case 2:return t[e].push(r),op(t[e])}}function yS(t,e){switch(e){case 0:const r=t[0];return t[0]="",r;case 1:case 2:return t[e].flush()}throw new Error(`@smithy/util-stream - invalid index ${e} given to flush()`)}function op(t){return(t==null?void 0:t.byteLength)??(t==null?void 0:t.length)??0}function $ge(t,e=!0){return e&&typeof Buffer<"u"&&t instanceof Buffer?2:t instanceof Uint8Array?1:typeof t=="string"?0:-1}const Uge=(t,e)=>{const{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:s,checksumLocationName:i,streamHasher:o}=e,a=r!==void 0&&n!==void 0&&s!==void 0&&i!==void 0&&o!==void 0,l=a?o(s,t):void 0,c=t.getReader();return new ReadableStream({async pull(d){const{value:h,done:f}=await c.read();if(f){if(d.enqueue(`0\r
`),a){const p=r(await l);d.enqueue(`${i}:${p}\r
`),d.enqueue(`\r
`)}d.close()}else d.enqueue(`${(n(h)||0).toString(16)}\r
${h}\r
`)}})};async function Vge(t,e){let r=0;const n=[],s=t.getReader();let i=!1;for(;!i;){const{done:l,value:c}=await s.read();if(c&&(n.push(c),r+=(c==null?void 0:c.byteLength)??0),r>=e)break;i=l}s.releaseLock();const o=new Uint8Array(Math.min(e,r));let a=0;for(const l of n){if(l.byteLength>o.byteLength-a){o.set(l.subarray(0,o.byteLength-a),a);break}else o.set(l,a);a+=l.length}return o}const Cc=t=>encodeURIComponent(t).replace(/[!'()*]/g,zge),zge=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`;function Hge(t){const e=[];for(let r of Object.keys(t).sort()){const n=t[r];if(r=Cc(r),Array.isArray(n))for(let s=0,i=n.length;s<i;s++)e.push(`${r}=${Cc(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${Cc(n)}`),e.push(s)}}return e.join("&")}function nI(t,e){return new Request(t,e)}function Wge(t=0){return new Promise((e,r)=>{t&&setTimeout(()=>{const n=new Error(`Request did not complete within ${t} ms`);n.name="TimeoutError",r(n)},t)})}const vS={supported:void 0};class Oj{static create(e){return typeof(e==null?void 0:e.handle)=="function"?e:new Oj(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(r=>r||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),vS.supported===void 0&&(vS.supported=typeof Request<"u"&&"keepalive"in nI("https://[::1]"))}destroy(){}async handle(e,{abortSignal:r}={}){var m;this.config||(this.config=await this.configProvider);const n=this.config.requestTimeout,s=this.config.keepAlive===!0,i=this.config.credentials;if(r!=null&&r.aborted){const x=new Error("Request aborted");return x.name="AbortError",Promise.reject(x)}let o=e.path;const a=Hge(e.query||{});a&&(o+=`?${a}`),e.fragment&&(o+=`#${e.fragment}`);let l="";if(e.username!=null||e.password!=null){const x=e.username??"",b=e.password??"";l=`${x}:${b}@`}const{port:c,method:d}=e,h=`${e.protocol}//${l}${e.hostname}${c?`:${c}`:""}${o}`,f=d==="GET"||d==="HEAD"?void 0:e.body,p={body:f,headers:new Headers(e.headers),method:d,credentials:i};(m=this.config)!=null&&m.cache&&(p.cache=this.config.cache),f&&(p.duplex="half"),typeof AbortController<"u"&&(p.signal=r),vS.supported&&(p.keepalive=s),typeof this.config.requestInit=="function"&&Object.assign(p,this.config.requestInit(e));let g=()=>{};const y=nI(h,p),v=[fetch(y).then(x=>{const b=x.headers,_={};for(const T of b.entries())_[T[0]]=T[1];return x.body!=null?{response:new Gd({headers:_,reason:x.statusText,statusCode:x.status,body:x.body})}:x.blob().then(T=>({response:new Gd({headers:_,reason:x.statusText,statusCode:x.status,body:T})}))}),Wge(n)];return r&&v.push(new Promise((x,b)=>{const _=()=>{const C=new Error("Request aborted");C.name="AbortError",b(C)};if(typeof r.addEventListener=="function"){const C=r;C.addEventListener("abort",_,{once:!0}),g=()=>C.removeEventListener("abort",_)}else r.onabort=_})),Promise.race(v).finally(g)}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[e]=r,n))}httpHandlerConfigs(){return this.config??{}}}const XV=async t=>{var e;return typeof Blob=="function"&&t instanceof Blob||((e=t.constructor)==null?void 0:e.name)==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):qge(t):Gge(t)};async function qge(t){const e=await Kge(t),r=Nj(e);return new Uint8Array(r)}async function Gge(t){const e=[],r=t.getReader();let n=!1,s=0;for(;!n;){const{done:a,value:l}=await r.read();l&&(e.push(l),s+=l.length),n=a}const i=new Uint8Array(s);let o=0;for(const a of e)i.set(a,o),o+=a.length;return i}function Kge(t){return new Promise((e,r)=>{const n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));const s=n.result??"",i=s.indexOf(","),o=i>-1?i+1:s.length;e(s.substring(o))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(t)})}const JV={},YE={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),JV[t]=e,YE[e]=t}function ZV(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){const n=t.slice(r,r+2).toLowerCase();if(n in YE)e[r/2]=YE[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}function Qn(t){let e="";for(let r=0;r<t.byteLength;r++)e+=JV[t[r]];return e}const sI="The stream has already been transformed.",Yge=t=>{var s,i;if(!iI(t)&&!KE(t)){const o=((i=(s=t==null?void 0:t.__proto__)==null?void 0:s.constructor)==null?void 0:i.name)||t;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${o}`)}let e=!1;const r=async()=>{if(e)throw new Error(sI);return e=!0,await XV(t)},n=o=>{if(typeof o.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return o.stream()};return Object.assign(t,{transformToByteArray:r,transformToString:async o=>{const a=await r();if(o==="base64")return vw(a);if(o==="hex")return Qn(a);if(o===void 0||o==="utf8"||o==="utf-8")return Rj(a);if(typeof TextDecoder=="function")return new TextDecoder(o).decode(a);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(e)throw new Error(sI);if(e=!0,iI(t))return n(t);if(KE(t))return t;throw new Error(`Cannot transform payload to web stream, got ${t}`)}})},iI=t=>typeof Blob=="function"&&t instanceof Blob;async function Xge(t){return typeof t.stream=="function"&&(t=t.stream()),t.tee()}const Dg=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return _c.mutate(t);if(!t)return _c.mutate(new Uint8Array);const r=e.streamCollector(t);return _c.mutate(await r)};function Ev(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}const Fg=t=>{switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${t}"`)}},Jge=t=>{if(t!=null){if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&tz.warn(ez(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},Zge=Math.ceil(2**127*(2-2**-23)),oI=t=>{const e=Jge(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>Zge)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},XE=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},aI=t=>QV(t,16),lI=t=>QV(t,8),QV=(t,e)=>{const r=XE(t);if(r!==void 0&&Qge(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},Qge=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},ma=(t,e)=>{if(t==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return t},Mj=t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;const e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},Wr=t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return tz.warn(ez(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},eme=t=>oI(typeof t=="string"?xw(t):t),tme=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,xw=t=>{const e=t.match(tme);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},rme=t=>XE(typeof t=="string"?xw(t):t),kv=t=>aI(typeof t=="string"?xw(t):t),nme=t=>lI(typeof t=="string"?xw(t):t),ez=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),tz={warn:console.warn},sme=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ij=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Dj(t){const e=t.getUTCFullYear(),r=t.getUTCMonth(),n=t.getUTCDay(),s=t.getUTCDate(),i=t.getUTCHours(),o=t.getUTCMinutes(),a=t.getUTCSeconds(),l=s<10?`0${s}`:`${s}`,c=i<10?`0${i}`:`${i}`,d=o<10?`0${o}`:`${o}`,h=a<10?`0${a}`:`${a}`;return`${sme[n]}, ${l} ${Ij[r]} ${e} ${c}:${d}:${h} GMT`}const ime=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),ome=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");const e=ime.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");const[r,n,s,i,o,a,l,c,d]=e,h=kv(og(n)),f=il(s,"month",1,12),p=il(i,"day",1,31),g=qy(h,f,p,{hours:o,minutes:a,seconds:l,fractionalMilliseconds:c});return d.toUpperCase()!="Z"&&g.setTime(g.getTime()-vme(d)),g},ame=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),lme=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),cme=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),ume=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let e=ame.exec(t);if(e){const[r,n,s,i,o,a,l,c]=e;return qy(kv(og(i)),xS(s),il(n,"day",1,31),{hours:o,minutes:a,seconds:l,fractionalMilliseconds:c})}if(e=lme.exec(t),e){const[r,n,s,i,o,a,l,c]=e;return fme(qy(dme(i),xS(s),il(n,"day",1,31),{hours:o,minutes:a,seconds:l,fractionalMilliseconds:c}))}if(e=cme.exec(t),e){const[r,n,s,i,o,a,l,c]=e;return qy(kv(og(c)),xS(n),il(s.trimLeft(),"day",1,31),{hours:i,minutes:o,seconds:a,fractionalMilliseconds:l})}throw new TypeError("Invalid RFC-7231 date-time value")},qy=(t,e,r,n)=>{const s=e-1;return gme(t,s,r),new Date(Date.UTC(t,s,r,il(n.hours,"hour",0,23),il(n.minutes,"minute",0,59),il(n.seconds,"seconds",0,60),yme(n.fractionalMilliseconds)))},dme=t=>{const e=new Date().getUTCFullYear(),r=Math.floor(e/100)*100+kv(og(t));return r<e?r+100:r},hme=50*365*24*60*60*1e3,fme=t=>t.getTime()-new Date().getTime()>hme?new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())):t,xS=t=>{const e=Ij.indexOf(t);if(e<0)throw new TypeError(`Invalid month: ${t}`);return e+1},pme=[31,28,31,30,31,30,31,31,30,31,30,31],gme=(t,e,r)=>{let n=pme[e];if(e===1&&mme(t)&&(n=29),r>n)throw new TypeError(`Invalid day for ${Ij[e]} in ${t}: ${r}`)},mme=t=>t%4===0&&(t%100!==0||t%400===0),il=(t,e,r,n)=>{const s=nme(og(t));if(s<r||s>n)throw new TypeError(`${e} must be between ${r} and ${n}, inclusive`);return s},yme=t=>t==null?0:eme("0."+t)*1e3,vme=t=>{const e=t[0];let r=1;if(e=="+")r=1;else if(e=="-")r=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);const n=Number(t.substring(1,3)),s=Number(t.substring(4,6));return r*(n*60+s)*60*1e3},og=t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)},xme=(t,e,r,n,s,i)=>{if(e!=null&&e[r]!==void 0){const o=n();if(o.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");t=t.replace(s,i?o.split("/").map(a=>Ev(a)).join("/"):Ev(o))}else throw new Error("No value provided for input HTTP label: "+r+".");return t};function nu(t,e){return new wme(t,e)}class wme{constructor(e,r){this.input=e,this.context=r,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){const{hostname:e,protocol:r="https",port:n,path:s}=await this.context.endpoint();this.path=s;for(const i of this.resolvePathStack)i(this.path);return new jr({protocol:r,hostname:this.hostname||e,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(r=>{this.path=`${r!=null&&r.endsWith("/")?r.slice(0,-1):r||""}`+e}),this}p(e,r,n,s){return this.resolvePathStack.push(i=>{this.path=xme(i,this.input,e,r,n,s)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}function bme(t,e,r){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=r}class Sme{constructor(e){this.authSchemes=new Map;for(const[r,n]of Object.entries(e))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}const _me=t=>e=>rz(e)&&e.expiration.getTime()-Date.now()<t,Cme=3e5,Eme=_me(Cme),rz=t=>t.expiration!==void 0,kme=(t,e,r)=>{if(t===void 0)return;const n=typeof t!="function"?async()=>Promise.resolve(t):t;let s,i,o,a=!1;const l=async c=>{i||(i=n(c));try{s=await i,o=!0,a=!1}finally{i=void 0}return s};return e===void 0?async c=>((!o||c!=null&&c.forceRefresh)&&(s=await l(c)),s):async c=>((!o||c!=null&&c.forceRefresh)&&(s=await l(c)),a?s:r(s)?(e(s)&&await l(c),s):(a=!0,s))},Tme=(t,e,r)=>{let n,s,i,o=!1;const a=async()=>{s||(s=t());try{n=await s,i=!0,o=!1}finally{s=void 0}return n};return async l=>((!i||l!=null&&l.forceRefresh)&&(n=await a()),n)},jme=t=>(t.sigv4aSigningRegionSet=wd(t.sigv4aSigningRegionSet),t),Ame="X-Amz-Algorithm",Pme="X-Amz-Credential",nz="X-Amz-Date",Nme="X-Amz-SignedHeaders",Rme="X-Amz-Expires",sz="X-Amz-Signature",iz="X-Amz-Security-Token",oz="authorization",az=nz.toLowerCase(),Ome="date",Mme=[oz,az,Ome],Ime=sz.toLowerCase(),JE="x-amz-content-sha256",Dme=iz.toLowerCase(),Fme={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Lme=/^proxy-/,Bme=/^sec-/,wS="AWS4-HMAC-SHA256",$me="AWS4-HMAC-SHA256-PAYLOAD",Ume="UNSIGNED-PAYLOAD",Vme=50,lz="aws4_request",zme=60*60*24*7,Fm={},bS=[],SS=(t,e,r)=>`${t}/${e}/${r}/${lz}`,Hme=async(t,e,r,n,s)=>{const i=await cI(t,e.secretAccessKey,e.accessKeyId),o=`${r}:${n}:${s}:${Qn(i)}:${e.sessionToken}`;if(o in Fm)return Fm[o];for(bS.push(o);bS.length>Vme;)delete Fm[bS.shift()];let a=`AWS4${e.secretAccessKey}`;for(const l of[r,n,s,lz])a=await cI(t,a,l);return Fm[o]=a},cI=(t,e,r)=>{const n=new t(e);return n.update(Yd(r)),n.digest()},uI=({headers:t},e,r)=>{const n={};for(const s of Object.keys(t).sort()){if(t[s]==null)continue;const i=s.toLowerCase();(i in Fme||e!=null&&e.has(i)||Lme.test(i)||Bme.test(i))&&(!r||r&&!r.has(i))||(n[i]=t[s].trim().replace(/\s+/g," "))}return n},cz=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]",_S=async({headers:t,body:e},r)=>{for(const n of Object.keys(t))if(n.toLowerCase()===JE)return t[n];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||cz(e)){const n=new r;return n.update(Yd(e)),Qn(await n.digest())}return Ume};class Wme{format(e){const r=[];for(const i of Object.keys(e)){const o=zc(i);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}const n=new Uint8Array(r.reduce((i,o)=>i+o.byteLength,0));let s=0;for(const i of r)n.set(i,s),s+=i.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":const n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":const a=zc(e.value),l=new DataView(new ArrayBuffer(3+a.byteLength));l.setUint8(0,7),l.setUint16(1,a.byteLength,!1);const c=new Uint8Array(l.buffer);return c.set(a,3),c;case"timestamp":const d=new Uint8Array(9);return d[0]=8,d.set(Gme.fromNumber(e.value.valueOf()).bytes,1),d;case"uuid":if(!qme.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const h=new Uint8Array(17);return h[0]=9,h.set(ZV(e.value.replace(/\-/g,"")),1),h}}}var dI;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(dI||(dI={}));const qme=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;let Gme=class uz{constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(e));n>-1&&s>0;n--,s/=256)r[n]=s;return e<0&&hI(r),new uz(r)}valueOf(){const e=this.bytes.slice(0),r=e[0]&128;return r&&hI(e),parseInt(Qn(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function hI(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}const Kme=(t,e)=>{t=t.toLowerCase();for(const r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},Yme=(t,e={})=>{var s,i;const{headers:r,query:n={}}=jr.clone(t);for(const o of Object.keys(r)){const a=o.toLowerCase();(a.slice(0,6)==="x-amz-"&&!((s=e.unhoistableHeaders)!=null&&s.has(a))||(i=e.hoistableHeaders)!=null&&i.has(a))&&(n[o]=r[o],delete r[o])}return{...t,headers:r,query:n}},fI=t=>{t=jr.clone(t);for(const e of Object.keys(t.headers))Mme.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},Xme=({query:t={}})=>{const e=[],r={};for(const n of Object.keys(t)){if(n.toLowerCase()===Ime)continue;const s=Cc(n);e.push(s);const i=t[n];typeof i=="string"?r[s]=`${s}=${Cc(i)}`:Array.isArray(i)&&(r[s]=i.slice(0).reduce((o,a)=>o.concat([`${s}=${Cc(a)}`]),[]).sort().join("&"))}return e.sort().map(n=>r[n]).filter(n=>n).join("&")},Jme=t=>Zme(t).toISOString().replace(/\.\d{3}Z$/,"Z"),Zme=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t;class Qme{constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o=!0}){this.service=s,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=Mi(n),this.credentialProvider=Mi(r)}createCanonicalRequest(e,r,n){const s=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${Xme(e)}
${s.map(i=>`${i}:${r[i]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(e,r,n,s){const i=new this.sha256;i.update(Yd(n));const o=await i.digest();return`${s}
${e}
${r}
${Qn(o)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const r=[];for(const i of e.split("/"))(i==null?void 0:i.length)!==0&&i!=="."&&(i===".."?r.pop():r.push(i));const n=`${e!=null&&e.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&(e!=null&&e.endsWith("/"))?"/":""}`;return Cc(n).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){const r=Jme(e).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}}class ZE extends Qme{constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o=!0}){super({applyChecksum:e,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o}),this.headerFormatter=new Wme}async presign(e,r={}){const{signingDate:n=new Date,expiresIn:s=3600,unsignableHeaders:i,unhoistableHeaders:o,signableHeaders:a,hoistableHeaders:l,signingRegion:c,signingService:d}=r,h=await this.credentialProvider();this.validateResolvedCredentials(h);const f=c??await this.regionProvider(),{longDate:p,shortDate:g}=this.formatDate(n);if(s>zme)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const y=SS(g,f,d??this.service),v=Yme(fI(e),{unhoistableHeaders:o,hoistableHeaders:l});h.sessionToken&&(v.query[iz]=h.sessionToken),v.query[Ame]=wS,v.query[Pme]=`${h.accessKeyId}/${y}`,v.query[nz]=p,v.query[Rme]=s.toString(10);const m=uI(v,i,a);return v.query[Nme]=this.getCanonicalHeaderList(m),v.query[sz]=await this.getSignature(p,y,this.getSigningKey(h,f,g,d),this.createCanonicalRequest(v,m,await _S(e,this.sha256))),v}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):e.message?this.signMessage(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:n=new Date,priorSignature:s,signingRegion:i,signingService:o}){const a=i??await this.regionProvider(),{shortDate:l,longDate:c}=this.formatDate(n),d=SS(l,a,o??this.service),h=await _S({headers:{},body:r},this.sha256),f=new this.sha256;f.update(e);const p=Qn(await f.digest()),g=[$me,c,d,s,p,h].join(`
`);return this.signString(g,{signingDate:n,signingRegion:a,signingService:o})}async signMessage(e,{signingDate:r=new Date,signingRegion:n,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:r,signingRegion:n,signingService:s,priorSignature:e.priorSignature}).then(o=>({message:e.message,signature:o}))}async signString(e,{signingDate:r=new Date,signingRegion:n,signingService:s}={}){const i=await this.credentialProvider();this.validateResolvedCredentials(i);const o=n??await this.regionProvider(),{shortDate:a}=this.formatDate(r),l=new this.sha256(await this.getSigningKey(i,o,a,s));return l.update(Yd(e)),Qn(await l.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:s,signingRegion:i,signingService:o}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const l=i??await this.regionProvider(),c=fI(e),{longDate:d,shortDate:h}=this.formatDate(r),f=SS(h,l,o??this.service);c.headers[az]=d,a.sessionToken&&(c.headers[Dme]=a.sessionToken);const p=await _S(c,this.sha256);!Kme(JE,c.headers)&&this.applyChecksum&&(c.headers[JE]=p);const g=uI(c,s,n),y=await this.getSignature(d,f,this.getSigningKey(a,l,h,o),this.createCanonicalRequest(c,g,p));return c.headers[oz]=`${wS} Credential=${a.accessKeyId}/${f}, SignedHeaders=${this.getCanonicalHeaderList(g)}, Signature=${y}`,c}async getSignature(e,r,n,s){const i=await this.createStringToSign(e,r,s,wS),o=new this.sha256(await n);return o.update(Yd(i)),Qn(await o.digest())}getSigningKey(e,r,n,s){return Hme(this.sha256,e,n,r,s||this.service)}}const eye=t=>{let e=t.credentials,r=!!t.credentials,n;Object.defineProperty(t,"credentials",{set(c){c&&c!==e&&c!==n&&(r=!0),e=c;const d=tye(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),h=rye(t,d);r&&!h.attributed?(n=async f=>h(f).then(p=>gge(p,"CREDENTIALS_CODE","e")),n.memoized=h.memoized,n.configBound=h.configBound,n.attributed=!0):n=h},get(){return n},enumerable:!0,configurable:!0}),t.credentials=e;const{signingEscapePath:s=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:o}=t;let a;return t.signer?a=wd(t.signer):t.regionInfoProvider?a=()=>wd(t.region)().then(async c=>[await t.regionInfoProvider(c,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},c]).then(([c,d])=>{const{signingRegion:h,signingService:f}=c;t.signingRegion=t.signingRegion||h||d,t.signingName=t.signingName||f||t.serviceId;const p={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},g=t.signerConstructor||ZE;return new g(p)}):a=async c=>{c=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await wd(t.region)(),properties:{}},c);const d=c.signingRegion,h=c.signingName;t.signingRegion=t.signingRegion||d,t.signingName=t.signingName||h||t.serviceId;const f={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},p=t.signerConstructor||ZE;return new p(f)},Object.assign(t,{systemClockOffset:i,signingEscapePath:s,signer:a})};function tye(t,{credentials:e,credentialDefaultProvider:r}){let n;return e?e!=null&&e.memoized?n=e:n=kme(e,Eme,rz):r?n=wd(r(Object.assign({},t,{parentClientConfig:t}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function rye(t,e){if(e.configBound)return e;const r=async n=>e({...n,callerClientConfig:t});return r.memoized=e.memoized,r.configBound=!0,r}const pI=typeof TextEncoder=="function"?new TextEncoder:null,nye=t=>{if(typeof t=="string"){if(pI)return pI.encode(t).byteLength;let e=t.length;for(let r=e-1;r>=0;r--){const n=t.charCodeAt(r);n>127&&n<=2047?e++:n>2047&&n<=65535&&(e+=2),n>=56320&&n<=57343&&r--}return e}else{if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size}throw new Error(`Body Length computation failed for ${t}`)},ql=(t,e)=>{const r=[];if(t&&r.push(t),e)for(const n of e)r.push(n);return r},Ta=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,Tv=()=>{let t=[],e=[],r=!1;const n=new Set,s=h=>h.sort((f,p)=>gI[p.step]-gI[f.step]||mI[p.priority||"normal"]-mI[f.priority||"normal"]),i=h=>{let f=!1;const p=g=>{const y=ql(g.name,g.aliases);if(y.includes(h)){f=!0;for(const v of y)n.delete(v);return!1}return!0};return t=t.filter(p),e=e.filter(p),f},o=h=>{let f=!1;const p=g=>{if(g.middleware===h){f=!0;for(const y of ql(g.name,g.aliases))n.delete(y);return!1}return!0};return t=t.filter(p),e=e.filter(p),f},a=h=>{var f;return t.forEach(p=>{h.add(p.middleware,{...p})}),e.forEach(p=>{h.addRelativeTo(p.middleware,{...p})}),(f=h.identifyOnResolve)==null||f.call(h,d.identifyOnResolve()),h},l=h=>{const f=[];return h.before.forEach(p=>{p.before.length===0&&p.after.length===0?f.push(p):f.push(...l(p))}),f.push(h),h.after.reverse().forEach(p=>{p.before.length===0&&p.after.length===0?f.push(p):f.push(...l(p))}),f},c=(h=!1)=>{const f=[],p=[],g={};return t.forEach(v=>{const m={...v,before:[],after:[]};for(const x of ql(m.name,m.aliases))g[x]=m;f.push(m)}),e.forEach(v=>{const m={...v,before:[],after:[]};for(const x of ql(m.name,m.aliases))g[x]=m;p.push(m)}),p.forEach(v=>{if(v.toMiddleware){const m=g[v.toMiddleware];if(m===void 0){if(h)return;throw new Error(`${v.toMiddleware} is not found when adding ${Ta(v.name,v.aliases)} middleware ${v.relation} ${v.toMiddleware}`)}v.relation==="after"&&m.after.push(v),v.relation==="before"&&m.before.push(v)}}),s(f).map(l).reduce((v,m)=>(v.push(...m),v),[])},d={add:(h,f={})=>{const{name:p,override:g,aliases:y}=f,v={step:"initialize",priority:"normal",middleware:h,...f},m=ql(p,y);if(m.length>0){if(m.some(x=>n.has(x))){if(!g)throw new Error(`Duplicate middleware name '${Ta(p,y)}'`);for(const x of m){const b=t.findIndex(C=>{var T;return C.name===x||((T=C.aliases)==null?void 0:T.some(O=>O===x))});if(b===-1)continue;const _=t[b];if(_.step!==v.step||v.priority!==_.priority)throw new Error(`"${Ta(_.name,_.aliases)}" middleware with ${_.priority} priority in ${_.step} step cannot be overridden by "${Ta(p,y)}" middleware with ${v.priority} priority in ${v.step} step.`);t.splice(b,1)}}for(const x of m)n.add(x)}t.push(v)},addRelativeTo:(h,f)=>{const{name:p,override:g,aliases:y}=f,v={middleware:h,...f},m=ql(p,y);if(m.length>0){if(m.some(x=>n.has(x))){if(!g)throw new Error(`Duplicate middleware name '${Ta(p,y)}'`);for(const x of m){const b=e.findIndex(C=>{var T;return C.name===x||((T=C.aliases)==null?void 0:T.some(O=>O===x))});if(b===-1)continue;const _=e[b];if(_.toMiddleware!==v.toMiddleware||_.relation!==v.relation)throw new Error(`"${Ta(_.name,_.aliases)}" middleware ${_.relation} "${_.toMiddleware}" middleware cannot be overridden by "${Ta(p,y)}" middleware ${v.relation} "${v.toMiddleware}" middleware.`);e.splice(b,1)}}for(const x of m)n.add(x)}e.push(v)},clone:()=>a(Tv()),use:h=>{h.applyToStack(d)},remove:h=>typeof h=="string"?i(h):o(h),removeByTag:h=>{let f=!1;const p=g=>{const{tags:y,name:v,aliases:m}=g;if(y&&y.includes(h)){const x=ql(v,m);for(const b of x)n.delete(b);return f=!0,!1}return!0};return t=t.filter(p),e=e.filter(p),f},concat:h=>{var p;const f=a(Tv());return f.use(h),f.identifyOnResolve(r||f.identifyOnResolve()||(((p=h.identifyOnResolve)==null?void 0:p.call(h))??!1)),f},applyToStack:a,identify:()=>c(!0).map(h=>{const f=h.step??h.relation+" "+h.toMiddleware;return Ta(h.name,h.aliases)+" - "+f}),identifyOnResolve(h){return typeof h=="boolean"&&(r=h),r},resolve:(h,f)=>{for(const p of c().map(g=>g.middleware).reverse())h=p(h,f);return r&&console.log(d.identify()),h}};return d},gI={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},mI={high:3,normal:2,low:1};class sye{constructor(e){this.config=e,this.middlewareStack=Tv()}send(e,r,n){const s=typeof r!="function"?r:void 0,i=typeof r=="function"?r:n,o=s===void 0&&this.config.cacheMiddleware===!0;let a;if(o){this.handlers||(this.handlers=new WeakMap);const l=this.handlers;l.has(e.constructor)?a=l.get(e.constructor):(a=e.resolveMiddleware(this.middlewareStack,this.config,s),l.set(e.constructor,a))}else delete this.handlers,a=e.resolveMiddleware(this.middlewareStack,this.config,s);if(i)a(e).then(l=>i(null,l.output),l=>i(l)).catch(()=>{});else return a(e).then(l=>l.output)}destroy(){var e,r,n;(n=(r=(e=this.config)==null?void 0:e.requestHandler)==null?void 0:r.destroy)==null||n.call(r),delete this.handlers}}class Fl{constructor(){this.middlewareStack=Tv()}static classBuilder(){return new iye}resolveMiddlewareWithContext(e,r,n,{middlewareFn:s,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:l,smithyContext:c,additionalContext:d,CommandCtor:h}){for(const v of s.bind(this)(h,e,r,n))this.middlewareStack.use(v);const f=e.concat(this.middlewareStack),{logger:p}=r,g={logger:p,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:l,[qE]:{commandInstance:this,...c},...d},{requestHandler:y}=r;return f.resolve(v=>y.handle(v.request,n||{}),g)}}class iye{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=e=>e,this._outputFilterSensitiveLog=e=>e,this._serializer=null,this._deserializer=null}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,r,n={}){return this._smithyContext={service:e,operation:r,...n},this}c(e={}){return this._additionalContext=e,this}n(e,r){return this._clientName=e,this._commandName=r,this}f(e=n=>n,r=n=>n){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=r,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){const e=this;let r;return r=class extends Fl{static getEndpointParameterInstructions(){return e._ep}constructor(...[n]){super(),this.serialize=e._serializer,this.deserialize=e._deserializer,this.input=n??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(n,s,i){return this.resolveMiddlewareWithContext(n,s,i,{CommandCtor:r,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog,outputFilterSensitiveLog:e._outputFilterSensitiveLog,smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}}const Cr="***SensitiveInformation***";class rd extends Error{constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;const r=e;return rd.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;const r=e;return this===rd?rd.isInstance(e):rd.isInstance(e)?r.name&&this.name?this.prototype.isPrototypeOf(e)||r.name===this.name:this.prototype.isPrototypeOf(e):!1}}const Hn=(t,e={})=>{Object.entries(e).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(t[n]==null||t[n]==="")&&(t[n]=s)});const r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},oye=({output:t,parsedBody:e,exceptionCtor:r,errorCode:n})=>{const s=lye(t),i=s.httpStatusCode?s.httpStatusCode+"":void 0,o=new r({name:(e==null?void 0:e.code)||(e==null?void 0:e.Code)||n||i||"UnknownError",$fault:"client",$metadata:s});throw Hn(o,e)},aye=t=>({output:e,parsedBody:r,errorCode:n})=>{oye({output:e,parsedBody:r,exceptionCtor:t,errorCode:n})},lye=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),cye=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},uye=t=>{const e=[];for(const r in Cv){const n=Cv[r];t[n]!==void 0&&e.push({algorithmId:()=>n,checksumConstructor:()=>t[n]})}return{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},dye=t=>{const e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},hye=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),fye=t=>{const e={};return e.retryStrategy=t.retryStrategy(),e},pye=t=>Object.assign(uye(t),hye(t)),gye=t=>Object.assign(dye(t),fye(t)),dz=t=>{const e="#text";for(const r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=dz(t[r]));return t},Mr=t=>t!=null;class Fj{trace(){}debug(){}info(){}warn(){}error(){}}function xt(t,e,r){let n,s,i;if(typeof e>"u"&&typeof r>"u")n={},i=t;else{if(n=t,typeof e=="function")return s=e,i=r,mye(n,s,i);i=e}for(const o of Object.keys(i)){if(!Array.isArray(i[o])){n[o]=i[o];continue}yye(n,null,i,o)}return n}const mye=(t,e,r)=>xt(t,Object.entries(r).reduce((n,[s,i])=>(Array.isArray(i)?n[s]=i:typeof i=="function"?n[s]=[e,i()]:n[s]=[e,i],n),{})),yye=(t,e,r,n)=>{let[s,i]=r[n];if(typeof i=="function"){let o;const a=s===void 0&&(o=i())!=null,l=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?t[n]=o:l&&(t[n]=i())}else{const o=s===void 0&&i!=null,a=typeof s=="function"&&!!s(i)||typeof s!="function"&&!!s;(o||a)&&(t[n]=i)}},hz=t=>t.toISOString().replace(".000Z","Z"),vye=(t,e)=>Dg(t,e).then(r=>e.utf8Encoder(r));var Lj={},ww={};(function(t){const e=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=e+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",n="["+e+"]["+r+"]*",s=new RegExp("^"+n+"$"),i=function(a,l){const c=[];let d=l.exec(a);for(;d;){const h=[];h.startIndex=l.lastIndex-d[0].length;const f=d.length;for(let p=0;p<f;p++)h.push(d[p]);c.push(h),d=l.exec(a)}return c},o=function(a){const l=s.exec(a);return!(l===null||typeof l>"u")};t.isExist=function(a){return typeof a<"u"},t.isEmptyObject=function(a){return Object.keys(a).length===0},t.merge=function(a,l,c){if(l){const d=Object.keys(l),h=d.length;for(let f=0;f<h;f++)c==="strict"?a[d[f]]=[l[d[f]]]:a[d[f]]=l[d[f]]}},t.getValue=function(a){return t.isExist(a)?a:""},t.isName=o,t.getAllMatches=i,t.nameRegexp=n})(ww);const Bj=ww,xye={allowBooleanAttributes:!1,unpairedTags:[]};Lj.validate=function(t,e){e=Object.assign({},xye,e);const r=[];let n=!1,s=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let i=0;i<t.length;i++)if(t[i]==="<"&&t[i+1]==="?"){if(i+=2,i=vI(t,i),i.err)return i}else if(t[i]==="<"){let o=i;if(i++,t[i]==="!"){i=xI(t,i);continue}else{let a=!1;t[i]==="/"&&(a=!0,i++);let l="";for(;i<t.length&&t[i]!==">"&&t[i]!==" "&&t[i]!=="	"&&t[i]!==`
`&&t[i]!=="\r";i++)l+=t[i];if(l=l.trim(),l[l.length-1]==="/"&&(l=l.substring(0,l.length-1),i--),!Tye(l)){let h;return l.trim().length===0?h="Invalid space after '<'.":h="Tag '"+l+"' is an invalid name.",ur("InvalidTag",h,Tn(t,i))}const c=Sye(t,i);if(c===!1)return ur("InvalidAttr","Attributes for '"+l+"' have open quote.",Tn(t,i));let d=c.value;if(i=c.index,d[d.length-1]==="/"){const h=i-d.length;d=d.substring(0,d.length-1);const f=wI(d,e);if(f===!0)n=!0;else return ur(f.err.code,f.err.msg,Tn(t,h+f.err.line))}else if(a)if(c.tagClosed){if(d.trim().length>0)return ur("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",Tn(t,o));if(r.length===0)return ur("InvalidTag","Closing tag '"+l+"' has not been opened.",Tn(t,o));{const h=r.pop();if(l!==h.tagName){let f=Tn(t,h.tagStartPos);return ur("InvalidTag","Expected closing tag '"+h.tagName+"' (opened in line "+f.line+", col "+f.col+") instead of closing tag '"+l+"'.",Tn(t,o))}r.length==0&&(s=!0)}}else return ur("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",Tn(t,i));else{const h=wI(d,e);if(h!==!0)return ur(h.err.code,h.err.msg,Tn(t,i-d.length+h.err.line));if(s===!0)return ur("InvalidXml","Multiple possible root nodes found.",Tn(t,i));e.unpairedTags.indexOf(l)!==-1||r.push({tagName:l,tagStartPos:o}),n=!0}for(i++;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="!"){i++,i=xI(t,i);continue}else if(t[i+1]==="?"){if(i=vI(t,++i),i.err)return i}else break;else if(t[i]==="&"){const h=Eye(t,i);if(h==-1)return ur("InvalidChar","char '&' is not expected.",Tn(t,i));i=h}else if(s===!0&&!yI(t[i]))return ur("InvalidXml","Extra text at the end",Tn(t,i));t[i]==="<"&&i--}}else{if(yI(t[i]))continue;return ur("InvalidChar","char '"+t[i]+"' is not expected.",Tn(t,i))}if(n){if(r.length==1)return ur("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",Tn(t,r[0].tagStartPos));if(r.length>0)return ur("InvalidXml","Invalid '"+JSON.stringify(r.map(i=>i.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return ur("InvalidXml","Start tag expected.",1);return!0};function yI(t){return t===" "||t==="	"||t===`
`||t==="\r"}function vI(t,e){const r=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){const n=t.substr(r,e-r);if(e>5&&n==="xml")return ur("InvalidXml","XML declaration allowed only at the start of the document.",Tn(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function xI(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let r=1;for(e+=8;e<t.length;e++)if(t[e]==="<")r++;else if(t[e]===">"&&(r--,r===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}const wye='"',bye="'";function Sye(t,e){let r="",n="",s=!1;for(;e<t.length;e++){if(t[e]===wye||t[e]===bye)n===""?n=t[e]:n!==t[e]||(n="");else if(t[e]===">"&&n===""){s=!0;break}r+=t[e]}return n!==""?!1:{value:r,index:e,tagClosed:s}}const _ye=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function wI(t,e){const r=Bj.getAllMatches(t,_ye),n={};for(let s=0;s<r.length;s++){if(r[s][1].length===0)return ur("InvalidAttr","Attribute '"+r[s][2]+"' has no space in starting.",rf(r[s]));if(r[s][3]!==void 0&&r[s][4]===void 0)return ur("InvalidAttr","Attribute '"+r[s][2]+"' is without value.",rf(r[s]));if(r[s][3]===void 0&&!e.allowBooleanAttributes)return ur("InvalidAttr","boolean attribute '"+r[s][2]+"' is not allowed.",rf(r[s]));const i=r[s][2];if(!kye(i))return ur("InvalidAttr","Attribute '"+i+"' is an invalid name.",rf(r[s]));if(!n.hasOwnProperty(i))n[i]=1;else return ur("InvalidAttr","Attribute '"+i+"' is repeated.",rf(r[s]))}return!0}function Cye(t,e){let r=/\d/;for(t[e]==="x"&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(r))break}return-1}function Eye(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,Cye(t,e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(t[e]===";")break;return-1}return e}function ur(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function kye(t){return Bj.isName(t)}function Tye(t){return Bj.isName(t)}function Tn(t,e){const r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function rf(t){return t.startIndex+t[1].length}var $j={};const fz={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,r){return t}},jye=function(t){return Object.assign({},fz,t)};$j.buildOptions=jye;$j.defaultOptions=fz;let Aye=class{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,r){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:r})}addChild(e){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}};var Pye=Aye;const Nye=ww;function Rye(t,e){const r={};if(t[e+3]==="O"&&t[e+4]==="C"&&t[e+5]==="T"&&t[e+6]==="Y"&&t[e+7]==="P"&&t[e+8]==="E"){e=e+9;let n=1,s=!1,i=!1,o="";for(;e<t.length;e++)if(t[e]==="<"&&!i){if(s&&Iye(t,e))e+=7,[entityName,val,e]=Oye(t,e+1),val.indexOf("&")===-1&&(r[Bye(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(s&&Dye(t,e))e+=8;else if(s&&Fye(t,e))e+=8;else if(s&&Lye(t,e))e+=9;else if(Mye)i=!0;else throw new Error("Invalid DOCTYPE");n++,o=""}else if(t[e]===">"){if(i?t[e-1]==="-"&&t[e-2]==="-"&&(i=!1,n--):n--,n===0)break}else t[e]==="["?s=!0:o+=t[e];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:e}}function Oye(t,e){let r="";for(;e<t.length&&t[e]!=="'"&&t[e]!=='"';e++)r+=t[e];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");const n=t[e++];let s="";for(;e<t.length&&t[e]!==n;e++)s+=t[e];return[r,s,e]}function Mye(t,e){return t[e+1]==="!"&&t[e+2]==="-"&&t[e+3]==="-"}function Iye(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="N"&&t[e+4]==="T"&&t[e+5]==="I"&&t[e+6]==="T"&&t[e+7]==="Y"}function Dye(t,e){return t[e+1]==="!"&&t[e+2]==="E"&&t[e+3]==="L"&&t[e+4]==="E"&&t[e+5]==="M"&&t[e+6]==="E"&&t[e+7]==="N"&&t[e+8]==="T"}function Fye(t,e){return t[e+1]==="!"&&t[e+2]==="A"&&t[e+3]==="T"&&t[e+4]==="T"&&t[e+5]==="L"&&t[e+6]==="I"&&t[e+7]==="S"&&t[e+8]==="T"}function Lye(t,e){return t[e+1]==="!"&&t[e+2]==="N"&&t[e+3]==="O"&&t[e+4]==="T"&&t[e+5]==="A"&&t[e+6]==="T"&&t[e+7]==="I"&&t[e+8]==="O"&&t[e+9]==="N"}function Bye(t){if(Nye.isName(t))return t;throw new Error(`Invalid entity name ${t}`)}var $ye=Rye;const Uye=/^[-+]?0x[a-fA-F0-9]+$/,Vye=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,zye={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Hye(t,e={}){if(e=Object.assign({},zye,e),!t||typeof t!="string")return t;let r=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(r))return t;if(t==="0")return 0;if(e.hex&&Uye.test(r))return qye(r,16);if(r.search(/[eE]/)!==-1){const n=r.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(n){if(e.leadingZeros)r=(n[1]||"")+n[3];else if(!(n[2]==="0"&&n[3][0]==="."))return t;return e.eNotation?Number(r):t}else return t}else{const n=Vye.exec(r);if(n){const s=n[1],i=n[2];let o=Wye(n[3]);if(!e.leadingZeros&&i.length>0&&s&&r[2]!==".")return t;if(!e.leadingZeros&&i.length>0&&!s&&r[1]!==".")return t;if(e.leadingZeros&&i===t)return 0;{const a=Number(r),l=""+a;return l.search(/[eE]/)!==-1?e.eNotation?a:t:r.indexOf(".")!==-1?l==="0"&&o===""||l===o||s&&l==="-"+o?a:t:i?o===l||s+o===l?a:t:r===l||r===s+l?a:t}}else return t}}function Wye(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substr(0,t.length-1))),t}function qye(t,e){if(parseInt)return parseInt(t,e);if(Number.parseInt)return Number.parseInt(t,e);if(window&&window.parseInt)return window.parseInt(t,e);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}var Gye=Hye;const pz=ww,nf=Pye,Kye=$ye,Yye=Gye;let Xye=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""},num_dec:{regex:/&#([0-9]{1,7});/g,val:(r,n)=>String.fromCharCode(Number.parseInt(n,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(r,n)=>String.fromCharCode(Number.parseInt(n,16))}},this.addExternalEntities=Jye,this.parseXml=r0e,this.parseTextData=Zye,this.resolveNameSpace=Qye,this.buildAttributesMap=t0e,this.isItStopNode=o0e,this.replaceEntitiesValue=s0e,this.readStopNodeData=l0e,this.saveTextToParentTag=i0e,this.addChild=n0e}};function Jye(t){const e=Object.keys(t);for(let r=0;r<e.length;r++){const n=e[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:t[n]}}}function Zye(t,e,r,n,s,i,o){if(t!==void 0&&(this.options.trimValues&&!n&&(t=t.trim()),t.length>0)){o||(t=this.replaceEntitiesValue(t));const a=this.options.tagValueProcessor(e,t,r,s,i);return a==null?t:typeof a!=typeof t||a!==t?a:this.options.trimValues?ek(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?ek(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function Qye(t){if(this.options.removeNSPrefix){const e=t.split(":"),r=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=r+e[1])}return t}const e0e=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function t0e(t,e,r){if(!this.options.ignoreAttributes&&typeof t=="string"){const n=pz.getAllMatches(t,e0e),s=n.length,i={};for(let o=0;o<s;o++){const a=this.resolveNameSpace(n[o][1]);let l=n[o][4],c=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(c=this.options.transformAttributeName(c)),c==="__proto__"&&(c="#__proto__"),l!==void 0){this.options.trimValues&&(l=l.trim()),l=this.replaceEntitiesValue(l);const d=this.options.attributeValueProcessor(a,l,e);d==null?i[c]=l:typeof d!=typeof l||d!==l?i[c]=d:i[c]=ek(l,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[c]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){const o={};return o[this.options.attributesGroupName]=i,o}return i}}const r0e=function(t){t=t.replace(/\r\n?/g,`
`);const e=new nf("!xml");let r=e,n="",s="";for(let i=0;i<t.length;i++)if(t[i]==="<")if(t[i+1]==="/"){const a=dc(t,">",i,"Closing Tag is not closed.");let l=t.substring(i+2,a).trim();if(this.options.removeNSPrefix){const h=l.indexOf(":");h!==-1&&(l=l.substr(h+1))}this.options.transformTagName&&(l=this.options.transformTagName(l)),r&&(n=this.saveTextToParentTag(n,r,s));const c=s.substring(s.lastIndexOf(".")+1);if(l&&this.options.unpairedTags.indexOf(l)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${l}>`);let d=0;c&&this.options.unpairedTags.indexOf(c)!==-1?(d=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):d=s.lastIndexOf("."),s=s.substring(0,d),r=this.tagsNodeStack.pop(),n="",i=a}else if(t[i+1]==="?"){let a=QE(t,i,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,s),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){const l=new nf(a.tagName);l.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(l[":@"]=this.buildAttributesMap(a.tagExp,s,a.tagName)),this.addChild(r,l,s)}i=a.closeIndex+1}else if(t.substr(i+1,3)==="!--"){const a=dc(t,"-->",i+4,"Comment is not closed.");if(this.options.commentPropName){const l=t.substring(i+4,a-2);n=this.saveTextToParentTag(n,r,s),r.add(this.options.commentPropName,[{[this.options.textNodeName]:l}])}i=a}else if(t.substr(i+1,2)==="!D"){const a=Kye(t,i);this.docTypeEntities=a.entities,i=a.i}else if(t.substr(i+1,2)==="!["){const a=dc(t,"]]>",i,"CDATA is not closed.")-2,l=t.substring(i+9,a);n=this.saveTextToParentTag(n,r,s);let c=this.parseTextData(l,r.tagname,s,!0,!1,!0,!0);c==null&&(c=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:l}]):r.add(this.options.textNodeName,c),i=a+2}else{let a=QE(t,i,this.options.removeNSPrefix),l=a.tagName;const c=a.rawTagName;let d=a.tagExp,h=a.attrExpPresent,f=a.closeIndex;this.options.transformTagName&&(l=this.options.transformTagName(l)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,s,!1));const p=r;if(p&&this.options.unpairedTags.indexOf(p.tagname)!==-1&&(r=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),l!==e.tagname&&(s+=s?"."+l:l),this.isItStopNode(this.options.stopNodes,s,l)){let g="";if(d.length>0&&d.lastIndexOf("/")===d.length-1)l[l.length-1]==="/"?(l=l.substr(0,l.length-1),s=s.substr(0,s.length-1),d=l):d=d.substr(0,d.length-1),i=a.closeIndex;else if(this.options.unpairedTags.indexOf(l)!==-1)i=a.closeIndex;else{const v=this.readStopNodeData(t,c,f+1);if(!v)throw new Error(`Unexpected end of ${c}`);i=v.i,g=v.tagContent}const y=new nf(l);l!==d&&h&&(y[":@"]=this.buildAttributesMap(d,s,l)),g&&(g=this.parseTextData(g,l,s,!0,h,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),y.add(this.options.textNodeName,g),this.addChild(r,y,s)}else{if(d.length>0&&d.lastIndexOf("/")===d.length-1){l[l.length-1]==="/"?(l=l.substr(0,l.length-1),s=s.substr(0,s.length-1),d=l):d=d.substr(0,d.length-1),this.options.transformTagName&&(l=this.options.transformTagName(l));const g=new nf(l);l!==d&&h&&(g[":@"]=this.buildAttributesMap(d,s,l)),this.addChild(r,g,s),s=s.substr(0,s.lastIndexOf("."))}else{const g=new nf(l);this.tagsNodeStack.push(r),l!==d&&h&&(g[":@"]=this.buildAttributesMap(d,s,l)),this.addChild(r,g,s),r=g}n="",i=f}}else n+=t[i];return e.child};function n0e(t,e,r){const n=this.options.updateTag(e.tagname,r,e[":@"]);n===!1||(typeof n=="string"&&(e.tagname=n),t.addChild(e))}const s0e=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){const r=this.docTypeEntities[e];t=t.replace(r.regx,r.val)}for(let e in this.lastEntities){const r=this.lastEntities[e];t=t.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const r=this.htmlEntities[e];t=t.replace(r.regex,r.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function i0e(t,e,r,n){return t&&(n===void 0&&(n=Object.keys(e.child).length===0),t=this.parseTextData(t,e.tagname,r,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,n),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function o0e(t,e,r){const n="*."+r;for(const s in t){const i=t[s];if(n===i||e===i)return!0}return!1}function a0e(t,e,r=">"){let n,s="";for(let i=e;i<t.length;i++){let o=t[i];if(n)o===n&&(n="");else if(o==='"'||o==="'")n=o;else if(o===r[0])if(r[1]){if(t[i+1]===r[1])return{data:s,index:i}}else return{data:s,index:i};else o==="	"&&(o=" ");s+=o}}function dc(t,e,r,n){const s=t.indexOf(e,r);if(s===-1)throw new Error(n);return s+e.length-1}function QE(t,e,r,n=">"){const s=a0e(t,e+1,n);if(!s)return;let i=s.data;const o=s.index,a=i.search(/\s/);let l=i,c=!0;a!==-1&&(l=i.substring(0,a),i=i.substring(a+1).trimStart());const d=l;if(r){const h=l.indexOf(":");h!==-1&&(l=l.substr(h+1),c=l!==s.data.substr(h+1))}return{tagName:l,tagExp:i,closeIndex:o,attrExpPresent:c,rawTagName:d}}function l0e(t,e,r){const n=r;let s=1;for(;r<t.length;r++)if(t[r]==="<")if(t[r+1]==="/"){const i=dc(t,">",r,`${e} is not closed`);if(t.substring(r+2,i).trim()===e&&(s--,s===0))return{tagContent:t.substring(n,r),i};r=i}else if(t[r+1]==="?")r=dc(t,"?>",r+1,"StopNode is not closed.");else if(t.substr(r+1,3)==="!--")r=dc(t,"-->",r+3,"StopNode is not closed.");else if(t.substr(r+1,2)==="![")r=dc(t,"]]>",r,"StopNode is not closed.")-2;else{const i=QE(t,r,">");i&&((i&&i.tagName)===e&&i.tagExp[i.tagExp.length-1]!=="/"&&s++,r=i.closeIndex)}}function ek(t,e,r){if(e&&typeof t=="string"){const n=t.trim();return n==="true"?!0:n==="false"?!1:Yye(t,r)}else return pz.isExist(t)?t:""}var c0e=Xye,gz={};function u0e(t,e){return mz(t,e)}function mz(t,e,r){let n;const s={};for(let i=0;i<t.length;i++){const o=t[i],a=d0e(o);let l="";if(r===void 0?l=a:l=r+"."+a,a===e.textNodeName)n===void 0?n=o[a]:n+=""+o[a];else{if(a===void 0)continue;if(o[a]){let c=mz(o[a],e,l);const d=f0e(c,e);o[":@"]?h0e(c,o[":@"],l,e):Object.keys(c).length===1&&c[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?c=c[e.textNodeName]:Object.keys(c).length===0&&(e.alwaysCreateTextNode?c[e.textNodeName]="":c=""),s[a]!==void 0&&s.hasOwnProperty(a)?(Array.isArray(s[a])||(s[a]=[s[a]]),s[a].push(c)):e.isArray(a,l,d)?s[a]=[c]:s[a]=c}}}return typeof n=="string"?n.length>0&&(s[e.textNodeName]=n):n!==void 0&&(s[e.textNodeName]=n),s}function d0e(t){const e=Object.keys(t);for(let r=0;r<e.length;r++){const n=e[r];if(n!==":@")return n}}function h0e(t,e,r,n){if(e){const s=Object.keys(e),i=s.length;for(let o=0;o<i;o++){const a=s[o];n.isArray(a,r+"."+a,!0,!0)?t[a]=[e[a]]:t[a]=e[a]}}}function f0e(t,e){const{textNodeName:r}=e,n=Object.keys(t).length;return!!(n===0||n===1&&(t[r]||typeof t[r]=="boolean"||t[r]===0))}gz.prettify=u0e;const{buildOptions:p0e}=$j,g0e=c0e,{prettify:m0e}=gz,y0e=Lj;let v0e=class{constructor(e){this.externalEntities={},this.options=p0e(e)}parse(e,r){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});const i=y0e.validate(e,r);if(i!==!0)throw Error(`${i.err.msg}:${i.err.line}:${i.err.col}`)}const n=new g0e(this.options);n.addExternalEntities(this.externalEntities);const s=n.parseXml(e);return this.options.preserveOrder||s===void 0?s:m0e(s,this.options)}addEntity(e,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=r}};var x0e=v0e;const w0e=`
`;function b0e(t,e){let r="";return e.format&&e.indentBy.length>0&&(r=w0e),yz(t,e,"",r)}function yz(t,e,r,n){let s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o],l=S0e(a);if(l===void 0)continue;let c="";if(r.length===0?c=l:c=`${r}.${l}`,l===e.textNodeName){let g=a[l];_0e(c,e)||(g=e.tagValueProcessor(l,g),g=vz(g,e)),i&&(s+=n),s+=g,i=!1;continue}else if(l===e.cdataPropName){i&&(s+=n),s+=`<![CDATA[${a[l][0][e.textNodeName]}]]>`,i=!1;continue}else if(l===e.commentPropName){s+=n+`<!--${a[l][0][e.textNodeName]}-->`,i=!0;continue}else if(l[0]==="?"){const g=bI(a[":@"],e),y=l==="?xml"?"":n;let v=a[l][0][e.textNodeName];v=v.length!==0?" "+v:"",s+=y+`<${l}${v}${g}?>`,i=!0;continue}let d=n;d!==""&&(d+=e.indentBy);const h=bI(a[":@"],e),f=n+`<${l}${h}`,p=yz(a[l],e,c,d);e.unpairedTags.indexOf(l)!==-1?e.suppressUnpairedNode?s+=f+">":s+=f+"/>":(!p||p.length===0)&&e.suppressEmptyNode?s+=f+"/>":p&&p.endsWith(">")?s+=f+`>${p}${n}</${l}>`:(s+=f+">",p&&n!==""&&(p.includes("/>")||p.includes("</"))?s+=n+e.indentBy+p+n:s+=p,s+=`</${l}>`),i=!0}return s}function S0e(t){const e=Object.keys(t);for(let r=0;r<e.length;r++){const n=e[r];if(t.hasOwnProperty(n)&&n!==":@")return n}}function bI(t,e){let r="";if(t&&!e.ignoreAttributes)for(let n in t){if(!t.hasOwnProperty(n))continue;let s=e.attributeValueProcessor(n,t[n]);s=vz(s,e),s===!0&&e.suppressBooleanAttributes?r+=` ${n.substr(e.attributeNamePrefix.length)}`:r+=` ${n.substr(e.attributeNamePrefix.length)}="${s}"`}return r}function _0e(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let r=t.substr(t.lastIndexOf(".")+1);for(let n in e.stopNodes)if(e.stopNodes[n]===t||e.stopNodes[n]==="*."+r)return!0;return!1}function vz(t,e){if(t&&t.length>0&&e.processEntities)for(let r=0;r<e.entities.length;r++){const n=e.entities[r];t=t.replace(n.regex,n.val)}return t}var C0e=b0e;const E0e=C0e,k0e={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Ll(t){this.options=Object.assign({},k0e,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=A0e),this.processTextOrObjNode=T0e,this.options.format?(this.indentate=j0e,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Ll.prototype.build=function(t){return this.options.preserveOrder?E0e(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0).val)};Ll.prototype.j2x=function(t,e){let r="",n="";for(let s in t)if(Object.prototype.hasOwnProperty.call(t,s))if(typeof t[s]>"u")this.isAttribute(s)&&(n+="");else if(t[s]===null)this.isAttribute(s)?n+="":s[0]==="?"?n+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:n+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if(t[s]instanceof Date)n+=this.buildTextValNode(t[s],s,"",e);else if(typeof t[s]!="object"){const i=this.isAttribute(s);if(i)r+=this.buildAttrPairStr(i,""+t[s]);else if(s===this.options.textNodeName){let o=this.options.tagValueProcessor(s,""+t[s]);n+=this.replaceEntitiesValue(o)}else n+=this.buildTextValNode(t[s],s,"",e)}else if(Array.isArray(t[s])){const i=t[s].length;let o="",a="";for(let l=0;l<i;l++){const c=t[s][l];if(!(typeof c>"u"))if(c===null)s[0]==="?"?n+=this.indentate(e)+"<"+s+"?"+this.tagEndChar:n+=this.indentate(e)+"<"+s+"/"+this.tagEndChar;else if(typeof c=="object")if(this.options.oneListGroup){const d=this.j2x(c,e+1);o+=d.val,this.options.attributesGroupName&&c.hasOwnProperty(this.options.attributesGroupName)&&(a+=d.attrStr)}else o+=this.processTextOrObjNode(c,s,e);else if(this.options.oneListGroup){let d=this.options.tagValueProcessor(s,c);d=this.replaceEntitiesValue(d),o+=d}else o+=this.buildTextValNode(c,s,"",e)}this.options.oneListGroup&&(o=this.buildObjectNode(o,s,a,e)),n+=o}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const i=Object.keys(t[s]),o=i.length;for(let a=0;a<o;a++)r+=this.buildAttrPairStr(i[a],""+t[s][i[a]])}else n+=this.processTextOrObjNode(t[s],s,e);return{attrStr:r,val:n}};Ll.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function T0e(t,e,r){const n=this.j2x(t,r+1);return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,n.attrStr,r):this.buildObjectNode(n.val,e,n.attrStr,r)}Ll.prototype.buildObjectNode=function(t,e,r,n){if(t==="")return e[0]==="?"?this.indentate(n)+"<"+e+r+"?"+this.tagEndChar:this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,i="";return e[0]==="?"&&(i="?",s=""),(r||r==="")&&t.indexOf("<")===-1?this.indentate(n)+"<"+e+r+i+">"+t+s:this.options.commentPropName!==!1&&e===this.options.commentPropName&&i.length===0?this.indentate(n)+`<!--${t}-->`+this.newLine:this.indentate(n)+"<"+e+r+i+this.tagEndChar+t+this.indentate(n)+s}};Ll.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e};Ll.prototype.buildTextValNode=function(t,e,r,n){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(n)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(n)+"<"+e+r+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,t);return s=this.replaceEntitiesValue(s),s===""?this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar:this.indentate(n)+"<"+e+r+">"+s+"</"+e+this.tagEndChar}};Ll.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t};function j0e(t){return this.options.indentBy.repeat(t)}function A0e(t){return t.startsWith(this.options.attributeNamePrefix)&&t!==this.options.textNodeName?t.substr(this.attrPrefixLen):!1}var P0e=Ll;const N0e=Lj,R0e=x0e,O0e=P0e;var M0e={XMLParser:R0e,XMLValidator:N0e,XMLBuilder:O0e};const bw=(t,e)=>vye(t,e).then(r=>{if(r.length){const n=new M0e.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(l,c)=>c.trim()===""&&c.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let s;try{s=n.parse(r,!0)}catch(l){throw l&&typeof l=="object"&&Object.defineProperty(l,"$responseBodyText",{value:r}),l}const i="#text",o=Object.keys(s)[0],a=s[o];return a[i]&&(a[o]=a[i],delete a[i]),dz(a)}return{}}),I0e=async(t,e)=>{const r=await bw(t,e);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},D0e=(t,e)=>{var r;if(((r=e==null?void 0:e.Error)==null?void 0:r.Code)!==void 0)return e.Error.Code;if((e==null?void 0:e.Code)!==void 0)return e.Code;if(t.statusCode==404)return"NotFound"};function F0e(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function L0e(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}class B0e{constructor(e){Te(this,"value");this.value=e}toString(){return L0e(""+this.value)}}class po{constructor(e,r=[]){Te(this,"name");Te(this,"children");Te(this,"attributes",{});this.name=e,this.children=r}static of(e,r,n){const s=new po(e);return r!==void 0&&s.addChildNode(new B0e(r)),n!==void 0&&s.withName(n),s}withName(e){return this.name=e,this}addAttribute(e,r){return this.attributes[e]=r,this}addChildNode(e){return this.children.push(e),this}removeAttribute(e){return delete this.attributes[e],this}n(e){return this.name=e,this}c(e){return this.children.push(e),this}a(e,r){return r!=null&&(this.attributes[e]=r),this}cc(e,r,n=r){if(e[r]!=null){const s=po.of(r,e[r]).withName(n);this.c(s)}}l(e,r,n,s){e[r]!=null&&s().map(o=>{o.withName(n),this.c(o)})}lc(e,r,n,s){if(e[r]!=null){const i=s(),o=new po(n);i.map(a=>{o.c(a)}),this.c(o)}}toString(){const e=!!this.children.length;let r=`<${this.name}`;const n=this.attributes;for(const s of Object.keys(n)){const i=n[s];i!=null&&(r+=` ${s}="${F0e(""+i)}"`)}return r+=e?`>${this.children.map(s=>s.toString()).join("")}</${this.name}>`:"/>"}}const tk=[It.CRC32,It.CRC32C,It.CRC64NVME,It.SHA1,It.SHA256],$0e=[It.SHA256,It.SHA1,It.CRC32,It.CRC32C,It.CRC64NVME],U0e=(t,{requestChecksumRequired:e,requestAlgorithmMember:r,requestChecksumCalculation:n})=>{if(!r)return n===Kd.WHEN_SUPPORTED||e?GE:void 0;if(!t[r])return;const s=t[r];if(!tk.includes(s))throw new Error(`The checksum algorithm "${s}" is not supported by the client. Select one of ${tk}.`);return s},Uj=t=>t===It.MD5?"content-md5":`x-amz-checksum-${t.toLowerCase()}`,V0e=(t,e)=>{const r=t.toLowerCase();for(const n of Object.keys(e))if(r===n.toLowerCase())return!0;return!1},z0e=(t,e)=>{const r=t.toLowerCase();for(const n of Object.keys(e))if(n.toLowerCase().startsWith(r))return!0;return!1},xz=t=>t!==void 0&&typeof t!="string"&&!ArrayBuffer.isView(t)&&!cz(t),H0e=t=>new TextEncoder().encode(t);var W0e=typeof Buffer<"u"&&Buffer.from?function(t){return Buffer.from(t,"utf8")}:H0e;function _l(t){return t instanceof Uint8Array?t:typeof t=="string"?W0e(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}function ag(t){return typeof t=="string"?t.length===0:t.byteLength===0}function wz(t){return new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255])}function bz(t){if(!Uint32Array.from){for(var e=new Uint32Array(t.length),r=0;r<t.length;)e[r]=t[r],r+=1;return e}return Uint32Array.from(t)}var q0e=function(){function t(){this.crc32c=new SI}return t.prototype.update=function(e){ag(e)||this.crc32c.update(_l(e))},t.prototype.digest=function(){return lj(this,void 0,void 0,function(){return cj(this,function(e){return[2,wz(this.crc32c.digest())]})})},t.prototype.reset=function(){this.crc32c=new SI},t}(),SI=function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var r,n;try{for(var s=b6(e),i=s.next();!i.done;i=s.next()){var o=i.value;this.checksum=this.checksum>>>8^K0e[(this.checksum^o)&255]}}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t}(),G0e=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],K0e=bz(G0e),Y0e=function(){function t(){this.crc32=new jv}return t.prototype.update=function(e){ag(e)||this.crc32.update(_l(e))},t.prototype.digest=function(){return lj(this,void 0,void 0,function(){return cj(this,function(e){return[2,wz(this.crc32.digest())]})})},t.prototype.reset=function(){this.crc32=new jv},t}(),jv=function(){function t(){this.checksum=4294967295}return t.prototype.update=function(e){var r,n;try{for(var s=b6(e),i=s.next();!i.done;i=s.next()){var o=i.value;this.checksum=this.checksum>>>8^J0e[(this.checksum^o)&255]}}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return this},t.prototype.digest=function(){return(this.checksum^4294967295)>>>0},t}(),X0e=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],J0e=bz(X0e);const Z0e=()=>Y0e,Sz=(t,e)=>{switch(t){case It.MD5:return e.md5;case It.CRC32:return Z0e();case It.CRC32C:return q0e;case It.CRC64NVME:throw new Error(`Please check whether you have installed the "@aws-sdk/crc64-nvme-crt" package explicitly. 
You must also register the package by calling [require("@aws-sdk/crc64-nvme-crt");] or an ESM equivalent such as [import "@aws-sdk/crc64-nvme-crt";]. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);case It.SHA1:return e.sha1;case It.SHA256:return e.sha256;default:throw new Error(`Unsupported checksum algorithm: ${t}`)}},_z=(t,e)=>{const r=new t;return r.update(Yd(e||"")),r.digest()},Q0e={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},eve=(t,e)=>(r,n)=>async s=>{if(!jr.isInstance(s.request)||z0e("x-amz-checksum-",s.request.headers))return r(s);const{request:i,input:o}=s,{body:a,headers:l}=i,{base64Encoder:c,streamHasher:d}=t,{requestChecksumRequired:h,requestAlgorithmMember:f}=e,p=await t.requestChecksumCalculation(),g=f==null?void 0:f.name,y=f==null?void 0:f.httpHeader;g&&!o[g]&&(p===Kd.WHEN_SUPPORTED||h)&&(o[g]=GE,y&&(l[y]=GE));const v=U0e(o,{requestChecksumRequired:h,requestAlgorithmMember:f==null?void 0:f.name,requestChecksumCalculation:p});let m=a,x=l;if(v){switch(v){case It.CRC32:xr(n,"FLEXIBLE_CHECKSUMS_REQ_CRC32","U");break;case It.CRC32C:xr(n,"FLEXIBLE_CHECKSUMS_REQ_CRC32C","V");break;case It.CRC64NVME:xr(n,"FLEXIBLE_CHECKSUMS_REQ_CRC64","W");break;case It.SHA1:xr(n,"FLEXIBLE_CHECKSUMS_REQ_SHA1","X");break;case It.SHA256:xr(n,"FLEXIBLE_CHECKSUMS_REQ_SHA256","Y");break}const _=Uj(v),C=Sz(v,t);if(xz(a)){const{getAwsChunkedEncodingStream:T,bodyLengthChecker:O}=t;m=T(typeof t.requestStreamBufferSize=="number"&&t.requestStreamBufferSize>=8*1024?Lge(a,t.requestStreamBufferSize,n.logger):a,{base64Encoder:c,bodyLengthChecker:O,checksumLocationName:_,checksumAlgorithmFn:C,streamHasher:d}),x={...l,"content-encoding":l["content-encoding"]?`${l["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":l["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":_},delete x["content-length"]}else if(!V0e(_,l)){const T=await _z(C,a);x={...l,[_]:c(T)}}}return await r({...s,request:{...i,headers:x,body:m}})},tve={name:"flexibleChecksumsInputMiddleware",toMiddleware:"serializerMiddleware",relation:"before",tags:["BODY_CHECKSUM"],override:!0},rve=(t,e)=>(r,n)=>async s=>{const i=s.input,{requestValidationModeMember:o}=e,a=await t.requestChecksumCalculation(),l=await t.responseChecksumValidation();switch(a){case Kd.WHEN_REQUIRED:xr(n,"FLEXIBLE_CHECKSUMS_REQ_WHEN_REQUIRED","a");break;case Kd.WHEN_SUPPORTED:xr(n,"FLEXIBLE_CHECKSUMS_REQ_WHEN_SUPPORTED","Z");break}switch(l){case gS.WHEN_REQUIRED:xr(n,"FLEXIBLE_CHECKSUMS_RES_WHEN_REQUIRED","c");break;case gS.WHEN_SUPPORTED:xr(n,"FLEXIBLE_CHECKSUMS_RES_WHEN_SUPPORTED","b");break}return o&&!i[o]&&l===gS.WHEN_SUPPORTED&&(i[o]="ENABLED"),r(s)},Cz=(t=[])=>{const e=[];for(const r of $0e)!t.includes(r)||!tk.includes(r)||e.push(r);return e},nve=t=>{const e=t.lastIndexOf("-");if(e!==-1){const r=t.slice(e+1);if(!r.startsWith("0")){const n=parseInt(r,10);if(!isNaN(n)&&n>=1&&n<=1e4)return!0}}return!1},sve=async(t,{checksumAlgorithmFn:e,base64Encoder:r})=>r(await _z(e,t)),ive=async(t,{config:e,responseAlgorithms:r,logger:n})=>{const s=Cz(r),{body:i,headers:o}=t;for(const a of s){const l=Uj(a),c=o[l];if(c){let d;try{d=Sz(a,e)}catch(p){if(a===It.CRC64NVME){n==null||n.warn(`Skipping ${It.CRC64NVME} checksum validation: ${p.message}`);continue}throw p}const{base64Encoder:h}=e;if(xz(i)){t.body=Ige({expectedChecksum:c,checksumSourceLocation:l,checksum:new d,source:i,base64Encoder:h});return}const f=await sve(i,{checksumAlgorithmFn:d,base64Encoder:h});if(f===c)break;throw new Error(`Checksum mismatch: expected "${f}" but received "${c}" in response header "${l}".`)}}},ove={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},ave=(t,e)=>(r,n)=>async s=>{if(!jr.isInstance(s.request))return r(s);const i=s.input,o=await r(s),a=o.response,{requestValidationModeMember:l,responseAlgorithms:c}=e;if(l&&i[l]==="ENABLED"){const{clientName:d,commandName:h}=n;if(d==="S3Client"&&h==="GetObjectCommand"&&Cz(c).every(p=>{const g=Uj(p),y=a.headers[g];return!y||nve(y)}))return o;await ive(a,{config:t,responseAlgorithms:c,logger:n.logger})}return o},Vj=(t,e)=>({applyToStack:r=>{r.add(eve(t,e),Q0e),r.addRelativeTo(rve(t,e),tve),r.addRelativeTo(ave(t,e),ove)}}),lve=t=>{const{requestChecksumCalculation:e,responseChecksumValidation:r,requestStreamBufferSize:n}=t;return Object.assign(t,{requestChecksumCalculation:Mi(e??fge),responseChecksumValidation:Mi(r??pge),requestStreamBufferSize:Number(n??0)})};const cve=t=>e=>async r=>{if(!jr.isInstance(r.request))return e(r);const{request:n}=r,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let i=n.hostname;n.port!=null&&(i+=`:${n.port}`),n.headers.host=i}return e(r)},uve={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},dve=t=>({applyToStack:e=>{e.add(cve(t),uve)}}),hve=()=>(t,e)=>async r=>{var n,s;try{const i=await t(r),{clientName:o,commandName:a,logger:l,dynamoDbDocumentClientOptions:c={}}=e,{overrideInputFilterSensitiveLog:d,overrideOutputFilterSensitiveLog:h}=c,f=d??e.inputFilterSensitiveLog,p=h??e.outputFilterSensitiveLog,{$metadata:g,...y}=i.output;return(n=l==null?void 0:l.info)==null||n.call(l,{clientName:o,commandName:a,input:f(r.input),output:p(y),metadata:g}),i}catch(i){const{clientName:o,commandName:a,logger:l,dynamoDbDocumentClientOptions:c={}}=e,{overrideInputFilterSensitiveLog:d}=c,h=d??e.inputFilterSensitiveLog;throw(s=l==null?void 0:l.error)==null||s.call(l,{clientName:o,commandName:a,input:h(r.input),error:i,metadata:i.$metadata}),i}},fve={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},pve=t=>({applyToStack:e=>{e.add(hve(),fve)}});var _I={};const CS="X-Amzn-Trace-Id",gve="AWS_LAMBDA_FUNCTION_NAME",mve="_X_AMZN_TRACE_ID",yve=t=>e=>async r=>{const{request:n}=r;if(!jr.isInstance(n)||t.runtime!=="node")return e(r);const s=Object.keys(n.headers??{}).find(l=>l.toLowerCase()===CS.toLowerCase())??CS;if(n.headers.hasOwnProperty(s))return e(r);const i=_I[gve],o=_I[mve],a=l=>typeof l=="string"&&l.length>0;return a(i)&&a(o)&&(n.headers[CS]=o),e({...r,request:n})},vve={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},xve=t=>({applyToStack:e=>{e.add(yve(t),vve)}}),wve="content-length",bve="x-amz-decoded-content-length";function Sve(){return(t,e)=>async r=>{var s;const{request:n}=r;if(jr.isInstance(n)&&!(wve in n.headers)&&!(bve in n.headers)){const i="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof((s=e==null?void 0:e.logger)==null?void 0:s.warn)=="function"&&!(e.logger instanceof Fj)?e.logger.warn(i):console.warn(i)}return t({...r})}}const _ve={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},Cve=t=>({applyToStack:e=>{e.add(Sve(),_ve)}}),Eve=t=>(e,r)=>async n=>{const s=await t.region(),i=t.region;let o=()=>{};r.__s3RegionRedirect&&(Object.defineProperty(t,"region",{writable:!1,value:async()=>r.__s3RegionRedirect}),o=()=>Object.defineProperty(t,"region",{writable:!0,value:i}));try{const a=await e(n);if(r.__s3RegionRedirect){o();const l=await t.region();if(s!==l)throw new Error("Region was not restored following S3 region redirect.")}return a}catch(a){throw o(),a}},kve={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function Tve(t){return(e,r)=>async n=>{var s,i,o;try{return await e(n)}catch(a){if(t.followRegionRedirects&&(((s=a==null?void 0:a.$metadata)==null?void 0:s.httpStatusCode)===301||((i=a==null?void 0:a.$metadata)==null?void 0:i.httpStatusCode)===400&&(a==null?void 0:a.name)==="IllegalLocationConstraintException")){try{const l=a.$response.headers["x-amz-bucket-region"];(o=r.logger)==null||o.debug(`Redirecting from ${await t.region()} to ${l}`),r.__s3RegionRedirect=l}catch(l){throw new Error("Region redirect failed: "+l)}return e(n)}throw a}}}const jve={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},Ave=t=>({applyToStack:e=>{e.add(Tve(t),jve),e.addRelativeTo(Eve(t),kve)}}),tx=class tx{constructor(e={}){Te(this,"data");Te(this,"lastPurgeTime",Date.now());this.data=e}get(e){const r=this.data[e];if(r)return r}set(e,r){return this.data[e]=r,r}delete(e){delete this.data[e]}async purgeExpired(){const e=Date.now();if(!(this.lastPurgeTime+tx.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>e))for(const r in this.data){const n=this.data[r];if(!n.isRefreshing){const s=await n.identity;s.expiration&&s.expiration.getTime()<e&&delete this.data[r]}}}};Te(tx,"EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS",3e4);let rk=tx;class ES{constructor(e,r=!1,n=Date.now()){Te(this,"_identity");Te(this,"isRefreshing");Te(this,"accessed");this._identity=e,this.isRefreshing=r,this.accessed=n}get identity(){return this.accessed=Date.now(),this._identity}}const rx=class rx{constructor(e,r=new rk){Te(this,"createSessionFn");Te(this,"cache");this.createSessionFn=e,this.cache=r}async getS3ExpressIdentity(e,r){const n=r.Bucket,{cache:s}=this,i=s.get(n);return i?i.identity.then(o=>{var c,d;return(((c=o.expiration)==null?void 0:c.getTime())??0)<Date.now()?s.set(n,new ES(this.getIdentity(n))).identity:((((d=o.expiration)==null?void 0:d.getTime())??0)<Date.now()+rx.REFRESH_WINDOW_MS&&!i.isRefreshing&&(i.isRefreshing=!0,this.getIdentity(n).then(h=>{s.set(n,new ES(Promise.resolve(h)))})),o)}):s.set(n,new ES(this.getIdentity(n))).identity}async getIdentity(e){var s,i;await this.cache.purgeExpired().catch(o=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+o)});const r=await this.createSessionFn(e);if(!((s=r.Credentials)!=null&&s.AccessKeyId)||!((i=r.Credentials)!=null&&i.SecretAccessKey))throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretAccessKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration?new Date(r.Credentials.Expiration):void 0}}};Te(rx,"REFRESH_WINDOW_MS",6e4);let nk=rx;var CI;(function(t){t.ENV="env",t.CONFIG="shared config entry"})(CI||(CI={}));const Pve="Directory",Nve="S3Express",Rve="sigv4-s3express",sk="X-Amz-S3session-Token",ik=sk.toLowerCase();class Ove extends ZE{async signWithCredentials(e,r,n){const s=EI(r);e.headers[ik]=r.sessionToken;const i=this;return kI(i,s),i.signRequest(e,n??{})}async presignWithCredentials(e,r,n){const s=EI(r);return delete e.headers[ik],e.headers[sk]=r.sessionToken,e.query=e.query??{},e.query[sk]=r.sessionToken,kI(this,s),this.presign(e,n)}}function EI(t){return{accessKeyId:t.accessKeyId,secretAccessKey:t.secretAccessKey,expiration:t.expiration}}function kI(t,e){const r=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),n=t.credentialProvider,s=()=>(clearTimeout(r),t.credentialProvider=n,Promise.resolve(e));t.credentialProvider=s}const Mve=t=>(e,r)=>async n=>{var s,i,o,a,l;if(r.endpointV2){const c=r.endpointV2,d=((o=(i=(s=c.properties)==null?void 0:s.authSchemes)==null?void 0:i[0])==null?void 0:o.name)===Rve;if((((a=c.properties)==null?void 0:a.backend)===Nve||((l=c.properties)==null?void 0:l.bucketType)===Pve)&&(xr(r,"S3_EXPRESS_BUCKET","J"),r.isS3ExpressBucket=!0),d){const f=n.input.Bucket;if(f){const p=await t.s3ExpressIdentityProvider.getS3ExpressIdentity(await t.credentials(),{Bucket:f});r.s3ExpressIdentity=p,jr.isInstance(n.request)&&p.sessionToken&&(n.request.headers[ik]=p.sessionToken)}}}return e(n)},Ive={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},Dve=t=>({applyToStack:e=>{e.add(Mve(t),Ive)}}),Fve=async(t,e,r,n)=>{const s=await n.signWithCredentials(r,t,{});if(s.headers["X-Amz-Security-Token"]||s.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");return s},Lve=t=>e=>{throw e},Bve=(t,e)=>{},$ve=t=>(e,r)=>async n=>{if(!jr.isInstance(n.request))return e(n);const i=_h(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:o={}},identity:a,signer:l}=i;let c;r.s3ExpressIdentity?c=await Fve(r.s3ExpressIdentity,o,n.request,await t.signer()):c=await l.sign(n.request,a,o);const d=await e({...n,request:c}).catch((l.errorHandler||Lve)(o));return(l.successHandler||Bve)(d.response,o),d},Uve=t=>({applyToStack:e=>{e.addRelativeTo($ve(t),YV)}}),Vve=(t,{session:e})=>{const[r,n]=e,{forcePathStyle:s,useAccelerateEndpoint:i,disableMultiregionAccessPoints:o,followRegionRedirects:a,s3ExpressIdentityProvider:l,bucketEndpoint:c}=t;return Object.assign(t,{forcePathStyle:s??!1,useAccelerateEndpoint:i??!1,disableMultiregionAccessPoints:o??!1,followRegionRedirects:a??!1,s3ExpressIdentityProvider:l??new nk(async d=>r().send(new n({Bucket:d}))),bucketEndpoint:c??!1})},zve={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},Hve=3e3,Wve=t=>(e,r)=>async n=>{const s=await e(n),{response:i}=s;if(!Gd.isInstance(i))return s;const{statusCode:o,body:a}=i;if(o<200||o>=300||!(typeof(a==null?void 0:a.stream)=="function"||typeof(a==null?void 0:a.pipe)=="function"||typeof(a==null?void 0:a.tee)=="function"))return s;let c=a,d=a;a&&typeof a=="object"&&!(a instanceof Uint8Array)&&([c,d]=await Xge(a)),i.body=d;const h=await qve(c,{streamCollector:async p=>Vge(p,Hve)});typeof(c==null?void 0:c.destroy)=="function"&&c.destroy();const f=t.utf8Encoder(h.subarray(h.length-16));if(h.length===0&&zve[r.commandName]){const p=new Error("S3 aborted request");throw p.name="InternalError",p}return f&&f.endsWith("</Error>")&&(i.statusCode=400),s},qve=(t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),Gve={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},su=t=>({applyToStack:e=>{e.addRelativeTo(Wve(t),Gve)}}),Kve=t=>typeof t=="string"&&t.indexOf("arn:")===0&&t.split(":").length>=6;function Yve(t){return(e,r)=>async n=>{var s,i,o,a;if(t.bucketEndpoint){const l=r.endpointV2;if(l){const c=n.input.Bucket;if(typeof c=="string")try{const d=new URL(c);r.endpointV2={...l,url:d}}catch(d){const h=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${c} could not be parsed as URL.`;throw((i=(s=r.logger)==null?void 0:s.constructor)==null?void 0:i.name)==="NoOpLogger"?console.warn(h):(a=(o=r.logger)==null?void 0:o.warn)==null||a.call(o,h),d}}}return e(n)}}const Xve={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};function Jve({bucketEndpoint:t}){return e=>async r=>{const{input:{Bucket:n}}=r;if(!t&&typeof n=="string"&&!Kve(n)&&n.indexOf("/")>=0){const s=new Error(`Bucket name shouldn't contain '/', received '${n}'`);throw s.name="InvalidBucketName",s}return e({...r})}}const Zve={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},Qve=t=>({applyToStack:e=>{e.add(Jve(t),Zve),e.addRelativeTo(Yve(t),Xve)}}),exe=void 0;function txe(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function rxe(t){const e=wd(t.userAgentAppId??exe),{customUserAgent:r}=t;return Object.assign(t,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{var s,i;const n=await e();if(!txe(n)){const o=((i=(s=t.logger)==null?void 0:s.constructor)==null?void 0:i.name)==="NoOpLogger"||!t.logger?console:t.logger;typeof n!="string"?o==null||o.warn("userAgentAppId must be a string or undefined."):n.length>50&&(o==null||o.warn("The provided userAgentAppId exceeds the maximum length of 50 characters."))}return n}})}class nxe{constructor({size:e,params:r}){this.data=new Map,this.parameters=[],this.capacity=e??50,r&&(this.parameters=r)}get(e,r){const n=this.hash(e);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){const s=this.data.keys();let i=0;for(;;){const{value:o,done:a}=s.next();if(this.data.delete(o),a||++i>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(e){let r="";const{parameters:n}=this;if(n.length===0)return!1;for(const s of n){const i=String(e[s]??"");if(i.includes("|;"))return!1;r+=i+"|;"}return r}}const sxe=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Ez=t=>sxe.test(t)||t.startsWith("[")&&t.endsWith("]"),ixe=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),zj=(t,e=!1)=>{if(!e)return ixe.test(t);const r=t.split(".");for(const n of r)if(!zj(n))return!1;return!0},Av={},lg="endpoints";function Cl(t){return typeof t!="object"||t==null?t:"ref"in t?`$${Cl(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(Cl).join(", ")})`:JSON.stringify(t,null,2)}class Os extends Error{constructor(e){super(e),this.name="EndpointError"}}const oxe=(t,e)=>t===e,axe=t=>{const e=t.split("."),r=[];for(const n of e){const s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new Os(`Path: '${t}' does not end with ']'`);const i=n.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new Os(`Invalid array index: '${i}' in path: '${t}'`);s!==0&&r.push(n.slice(0,s)),r.push(i)}else r.push(n)}return r},kz=(t,e)=>axe(e).reduce((r,n)=>{if(typeof r!="object")throw new Os(`Index '${n}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},t),lxe=t=>t!=null,cxe=t=>!t,kS={[ig.HTTP]:80,[ig.HTTPS]:443},uxe=t=>{const e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){const{hostname:f,port:p,protocol:g="",path:y="",query:v={}}=t,m=new URL(`${g}//${f}${p?`:${p}`:""}${y}`);return m.search=Object.entries(v).map(([x,b])=>`${x}=${b}`).join("&"),m}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;const r=e.href,{host:n,hostname:s,pathname:i,protocol:o,search:a}=e;if(a)return null;const l=o.slice(0,-1);if(!Object.values(ig).includes(l))return null;const c=Ez(s),d=r.includes(`${n}:${kS[l]}`)||typeof t=="string"&&t.includes(`${n}:${kS[l]}`),h=`${n}${d?`:${kS[l]}`:""}`;return{scheme:l,authority:h,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:c}},dxe=(t,e)=>t===e,hxe=(t,e,r,n)=>e>=r||t.length<r?null:n?t.substring(t.length-r,t.length-e):t.substring(e,r),fxe=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),pxe={booleanEquals:oxe,getAttr:kz,isSet:lxe,isValidHostLabel:zj,not:cxe,parseURL:uxe,stringEquals:dxe,substring:hxe,uriEncode:fxe},Tz=(t,e)=>{const r=[],n={...e.endpointParams,...e.referenceRecord};let s=0;for(;s<t.length;){const i=t.indexOf("{",s);if(i===-1){r.push(t.slice(s));break}r.push(t.slice(s,i));const o=t.indexOf("}",i);if(o===-1){r.push(t.slice(i));break}t[i+1]==="{"&&t[o+1]==="}"&&(r.push(t.slice(i+1,o)),s=o+2);const a=t.substring(i+1,o);if(a.includes("#")){const[l,c]=a.split("#");r.push(kz(n[l],c))}else r.push(n[a]);s=o+1}return r.join("")},gxe=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],Sw=(t,e,r)=>{if(typeof t=="string")return Tz(t,r);if(t.fn)return jz(t,r);if(t.ref)return gxe(t,r);throw new Os(`'${e}': ${String(t)} is not a string, function or reference.`)},jz=({fn:t,argv:e},r)=>{const n=e.map(i=>["boolean","number"].includes(typeof i)?i:Sw(i,"arg",r)),s=t.split(".");return s[0]in Av&&s[1]!=null?Av[s[0]][s[1]](...n):pxe[t](...n)},mxe=({assign:t,...e},r)=>{var s,i;if(t&&t in r.referenceRecord)throw new Os(`'${t}' is already defined in Reference Record.`);const n=jz(e,r);return(i=(s=r.logger)==null?void 0:s.debug)==null||i.call(s,`${lg} evaluateCondition: ${Cl(e)} = ${Cl(n)}`),{result:n===""?!0:!!n,...t!=null&&{toAssign:{name:t,value:n}}}},Hj=(t=[],e)=>{var n,s;const r={};for(const i of t){const{result:o,toAssign:a}=mxe(i,{...e,referenceRecord:{...e.referenceRecord,...r}});if(!o)return{result:o};a&&(r[a.name]=a.value,(s=(n=e.logger)==null?void 0:n.debug)==null||s.call(n,`${lg} assign: ${a.name} := ${Cl(a.value)}`))}return{result:!0,referenceRecord:r}},yxe=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:s.map(i=>{const o=Sw(i,"Header value entry",e);if(typeof o!="string")throw new Os(`Header '${n}' value '${o}' is not a string`);return o})}),{}),Az=(t,e)=>{if(Array.isArray(t))return t.map(r=>Az(r,e));switch(typeof t){case"string":return Tz(t,e);case"object":if(t===null)throw new Os(`Unexpected endpoint property: ${t}`);return Pz(t,e);case"boolean":return t;default:throw new Os(`Unexpected endpoint property type: ${typeof t}`)}},Pz=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:Az(s,e)}),{}),vxe=(t,e)=>{const r=Sw(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new Os(`Endpoint URL must be a string, got ${typeof r}`)},xxe=(t,e)=>{var d,h;const{conditions:r,endpoint:n}=t,{result:s,referenceRecord:i}=Hj(r,e);if(!s)return;const o={...e,referenceRecord:{...e.referenceRecord,...i}},{url:a,properties:l,headers:c}=n;return(h=(d=e.logger)==null?void 0:d.debug)==null||h.call(d,`${lg} Resolving endpoint from template: ${Cl(n)}`),{...c!=null&&{headers:yxe(c,o)},...l!=null&&{properties:Pz(l,o)},url:vxe(a,o)}},wxe=(t,e)=>{const{conditions:r,error:n}=t,{result:s,referenceRecord:i}=Hj(r,e);if(s)throw new Os(Sw(n,"Error",{...e,referenceRecord:{...e.referenceRecord,...i}}))},bxe=(t,e)=>{const{conditions:r,rules:n}=t,{result:s,referenceRecord:i}=Hj(r,e);if(s)return Nz(n,{...e,referenceRecord:{...e.referenceRecord,...i}})},Nz=(t,e)=>{for(const r of t)if(r.type==="endpoint"){const n=xxe(r,e);if(n)return n}else if(r.type==="error")wxe(r,e);else if(r.type==="tree"){const n=bxe(r,e);if(n)return n}else throw new Os(`Unknown endpoint rule: ${r}`);throw new Os("Rules evaluation failed")},Sxe=(t,e)=>{var c,d,h,f;const{endpointParams:r,logger:n}=e,{parameters:s,rules:i}=t;(d=(c=e.logger)==null?void 0:c.debug)==null||d.call(c,`${lg} Initial EndpointParams: ${Cl(r)}`);const o=Object.entries(s).filter(([,p])=>p.default!=null).map(([p,g])=>[p,g.default]);if(o.length>0)for(const[p,g]of o)r[p]=r[p]??g;const a=Object.entries(s).filter(([,p])=>p.required).map(([p])=>p);for(const p of a)if(r[p]==null)throw new Os(`Missing required parameter: '${p}'`);const l=Nz(i,{endpointParams:r,logger:n,referenceRecord:{}});return(f=(h=e.logger)==null?void 0:h.debug)==null||f.call(h,`${lg} Resolved endpoint: ${Cl(l)}`),l},Rz=(t,e=!1)=>{if(e){for(const r of t.split("."))if(!Rz(r))return!1;return!0}return!(!zj(t)||t.length<3||t.length>63||t!==t.toLowerCase()||Ez(t))},TI=":",_xe="/",Cxe=t=>{const e=t.split(TI);if(e.length<6)return null;const[r,n,s,i,o,...a]=e;if(r!=="arn"||n===""||s===""||a.join(TI)==="")return null;const l=a.map(c=>c.split(_xe)).flat();return{partition:n,service:s,region:i,accountId:o,resourceId:l}},Exe=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"AWS ISOE (Europe) global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"AWS ISOF global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"amazonaws.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}}],kxe="1.1",Txe={partitions:Exe,version:kxe};let jxe=Txe;const Axe=t=>{const{partitions:e}=jxe;for(const n of e){const{regions:s,outputs:i}=n;for(const[o,a]of Object.entries(s))if(o===t)return{...i,...a}}for(const n of e){const{regionRegex:s,outputs:i}=n;if(new RegExp(s).test(t))return{...i}}const r=e.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},Oz={isVirtualHostableS3Bucket:Rz,parseArn:Cxe,partition:Axe};Av.aws=Oz;const Pxe=/\d{12}\.ddb/;async function Nxe(t,e,r){var i,o,a,l,c,d,h;const n=r.request;if(((i=n==null?void 0:n.headers)==null?void 0:i["smithy-protocol"])==="rpc-v2-cbor"&&xr(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){const f=await e.retryStrategy();typeof f.acquireInitialRetryToken=="function"?(a=(o=f.constructor)==null?void 0:o.name)!=null&&a.includes("Adaptive")?xr(t,"RETRY_MODE_ADAPTIVE","F"):xr(t,"RETRY_MODE_STANDARD","E"):xr(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){const f=t.endpointV2;switch(String((l=f==null?void 0:f.url)==null?void 0:l.hostname).match(Pxe)&&xr(t,"ACCOUNT_ID_ENDPOINT","O"),await((c=e.accountIdEndpointMode)==null?void 0:c.call(e))){case"disabled":xr(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":xr(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":xr(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const s=(h=(d=t.__smithy_context)==null?void 0:d.selectedHttpAuthScheme)==null?void 0:h.identity;if(s!=null&&s.$source){const f=s;f.accountId&&xr(t,"RESOLVED_ACCOUNT_ID","T");for(const[p,g]of Object.entries(f.$source??{}))xr(t,p,g)}}const jI="user-agent",TS="x-amz-user-agent",AI=" ",jS="/",Rxe=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Oxe=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,PI="-",Mxe=1024;function Ixe(t){let e="";for(const r in t){const n=t[r];if(e.length+n.length+1<=Mxe){e.length?e+=","+n:e+=n;continue}break}return e}const Dxe=t=>(e,r)=>async n=>{var p,g,y,v;const{request:s}=n;if(!jr.isInstance(s))return e(n);const{headers:i}=s,o=((p=r==null?void 0:r.userAgent)==null?void 0:p.map(Lm))||[],a=(await t.defaultUserAgentProvider()).map(Lm);await Nxe(r,t,n);const l=r;a.push(`m/${Ixe(Object.assign({},(g=r.__smithy_context)==null?void 0:g.features,(y=l.__aws_sdk_context)==null?void 0:y.features))}`);const c=((v=t==null?void 0:t.customUserAgent)==null?void 0:v.map(Lm))||[],d=await t.userAgentAppId();d&&a.push(Lm([`app/${d}`]));const h=[].concat([...a,...o,...c]).join(AI),f=[...a.filter(m=>m.startsWith("aws-sdk-")),...c].join(AI);return t.runtime!=="browser"?(f&&(i[TS]=i[TS]?`${i[jI]} ${f}`:f),i[jI]=h):i[TS]=h,e({...n,request:s})},Lm=t=>{var o;const e=t[0].split(jS).map(a=>a.replace(Rxe,PI)).join(jS),r=(o=t[1])==null?void 0:o.replace(Oxe,PI),n=e.indexOf(jS),s=e.substring(0,n);let i=e.substring(n+1);return s==="api"&&(i=i.toLowerCase()),[s,i,r].filter(a=>a&&a.length>0).reduce((a,l,c)=>{switch(c){case 0:return l;case 1:return`${a}/${l}`;default:return`${a}#${l}`}},"")},Fxe={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Lxe=t=>({applyToStack:e=>{e.add(Dxe(t),Fxe)}}),Bxe=!1,$xe=!1,Mz=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),NI=t=>Mz(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,Uxe=t=>{const{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{if(typeof e=="string")return NI(e);const n=await e();return NI(n)},useFipsEndpoint:async()=>{const n=typeof e=="string"?e:await e();return Mz(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},Vxe=t=>Object.assign(t,{eventStreamMarshaller:t.eventStreamSerdeProvider(t)}),RI="content-length";function zxe(t){return e=>async r=>{const n=r.request;if(jr.isInstance(n)){const{body:s,headers:i}=n;if(s&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(RI)===-1)try{const o=t(s);n.headers={...n.headers,[RI]:String(o)}}catch{}}return e({...r,request:n})}}const Hxe={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Wxe=t=>({applyToStack:e=>{e.add(zxe(t.bodyLengthChecker),Hxe)}}),qxe=async t=>{const e=(t==null?void 0:t.Bucket)||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Jxe(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Xxe(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},Gxe=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Kxe=/(\d+\.){3}\d+/,Yxe=/\.\./,Xxe=t=>Gxe.test(t)&&!Kxe.test(t)&&!Yxe.test(t),Jxe=t=>{const[e,r,n,,,s]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,o=!!(i&&r&&n&&s);if(i&&!o)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return o},Zxe=(t,e,r)=>{const n=async()=>{const s=r[t]??r[e];return typeof s=="function"?s():s};return t==="credentialScope"||e==="CredentialScope"?async()=>{const s=typeof r.credentials=="function"?await r.credentials():r.credentials;return(s==null?void 0:s.credentialScope)??(s==null?void 0:s.CredentialScope)}:t==="accountId"||e==="AccountId"?async()=>{const s=typeof r.credentials=="function"?await r.credentials():r.credentials;return(s==null?void 0:s.accountId)??(s==null?void 0:s.AccountId)}:t==="endpoint"||e==="endpoint"?async()=>{const s=await n();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){const{protocol:i,hostname:o,port:a,path:l}=s;return`${i}//${o}${a?":"+a:""}${l}`}}return s}:n},Iz=async t=>{};function Qxe(t){const e={};if(t=t.replace(/^\?/,""),t)for(const r of t.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in e?Array.isArray(e[n])?e[n].push(s):e[n]=[e[n],s]:e[n]=s}return e}const Pv=t=>{if(typeof t=="string")return Pv(new URL(t));const{hostname:e,pathname:r,port:n,protocol:s,search:i}=t;let o;return i&&(o=Qxe(i)),{hostname:e,port:n?parseInt(n):void 0,protocol:s,path:r,query:o}},Wj=t=>typeof t=="object"?"url"in t?Pv(t.url):t:Pv(t),Dz=async(t,e,r,n)=>{if(!r.endpoint){let o;r.serviceConfiguredEndpoint?o=await r.serviceConfiguredEndpoint():o=await Iz(r.serviceId),o&&(r.endpoint=()=>Promise.resolve(Wj(o)))}const s=await Fz(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},Fz=async(t,e,r)=>{var i;const n={},s=((i=e==null?void 0:e.getEndpointParameterInstructions)==null?void 0:i.call(e))||{};for(const[o,a]of Object.entries(s))switch(a.type){case"staticContextParams":n[o]=a.value;break;case"contextParams":n[o]=t[a.name];break;case"clientContextParams":case"builtInParams":n[o]=await Zxe(a.name,o,r)();break;case"operationContextParams":n[o]=a.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await qxe(n),n},ewe=({config:t,instructions:e})=>(r,n)=>async s=>{var a,l,c;t.endpoint&&bme(n,"ENDPOINT_OVERRIDE","N");const i=await Dz(s.input,{getEndpointParameterInstructions(){return e}},{...t},n);n.endpointV2=i,n.authSchemes=(a=i.properties)==null?void 0:a.authSchemes;const o=(l=n.authSchemes)==null?void 0:l[0];if(o){n.signing_region=o.signingRegion,n.signing_service=o.signingName;const d=_h(n),h=(c=d==null?void 0:d.selectedHttpAuthScheme)==null?void 0:c.httpAuthOption;h&&(h.signingProperties=Object.assign(h.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return r({...s})},twe={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Pj.name},iu=(t,e)=>({applyToStack:r=>{r.addRelativeTo(ewe({config:t,instructions:e}),twe)}}),rwe=t=>{const e=t.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:s}=t,i=r!=null?async()=>Wj(await Mi(r)()):void 0,a=Object.assign(t,{endpoint:i,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:Mi(n??!1),useFipsEndpoint:Mi(s??!1)});let l;return a.serviceConfiguredEndpoint=async()=>(t.serviceId&&!l&&(l=Iz(t.serviceId)),l),a};var Xd;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(Xd||(Xd={}));const Nv=3,nwe=Xd.STANDARD,swe=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],iwe=["TimeoutError","RequestTimeout","RequestTimeoutException"],owe=[500,502,503,504],awe=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],lwe=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],cwe=t=>{var e;return(e=t.$metadata)==null?void 0:e.clockSkewCorrected},uwe=t=>{const e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},Lz=t=>{var e,r;return((e=t.$metadata)==null?void 0:e.httpStatusCode)===429||swe.includes(t.name)||((r=t.$retryable)==null?void 0:r.throttling)==!0},qj=(t,e=0)=>{var r;return cwe(t)||iwe.includes(t.name)||awe.includes((t==null?void 0:t.code)||"")||lwe.includes((t==null?void 0:t.code)||"")||owe.includes(((r=t.$metadata)==null?void 0:r.httpStatusCode)||0)||uwe(t)||t.cause!==void 0&&e<=10&&qj(t.cause,e+1)},dwe=t=>{var e;if(((e=t.$metadata)==null?void 0:e.httpStatusCode)!==void 0){const r=t.$metadata.httpStatusCode;return 500<=r&&r<=599&&!qj(t)}return!1};class _w{constructor(e){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(e==null?void 0:e.beta)??.7,this.minCapacity=(e==null?void 0:e.minCapacity)??1,this.minFillRate=(e==null?void 0:e.minFillRate)??.5,this.scaleConstant=(e==null?void 0:e.scaleConstant)??.4,this.smooth=(e==null?void 0:e.smooth)??.8;const r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>_w.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}const r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),Lz(e)){const s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());const n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){const n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}}_w.setTimeoutFn=setTimeout;const ok=100,Bz=20*1e3,hwe=500,OI=500,fwe=5,pwe=10,gwe=1,mwe="amz-sdk-invocation-id",ywe="amz-sdk-request",vwe=()=>{let t=ok;return{computeNextBackoffDelay:n=>Math.floor(Math.min(Bz,Math.random()*2**n*t)),setDelayBase:n=>{t=n}}},MI=({retryDelay:t,retryCount:e,retryCost:r})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(Bz,t),getRetryCost:()=>r});class $z{constructor(e){this.maxAttempts=e,this.mode=Xd.STANDARD,this.capacity=OI,this.retryBackoffStrategy=vwe(),this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return MI({retryDelay:ok,retryCount:0})}async refreshRetryTokenForRetry(e,r){const n=await this.getMaxAttempts();if(this.shouldRetry(e,r,n)){const s=r.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?hwe:ok);const i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),o=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(s);return this.capacity-=a,MI({retryDelay:o,retryCount:e.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(OI,this.capacity+(e.getRetryCost()??gwe))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Nv}`),Nv}}shouldRetry(e,r,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(e){return e==="TRANSIENT"?pwe:fwe}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}}class xwe{constructor(e,r){this.maxAttemptsProvider=e,this.mode=Xd.ADAPTIVE;const{rateLimiter:n}=r??{};this.rateLimiter=n??new _w,this.standardRetryStrategy=new $z(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}let Bm;const wwe=new Uint8Array(16);function bwe(){if(!Bm&&(Bm=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Bm))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Bm(wwe)}const Zr=[];for(let t=0;t<256;++t)Zr.push((t+256).toString(16).slice(1));function Swe(t,e=0){return Zr[t[e+0]]+Zr[t[e+1]]+Zr[t[e+2]]+Zr[t[e+3]]+"-"+Zr[t[e+4]]+Zr[t[e+5]]+"-"+Zr[t[e+6]]+Zr[t[e+7]]+"-"+Zr[t[e+8]]+Zr[t[e+9]]+"-"+Zr[t[e+10]]+Zr[t[e+11]]+Zr[t[e+12]]+Zr[t[e+13]]+Zr[t[e+14]]+Zr[t[e+15]]}const _we=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),II={randomUUID:_we};function Cwe(t,e,r){if(II.randomUUID&&!e&&!t)return II.randomUUID();t=t||{};const n=t.random||(t.rng||bwe)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Swe(n)}const Ewe=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),kwe=t=>{const{retryStrategy:e,retryMode:r,maxAttempts:n}=t,s=Mi(n??Nv);return Object.assign(t,{maxAttempts:s,retryStrategy:async()=>e||(await Mi(r)()===Xd.ADAPTIVE?new xwe(s):new $z(s))})},Twe=t=>(t==null?void 0:t.body)instanceof ReadableStream,jwe=t=>(e,r)=>async n=>{var o;let s=await t.retryStrategy();const i=await t.maxAttempts();if(Awe(s)){s=s;let a=await s.acquireInitialRetryToken(r.partition_id),l=new Error,c=0,d=0;const{request:h}=n,f=jr.isInstance(h);for(f&&(h.headers[mwe]=Cwe());;)try{f&&(h.headers[ywe]=`attempt=${c+1}; max=${i}`);const{response:p,output:g}=await e(n);return s.recordSuccess(a),g.$metadata.attempts=c+1,g.$metadata.totalRetryDelay=d,{response:p,output:g}}catch(p){const g=Pwe(p);if(l=Ewe(p),f&&Twe(h))throw(o=r.logger instanceof Fj?console:r.logger)==null||o.warn("An error was encountered in a non-retryable streaming request."),l;try{a=await s.refreshRetryTokenForRetry(a,g)}catch{throw l.$metadata||(l.$metadata={}),l.$metadata.attempts=c+1,l.$metadata.totalRetryDelay=d,l}c=a.getRetryCount();const y=a.getRetryDelay();d+=y,await new Promise(v=>setTimeout(v,y))}}else return s=s,s!=null&&s.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,n)},Awe=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",Pwe=t=>{const e={error:t,errorType:Nwe(t)},r=Mwe(t.$response);return r&&(e.retryAfterHint=r),e},Nwe=t=>Lz(t)?"THROTTLING":qj(t)?"TRANSIENT":dwe(t)?"SERVER_ERROR":"CLIENT_ERROR",Rwe={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Owe=t=>({applyToStack:e=>{e.add(jwe(t),Rwe)}}),Mwe=t=>{if(!Gd.isInstance(t))return;const e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;const r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};class Uz{constructor(e){Te(this,"sigv4aSigner");Te(this,"sigv4Signer");Te(this,"signerOptions");this.sigv4Signer=new Ove(e),this.signerOptions=e}static sigv4aDependency(){return"none"}async sign(e,r={}){return r.signingRegion==="*"?this.getSigv4aSigner().sign(e,r):this.sigv4Signer.sign(e,r)}async signWithCredentials(e,r,n={}){if(n.signingRegion==="*")throw this.getSigv4aSigner(),new Error(`signWithCredentials with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);return this.sigv4Signer.signWithCredentials(e,r,n)}async presign(e,r={}){if(r.signingRegion==="*")throw this.getSigv4aSigner(),new Error(`presign with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);return this.sigv4Signer.presign(e,r)}async presignWithCredentials(e,r,n={}){if(n.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(e,r,n)}getSigv4aSigner(){if(!this.sigv4aSigner)throw this.signerOptions.runtime==="node"?new Error("Neither CRT nor JS SigV4a implementation is available. Please load either @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt"):new Error("JS SigV4a implementation is not available or not a valid constructor. Please check whether you have installed the @aws-sdk/signature-v4a package explicitly. The CRT implementation is not available for browsers. You must also register the package by calling [require('@aws-sdk/signature-v4a');] or an ESM equivalent such as [import '@aws-sdk/signature-v4a';]. For more information please go to https://github.com/aws/aws-sdk-js-v3#using-javascript-non-crt-implementation-of-sigv4a");return this.sigv4aSigner}}const Gj="required",M="type",oe="rules",B="conditions",J="fn",Z="argv",De="ref",st="assign",Pe="url",Ne="properties",hc="backend",bn="authSchemes",Kr="disableDoubleEncoding",Yr="signingName",Dn="signingRegion",Re="headers",Kj="signingRegionSet",Iwe=6,Dwe=!1,Ki=!0,bs="isSet",mr="booleanEquals",je="error",Rv="aws.partition",bt="stringEquals",Xt="getAttr",pr="name",Mt="substring",DI="bucketSuffix",Yj="parseURL",he="endpoint",ae="tree",Ov="aws.isVirtualHostableS3Bucket",Mv="{url#scheme}://{Bucket}.{url#authority}{url#path}",go="not",FI="accessPointSuffix",Gy="{url#scheme}://{url#authority}{url#path}",Vz="hardwareType",zz="regionPrefix",LI="bucketAliasSuffix",ak="outpostId",ou="isValidHostLabel",Xj="sigv4a",cg="s3-outposts",Jd="s3",Hz="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",Wz="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",BI="https://{Bucket}.s3.{partitionResult#dnsSuffix}",qz="aws.parseArn",Gz="bucketArn",Kz="arnType",Iv="",Jj="s3-object-lambda",Yz="accesspoint",Zj="accessPointName",$I="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",UI="mrapPartition",VI="outpostType",zI="arnPrefix",Xz="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",HI="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",WI="https://s3.{partitionResult#dnsSuffix}",ku={[Gj]:!1,[M]:"String"},Tu={[Gj]:!0,default:!1,[M]:"Boolean"},sf={[Gj]:!1,[M]:"Boolean"},Ws={[J]:mr,[Z]:[{[De]:"Accelerate"},!0]},Bt={[J]:mr,[Z]:[{[De]:"UseFIPS"},!0]},Ot={[J]:mr,[Z]:[{[De]:"UseDualStack"},!0]},lr={[J]:bs,[Z]:[{[De]:"Endpoint"}]},Jz={[J]:Rv,[Z]:[{[De]:"Region"}],[st]:"partitionResult"},qI={[J]:bt,[Z]:[{[J]:Xt,[Z]:[{[De]:"partitionResult"},pr]},"aws-cn"]},ap={[J]:bs,[Z]:[{[De]:"Bucket"}]},wt={[De]:"Bucket"},GI={[B]:[Ot],[je]:"S3Express does not support Dual-stack.",[M]:je},KI={[B]:[Ws],[je]:"S3Express does not support S3 Accelerate.",[M]:je},YI={[B]:[lr,{[J]:Yj,[Z]:[{[De]:"Endpoint"}],[st]:"url"}],[oe]:[{[B]:[{[J]:bs,[Z]:[{[De]:"DisableS3ExpressSessionAuth"}]},{[J]:mr,[Z]:[{[De]:"DisableS3ExpressSessionAuth"},!0]}],[oe]:[{[B]:[{[J]:mr,[Z]:[{[J]:Xt,[Z]:[{[De]:"url"},"isIp"]},!0]}],[oe]:[{[B]:[{[J]:"uriEncode",[Z]:[wt],[st]:"uri_encoded_bucket"}],[oe]:[{[he]:{[Pe]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",[Ne]:{[hc]:"S3Express",[bn]:[{[Kr]:!0,[pr]:"sigv4",[Yr]:"s3express",[Dn]:"{Region}"}]},[Re]:{}},[M]:he}],[M]:ae}],[M]:ae},{[B]:[{[J]:Ov,[Z]:[wt,!1]}],[oe]:[{[he]:{[Pe]:Mv,[Ne]:{[hc]:"S3Express",[bn]:[{[Kr]:!0,[pr]:"sigv4",[Yr]:"s3express",[Dn]:"{Region}"}]},[Re]:{}},[M]:he}],[M]:ae},{[je]:"S3Express bucket name is not a valid virtual hostable name.",[M]:je}],[M]:ae},{[B]:[{[J]:mr,[Z]:[{[J]:Xt,[Z]:[{[De]:"url"},"isIp"]},!0]}],[oe]:[{[B]:[{[J]:"uriEncode",[Z]:[wt],[st]:"uri_encoded_bucket"}],[oe]:[{[he]:{[Pe]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",[Ne]:{[hc]:"S3Express",[bn]:[{[Kr]:!0,[pr]:"sigv4-s3express",[Yr]:"s3express",[Dn]:"{Region}"}]},[Re]:{}},[M]:he}],[M]:ae}],[M]:ae},{[B]:[{[J]:Ov,[Z]:[wt,!1]}],[oe]:[{[he]:{[Pe]:Mv,[Ne]:{[hc]:"S3Express",[bn]:[{[Kr]:!0,[pr]:"sigv4-s3express",[Yr]:"s3express",[Dn]:"{Region}"}]},[Re]:{}},[M]:he}],[M]:ae},{[je]:"S3Express bucket name is not a valid virtual hostable name.",[M]:je}],[M]:ae},jn={[J]:Yj,[Z]:[{[De]:"Endpoint"}],[st]:"url"},AS={[J]:mr,[Z]:[{[J]:Xt,[Z]:[{[De]:"url"},"isIp"]},!0]},Zz={[De]:"url"},Qz={[J]:"uriEncode",[Z]:[wt],[st]:"uri_encoded_bucket"},rc={[hc]:"S3Express",[bn]:[{[Kr]:!0,[pr]:"sigv4",[Yr]:"s3express",[Dn]:"{Region}"}]},Qe={},e9={[J]:Ov,[Z]:[wt,!1]},XI={[je]:"S3Express bucket name is not a valid virtual hostable name.",[M]:je},JI={[J]:bs,[Z]:[{[De]:"UseS3ExpressControlEndpoint"}]},ZI={[J]:mr,[Z]:[{[De]:"UseS3ExpressControlEndpoint"},!0]},et={[J]:go,[Z]:[lr]},$m={[je]:"Unrecognized S3Express bucket name format.",[M]:je},QI={[J]:go,[Z]:[ap]},eD={[De]:Vz},tD={[B]:[et],[je]:"Expected a endpoint to be specified but no endpoint was found",[M]:je},Um={[bn]:[{[Kr]:!0,[pr]:Xj,[Yr]:cg,[Kj]:["*"]},{[Kr]:!0,[pr]:"sigv4",[Yr]:cg,[Dn]:"{Region}"}]},PS={[J]:mr,[Z]:[{[De]:"ForcePathStyle"},!1]},Fwe={[De]:"ForcePathStyle"},vr={[J]:mr,[Z]:[{[De]:"Accelerate"},!1]},Pr={[J]:bt,[Z]:[{[De]:"Region"},"aws-global"]},Br={[bn]:[{[Kr]:!0,[pr]:"sigv4",[Yr]:Jd,[Dn]:"us-east-1"}]},yt={[J]:go,[Z]:[Pr]},$r={[J]:mr,[Z]:[{[De]:"UseGlobalEndpoint"},!0]},rD={[Pe]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[Ne]:{[bn]:[{[Kr]:!0,[pr]:"sigv4",[Yr]:Jd,[Dn]:"{Region}"}]},[Re]:{}},Er={[bn]:[{[Kr]:!0,[pr]:"sigv4",[Yr]:Jd,[Dn]:"{Region}"}]},Ur={[J]:mr,[Z]:[{[De]:"UseGlobalEndpoint"},!1]},ft={[J]:mr,[Z]:[{[De]:"UseDualStack"},!1]},nD={[Pe]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[Ne]:Er,[Re]:{}},ut={[J]:mr,[Z]:[{[De]:"UseFIPS"},!1]},sD={[Pe]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[Ne]:Er,[Re]:{}},iD={[Pe]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[Ne]:Er,[Re]:{}},NS={[J]:mr,[Z]:[{[J]:Xt,[Z]:[Zz,"isIp"]},!1]},RS={[Pe]:Hz,[Ne]:Er,[Re]:{}},lk={[Pe]:Mv,[Ne]:Er,[Re]:{}},oD={[he]:lk,[M]:he},OS={[Pe]:Wz,[Ne]:Er,[Re]:{}},aD={[Pe]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[Ne]:Er,[Re]:{}},Vm={[je]:"Invalid region: region was not a valid DNS name.",[M]:je},ts={[De]:Gz},t9={[De]:Kz},MS={[J]:Xt,[Z]:[ts,"service"]},Qj={[De]:Zj},lD={[B]:[Ot],[je]:"S3 Object Lambda does not support Dual-stack",[M]:je},cD={[B]:[Ws],[je]:"S3 Object Lambda does not support S3 Accelerate",[M]:je},uD={[B]:[{[J]:bs,[Z]:[{[De]:"DisableAccessPoints"}]},{[J]:mr,[Z]:[{[De]:"DisableAccessPoints"},!0]}],[je]:"Access points are not supported for this operation",[M]:je},IS={[B]:[{[J]:bs,[Z]:[{[De]:"UseArnRegion"}]},{[J]:mr,[Z]:[{[De]:"UseArnRegion"},!1]},{[J]:go,[Z]:[{[J]:bt,[Z]:[{[J]:Xt,[Z]:[ts,"region"]},"{Region}"]}]}],[je]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[M]:je},r9={[J]:Xt,[Z]:[{[De]:"bucketPartition"},pr]},n9={[J]:Xt,[Z]:[ts,"accountId"]},DS={[bn]:[{[Kr]:!0,[pr]:"sigv4",[Yr]:Jj,[Dn]:"{bucketArn#region}"}]},dD={[je]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[M]:je},FS={[je]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[M]:je},LS={[je]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[M]:je},BS={[je]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[M]:je},hD={[je]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[M]:je},fD={[je]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[M]:je},of={[bn]:[{[Kr]:!0,[pr]:"sigv4",[Yr]:Jd,[Dn]:"{bucketArn#region}"}]},pD={[bn]:[{[Kr]:!0,[pr]:Xj,[Yr]:cg,[Kj]:["*"]},{[Kr]:!0,[pr]:"sigv4",[Yr]:cg,[Dn]:"{bucketArn#region}"}]},gD={[J]:qz,[Z]:[wt]},mD={[Pe]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Ne]:Er,[Re]:{}},yD={[Pe]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Ne]:Er,[Re]:{}},vD={[Pe]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Ne]:Er,[Re]:{}},$S={[Pe]:Xz,[Ne]:Er,[Re]:{}},xD={[Pe]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Ne]:Er,[Re]:{}},wD={[De]:"UseObjectLambdaEndpoint"},US={[bn]:[{[Kr]:!0,[pr]:"sigv4",[Yr]:Jj,[Dn]:"{Region}"}]},bD={[Pe]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[Ne]:Er,[Re]:{}},SD={[Pe]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[Ne]:Er,[Re]:{}},_D={[Pe]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[Ne]:Er,[Re]:{}},VS={[Pe]:Gy,[Ne]:Er,[Re]:{}},CD={[Pe]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[Ne]:Er,[Re]:{}},zS=[{[De]:"Region"}],Lwe=[{[De]:"Endpoint"}],Bwe=[wt],ED=[Ot],HS=[Ws],ju=[lr,jn],kD=[{[J]:bs,[Z]:[{[De]:"DisableS3ExpressSessionAuth"}]},{[J]:mr,[Z]:[{[De]:"DisableS3ExpressSessionAuth"},!0]}],$we=[Qz],TD=[e9],Vs=[Jz],Au=[Bt],jD=[{[J]:Mt,[Z]:[wt,6,14,!0],[st]:"s3expressAvailabilityZoneId"},{[J]:Mt,[Z]:[wt,14,16,!0],[st]:"s3expressAvailabilityZoneDelim"},{[J]:bt,[Z]:[{[De]:"s3expressAvailabilityZoneDelim"},"--"]}],Yi=[{[B]:[Bt],[he]:{[Pe]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[Ne]:rc,[Re]:{}},[M]:he},{[he]:{[Pe]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[Ne]:rc,[Re]:{}},[M]:he}],AD=[{[J]:Mt,[Z]:[wt,6,15,!0],[st]:"s3expressAvailabilityZoneId"},{[J]:Mt,[Z]:[wt,15,17,!0],[st]:"s3expressAvailabilityZoneDelim"},{[J]:bt,[Z]:[{[De]:"s3expressAvailabilityZoneDelim"},"--"]}],PD=[{[J]:Mt,[Z]:[wt,6,19,!0],[st]:"s3expressAvailabilityZoneId"},{[J]:Mt,[Z]:[wt,19,21,!0],[st]:"s3expressAvailabilityZoneDelim"},{[J]:bt,[Z]:[{[De]:"s3expressAvailabilityZoneDelim"},"--"]}],ND=[{[J]:Mt,[Z]:[wt,6,20,!0],[st]:"s3expressAvailabilityZoneId"},{[J]:Mt,[Z]:[wt,20,22,!0],[st]:"s3expressAvailabilityZoneDelim"},{[J]:bt,[Z]:[{[De]:"s3expressAvailabilityZoneDelim"},"--"]}],RD=[{[J]:Mt,[Z]:[wt,6,26,!0],[st]:"s3expressAvailabilityZoneId"},{[J]:Mt,[Z]:[wt,26,28,!0],[st]:"s3expressAvailabilityZoneDelim"},{[J]:bt,[Z]:[{[De]:"s3expressAvailabilityZoneDelim"},"--"]}],Xi=[{[B]:[Bt],[he]:{[Pe]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[Ne]:{[hc]:"S3Express",[bn]:[{[Kr]:!0,[pr]:"sigv4-s3express",[Yr]:"s3express",[Dn]:"{Region}"}]},[Re]:{}},[M]:he},{[he]:{[Pe]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[Ne]:{[hc]:"S3Express",[bn]:[{[Kr]:!0,[pr]:"sigv4-s3express",[Yr]:"s3express",[Dn]:"{Region}"}]},[Re]:{}},[M]:he}],OD=[wt,0,7,!0],MD=[{[J]:Mt,[Z]:[wt,7,15,!0],[st]:"s3expressAvailabilityZoneId"},{[J]:Mt,[Z]:[wt,15,17,!0],[st]:"s3expressAvailabilityZoneDelim"},{[J]:bt,[Z]:[{[De]:"s3expressAvailabilityZoneDelim"},"--"]}],ID=[{[J]:Mt,[Z]:[wt,7,16,!0],[st]:"s3expressAvailabilityZoneId"},{[J]:Mt,[Z]:[wt,16,18,!0],[st]:"s3expressAvailabilityZoneDelim"},{[J]:bt,[Z]:[{[De]:"s3expressAvailabilityZoneDelim"},"--"]}],DD=[{[J]:Mt,[Z]:[wt,7,20,!0],[st]:"s3expressAvailabilityZoneId"},{[J]:Mt,[Z]:[wt,20,22,!0],[st]:"s3expressAvailabilityZoneDelim"},{[J]:bt,[Z]:[{[De]:"s3expressAvailabilityZoneDelim"},"--"]}],FD=[{[J]:Mt,[Z]:[wt,7,21,!0],[st]:"s3expressAvailabilityZoneId"},{[J]:Mt,[Z]:[wt,21,23,!0],[st]:"s3expressAvailabilityZoneDelim"},{[J]:bt,[Z]:[{[De]:"s3expressAvailabilityZoneDelim"},"--"]}],LD=[{[J]:Mt,[Z]:[wt,7,27,!0],[st]:"s3expressAvailabilityZoneId"},{[J]:Mt,[Z]:[wt,27,29,!0],[st]:"s3expressAvailabilityZoneDelim"},{[J]:bt,[Z]:[{[De]:"s3expressAvailabilityZoneDelim"},"--"]}],Uwe=[ap],BD=[{[J]:ou,[Z]:[{[De]:ak},!1]}],$D=[{[J]:bt,[Z]:[{[De]:zz},"beta"]}],Vwe=["*"],UD=[{[J]:ou,[Z]:[{[De]:"Region"},!1]}],ja=[{[J]:bt,[Z]:[{[De]:"Region"},"us-east-1"]}],WS=[{[J]:bt,[Z]:[t9,Yz]}],VD=[{[J]:Xt,[Z]:[ts,"resourceId[1]"],[st]:Zj},{[J]:go,[Z]:[{[J]:bt,[Z]:[Qj,Iv]}]}],zwe=[ts,"resourceId[1]"],qS=[{[J]:go,[Z]:[{[J]:bt,[Z]:[{[J]:Xt,[Z]:[ts,"region"]},Iv]}]}],zD=[{[J]:go,[Z]:[{[J]:bs,[Z]:[{[J]:Xt,[Z]:[ts,"resourceId[2]"]}]}]}],Hwe=[ts,"resourceId[2]"],GS=[{[J]:Rv,[Z]:[{[J]:Xt,[Z]:[ts,"region"]}],[st]:"bucketPartition"}],HD=[{[J]:bt,[Z]:[r9,{[J]:Xt,[Z]:[{[De]:"partitionResult"},pr]}]}],KS=[{[J]:ou,[Z]:[{[J]:Xt,[Z]:[ts,"region"]},!0]}],YS=[{[J]:ou,[Z]:[n9,!1]}],WD=[{[J]:ou,[Z]:[Qj,!1]}],qD=[{[J]:ou,[Z]:[{[De]:"Region"},!0]}],Wwe={version:"1.0",parameters:{Bucket:ku,Region:ku,UseFIPS:Tu,UseDualStack:Tu,Endpoint:ku,ForcePathStyle:Tu,Accelerate:Tu,UseGlobalEndpoint:Tu,UseObjectLambdaEndpoint:sf,Key:ku,Prefix:ku,CopySource:ku,DisableAccessPoints:sf,DisableMultiRegionAccessPoints:Tu,UseArnRegion:sf,UseS3ExpressControlEndpoint:sf,DisableS3ExpressSessionAuth:sf},[oe]:[{[B]:[{[J]:bs,[Z]:zS}],[oe]:[{[B]:[Ws,Bt],error:"Accelerate cannot be used with FIPS",[M]:je},{[B]:[Ot,lr],error:"Cannot set dual-stack in combination with a custom endpoint.",[M]:je},{[B]:[lr,Bt],error:"A custom endpoint cannot be combined with FIPS",[M]:je},{[B]:[lr,Ws],error:"A custom endpoint cannot be combined with S3 Accelerate",[M]:je},{[B]:[Bt,Jz,qI],error:"Partition does not support FIPS",[M]:je},{[B]:[ap,{[J]:Mt,[Z]:[wt,0,Iwe,Ki],[st]:DI},{[J]:bt,[Z]:[{[De]:DI},"--x-s3"]}],[oe]:[GI,KI,YI,{[B]:[JI,ZI],[oe]:[{[B]:Vs,[oe]:[{[B]:[Qz,et],[oe]:[{[B]:Au,endpoint:{[Pe]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Ne]:rc,[Re]:Qe},[M]:he},{endpoint:{[Pe]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Ne]:rc,[Re]:Qe},[M]:he}],[M]:ae}],[M]:ae}],[M]:ae},{[B]:TD,[oe]:[{[B]:Vs,[oe]:[{[B]:kD,[oe]:[{[B]:jD,[oe]:Yi,[M]:ae},{[B]:AD,[oe]:Yi,[M]:ae},{[B]:PD,[oe]:Yi,[M]:ae},{[B]:ND,[oe]:Yi,[M]:ae},{[B]:RD,[oe]:Yi,[M]:ae},$m],[M]:ae},{[B]:jD,[oe]:Xi,[M]:ae},{[B]:AD,[oe]:Xi,[M]:ae},{[B]:PD,[oe]:Xi,[M]:ae},{[B]:ND,[oe]:Xi,[M]:ae},{[B]:RD,[oe]:Xi,[M]:ae},$m],[M]:ae}],[M]:ae},XI],[M]:ae},{[B]:[ap,{[J]:Mt,[Z]:OD,[st]:FI},{[J]:bt,[Z]:[{[De]:FI},"--xa-s3"]}],[oe]:[GI,KI,YI,{[B]:TD,[oe]:[{[B]:Vs,[oe]:[{[B]:kD,[oe]:[{[B]:MD,[oe]:Yi,[M]:ae},{[B]:ID,[oe]:Yi,[M]:ae},{[B]:DD,[oe]:Yi,[M]:ae},{[B]:FD,[oe]:Yi,[M]:ae},{[B]:LD,[oe]:Yi,[M]:ae},$m],[M]:ae},{[B]:MD,[oe]:Xi,[M]:ae},{[B]:ID,[oe]:Xi,[M]:ae},{[B]:DD,[oe]:Xi,[M]:ae},{[B]:FD,[oe]:Xi,[M]:ae},{[B]:LD,[oe]:Xi,[M]:ae},$m],[M]:ae}],[M]:ae},XI],[M]:ae},{[B]:[QI,JI,ZI],[oe]:[{[B]:Vs,[oe]:[{[B]:ju,endpoint:{[Pe]:Gy,[Ne]:rc,[Re]:Qe},[M]:he},{[B]:Au,endpoint:{[Pe]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}",[Ne]:rc,[Re]:Qe},[M]:he},{endpoint:{[Pe]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}",[Ne]:rc,[Re]:Qe},[M]:he}],[M]:ae}],[M]:ae},{[B]:[ap,{[J]:Mt,[Z]:[wt,49,50,Ki],[st]:Vz},{[J]:Mt,[Z]:[wt,8,12,Ki],[st]:zz},{[J]:Mt,[Z]:OD,[st]:LI},{[J]:Mt,[Z]:[wt,32,49,Ki],[st]:ak},{[J]:Rv,[Z]:zS,[st]:"regionPartition"},{[J]:bt,[Z]:[{[De]:LI},"--op-s3"]}],[oe]:[{[B]:BD,[oe]:[{[B]:[{[J]:bt,[Z]:[eD,"e"]}],[oe]:[{[B]:$D,[oe]:[tD,{[B]:ju,endpoint:{[Pe]:"https://{Bucket}.ec2.{url#authority}",[Ne]:Um,[Re]:Qe},[M]:he}],[M]:ae},{endpoint:{[Pe]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[Ne]:Um,[Re]:Qe},[M]:he}],[M]:ae},{[B]:[{[J]:bt,[Z]:[eD,"o"]}],[oe]:[{[B]:$D,[oe]:[tD,{[B]:ju,endpoint:{[Pe]:"https://{Bucket}.op-{outpostId}.{url#authority}",[Ne]:Um,[Re]:Qe},[M]:he}],[M]:ae},{endpoint:{[Pe]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[Ne]:Um,[Re]:Qe},[M]:he}],[M]:ae},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[M]:je}],[M]:ae},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[M]:je}],[M]:ae},{[B]:Uwe,[oe]:[{[B]:[lr,{[J]:go,[Z]:[{[J]:bs,[Z]:[{[J]:Yj,[Z]:Lwe}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[M]:je},{[B]:[PS,e9],[oe]:[{[B]:Vs,[oe]:[{[B]:UD,[oe]:[{[B]:[Ws,qI],error:"S3 Accelerate cannot be used in this region",[M]:je},{[B]:[Ot,Bt,vr,et,Pr],endpoint:{[Pe]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Ne]:Br,[Re]:Qe},[M]:he},{[B]:[Ot,Bt,vr,et,yt,$r],[oe]:[{endpoint:rD,[M]:he}],[M]:ae},{[B]:[Ot,Bt,vr,et,yt,Ur],endpoint:rD,[M]:he},{[B]:[ft,Bt,vr,et,Pr],endpoint:{[Pe]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[Ne]:Br,[Re]:Qe},[M]:he},{[B]:[ft,Bt,vr,et,yt,$r],[oe]:[{endpoint:nD,[M]:he}],[M]:ae},{[B]:[ft,Bt,vr,et,yt,Ur],endpoint:nD,[M]:he},{[B]:[Ot,ut,Ws,et,Pr],endpoint:{[Pe]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Ne]:Br,[Re]:Qe},[M]:he},{[B]:[Ot,ut,Ws,et,yt,$r],[oe]:[{endpoint:sD,[M]:he}],[M]:ae},{[B]:[Ot,ut,Ws,et,yt,Ur],endpoint:sD,[M]:he},{[B]:[Ot,ut,vr,et,Pr],endpoint:{[Pe]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Ne]:Br,[Re]:Qe},[M]:he},{[B]:[Ot,ut,vr,et,yt,$r],[oe]:[{endpoint:iD,[M]:he}],[M]:ae},{[B]:[Ot,ut,vr,et,yt,Ur],endpoint:iD,[M]:he},{[B]:[ft,ut,vr,lr,jn,AS,Pr],endpoint:{[Pe]:Hz,[Ne]:Br,[Re]:Qe},[M]:he},{[B]:[ft,ut,vr,lr,jn,NS,Pr],endpoint:{[Pe]:Mv,[Ne]:Br,[Re]:Qe},[M]:he},{[B]:[ft,ut,vr,lr,jn,AS,yt,$r],[oe]:[{[B]:ja,endpoint:RS,[M]:he},{endpoint:RS,[M]:he}],[M]:ae},{[B]:[ft,ut,vr,lr,jn,NS,yt,$r],[oe]:[{[B]:ja,endpoint:lk,[M]:he},oD],[M]:ae},{[B]:[ft,ut,vr,lr,jn,AS,yt,Ur],endpoint:RS,[M]:he},{[B]:[ft,ut,vr,lr,jn,NS,yt,Ur],endpoint:lk,[M]:he},{[B]:[ft,ut,Ws,et,Pr],endpoint:{[Pe]:Wz,[Ne]:Br,[Re]:Qe},[M]:he},{[B]:[ft,ut,Ws,et,yt,$r],[oe]:[{[B]:ja,endpoint:OS,[M]:he},{endpoint:OS,[M]:he}],[M]:ae},{[B]:[ft,ut,Ws,et,yt,Ur],endpoint:OS,[M]:he},{[B]:[ft,ut,vr,et,Pr],endpoint:{[Pe]:BI,[Ne]:Br,[Re]:Qe},[M]:he},{[B]:[ft,ut,vr,et,yt,$r],[oe]:[{[B]:ja,endpoint:{[Pe]:BI,[Ne]:Er,[Re]:Qe},[M]:he},{endpoint:aD,[M]:he}],[M]:ae},{[B]:[ft,ut,vr,et,yt,Ur],endpoint:aD,[M]:he}],[M]:ae},Vm],[M]:ae}],[M]:ae},{[B]:[lr,jn,{[J]:bt,[Z]:[{[J]:Xt,[Z]:[Zz,"scheme"]},"http"]},{[J]:Ov,[Z]:[wt,Ki]},PS,ut,ft,vr],[oe]:[{[B]:Vs,[oe]:[{[B]:UD,[oe]:[oD],[M]:ae},Vm],[M]:ae}],[M]:ae},{[B]:[PS,{[J]:qz,[Z]:Bwe,[st]:Gz}],[oe]:[{[B]:[{[J]:Xt,[Z]:[ts,"resourceId[0]"],[st]:Kz},{[J]:go,[Z]:[{[J]:bt,[Z]:[t9,Iv]}]}],[oe]:[{[B]:[{[J]:bt,[Z]:[MS,Jj]}],[oe]:[{[B]:WS,[oe]:[{[B]:VD,[oe]:[lD,cD,{[B]:qS,[oe]:[uD,{[B]:zD,[oe]:[IS,{[B]:GS,[oe]:[{[B]:Vs,[oe]:[{[B]:HD,[oe]:[{[B]:KS,[oe]:[{[B]:[{[J]:bt,[Z]:[n9,Iv]}],error:"Invalid ARN: Missing account id",[M]:je},{[B]:YS,[oe]:[{[B]:WD,[oe]:[{[B]:ju,endpoint:{[Pe]:$I,[Ne]:DS,[Re]:Qe},[M]:he},{[B]:Au,endpoint:{[Pe]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Ne]:DS,[Re]:Qe},[M]:he},{endpoint:{[Pe]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Ne]:DS,[Re]:Qe},[M]:he}],[M]:ae},dD],[M]:ae},FS],[M]:ae},LS],[M]:ae},BS],[M]:ae}],[M]:ae}],[M]:ae},hD],[M]:ae},{error:"Invalid ARN: bucket ARN is missing a region",[M]:je}],[M]:ae},fD],[M]:ae},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[M]:je}],[M]:ae},{[B]:WS,[oe]:[{[B]:VD,[oe]:[{[B]:qS,[oe]:[{[B]:WS,[oe]:[{[B]:qS,[oe]:[uD,{[B]:zD,[oe]:[IS,{[B]:GS,[oe]:[{[B]:Vs,[oe]:[{[B]:[{[J]:bt,[Z]:[r9,"{partitionResult#name}"]}],[oe]:[{[B]:KS,[oe]:[{[B]:[{[J]:bt,[Z]:[MS,Jd]}],[oe]:[{[B]:YS,[oe]:[{[B]:WD,[oe]:[{[B]:HS,error:"Access Points do not support S3 Accelerate",[M]:je},{[B]:[Bt,Ot],endpoint:{[Pe]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Ne]:of,[Re]:Qe},[M]:he},{[B]:[Bt,ft],endpoint:{[Pe]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Ne]:of,[Re]:Qe},[M]:he},{[B]:[ut,Ot],endpoint:{[Pe]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Ne]:of,[Re]:Qe},[M]:he},{[B]:[ut,ft,lr,jn],endpoint:{[Pe]:$I,[Ne]:of,[Re]:Qe},[M]:he},{[B]:[ut,ft],endpoint:{[Pe]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Ne]:of,[Re]:Qe},[M]:he}],[M]:ae},dD],[M]:ae},FS],[M]:ae},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[M]:je}],[M]:ae},LS],[M]:ae},BS],[M]:ae}],[M]:ae}],[M]:ae},hD],[M]:ae}],[M]:ae}],[M]:ae},{[B]:[{[J]:ou,[Z]:[Qj,Ki]}],[oe]:[{[B]:ED,error:"S3 MRAP does not support dual-stack",[M]:je},{[B]:Au,error:"S3 MRAP does not support FIPS",[M]:je},{[B]:HS,error:"S3 MRAP does not support S3 Accelerate",[M]:je},{[B]:[{[J]:mr,[Z]:[{[De]:"DisableMultiRegionAccessPoints"},Ki]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[M]:je},{[B]:[{[J]:Rv,[Z]:zS,[st]:UI}],[oe]:[{[B]:[{[J]:bt,[Z]:[{[J]:Xt,[Z]:[{[De]:UI},pr]},{[J]:Xt,[Z]:[ts,"partition"]}]}],[oe]:[{endpoint:{[Pe]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[Ne]:{[bn]:[{[Kr]:Ki,name:Xj,[Yr]:Jd,[Kj]:Vwe}]},[Re]:Qe},[M]:he}],[M]:ae},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[M]:je}],[M]:ae}],[M]:ae},{error:"Invalid Access Point Name",[M]:je}],[M]:ae},fD],[M]:ae},{[B]:[{[J]:bt,[Z]:[MS,cg]}],[oe]:[{[B]:ED,error:"S3 Outposts does not support Dual-stack",[M]:je},{[B]:Au,error:"S3 Outposts does not support FIPS",[M]:je},{[B]:HS,error:"S3 Outposts does not support S3 Accelerate",[M]:je},{[B]:[{[J]:bs,[Z]:[{[J]:Xt,[Z]:[ts,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[M]:je},{[B]:[{[J]:Xt,[Z]:zwe,[st]:ak}],[oe]:[{[B]:BD,[oe]:[IS,{[B]:GS,[oe]:[{[B]:Vs,[oe]:[{[B]:HD,[oe]:[{[B]:KS,[oe]:[{[B]:YS,[oe]:[{[B]:[{[J]:Xt,[Z]:Hwe,[st]:VI}],[oe]:[{[B]:[{[J]:Xt,[Z]:[ts,"resourceId[3]"],[st]:Zj}],[oe]:[{[B]:[{[J]:bt,[Z]:[{[De]:VI},Yz]}],[oe]:[{[B]:ju,endpoint:{[Pe]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[Ne]:pD,[Re]:Qe},[M]:he},{endpoint:{[Pe]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[Ne]:pD,[Re]:Qe},[M]:he}],[M]:ae},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[M]:je}],[M]:ae},{error:"Invalid ARN: expected an access point name",[M]:je}],[M]:ae},{error:"Invalid ARN: Expected a 4-component resource",[M]:je}],[M]:ae},FS],[M]:ae},LS],[M]:ae},BS],[M]:ae}],[M]:ae}],[M]:ae},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[M]:je}],[M]:ae},{error:"Invalid ARN: The Outpost Id was not set",[M]:je}],[M]:ae},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[M]:je}],[M]:ae},{error:"Invalid ARN: No ARN type specified",[M]:je}],[M]:ae},{[B]:[{[J]:Mt,[Z]:[wt,0,4,Dwe],[st]:zI},{[J]:bt,[Z]:[{[De]:zI},"arn:"]},{[J]:go,[Z]:[{[J]:bs,[Z]:[gD]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[M]:je},{[B]:[{[J]:mr,[Z]:[Fwe,Ki]},gD],error:"Path-style addressing cannot be used with ARN buckets",[M]:je},{[B]:$we,[oe]:[{[B]:Vs,[oe]:[{[B]:[vr],[oe]:[{[B]:[Ot,et,Bt,Pr],endpoint:{[Pe]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Ne]:Br,[Re]:Qe},[M]:he},{[B]:[Ot,et,Bt,yt,$r],[oe]:[{endpoint:mD,[M]:he}],[M]:ae},{[B]:[Ot,et,Bt,yt,Ur],endpoint:mD,[M]:he},{[B]:[ft,et,Bt,Pr],endpoint:{[Pe]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Ne]:Br,[Re]:Qe},[M]:he},{[B]:[ft,et,Bt,yt,$r],[oe]:[{endpoint:yD,[M]:he}],[M]:ae},{[B]:[ft,et,Bt,yt,Ur],endpoint:yD,[M]:he},{[B]:[Ot,et,ut,Pr],endpoint:{[Pe]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[Ne]:Br,[Re]:Qe},[M]:he},{[B]:[Ot,et,ut,yt,$r],[oe]:[{endpoint:vD,[M]:he}],[M]:ae},{[B]:[Ot,et,ut,yt,Ur],endpoint:vD,[M]:he},{[B]:[ft,lr,jn,ut,Pr],endpoint:{[Pe]:Xz,[Ne]:Br,[Re]:Qe},[M]:he},{[B]:[ft,lr,jn,ut,yt,$r],[oe]:[{[B]:ja,endpoint:$S,[M]:he},{endpoint:$S,[M]:he}],[M]:ae},{[B]:[ft,lr,jn,ut,yt,Ur],endpoint:$S,[M]:he},{[B]:[ft,et,ut,Pr],endpoint:{[Pe]:HI,[Ne]:Br,[Re]:Qe},[M]:he},{[B]:[ft,et,ut,yt,$r],[oe]:[{[B]:ja,endpoint:{[Pe]:HI,[Ne]:Er,[Re]:Qe},[M]:he},{endpoint:xD,[M]:he}],[M]:ae},{[B]:[ft,et,ut,yt,Ur],endpoint:xD,[M]:he}],[M]:ae},{error:"Path-style addressing cannot be used with S3 Accelerate",[M]:je}],[M]:ae}],[M]:ae}],[M]:ae},{[B]:[{[J]:bs,[Z]:[wD]},{[J]:mr,[Z]:[wD,Ki]}],[oe]:[{[B]:Vs,[oe]:[{[B]:qD,[oe]:[lD,cD,{[B]:ju,endpoint:{[Pe]:Gy,[Ne]:US,[Re]:Qe},[M]:he},{[B]:Au,endpoint:{[Pe]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[Ne]:US,[Re]:Qe},[M]:he},{endpoint:{[Pe]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[Ne]:US,[Re]:Qe},[M]:he}],[M]:ae},Vm],[M]:ae}],[M]:ae},{[B]:[QI],[oe]:[{[B]:Vs,[oe]:[{[B]:qD,[oe]:[{[B]:[Bt,Ot,et,Pr],endpoint:{[Pe]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Ne]:Br,[Re]:Qe},[M]:he},{[B]:[Bt,Ot,et,yt,$r],[oe]:[{endpoint:bD,[M]:he}],[M]:ae},{[B]:[Bt,Ot,et,yt,Ur],endpoint:bD,[M]:he},{[B]:[Bt,ft,et,Pr],endpoint:{[Pe]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[Ne]:Br,[Re]:Qe},[M]:he},{[B]:[Bt,ft,et,yt,$r],[oe]:[{endpoint:SD,[M]:he}],[M]:ae},{[B]:[Bt,ft,et,yt,Ur],endpoint:SD,[M]:he},{[B]:[ut,Ot,et,Pr],endpoint:{[Pe]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[Ne]:Br,[Re]:Qe},[M]:he},{[B]:[ut,Ot,et,yt,$r],[oe]:[{endpoint:_D,[M]:he}],[M]:ae},{[B]:[ut,Ot,et,yt,Ur],endpoint:_D,[M]:he},{[B]:[ut,ft,lr,jn,Pr],endpoint:{[Pe]:Gy,[Ne]:Br,[Re]:Qe},[M]:he},{[B]:[ut,ft,lr,jn,yt,$r],[oe]:[{[B]:ja,endpoint:VS,[M]:he},{endpoint:VS,[M]:he}],[M]:ae},{[B]:[ut,ft,lr,jn,yt,Ur],endpoint:VS,[M]:he},{[B]:[ut,ft,et,Pr],endpoint:{[Pe]:WI,[Ne]:Br,[Re]:Qe},[M]:he},{[B]:[ut,ft,et,yt,$r],[oe]:[{[B]:ja,endpoint:{[Pe]:WI,[Ne]:Er,[Re]:Qe},[M]:he},{endpoint:CD,[M]:he}],[M]:ae},{[B]:[ut,ft,et,yt,Ur],endpoint:CD,[M]:he}],[M]:ae},Vm],[M]:ae}],[M]:ae}],[M]:ae},{error:"A region must be set when sending requests to S3.",[M]:je}]},qwe=Wwe,Gwe=new nxe({size:50,params:["Accelerate","Bucket","DisableAccessPoints","DisableMultiRegionAccessPoints","DisableS3ExpressSessionAuth","Endpoint","ForcePathStyle","Region","UseArnRegion","UseDualStack","UseFIPS","UseGlobalEndpoint","UseObjectLambdaEndpoint","UseS3ExpressControlEndpoint"]}),s9=(t,e={})=>Gwe.get(t,()=>Sxe(qwe,{endpointParams:t,logger:e.logger}));Av.aws=Oz;const Kwe=t=>async(e,r,n)=>{var a,l,c;if(!n)throw new Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");const s=await t(e,r,n),i=(c=(l=(a=_h(r))==null?void 0:a.commandInstance)==null?void 0:l.constructor)==null?void 0:c.getEndpointParameterInstructions;if(!i)throw new Error(`getEndpointParameterInstructions() is not defined on \`${r.commandName}\``);const o=await Fz(n,{getEndpointParameterInstructions:i},e);return Object.assign(s,o)},Ywe=async(t,e,r)=>({operation:_h(e).operation,region:await Mi(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),Xwe=Kwe(Ywe);function i9(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"s3",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function o9(t){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"s3",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}const Jwe=(t,e,r)=>s=>{var l;const o=(l=t(s).properties)==null?void 0:l.authSchemes;if(!o)return e(s);const a=[];for(const c of o){const{name:d,properties:h={},...f}=c,p=d.toLowerCase();d!==p&&console.warn(`HttpAuthScheme has been normalized with lowercasing: \`${d}\` to \`${p}\``);let g;if(p==="sigv4a"){g="aws.auth#sigv4a";const m=o.find(x=>{const b=x.name.toLowerCase();return b!=="sigv4a"&&b.startsWith("sigv4")});if(Uz.sigv4aDependency()==="none"&&m)continue}else if(p.startsWith("sigv4"))g="aws.auth#sigv4";else throw new Error(`Unknown HttpAuthScheme found in \`@smithy.rules#endpointRuleSet\`: \`${p}\``);const y=r[g];if(!y)throw new Error(`Could not find HttpAuthOption create function for \`${g}\``);const v=y(s);v.schemeId=g,v.signingProperties={...v.signingProperties||{},...f,...h},a.push(v)}return a},Zwe=t=>{const e=[];switch(t.operation){default:e.push(i9(t)),e.push(o9(t))}return e},Qwe=Jwe(s9,Zwe,{"aws.auth#sigv4":i9,"aws.auth#sigv4a":o9}),ebe=t=>{const e=eye(t),r=jme(e);return Object.assign(r,{authSchemePreference:Mi(t.authSchemePreference??[])})},tbe=t=>Object.assign(t,{useFipsEndpoint:t.useFipsEndpoint??!1,useDualstackEndpoint:t.useDualstackEndpoint??!1,forcePathStyle:t.forcePathStyle??!1,useAccelerateEndpoint:t.useAccelerateEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,disableMultiregionAccessPoints:t.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"}),au={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class an extends rd{constructor(e){super(e),Object.setPrototypeOf(this,an.prototype)}}class eA extends an{constructor(r){super({name:"NoSuchUpload",$fault:"client",...r});Te(this,"name","NoSuchUpload");Te(this,"$fault","client");Object.setPrototypeOf(this,eA.prototype)}}const rbe={CRC32:"CRC32",CRC32C:"CRC32C",CRC64NVME:"CRC64NVME",SHA1:"SHA1",SHA256:"SHA256"};class tA extends an{constructor(r){super({name:"ObjectNotInActiveTierError",$fault:"client",...r});Te(this,"name","ObjectNotInActiveTierError");Te(this,"$fault","client");Object.setPrototypeOf(this,tA.prototype)}}class rA extends an{constructor(r){super({name:"BucketAlreadyExists",$fault:"client",...r});Te(this,"name","BucketAlreadyExists");Te(this,"$fault","client");Object.setPrototypeOf(this,rA.prototype)}}class nA extends an{constructor(r){super({name:"BucketAlreadyOwnedByYou",$fault:"client",...r});Te(this,"name","BucketAlreadyOwnedByYou");Te(this,"$fault","client");Object.setPrototypeOf(this,nA.prototype)}}class sA extends an{constructor(r){super({name:"NoSuchBucket",$fault:"client",...r});Te(this,"name","NoSuchBucket");Te(this,"$fault","client");Object.setPrototypeOf(this,sA.prototype)}}var GD;(function(t){t.visit=(e,r)=>e.Prefix!==void 0?r.Prefix(e.Prefix):e.Tag!==void 0?r.Tag(e.Tag):e.And!==void 0?r.And(e.And):r._(e.$unknown[0],e.$unknown[1])})(GD||(GD={}));var KD;(function(t){t.visit=(e,r)=>e.Prefix!==void 0?r.Prefix(e.Prefix):e.Tag!==void 0?r.Tag(e.Tag):e.AccessPointArn!==void 0?r.AccessPointArn(e.AccessPointArn):e.And!==void 0?r.And(e.And):r._(e.$unknown[0],e.$unknown[1])})(KD||(KD={}));class iA extends an{constructor(r){super({name:"InvalidObjectState",$fault:"client",...r});Te(this,"name","InvalidObjectState");Te(this,"$fault","client");Te(this,"StorageClass");Te(this,"AccessTier");Object.setPrototypeOf(this,iA.prototype),this.StorageClass=r.StorageClass,this.AccessTier=r.AccessTier}}class oA extends an{constructor(r){super({name:"NoSuchKey",$fault:"client",...r});Te(this,"name","NoSuchKey");Te(this,"$fault","client");Object.setPrototypeOf(this,oA.prototype)}}class aA extends an{constructor(r){super({name:"NotFound",$fault:"client",...r});Te(this,"name","NotFound");Te(this,"$fault","client");Object.setPrototypeOf(this,aA.prototype)}}const nbe=t=>({...t,...t.SSEKMSKeyId&&{SSEKMSKeyId:Cr}}),sbe=t=>({...t,...t.SSECustomerKey&&{SSECustomerKey:Cr}}),ibe=t=>({...t,...t.SSEKMSKeyId&&{SSEKMSKeyId:Cr},...t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Cr}}),obe=t=>({...t,...t.SSECustomerKey&&{SSECustomerKey:Cr},...t.SSEKMSKeyId&&{SSEKMSKeyId:Cr},...t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Cr}}),abe=t=>({...t,...t.SecretAccessKey&&{SecretAccessKey:Cr},...t.SessionToken&&{SessionToken:Cr}}),lbe=t=>({...t,...t.SSEKMSKeyId&&{SSEKMSKeyId:Cr},...t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Cr},...t.Credentials&&{Credentials:abe(t.Credentials)}}),cbe=t=>({...t,...t.SSEKMSKeyId&&{SSEKMSKeyId:Cr},...t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Cr}});class lA extends an{constructor(r){super({name:"EncryptionTypeMismatch",$fault:"client",...r});Te(this,"name","EncryptionTypeMismatch");Te(this,"$fault","client");Object.setPrototypeOf(this,lA.prototype)}}class cA extends an{constructor(r){super({name:"InvalidRequest",$fault:"client",...r});Te(this,"name","InvalidRequest");Te(this,"$fault","client");Object.setPrototypeOf(this,cA.prototype)}}class uA extends an{constructor(r){super({name:"InvalidWriteOffset",$fault:"client",...r});Te(this,"name","InvalidWriteOffset");Te(this,"$fault","client");Object.setPrototypeOf(this,uA.prototype)}}class dA extends an{constructor(r){super({name:"TooManyParts",$fault:"client",...r});Te(this,"name","TooManyParts");Te(this,"$fault","client");Object.setPrototypeOf(this,dA.prototype)}}class hA extends an{constructor(r){super({name:"IdempotencyParameterMismatch",$fault:"client",...r});Te(this,"name","IdempotencyParameterMismatch");Te(this,"$fault","client");Object.setPrototypeOf(this,hA.prototype)}}class fA extends an{constructor(r){super({name:"ObjectAlreadyInActiveTierError",$fault:"client",...r});Te(this,"name","ObjectAlreadyInActiveTierError");Te(this,"$fault","client");Object.setPrototypeOf(this,fA.prototype)}}var YD;(function(t){t.visit=(e,r)=>e.Records!==void 0?r.Records(e.Records):e.Stats!==void 0?r.Stats(e.Stats):e.Progress!==void 0?r.Progress(e.Progress):e.Cont!==void 0?r.Cont(e.Cont):e.End!==void 0?r.End(e.End):r._(e.$unknown[0],e.$unknown[1])})(YD||(YD={}));const ube=t=>({...t,...t.SSEKMSKeyId&&{SSEKMSKeyId:Cr},...t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Cr}}),dbe=t=>({...t,...t.SSECustomerKey&&{SSECustomerKey:Cr},...t.SSEKMSKeyId&&{SSEKMSKeyId:Cr},...t.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Cr}}),hbe=t=>({...t,...t.SSEKMSKeyId&&{SSEKMSKeyId:Cr}}),fbe=t=>({...t,...t.SSECustomerKey&&{SSECustomerKey:Cr}}),pbe=async(t,e)=>{const r=nu(t,e),n=xt({},Mr,{[Ah]:t[kh],[jh]:t[Eh],[p1e]:[()=>Mr(t[XD]),()=>Dj(t[XD]).toString()]});r.bp("/{Key+}"),r.p("Bucket",()=>t.Bucket,"{Bucket}",!1),r.p("Key",()=>t.Key,"{Key+}",!0);const s=xt({[wA]:[,"AbortMultipartUpload"],[yA]:[,ma(t[Cd],"UploadId")]});return r.m("DELETE").h(n).q(s).b(void 0),r.build()},gbe=async(t,e)=>{const r=nu(t,e),n=xt({},Mr,{"content-type":"application/xml",[$g]:t[Zo],[Ug]:t[Qo],[Vg]:t[ea],[zg]:t[ta],[Hg]:t[ra],[kw]:t[Ec],[g1e]:[()=>Mr(t[JD]),()=>t[JD].toString()],[Ah]:t[kh],[jh]:t[Eh],[N9]:t[y9],[R9]:t[v9],[du]:t[cu],[Tw]:t[Cw],[hu]:t[uu]});r.bp("/{Key+}"),r.p("Bucket",()=>t.Bucket,"{Bucket}",!1),r.p("Key",()=>t.Key,"{Key+}",!0);const s=xt({[yA]:[,ma(t[Cd],"UploadId")]});let i,o;return t.MultipartUpload!==void 0&&(o=zbe(t.MultipartUpload),o=o.n("CompleteMultipartUpload"),i=O9,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("POST").h(n).q(s).b(i),r.build()},mbe=async(t,e)=>{const r=nu(t,e),n=xt({},Mr,{...t.Metadata!==void 0&&Object.keys(t.Metadata).reduce((o,a)=>(o[`x-amz-meta-${a.toLowerCase()}`]=t.Metadata[a],o),{}),[M9]:t[a9],[_9]:t[l9],[C9]:t[c9],[E9]:t[u9],[k9]:t[d9],[j9]:t[h9],[A9]:[()=>Mr(t[Fv]),()=>Dj(t[Fv]).toString()],[F9]:t[f9],[L9]:t[p9],[B9]:t[g9],[$9]:t[m9],[Ul]:t[Bl],[H9]:t[cp],[q9]:t[S9],[du]:t[cu],[Tw]:t[Cw],[hu]:t[uu],[Vl]:t[$l],[Ph]:t[Th],[Ms]:[()=>Mr(t[Bi]),()=>t[Bi].toString()],[Ah]:t[kh],[W9]:t[gA],[V9]:t[w9],[z9]:[()=>Mr(t[Lv]),()=>hz(t[Lv]).toString()],[U9]:t[x9],[jh]:t[Eh],[I9]:t[Lg],[kw]:t[Ec]});r.bp("/{Key+}"),r.p("Bucket",()=>t.Bucket,"{Bucket}",!1),r.p("Key",()=>t.Key,"{Key+}",!0);const s=xt({[u1e]:[,""]});return r.m("POST").h(n).q(s).b(void 0),r.build()},ybe=async(t,e)=>{const r=nu(t,e),n=xt({},Mr,{[f1e]:t[r1e],[Ul]:t[Bl],[Vl]:t[$l],[Ph]:t[Th],[Ms]:[()=>Mr(t[Bi]),()=>t[Bi].toString()]});r.bp("/"),r.p("Bucket",()=>t.Bucket,"{Bucket}",!1);const s=xt({[l1e]:[,""]});return r.m("GET").h(n).q(s).b(void 0),r.build()},vbe=async(t,e)=>{const r=nu(t,e),n=xt({},Mr,{...t.Metadata!==void 0&&Object.keys(t.Metadata).reduce((a,l)=>(a[`x-amz-meta-${l.toLowerCase()}`]=t.Metadata[l],a),{}),[j9]:t[h9]||"application/octet-stream",[M9]:t[a9],[_9]:t[l9],[C9]:t[c9],[E9]:t[u9],[k9]:t[d9],[T9]:[()=>Mr(t[Dv]),()=>t[Dv].toString()],[mA]:t[pA],[vA]:t[Lg],[$g]:t[Zo],[Ug]:t[Qo],[Vg]:t[ea],[zg]:t[ta],[Hg]:t[ra],[A9]:[()=>Mr(t[Fv]),()=>Dj(t[Fv]).toString()],[N9]:t[y9],[R9]:t[v9],[F9]:t[f9],[L9]:t[p9],[B9]:t[g9],[$9]:t[m9],[m1e]:[()=>Mr(t[ZD]),()=>t[ZD].toString()],[Ul]:t[Bl],[H9]:t[cp],[q9]:t[S9],[du]:t[cu],[Tw]:t[Cw],[hu]:t[uu],[Vl]:t[$l],[Ph]:t[Th],[Ms]:[()=>Mr(t[Bi]),()=>t[Bi].toString()],[Ah]:t[kh],[W9]:t[gA],[V9]:t[w9],[z9]:[()=>Mr(t[Lv]),()=>hz(t[Lv]).toString()],[U9]:t[x9],[jh]:t[Eh]});r.bp("/{Key+}"),r.p("Bucket",()=>t.Bucket,"{Bucket}",!1),r.p("Key",()=>t.Key,"{Key+}",!0);const s=xt({[wA]:[,"PutObject"]});let i,o;return t.Body!==void 0&&(o=t.Body,i=o),r.m("PUT").h(n).q(s).b(i),r.build()},xbe=async(t,e)=>{const r=nu(t,e),n=xt({},Mr,{"content-type":"application/xml",[mA]:t[pA],[vA]:t[Lg],[jh]:t[Eh],[Ah]:t[kh]});r.bp("/{Key+}"),r.p("Bucket",()=>t.Bucket,"{Bucket}",!1),r.p("Key",()=>t.Key,"{Key+}",!0);const s=xt({[c1e]:[,""],[d1e]:[,t[Ew]]});let i,o;return t.Tagging!==void 0&&(o=Gbe(t.Tagging),i=O9,o.a("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=o.toString()),r.m("PUT").h(n).q(s).b(i),r.build()},wbe=async(t,e)=>{const r=nu(t,e),n=xt({},Mr,{"content-type":"application/octet-stream",[T9]:[()=>Mr(t[Dv]),()=>t[Dv].toString()],[mA]:t[pA],[vA]:t[Lg],[$g]:t[Zo],[Ug]:t[Qo],[Vg]:t[ea],[zg]:t[ta],[Hg]:t[ra],[du]:t[cu],[Tw]:t[Cw],[hu]:t[uu],[Ah]:t[kh],[jh]:t[Eh]});r.bp("/{Key+}"),r.p("Bucket",()=>t.Bucket,"{Bucket}",!1),r.p("Key",()=>t.Key,"{Key+}",!0);const s=xt({[wA]:[,"UploadPart"],[a1e]:[ma(t.PartNumber,"PartNumber")!=null,()=>t[Cf].toString()],[yA]:[,ma(t[Cd],"UploadId")]});let i,o;return t.Body!==void 0&&(o=t.Body,i=o),r.m("PUT").h(n).q(s).b(i),r.build()},bbe=async(t,e)=>{if(t.statusCode!==204&&t.statusCode>=300)return lu(t,e);const r=xt({$metadata:yr(t),[Bg]:[,t.headers[Wg]]});return await Dg(t.body,e),r},Sbe=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return lu(t,e);const r=xt({$metadata:yr(t),[lp]:[,t.headers[D9]],[Bl]:[,t.headers[Ul]],[Ew]:[,t.headers[xA]],[$l]:[,t.headers[Vl]],[Bi]:[()=>t.headers[Ms]!==void 0,()=>Fg(t.headers[Ms])],[Bg]:[,t.headers[Wg]]}),n=ma(Mj(await bw(t.body,e)),"body");return n[Sd]!=null&&(r[Sd]=Wr(n[Sd])),n[Zo]!=null&&(r[Zo]=Wr(n[Zo])),n[Qo]!=null&&(r[Qo]=Wr(n[Qo])),n[ea]!=null&&(r[ea]=Wr(n[ea])),n[ta]!=null&&(r[ta]=Wr(n[ta])),n[ra]!=null&&(r[ra]=Wr(n[ra])),n[Ec]!=null&&(r[Ec]=Wr(n[Ec])),n[_d]!=null&&(r[_d]=Wr(n[_d])),n[na]!=null&&(r[na]=Wr(n[na])),n[QS]!=null&&(r[QS]=Wr(n[QS])),r},_be=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return lu(t,e);const r=xt({$metadata:yr(t),[Xbe]:[()=>t.headers[QD]!==void 0,()=>ma(ume(t.headers[QD]))],[Jbe]:[,t.headers[h1e]],[Bl]:[,t.headers[Ul]],[cu]:[,t.headers[du]],[uu]:[,t.headers[hu]],[$l]:[,t.headers[Vl]],[Th]:[,t.headers[Ph]],[Bi]:[()=>t.headers[Ms]!==void 0,()=>Fg(t.headers[Ms])],[Bg]:[,t.headers[Wg]],[Lg]:[,t.headers[I9]],[Ec]:[,t.headers[kw]]}),n=ma(Mj(await bw(t.body,e)),"body");return n[Sd]!=null&&(r[Sd]=Wr(n[Sd])),n[na]!=null&&(r[na]=Wr(n[na])),n[Cd]!=null&&(r[Cd]=Wr(n[Cd])),r},Cbe=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return lu(t,e);const r=xt({$metadata:yr(t),[Bl]:[,t.headers[Ul]],[$l]:[,t.headers[Vl]],[Th]:[,t.headers[Ph]],[Bi]:[()=>t.headers[Ms]!==void 0,()=>Fg(t.headers[Ms])]}),n=ma(Mj(await bw(t.body,e)),"body");return n[ZS]!=null&&(r[ZS]=Ybe(n[ZS])),r},Ebe=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return lu(t,e);const r=xt({$metadata:yr(t),[lp]:[,t.headers[D9]],[_d]:[,t.headers[P9]],[Zo]:[,t.headers[$g]],[Qo]:[,t.headers[Ug]],[ea]:[,t.headers[Vg]],[ta]:[,t.headers[zg]],[ra]:[,t.headers[Hg]],[Ec]:[,t.headers[kw]],[Bl]:[,t.headers[Ul]],[Ew]:[,t.headers[xA]],[cu]:[,t.headers[du]],[uu]:[,t.headers[hu]],[$l]:[,t.headers[Vl]],[Th]:[,t.headers[Ph]],[Bi]:[()=>t.headers[Ms]!==void 0,()=>Fg(t.headers[Ms])],[n1e]:[()=>t.headers[e3]!==void 0,()=>rme(t.headers[e3])],[Bg]:[,t.headers[Wg]]});return await Dg(t.body,e),r},kbe=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return lu(t,e);const r=xt({$metadata:yr(t),[Ew]:[,t.headers[xA]]});return await Dg(t.body,e),r},Tbe=async(t,e)=>{if(t.statusCode!==200&&t.statusCode>=300)return lu(t,e);const r=xt({$metadata:yr(t),[Bl]:[,t.headers[Ul]],[_d]:[,t.headers[P9]],[Zo]:[,t.headers[$g]],[Qo]:[,t.headers[Ug]],[ea]:[,t.headers[Vg]],[ta]:[,t.headers[zg]],[ra]:[,t.headers[Hg]],[cu]:[,t.headers[du]],[uu]:[,t.headers[hu]],[$l]:[,t.headers[Vl]],[Bi]:[()=>t.headers[Ms]!==void 0,()=>Fg(t.headers[Ms])],[Bg]:[,t.headers[Wg]]});return await Dg(t.body,e),r},lu=async(t,e)=>{const r={...t,body:await I0e(t.body,e)},n=D0e(t,r.body);switch(n){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":throw await Lbe(r);case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":throw await Ube(r);case"BucketAlreadyExists":case"com.amazonaws.s3#BucketAlreadyExists":throw await Abe(r);case"BucketAlreadyOwnedByYou":case"com.amazonaws.s3#BucketAlreadyOwnedByYou":throw await Pbe(r);case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":throw await Dbe(r);case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":throw await Obe(r);case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":throw await Fbe(r);case"NotFound":case"com.amazonaws.s3#NotFound":throw await Bbe(r);case"EncryptionTypeMismatch":case"com.amazonaws.s3#EncryptionTypeMismatch":throw await Nbe(r);case"InvalidRequest":case"com.amazonaws.s3#InvalidRequest":throw await Mbe(r);case"InvalidWriteOffset":case"com.amazonaws.s3#InvalidWriteOffset":throw await Ibe(r);case"TooManyParts":case"com.amazonaws.s3#TooManyParts":throw await Vbe(r);case"IdempotencyParameterMismatch":case"com.amazonaws.s3#IdempotencyParameterMismatch":throw await Rbe(r);case"ObjectAlreadyInActiveTierError":case"com.amazonaws.s3#ObjectAlreadyInActiveTierError":throw await $be(r);default:const s=r.body;return jbe({output:t,parsedBody:s,errorCode:n})}},jbe=aye(an),Abe=async(t,e)=>{const r=xt({});t.body;const n=new rA({$metadata:yr(t),...r});return Hn(n,t.body)},Pbe=async(t,e)=>{const r=xt({});t.body;const n=new nA({$metadata:yr(t),...r});return Hn(n,t.body)},Nbe=async(t,e)=>{const r=xt({});t.body;const n=new lA({$metadata:yr(t),...r});return Hn(n,t.body)},Rbe=async(t,e)=>{const r=xt({});t.body;const n=new hA({$metadata:yr(t),...r});return Hn(n,t.body)},Obe=async(t,e)=>{const r=xt({}),n=t.body;n[JS]!=null&&(r[JS]=Wr(n[JS])),n[cp]!=null&&(r[cp]=Wr(n[cp]));const s=new iA({$metadata:yr(t),...r});return Hn(s,t.body)},Mbe=async(t,e)=>{const r=xt({});t.body;const n=new cA({$metadata:yr(t),...r});return Hn(n,t.body)},Ibe=async(t,e)=>{const r=xt({});t.body;const n=new uA({$metadata:yr(t),...r});return Hn(n,t.body)},Dbe=async(t,e)=>{const r=xt({});t.body;const n=new sA({$metadata:yr(t),...r});return Hn(n,t.body)},Fbe=async(t,e)=>{const r=xt({});t.body;const n=new oA({$metadata:yr(t),...r});return Hn(n,t.body)},Lbe=async(t,e)=>{const r=xt({});t.body;const n=new eA({$metadata:yr(t),...r});return Hn(n,t.body)},Bbe=async(t,e)=>{const r=xt({});t.body;const n=new aA({$metadata:yr(t),...r});return Hn(n,t.body)},$be=async(t,e)=>{const r=xt({});t.body;const n=new fA({$metadata:yr(t),...r});return Hn(n,t.body)},Ube=async(t,e)=>{const r=xt({});t.body;const n=new tA({$metadata:yr(t),...r});return Hn(n,t.body)},Vbe=async(t,e)=>{const r=xt({});t.body;const n=new dA({$metadata:yr(t),...r});return Hn(n,t.body)},zbe=(t,e)=>{const r=new po(Zbe);return r.l(t,"Parts","Part",()=>Wbe(t[t1e])),r},Hbe=(t,e)=>{const r=new po(Qbe);return r.cc(t,_d),r.cc(t,Zo),r.cc(t,Qo),r.cc(t,ea),r.cc(t,ta),r.cc(t,ra),t[Cf]!=null&&r.c(po.of(Cf,String(t[Cf])).n(Cf)),r},Wbe=(t,e)=>t.filter(r=>r!=null).map(r=>Hbe(r).n(o1e)),qbe=(t,e)=>{const r=new po(b9);return t[na]!=null&&r.c(po.of(e1e,t[na]).n(na)),r.cc(t,i1e),r},Gbe=(t,e)=>{const r=new po(gA);return r.lc(t,"TagSet","TagSet",()=>Kbe(t[s1e])),r},Kbe=(t,e)=>t.filter(r=>r!=null).map(r=>qbe(r).n(b9)),Ybe=(t,e)=>{const r={};return t[XS]!=null&&(r[XS]=Wr(t[XS])),t[e_]!=null&&(r[e_]=Wr(t[e_])),t[t_]!=null&&(r[t_]=Wr(t[t_])),t[lp]!=null&&(r[lp]=ma(ome(t[lp]))),r},yr=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),a9="ACL",Xbe="AbortDate",XS="AccessKeyId",Jbe="AbortRuleId",JS="AccessTier",Sd="Bucket",Bi="BucketKeyEnabled",ZS="Credentials",Lg="ChecksumAlgorithm",l9="CacheControl",Zo="ChecksumCRC32",Qo="ChecksumCRC32C",ea="ChecksumCRC64NVME",c9="ContentDisposition",u9="ContentEncoding",d9="ContentLanguage",Dv="ContentLength",pA="ContentMD5",Zbe="CompletedMultipartUpload",Qbe="CompletedPart",ta="ChecksumSHA1",ra="ChecksumSHA256",Ec="ChecksumType",h9="ContentType",Fv="Expires",Eh="ExpectedBucketOwner",_d="ETag",lp="Expiration",f9="GrantFullControl",p9="GrantRead",g9="GrantReadACP",m9="GrantWriteACP",y9="IfMatch",XD="IfMatchInitiatedTime",v9="IfNoneMatch",na="Key",QS="Location",JD="MpuObjectSize",e1e="ObjectKey",x9="ObjectLockLegalHoldStatus",w9="ObjectLockMode",Lv="ObjectLockRetainUntilDate",Cf="PartNumber",t1e="Parts",Bg="RequestCharged",kh="RequestPayer",e_="SecretAccessKey",cp="StorageClass",r1e="SessionMode",Bl="ServerSideEncryption",cu="SSECustomerAlgorithm",Cw="SSECustomerKey",uu="SSECustomerKeyMD5",Th="SSEKMSEncryptionContext",$l="SSEKMSKeyId",t_="SessionToken",n1e="Size",gA="Tagging",s1e="TagSet",b9="Tag",Cd="UploadId",Ew="VersionId",i1e="Value",ZD="WriteOffsetBytes",S9="WebsiteRedirectLocation",_9="cache-control",C9="content-disposition",E9="content-encoding",k9="content-language",T9="content-length",mA="content-md5",j9="content-type",A9="expires",P9="etag",N9="if-match",R9="if-none-match",o1e="member",a1e="partNumber",l1e="session",c1e="tagging",u1e="uploads",yA="uploadId",d1e="versionId",O9='<?xml version="1.0" encoding="UTF-8"?>',M9="x-amz-acl",QD="x-amz-abort-date",h1e="x-amz-abort-rule-id",I9="x-amz-checksum-algorithm",$g="x-amz-checksum-crc32",Ug="x-amz-checksum-crc32c",Vg="x-amz-checksum-crc64nvme",zg="x-amz-checksum-sha1",Hg="x-amz-checksum-sha256",f1e="x-amz-create-session-mode",kw="x-amz-checksum-type",D9="x-amz-expiration",jh="x-amz-expected-bucket-owner",F9="x-amz-grant-full-control",L9="x-amz-grant-read",B9="x-amz-grant-read-acp",$9="x-amz-grant-write-acp",p1e="x-amz-if-match-initiated-time",g1e="x-amz-mp-object-size",U9="x-amz-object-lock-legal-hold",V9="x-amz-object-lock-mode",z9="x-amz-object-lock-retain-until-date",e3="x-amz-object-size",Wg="x-amz-request-charged",Ah="x-amz-request-payer",H9="x-amz-storage-class",vA="x-amz-sdk-checksum-algorithm",Ul="x-amz-server-side-encryption",Vl="x-amz-server-side-encryption-aws-kms-key-id",Ms="x-amz-server-side-encryption-bucket-key-enabled",Ph="x-amz-server-side-encryption-context",du="x-amz-server-side-encryption-customer-algorithm",Tw="x-amz-server-side-encryption-customer-key",hu="x-amz-server-side-encryption-customer-key-md5",W9="x-amz-tagging",xA="x-amz-version-id",m1e="x-amz-write-offset-bytes",q9="x-amz-website-redirect-location",wA="x-id";class y1e extends Fl.classBuilder().ep({...au,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(e,r,n,s){return[ru(n,this.serialize,this.deserialize),iu(n,e.getEndpointParameterInstructions()),su(n)]}).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").f(cbe,lbe).ser(ybe).de(Cbe).build(){}const v1e="@aws-sdk/client-s3",x1e="AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",w1e="3.837.0",b1e={build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-s3","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3",test:"yarn g:vitest run","test:browser":"node ./test/browser-build/esbuild && yarn g:vitest run -c vitest.config.browser.ts","test:browser:watch":"node ./test/browser-build/esbuild && yarn g:vitest watch -c vitest.config.browser.ts","test:e2e":"yarn g:vitest run -c vitest.config.e2e.ts && yarn test:browser","test:e2e:watch":"yarn g:vitest watch -c vitest.config.e2e.ts","test:integration":"yarn g:vitest run -c vitest.config.integ.ts","test:integration:watch":"yarn g:vitest watch -c vitest.config.integ.ts","test:watch":"yarn g:vitest watch"},S1e="./dist-cjs/index.js",_1e="./dist-types/index.d.ts",C1e="./dist-es/index.js",E1e=!1,k1e={"@aws-crypto/sha1-browser":"5.2.0","@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.835.0","@aws-sdk/credential-provider-node":"3.835.0","@aws-sdk/middleware-bucket-endpoint":"3.830.0","@aws-sdk/middleware-expect-continue":"3.821.0","@aws-sdk/middleware-flexible-checksums":"3.835.0","@aws-sdk/middleware-host-header":"3.821.0","@aws-sdk/middleware-location-constraint":"3.821.0","@aws-sdk/middleware-logger":"3.821.0","@aws-sdk/middleware-recursion-detection":"3.821.0","@aws-sdk/middleware-sdk-s3":"3.835.0","@aws-sdk/middleware-ssec":"3.821.0","@aws-sdk/middleware-user-agent":"3.835.0","@aws-sdk/region-config-resolver":"3.821.0","@aws-sdk/signature-v4-multi-region":"3.835.0","@aws-sdk/types":"3.821.0","@aws-sdk/util-endpoints":"3.828.0","@aws-sdk/util-user-agent-browser":"3.821.0","@aws-sdk/util-user-agent-node":"3.835.0","@aws-sdk/xml-builder":"3.821.0","@smithy/config-resolver":"^4.1.4","@smithy/core":"^3.5.3","@smithy/eventstream-serde-browser":"^4.0.4","@smithy/eventstream-serde-config-resolver":"^4.1.2","@smithy/eventstream-serde-node":"^4.0.4","@smithy/fetch-http-handler":"^5.0.4","@smithy/hash-blob-browser":"^4.0.4","@smithy/hash-node":"^4.0.4","@smithy/hash-stream-node":"^4.0.4","@smithy/invalid-dependency":"^4.0.4","@smithy/md5-js":"^4.0.4","@smithy/middleware-content-length":"^4.0.4","@smithy/middleware-endpoint":"^4.1.12","@smithy/middleware-retry":"^4.1.13","@smithy/middleware-serde":"^4.0.8","@smithy/middleware-stack":"^4.0.4","@smithy/node-config-provider":"^4.1.3","@smithy/node-http-handler":"^4.0.6","@smithy/protocol-http":"^5.1.2","@smithy/smithy-client":"^4.4.4","@smithy/types":"^4.3.1","@smithy/url-parser":"^4.0.4","@smithy/util-base64":"^4.0.0","@smithy/util-body-length-browser":"^4.0.0","@smithy/util-body-length-node":"^4.0.0","@smithy/util-defaults-mode-browser":"^4.0.20","@smithy/util-defaults-mode-node":"^4.0.20","@smithy/util-endpoints":"^3.0.6","@smithy/util-middleware":"^4.0.4","@smithy/util-retry":"^4.0.6","@smithy/util-stream":"^4.2.2","@smithy/util-utf8":"^4.0.0","@smithy/util-waiter":"^4.0.5","@types/uuid":"^9.0.1",tslib:"^2.6.2",uuid:"^9.0.1"},T1e={"@aws-sdk/signature-v4-crt":"3.835.0","@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},j1e={node:">=18.0.0"},A1e={"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},P1e=["dist-*/**"],N1e={name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},R1e="Apache-2.0",O1e={"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},M1e="https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",I1e={type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"},D1e={name:v1e,description:x1e,version:w1e,scripts:b1e,main:S1e,types:_1e,module:C1e,sideEffects:E1e,dependencies:k1e,devDependencies:T1e,engines:j1e,typesVersions:A1e,files:P1e,author:N1e,license:R1e,browser:O1e,"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:M1e,repository:I1e},F1e=t=>new TextEncoder().encode(t);function t3(t){return typeof t=="string"?t.length===0:t.byteLength===0}var G9={name:"SHA-1"},r3={name:"HMAC",hash:G9},L1e=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]);const B1e={};function ol(){return typeof window<"u"?window:typeof self<"u"?self:B1e}var $1e=function(){function t(e){this.toHash=new Uint8Array(0),e!==void 0&&(this.key=new Promise(function(r,n){ol().crypto.subtle.importKey("raw",n3(e),r3,!1,["sign"]).then(r,n)}),this.key.catch(function(){}))}return t.prototype.update=function(e){if(!t3(e)){var r=n3(e),n=new Uint8Array(this.toHash.byteLength+r.byteLength);n.set(this.toHash,0),n.set(r,this.toHash.byteLength),this.toHash=n}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(r){return ol().crypto.subtle.sign(r3,r,e.toHash).then(function(n){return new Uint8Array(n)})}):t3(this.toHash)?Promise.resolve(L1e):Promise.resolve().then(function(){return ol().crypto.subtle.digest(G9,e.toHash)}).then(function(r){return Promise.resolve(new Uint8Array(r))})},t.prototype.reset=function(){this.toHash=new Uint8Array(0)},t}();function n3(t){return typeof t=="string"?F1e(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}var U1e=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function K9(t){if(V1e(t)&&typeof t.crypto.subtle=="object"){var e=t.crypto.subtle;return z1e(e)}return!1}function V1e(t){if(typeof t=="object"&&typeof t.crypto=="object"){var e=t.crypto.getRandomValues;return typeof e=="function"}return!1}function z1e(t){return t&&U1e.every(function(e){return typeof t[e]=="function"})}var H1e=function(){function t(e){if(K9(ol()))this.hash=new $1e(e);else throw new Error("SHA1 not supported")}return t.prototype.update=function(e,r){this.hash.update(_l(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t}(),Y9={name:"SHA-256"},s3={name:"HMAC",hash:Y9},W1e=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]),q1e=function(){function t(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return t.prototype.update=function(e){if(!ag(e)){var r=_l(e),n=new Uint8Array(this.toHash.byteLength+r.byteLength);n.set(this.toHash,0),n.set(r,this.toHash.byteLength),this.toHash=n}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(r){return ol().crypto.subtle.sign(s3,r,e.toHash).then(function(n){return new Uint8Array(n)})}):ag(this.toHash)?Promise.resolve(W1e):Promise.resolve().then(function(){return ol().crypto.subtle.digest(Y9,e.toHash)}).then(function(r){return Promise.resolve(new Uint8Array(r))})},t.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(r,n){ol().crypto.subtle.importKey("raw",_l(e.secret),s3,!1,["sign"]).then(r,n)}),this.key.catch(function(){}))},t}(),Gs=64,G1e=32,K1e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Y1e=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],X1e=Math.pow(2,53)-1,Ky=function(){function t(){this.state=Int32Array.from(Y1e),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return t.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=0,n=e.byteLength;if(this.bytesHashed+=n,this.bytesHashed*8>X1e)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[r++],n--,this.bufferLength===Gs&&(this.hashBuffer(),this.bufferLength=0)},t.prototype.digest=function(){if(!this.finished){var e=this.bytesHashed*8,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(r.setUint8(this.bufferLength++,128),n%Gs>=Gs-8){for(var s=this.bufferLength;s<Gs;s++)r.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(var s=this.bufferLength;s<Gs-8;s++)r.setUint8(s,0);r.setUint32(Gs-8,Math.floor(e/4294967296),!0),r.setUint32(Gs-4,e),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(G1e),s=0;s<8;s++)i[s*4]=this.state[s]>>>24&255,i[s*4+1]=this.state[s]>>>16&255,i[s*4+2]=this.state[s]>>>8&255,i[s*4+3]=this.state[s]>>>0&255;return i},t.prototype.hashBuffer=function(){for(var e=this,r=e.buffer,n=e.state,s=n[0],i=n[1],o=n[2],a=n[3],l=n[4],c=n[5],d=n[6],h=n[7],f=0;f<Gs;f++){if(f<16)this.temp[f]=(r[f*4]&255)<<24|(r[f*4+1]&255)<<16|(r[f*4+2]&255)<<8|r[f*4+3]&255;else{var p=this.temp[f-2],g=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10;p=this.temp[f-15];var y=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3;this.temp[f]=(g+this.temp[f-7]|0)+(y+this.temp[f-16]|0)}var v=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&c^~l&d)|0)+(h+(K1e[f]+this.temp[f]|0)|0)|0,m=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&i^s&o^i&o)|0;h=d,d=c,c=l,l=a+v|0,a=o,o=i,i=s,s=v+m|0}n[0]+=s,n[1]+=i,n[2]+=o,n[3]+=a,n[4]+=l,n[5]+=c,n[6]+=d,n[7]+=h},t}(),J1e=function(){function t(e){this.secret=e,this.hash=new Ky,this.reset()}return t.prototype.update=function(e){if(!(ag(e)||this.error))try{this.hash.update(_l(e))}catch(r){this.error=r}},t.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},t.prototype.digest=function(){return lj(this,void 0,void 0,function(){return cj(this,function(e){return[2,this.digestSync()]})})},t.prototype.reset=function(){if(this.hash=new Ky,this.secret){this.outer=new Ky;var e=Z1e(this.secret),r=new Uint8Array(Gs);r.set(e);for(var n=0;n<Gs;n++)e[n]^=54,r[n]^=92;this.hash.update(e),this.outer.update(r);for(var n=0;n<e.byteLength;n++)e[n]=0}},t}();function Z1e(t){var e=_l(t);if(e.byteLength>Gs){var r=new Ky;r.update(e),e=r.digest()}var n=new Uint8Array(Gs);return n.set(e),n}var Q1e=function(){function t(e){K9(ol())?this.hash=new q1e(e):this.hash=new J1e(e)}return t.prototype.update=function(e,r){this.hash.update(_l(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t}();const eSe={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},X9={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},ar={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},An={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Ia={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class ce{static getFirstMatch(e,r){const n=r.match(e);return n&&n.length>0&&n[1]||""}static getSecondMatch(e,r){const n=r.match(e);return n&&n.length>1&&n[2]||""}static matchAndReturnConst(e,r,n){if(e.test(r))return n}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const r=e.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(r.push(0),r[0]===10)switch(r[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const r=e.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(r.push(0),!(r[0]===1&&r[1]<5)){if(r[0]===1&&r[1]<6)return"Cupcake";if(r[0]===1&&r[1]>=6)return"Donut";if(r[0]===2&&r[1]<2)return"Eclair";if(r[0]===2&&r[1]===2)return"Froyo";if(r[0]===2&&r[1]>2)return"Gingerbread";if(r[0]===3)return"Honeycomb";if(r[0]===4&&r[1]<1)return"Ice Cream Sandwich";if(r[0]===4&&r[1]<4)return"Jelly Bean";if(r[0]===4&&r[1]>=4)return"KitKat";if(r[0]===5)return"Lollipop";if(r[0]===6)return"Marshmallow";if(r[0]===7)return"Nougat";if(r[0]===8)return"Oreo";if(r[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,r,n=!1){const s=ce.getVersionPrecision(e),i=ce.getVersionPrecision(r);let o=Math.max(s,i),a=0;const l=ce.map([e,r],c=>{const d=o-ce.getVersionPrecision(c),h=c+new Array(d+1).join(".0");return ce.map(h.split("."),f=>new Array(20-f.length).join("0")+f).reverse()});for(n&&(a=o-Math.min(s,i)),o-=1;o>=a;){if(l[0][o]>l[1][o])return 1;if(l[0][o]===l[1][o]){if(o===a)return 0;o-=1}else if(l[0][o]<l[1][o])return-1}}static map(e,r){const n=[];let s;if(Array.prototype.map)return Array.prototype.map.call(e,r);for(s=0;s<e.length;s+=1)n.push(r(e[s]));return n}static find(e,r){let n,s;if(Array.prototype.find)return Array.prototype.find.call(e,r);for(n=0,s=e.length;n<s;n+=1){const i=e[n];if(r(i,n))return i}}static assign(e,...r){const n=e;let s,i;if(Object.assign)return Object.assign(e,...r);for(s=0,i=r.length;s<i;s+=1){const o=r[s];typeof o=="object"&&o!==null&&Object.keys(o).forEach(l=>{n[l]=o[l]})}return e}static getBrowserAlias(e){return eSe[e]}static getBrowserTypeByAlias(e){return X9[e]||""}}const Rt=/version\/(\d+(\.?_?\d+)+)/i,tSe=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},r=ce.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||ce.getFirstMatch(Rt,t);return r&&(e.version=r),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},r=ce.getFirstMatch(Rt,t)||ce.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},r=ce.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||ce.getFirstMatch(Rt,t);return r&&(e.version=r),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},r=ce.getFirstMatch(Rt,t)||ce.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},r=ce.getFirstMatch(Rt,t)||ce.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},r=ce.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||ce.getFirstMatch(Rt,t);return r&&(e.version=r),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},r=ce.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||ce.getFirstMatch(Rt,t);return r&&(e.version=r),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},r=ce.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||ce.getFirstMatch(Rt,t);return r&&(e.version=r),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},r=ce.getFirstMatch(Rt,t)||ce.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},r=ce.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||ce.getFirstMatch(Rt,t);return r&&(e.version=r),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},r=ce.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||ce.getFirstMatch(Rt,t);return r&&(e.version=r),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},r=ce.getFirstMatch(Rt,t)||ce.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},r=ce.getFirstMatch(Rt,t)||ce.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},r=ce.getFirstMatch(Rt,t)||ce.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},r=ce.getFirstMatch(Rt,t)||ce.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},r=ce.getFirstMatch(Rt,t)||ce.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},r=ce.getFirstMatch(Rt,t)||ce.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},r=ce.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||ce.getFirstMatch(Rt,t);return r&&(e.version=r),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},r=ce.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||ce.getFirstMatch(Rt,t);return r&&(e.version=r),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},r=ce.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},r=ce.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},r=ce.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},r=ce.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},r=ce.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},r=ce.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return r&&(e.version=r),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},r=ce.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},r=ce.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},r=ce.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},r=ce.getFirstMatch(Rt,t)||ce.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},r=ce.getFirstMatch(Rt,t)||ce.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},r=ce.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},r=ce.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||ce.getFirstMatch(Rt,t);return r&&(e.version=r),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},r=ce.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||ce.getFirstMatch(Rt,t);return r&&(e.version=r),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},r=ce.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},r=ce.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},r=ce.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},r=ce.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||ce.getFirstMatch(Rt,t);return r&&(e.version=r),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},r=ce.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},r=ce.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test(t){const e=!t.test(/like android/i),r=t.test(/android/i);return e&&r},describe(t){const e={name:"Android Browser"},r=ce.getFirstMatch(Rt,t);return r&&(e.version=r),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},r=ce.getFirstMatch(Rt,t);return r&&(e.version=r),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},r=ce.getFirstMatch(Rt,t);return r&&(e.version=r),e}},{test:[/.*/i],describe(t){const e=/^(.*)\/(.*) /,r=/^(.*)\/(.*)[ \t]\((.*)/,s=t.search("\\(")!==-1?r:e;return{name:ce.getFirstMatch(s,t),version:ce.getSecondMatch(s,t)}}}],rSe=[{test:[/Roku\/DVP/],describe(t){const e=ce.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:An.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=ce.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:An.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=ce.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),r=ce.getWindowsVersionName(e);return{name:An.Windows,version:e,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:An.iOS},r=ce.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return r&&(e.version=r),e}},{test:[/macintosh/i],describe(t){const e=ce.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),r=ce.getMacOSVersionName(e),n={name:An.MacOS,version:e};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=ce.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:An.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),r=t.test(/android/i);return e&&r},describe(t){const e=ce.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),r=ce.getAndroidVersionName(e),n={name:An.Android,version:e};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=ce.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),r={name:An.WebOS};return e&&e.length&&(r.version=e),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=ce.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||ce.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||ce.getFirstMatch(/\bbb(\d+)/i,t);return{name:An.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=ce.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:An.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=ce.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:An.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:An.Linux}}},{test:[/CrOS/],describe(){return{name:An.ChromeOS}}},{test:[/PlayStation 4/],describe(t){const e=ce.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:An.PlayStation4,version:e}}}],nSe=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(t){const e=ce.getFirstMatch(/(can-l01)/i,t)&&"Nova",r={type:ar.mobile,vendor:"Huawei"};return e&&(r.model=e),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:ar.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:ar.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:ar.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:ar.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:ar.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:ar.tablet}}},{test(t){const e=t.test(/ipod|iphone/i),r=t.test(/like (ipod|iphone)/i);return e&&!r},describe(t){const e=ce.getFirstMatch(/(ipod|iphone)/i,t);return{type:ar.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:ar.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:ar.mobile}}},{test(t){return t.getBrowserName(!0)==="blackberry"},describe(){return{type:ar.mobile,vendor:"BlackBerry"}}},{test(t){return t.getBrowserName(!0)==="bada"},describe(){return{type:ar.mobile}}},{test(t){return t.getBrowserName()==="windows phone"},describe(){return{type:ar.mobile,vendor:"Microsoft"}}},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe(){return{type:ar.tablet}}},{test(t){return t.getOSName(!0)==="android"},describe(){return{type:ar.mobile}}},{test(t){return t.getOSName(!0)==="macos"},describe(){return{type:ar.desktop,vendor:"Apple"}}},{test(t){return t.getOSName(!0)==="windows"},describe(){return{type:ar.desktop}}},{test(t){return t.getOSName(!0)==="linux"},describe(){return{type:ar.desktop}}},{test(t){return t.getOSName(!0)==="playstation 4"},describe(){return{type:ar.tv}}},{test(t){return t.getOSName(!0)==="roku"},describe(){return{type:ar.tv}}}],sSe=[{test(t){return t.getBrowserName(!0)==="microsoft edge"},describe(t){if(/\sedg\//i.test(t))return{name:Ia.Blink};const r=ce.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:Ia.EdgeHTML,version:r}}},{test:[/trident/i],describe(t){const e={name:Ia.Trident},r=ce.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test(t){return t.test(/presto/i)},describe(t){const e={name:Ia.Presto},r=ce.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test(t){const e=t.test(/gecko/i),r=t.test(/like gecko/i);return e&&!r},describe(t){const e={name:Ia.Gecko},r=ce.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:Ia.Blink}}},{test:[/(apple)?webkit/i],describe(t){const e={name:Ia.WebKit},r=ce.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}}];class i3{constructor(e,r=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},r!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=ce.find(tSe,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=ce.find(rSe,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:r}=this.getOS();return e?String(r).toLowerCase()||"":r||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:r}=this.getPlatform();return e?String(r).toLowerCase()||"":r||""}parsePlatform(){this.parsedResult.platform={};const e=ce.find(nSe,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=ce.find(sSe,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return ce.assign({},this.parsedResult)}satisfies(e){const r={};let n=0;const s={};let i=0;if(Object.keys(e).forEach(a=>{const l=e[a];typeof l=="string"?(s[a]=l,i+=1):typeof l=="object"&&(r[a]=l,n+=1)}),n>0){const a=Object.keys(r),l=ce.find(a,d=>this.isOS(d));if(l){const d=this.satisfies(r[l]);if(d!==void 0)return d}const c=ce.find(a,d=>this.isPlatform(d));if(c){const d=this.satisfies(r[c]);if(d!==void 0)return d}}if(i>0){const a=Object.keys(s),l=ce.find(a,c=>this.isBrowser(c,!0));if(l!==void 0)return this.compareVersion(s[l])}}isBrowser(e,r=!1){const n=this.getBrowserName().toLowerCase();let s=e.toLowerCase();const i=ce.getBrowserTypeByAlias(s);return r&&i&&(s=i.toLowerCase()),s===n}compareVersion(e){let r=[0],n=e,s=!1;const i=this.getBrowserVersion();if(typeof i=="string")return e[0]===">"||e[0]==="<"?(n=e.substr(1),e[1]==="="?(s=!0,n=e.substr(2)):r=[],e[0]===">"?r.push(1):r.push(-1)):e[0]==="="?n=e.substr(1):e[0]==="~"&&(s=!0,n=e.substr(1)),r.indexOf(ce.compareVersions(i,n,s))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,r=!1){return this.isBrowser(e,r)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(r=>this.is(r))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class J9{static getParser(e,r=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new i3(e,r)}static parse(e){return new i3(e).getResult()}static get BROWSER_MAP(){return X9}static get ENGINE_MAP(){return Ia}static get OS_MAP(){return An}static get PLATFORMS_MAP(){return ar}}const iSe=({serviceId:t,clientVersion:e})=>async r=>{var o,a,l,c,d,h;const n=typeof window<"u"&&((o=window==null?void 0:window.navigator)!=null&&o.userAgent)?J9.parse(window.navigator.userAgent):void 0,s=[["aws-sdk-js",e],["ua","2.1"],[`os/${((a=n==null?void 0:n.os)==null?void 0:a.name)||"other"}`,(l=n==null?void 0:n.os)==null?void 0:l.version],["lang/js"],["md/browser",`${((c=n==null?void 0:n.browser)==null?void 0:c.name)??"unknown"}_${((d=n==null?void 0:n.browser)==null?void 0:d.version)??"unknown"}`]];t&&s.push([`api/${t}`,e]);const i=await((h=r==null?void 0:r.userAgentAppId)==null?void 0:h.call(r));return i&&s.push([`app/${i}`]),s};class up{constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(e));n>-1&&s>0;n--,s/=256)r[n]=s;return e<0&&o3(r),new up(r)}valueOf(){const e=this.bytes.slice(0),r=e[0]&128;return r&&o3(e),parseInt(Qn(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}}function o3(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}class oSe{constructor(e,r){this.toUtf8=e,this.fromUtf8=r}format(e){const r=[];for(const i of Object.keys(e)){const o=this.fromUtf8(i);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}const n=new Uint8Array(r.reduce((i,o)=>i+o.byteLength,0));let s=0;for(const i of r)n.set(i,s),s+=i.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":const n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":const a=this.fromUtf8(e.value),l=new DataView(new ArrayBuffer(3+a.byteLength));l.setUint8(0,7),l.setUint16(1,a.byteLength,!1);const c=new Uint8Array(l.buffer);return c.set(a,3),c;case"timestamp":const d=new Uint8Array(9);return d[0]=8,d.set(up.fromNumber(e.value.valueOf()).bytes,1),d;case"uuid":if(!gSe.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const h=new Uint8Array(17);return h[0]=9,h.set(ZV(e.value.replace(/\-/g,"")),1),h}}parse(e){const r={};let n=0;for(;n<e.byteLength;){const s=e.getUint8(n++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,s));switch(n+=s,e.getUint8(n++)){case 0:r[i]={type:l3,value:!0};break;case 1:r[i]={type:l3,value:!1};break;case 2:r[i]={type:aSe,value:e.getInt8(n++)};break;case 3:r[i]={type:lSe,value:e.getInt16(n,!1)},n+=2;break;case 4:r[i]={type:cSe,value:e.getInt32(n,!1)},n+=4;break;case 5:r[i]={type:uSe,value:new up(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:const o=e.getUint16(n,!1);n+=2,r[i]={type:dSe,value:new Uint8Array(e.buffer,e.byteOffset+n,o)},n+=o;break;case 7:const a=e.getUint16(n,!1);n+=2,r[i]={type:hSe,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,a))},n+=a;break;case 8:r[i]={type:fSe,value:new Date(new up(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:const l=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,r[i]={type:pSe,value:`${Qn(l.subarray(0,4))}-${Qn(l.subarray(4,6))}-${Qn(l.subarray(6,8))}-${Qn(l.subarray(8,10))}-${Qn(l.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}}var a3;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(a3||(a3={}));const l3="boolean",aSe="byte",lSe="short",cSe="integer",uSe="long",dSe="binary",hSe="string",fSe="timestamp",pSe="uuid",gSe=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,Z9=4,Da=Z9*2,Ql=4,mSe=Da+Ql*2;function ySe({byteLength:t,byteOffset:e,buffer:r}){if(t<mSe)throw new Error("Provided message too short to accommodate event stream message overhead");const n=new DataView(r,e,t),s=n.getUint32(0,!1);if(t!==s)throw new Error("Reported message length does not match received message length");const i=n.getUint32(Z9,!1),o=n.getUint32(Da,!1),a=n.getUint32(t-Ql,!1),l=new jv().update(new Uint8Array(r,e,Da));if(o!==l.digest())throw new Error(`The prelude checksum specified in the message (${o}) does not match the calculated CRC32 checksum (${l.digest()})`);if(l.update(new Uint8Array(r,e+Da,t-(Da+Ql))),a!==l.digest())throw new Error(`The message checksum (${l.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,e+Da+Ql,i),body:new Uint8Array(r,e+Da+Ql+i,s-i-(Da+Ql+Ql))}}class vSe{constructor(e,r){this.headerMarshaller=new oSe(e,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(e){this.messageBuffer.push(this.decode(e))}endOfStream(){this.isEndOfStream=!0}getMessage(){const e=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return e},isEndOfStream(){return r}}}getAvailableMessages(){const e=this.messageBuffer;this.messageBuffer=[];const r=this.isEndOfStream;return{getMessages(){return e},isEndOfStream(){return r}}}encode({headers:e,body:r}){const n=this.headerMarshaller.format(e),s=n.byteLength+r.byteLength+16,i=new Uint8Array(s),o=new DataView(i.buffer,i.byteOffset,i.byteLength),a=new jv;return o.setUint32(0,s,!1),o.setUint32(4,n.byteLength,!1),o.setUint32(8,a.update(i.subarray(0,8)).digest(),!1),i.set(n,12),i.set(r,n.byteLength+12),o.setUint32(s-4,a.update(i.subarray(8,s-4)).digest(),!1),i}decode(e){const{headers:r,body:n}=ySe(e);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(e){return this.headerMarshaller.format(e)}}class xSe{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream)yield this.options.decoder.decode(e)}}class wSe{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream)yield this.options.encoder.encode(e);this.options.includeEndFrame&&(yield new Uint8Array(0))}}class bSe{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream){const r=await this.options.deserializer(e);r!==void 0&&(yield r)}}}class SSe{constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream)yield this.options.serializer(e)}}function _Se(t){let e=0,r=0,n=null,s=null;const i=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);e=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},o=async function*(){const a=t[Symbol.asyncIterator]();for(;;){const{value:l,done:c}=await a.next();if(c){if(e)if(e===r)yield n;else throw new Error("Truncated event message received.");else return;return}const d=l.length;let h=0;for(;h<d;){if(!n){const p=d-h;s||(s=new Uint8Array(4));const g=Math.min(4-r,p);if(s.set(l.slice(h,h+g),r),r+=g,h+=g,r<4)break;i(new DataView(s.buffer).getUint32(0,!1)),s=null}const f=Math.min(e-r,d-h);n.set(l.slice(h,h+f),r),r+=f,h+=f,e&&e===r&&(yield n,n=null,e=0,r=0)}}};return{[Symbol.asyncIterator]:o}}function CSe(t,e){return async function(r){const{value:n}=r.headers[":message-type"];if(n==="error"){const s=new Error(r.headers[":error-message"].value||"UnknownError");throw s.name=r.headers[":error-code"].value,s}else if(n==="exception"){const s=r.headers[":exception-type"].value,i={[s]:r},o=await t(i);if(o.$unknown){const a=new Error(e(r.body));throw a.name=s,a}throw o[s]}else if(n==="event"){const s={[r.headers[":event-type"].value]:r},i=await t(s);return i.$unknown?void 0:i}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}let ESe=class{constructor({utf8Encoder:e,utf8Decoder:r}){this.eventStreamCodec=new vSe(e,r),this.utfEncoder=e}deserialize(e,r){const n=_Se(e);return new bSe({messageStream:new xSe({inputStream:n,decoder:this.eventStreamCodec}),deserializer:CSe(r,this.utfEncoder)})}serialize(e,r){return new wSe({messageStream:new SSe({inputStream:e,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};const kSe=t=>({[Symbol.asyncIterator]:async function*(){const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)return;yield n}}finally{e.releaseLock()}}}),TSe=t=>{const e=t[Symbol.asyncIterator]();return new ReadableStream({async pull(r){const{done:n,value:s}=await e.next();if(n)return r.close();r.enqueue(s)}})};class jSe{constructor({utf8Encoder:e,utf8Decoder:r}){this.universalMarshaller=new ESe({utf8Decoder:r,utf8Encoder:e})}deserialize(e,r){const n=ASe(e)?kSe(e):e;return this.universalMarshaller.deserialize(n,r)}serialize(e,r){const n=this.universalMarshaller.serialize(e,r);return typeof ReadableStream=="function"?TSe(n):n}}const ASe=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream,PSe=t=>new jSe(t);async function NSe(t,e,r=1024*1024){const n=t.size;let s=0;for(;s<n;){const i=t.slice(s,Math.min(n,s+r));e(new Uint8Array(await i.arrayBuffer())),s+=i.size}}const RSe=async function(e,r){const n=new e;return await NSe(r,s=>{n.update(s)}),n.digest()},OSe=t=>()=>Promise.reject(t),Aa=64,MSe=16,ISe=[1732584193,4023233417,2562383102,271733878];class DSe{constructor(){this.reset()}update(e){if(FSe(e))return;if(this.finished)throw new Error("Attempted to update an already finished hash.");const r=LSe(e);let n=0,{byteLength:s}=r;for(this.bytesHashed+=s;s>0;)this.buffer.setUint8(this.bufferLength++,r[n++]),s--,this.bufferLength===Aa&&(this.hashBuffer(),this.bufferLength=0)}async digest(){if(!this.finished){const{buffer:r,bufferLength:n,bytesHashed:s}=this,i=s*8;if(r.setUint8(this.bufferLength++,128),n%Aa>=Aa-8){for(let o=this.bufferLength;o<Aa;o++)r.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(let o=this.bufferLength;o<Aa-8;o++)r.setUint8(o,0);r.setUint32(Aa-8,i>>>0,!0),r.setUint32(Aa-4,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}const e=new DataView(new ArrayBuffer(MSe));for(let r=0;r<4;r++)e.setUint32(r*4,this.state[r],!0);return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}hashBuffer(){const{buffer:e,state:r}=this;let n=r[0],s=r[1],i=r[2],o=r[3];n=un(n,s,i,o,e.getUint32(0,!0),7,3614090360),o=un(o,n,s,i,e.getUint32(4,!0),12,3905402710),i=un(i,o,n,s,e.getUint32(8,!0),17,606105819),s=un(s,i,o,n,e.getUint32(12,!0),22,3250441966),n=un(n,s,i,o,e.getUint32(16,!0),7,4118548399),o=un(o,n,s,i,e.getUint32(20,!0),12,1200080426),i=un(i,o,n,s,e.getUint32(24,!0),17,2821735955),s=un(s,i,o,n,e.getUint32(28,!0),22,4249261313),n=un(n,s,i,o,e.getUint32(32,!0),7,1770035416),o=un(o,n,s,i,e.getUint32(36,!0),12,2336552879),i=un(i,o,n,s,e.getUint32(40,!0),17,4294925233),s=un(s,i,o,n,e.getUint32(44,!0),22,2304563134),n=un(n,s,i,o,e.getUint32(48,!0),7,1804603682),o=un(o,n,s,i,e.getUint32(52,!0),12,4254626195),i=un(i,o,n,s,e.getUint32(56,!0),17,2792965006),s=un(s,i,o,n,e.getUint32(60,!0),22,1236535329),n=dn(n,s,i,o,e.getUint32(4,!0),5,4129170786),o=dn(o,n,s,i,e.getUint32(24,!0),9,3225465664),i=dn(i,o,n,s,e.getUint32(44,!0),14,643717713),s=dn(s,i,o,n,e.getUint32(0,!0),20,3921069994),n=dn(n,s,i,o,e.getUint32(20,!0),5,3593408605),o=dn(o,n,s,i,e.getUint32(40,!0),9,38016083),i=dn(i,o,n,s,e.getUint32(60,!0),14,3634488961),s=dn(s,i,o,n,e.getUint32(16,!0),20,3889429448),n=dn(n,s,i,o,e.getUint32(36,!0),5,568446438),o=dn(o,n,s,i,e.getUint32(56,!0),9,3275163606),i=dn(i,o,n,s,e.getUint32(12,!0),14,4107603335),s=dn(s,i,o,n,e.getUint32(32,!0),20,1163531501),n=dn(n,s,i,o,e.getUint32(52,!0),5,2850285829),o=dn(o,n,s,i,e.getUint32(8,!0),9,4243563512),i=dn(i,o,n,s,e.getUint32(28,!0),14,1735328473),s=dn(s,i,o,n,e.getUint32(48,!0),20,2368359562),n=hn(n,s,i,o,e.getUint32(20,!0),4,4294588738),o=hn(o,n,s,i,e.getUint32(32,!0),11,2272392833),i=hn(i,o,n,s,e.getUint32(44,!0),16,1839030562),s=hn(s,i,o,n,e.getUint32(56,!0),23,4259657740),n=hn(n,s,i,o,e.getUint32(4,!0),4,2763975236),o=hn(o,n,s,i,e.getUint32(16,!0),11,1272893353),i=hn(i,o,n,s,e.getUint32(28,!0),16,4139469664),s=hn(s,i,o,n,e.getUint32(40,!0),23,3200236656),n=hn(n,s,i,o,e.getUint32(52,!0),4,681279174),o=hn(o,n,s,i,e.getUint32(0,!0),11,3936430074),i=hn(i,o,n,s,e.getUint32(12,!0),16,3572445317),s=hn(s,i,o,n,e.getUint32(24,!0),23,76029189),n=hn(n,s,i,o,e.getUint32(36,!0),4,3654602809),o=hn(o,n,s,i,e.getUint32(48,!0),11,3873151461),i=hn(i,o,n,s,e.getUint32(60,!0),16,530742520),s=hn(s,i,o,n,e.getUint32(8,!0),23,3299628645),n=fn(n,s,i,o,e.getUint32(0,!0),6,4096336452),o=fn(o,n,s,i,e.getUint32(28,!0),10,1126891415),i=fn(i,o,n,s,e.getUint32(56,!0),15,2878612391),s=fn(s,i,o,n,e.getUint32(20,!0),21,4237533241),n=fn(n,s,i,o,e.getUint32(48,!0),6,1700485571),o=fn(o,n,s,i,e.getUint32(12,!0),10,2399980690),i=fn(i,o,n,s,e.getUint32(40,!0),15,4293915773),s=fn(s,i,o,n,e.getUint32(4,!0),21,2240044497),n=fn(n,s,i,o,e.getUint32(32,!0),6,1873313359),o=fn(o,n,s,i,e.getUint32(60,!0),10,4264355552),i=fn(i,o,n,s,e.getUint32(24,!0),15,2734768916),s=fn(s,i,o,n,e.getUint32(52,!0),21,1309151649),n=fn(n,s,i,o,e.getUint32(16,!0),6,4149444226),o=fn(o,n,s,i,e.getUint32(44,!0),10,3174756917),i=fn(i,o,n,s,e.getUint32(8,!0),15,718787259),s=fn(s,i,o,n,e.getUint32(36,!0),21,3951481745),r[0]=n+r[0]&4294967295,r[1]=s+r[1]&4294967295,r[2]=i+r[2]&4294967295,r[3]=o+r[3]&4294967295}reset(){this.state=Uint32Array.from(ISe),this.buffer=new DataView(new ArrayBuffer(Aa)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}}function jw(t,e,r,n,s,i){return e=(e+t&4294967295)+(n+i&4294967295)&4294967295,(e<<s|e>>>32-s)+r&4294967295}function un(t,e,r,n,s,i,o){return jw(e&r|~e&n,t,e,s,i,o)}function dn(t,e,r,n,s,i,o){return jw(e&n|r&~n,t,e,s,i,o)}function hn(t,e,r,n,s,i,o){return jw(e^r^n,t,e,s,i,o)}function fn(t,e,r,n,s,i,o){return jw(r^(e|~n),t,e,s,i,o)}function FSe(t){return typeof t=="string"?t.length===0:t.byteLength===0}function LSe(t){return typeof t=="string"?zc(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}const BSe=t=>({apiVersion:"2006-03-01",base64Decoder:(t==null?void 0:t.base64Decoder)??Nj,base64Encoder:(t==null?void 0:t.base64Encoder)??vw,disableHostPrefix:(t==null?void 0:t.disableHostPrefix)??!1,endpointProvider:(t==null?void 0:t.endpointProvider)??s9,extensions:(t==null?void 0:t.extensions)??[],getAwsChunkedEncodingStream:(t==null?void 0:t.getAwsChunkedEncodingStream)??Uge,httpAuthSchemeProvider:(t==null?void 0:t.httpAuthSchemeProvider)??Qwe,httpAuthSchemes:(t==null?void 0:t.httpAuthSchemes)??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new KV},{schemeId:"aws.auth#sigv4a",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4a"),signer:new yge}],logger:(t==null?void 0:t.logger)??new Fj,sdkStreamMixin:(t==null?void 0:t.sdkStreamMixin)??Yge,serviceId:(t==null?void 0:t.serviceId)??"S3",signerConstructor:(t==null?void 0:t.signerConstructor)??Uz,signingEscapePath:(t==null?void 0:t.signingEscapePath)??!1,urlParser:(t==null?void 0:t.urlParser)??Pv,useArnRegion:(t==null?void 0:t.useArnRegion)??void 0,utf8Decoder:(t==null?void 0:t.utf8Decoder)??zc,utf8Encoder:(t==null?void 0:t.utf8Encoder)??Rj}),$Se=["in-region","cross-region","mobile","standard","legacy"],USe=({defaultsMode:t}={})=>Tme(async()=>{const e=typeof t=="function"?await t():t;switch(e==null?void 0:e.toLowerCase()){case"auto":return Promise.resolve(VSe()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(e==null?void 0:e.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${$Se.join(", ")}, got ${e}`)}}),VSe=()=>{var r,n;const t=typeof window<"u"&&((r=window==null?void 0:window.navigator)!=null&&r.userAgent)?J9.parse(window.navigator.userAgent):void 0,e=(n=t==null?void 0:t.platform)==null?void 0:n.type;return e==="tablet"||e==="mobile"},zSe=t=>{const e=USe(t),r=()=>e().then(cye),n=BSe(t);return{...n,...t,runtime:"browser",defaultsMode:e,bodyLengthChecker:(t==null?void 0:t.bodyLengthChecker)??nye,credentialDefaultProvider:(t==null?void 0:t.credentialDefaultProvider)??(s=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(t==null?void 0:t.defaultUserAgentProvider)??iSe({serviceId:n.serviceId,clientVersion:D1e.version}),eventStreamSerdeProvider:(t==null?void 0:t.eventStreamSerdeProvider)??PSe,maxAttempts:(t==null?void 0:t.maxAttempts)??Nv,md5:(t==null?void 0:t.md5)??DSe,region:(t==null?void 0:t.region)??OSe("Region is missing"),requestHandler:Oj.create((t==null?void 0:t.requestHandler)??r),retryMode:(t==null?void 0:t.retryMode)??(async()=>(await r()).retryMode||nwe),sha1:(t==null?void 0:t.sha1)??H1e,sha256:(t==null?void 0:t.sha256)??Q1e,streamCollector:(t==null?void 0:t.streamCollector)??XV,streamHasher:(t==null?void 0:t.streamHasher)??RSe,useDualstackEndpoint:(t==null?void 0:t.useDualstackEndpoint)??(()=>Promise.resolve(Bxe)),useFipsEndpoint:(t==null?void 0:t.useFipsEndpoint)??(()=>Promise.resolve($xe))}},HSe=t=>({setRegion(e){t.region=e},region(){return t.region}}),WSe=t=>({region:t.region()}),qSe=t=>{const e=t.httpAuthSchemes;let r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){const i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},GSe=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),KSe=(t,e)=>{const r=Object.assign(HSe(t),pye(t),age(t),qSe(t));return e.forEach(n=>n.configure(r)),Object.assign(t,WSe(r),gye(r),lge(r),GSe(r))};class YSe extends sye{constructor(...[r]){const n=zSe(r||{});super(n);Te(this,"config");this.initConfig=n;const s=tbe(n),i=rxe(s),o=lve(i),a=kwe(o),l=Uxe(a),c=l,d=rwe(c),h=Vxe(d),f=ebe(h),p=Vve(f,{session:[()=>this,y1e]}),g=KSe(p,(r==null?void 0:r.extensions)||[]);this.config=g,this.middlewareStack.use(Lxe(this.config)),this.middlewareStack.use(Owe(this.config)),this.middlewareStack.use(Wxe(this.config)),this.middlewareStack.use(dve(this.config)),this.middlewareStack.use(pve(this.config)),this.middlewareStack.use(xve(this.config)),this.middlewareStack.use(Sge(this.config,{httpAuthSchemeParametersProvider:Xwe,identityProviderConfigProvider:async y=>new Sme({"aws.auth#sigv4":y.credentials,"aws.auth#sigv4a":y.credentials})})),this.middlewareStack.use(Age(this.config)),this.middlewareStack.use(Qve(this.config)),this.middlewareStack.use(hge(this.config)),this.middlewareStack.use(Ave(this.config)),this.middlewareStack.use(Dve(this.config)),this.middlewareStack.use(Uve(this.config))}destroy(){super.destroy()}}class XSe extends Fl.classBuilder().ep({...au,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(e,r,n,s){return[ru(n,this.serialize,this.deserialize),iu(n,e.getEndpointParameterInstructions()),su(n)]}).s("AmazonS3","AbortMultipartUpload",{}).n("S3Client","AbortMultipartUploadCommand").f(void 0,void 0).ser(pbe).de(bbe).build(){}function JSe(t){return e=>async r=>{const n={...r.input},s=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(const i of s){const o=n[i.target];if(o){let a;typeof o=="string"?QSe(o,t)?a=t.base64Decoder(o):(a=t.utf8Decoder(o),n[i.target]=t.base64Encoder(a)):(a=ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o),n[i.target]=t.base64Encoder(a));const l=new t.md5;l.update(a),n[i.hash]=t.base64Encoder(await l.digest())}}return e({...r,input:n})}}const ZSe={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Aw=t=>({applyToStack:e=>{e.add(JSe(t),ZSe)}});function QSe(t,e){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t))return!1;try{return e.base64Decoder(t).length===32}catch{return!1}}class e_e extends Fl.classBuilder().ep({...au,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(e,r,n,s){return[ru(n,this.serialize,this.deserialize),iu(n,e.getEndpointParameterInstructions()),su(n),Aw(n)]}).s("AmazonS3","CompleteMultipartUpload",{}).n("S3Client","CompleteMultipartUploadCommand").f(sbe,nbe).ser(gbe).de(Sbe).build(){}class t_e extends Fl.classBuilder().ep({...au,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(e,r,n,s){return[ru(n,this.serialize,this.deserialize),iu(n,e.getEndpointParameterInstructions()),su(n),Aw(n)]}).s("AmazonS3","CreateMultipartUpload",{}).n("S3Client","CreateMultipartUploadCommand").f(obe,ibe).ser(mbe).de(_be).build(){}class c3 extends Fl.classBuilder().ep({...au,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(e,r,n,s){return[ru(n,this.serialize,this.deserialize),iu(n,e.getEndpointParameterInstructions()),Vj(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),Cve(),su(n),Aw(n)]}).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").f(dbe,ube).ser(vbe).de(Ebe).build(){}class r_e extends Fl.classBuilder().ep({...au,Bucket:{type:"contextParams",name:"Bucket"}}).m(function(e,r,n,s){return[ru(n,this.serialize,this.deserialize),iu(n,e.getEndpointParameterInstructions()),Vj(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!0}),su(n)]}).s("AmazonS3","PutObjectTagging",{}).n("S3Client","PutObjectTaggingCommand").f(void 0,void 0).ser(xbe).de(kbe).build(){}class n_e extends Fl.classBuilder().ep({...au,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(e,r,n,s){return[ru(n,this.serialize,this.deserialize),iu(n,e.getEndpointParameterInstructions()),Vj(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),su(n),Aw(n)]}).s("AmazonS3","UploadPart",{}).n("S3Client","UploadPartCommand").f(fbe,hbe).ser(wbe).de(Tbe).build(){}class s_e{constructor(){this.onabort=null,this._aborted=!1,Object.defineProperty(this,"_aborted",{value:!1,writable:!0})}get aborted(){return this._aborted}abort(){this._aborted=!0,this.onabort&&(this.onabort(this),this.onabort=null)}}let i_e=class{constructor(){this.signal=new s_e}abort(){this.signal.abort()}};var bA={exports:{}},Ed=typeof Reflect=="object"?Reflect:null,u3=Ed&&typeof Ed.apply=="function"?Ed.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Yy;Ed&&typeof Ed.ownKeys=="function"?Yy=Ed.ownKeys:Object.getOwnPropertySymbols?Yy=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Yy=function(e){return Object.getOwnPropertyNames(e)};function o_e(t){console&&console.warn&&console.warn(t)}var Q9=Number.isNaN||function(e){return e!==e};function Nt(){Nt.init.call(this)}bA.exports=Nt;bA.exports.once=u_e;Nt.EventEmitter=Nt;Nt.prototype._events=void 0;Nt.prototype._eventsCount=0;Nt.prototype._maxListeners=void 0;var d3=10;function Pw(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Nt,"defaultMaxListeners",{enumerable:!0,get:function(){return d3},set:function(t){if(typeof t!="number"||t<0||Q9(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");d3=t}});Nt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Nt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Q9(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function e7(t){return t._maxListeners===void 0?Nt.defaultMaxListeners:t._maxListeners}Nt.prototype.getMaxListeners=function(){return e7(this)};Nt.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=i[e];if(l===void 0)return!1;if(typeof l=="function")u3(l,this,r);else for(var c=l.length,d=i7(l,c),n=0;n<c;++n)u3(d[n],this,r);return!0};function t7(t,e,r,n){var s,i,o;if(Pw(r),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),i=t._events),o=i[e]),o===void 0)o=i[e]=r,++t._eventsCount;else if(typeof o=="function"?o=i[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),s=e7(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,o_e(a)}return t}Nt.prototype.addListener=function(e,r){return t7(this,e,r,!1)};Nt.prototype.on=Nt.prototype.addListener;Nt.prototype.prependListener=function(e,r){return t7(this,e,r,!0)};function a_e(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function r7(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},s=a_e.bind(n);return s.listener=r,n.wrapFn=s,s}Nt.prototype.once=function(e,r){return Pw(r),this.on(e,r7(this,e,r)),this};Nt.prototype.prependOnceListener=function(e,r){return Pw(r),this.prependListener(e,r7(this,e,r)),this};Nt.prototype.removeListener=function(e,r){var n,s,i,o,a;if(Pw(r),s=this._events,s===void 0)return this;if(n=s[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,i=o;break}if(i<0)return this;i===0?n.shift():l_e(n,i),n.length===1&&(s[e]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};Nt.prototype.off=Nt.prototype.removeListener;Nt.prototype.removeAllListeners=function(e){var r,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var i=Object.keys(n),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(s=r.length-1;s>=0;s--)this.removeListener(e,r[s]);return this};function n7(t,e,r){var n=t._events;if(n===void 0)return[];var s=n[e];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?c_e(s):i7(s,s.length)}Nt.prototype.listeners=function(e){return n7(this,e,!0)};Nt.prototype.rawListeners=function(e){return n7(this,e,!1)};Nt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):s7.call(t,e)};Nt.prototype.listenerCount=s7;function s7(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Nt.prototype.eventNames=function(){return this._eventsCount>0?Yy(this._events):[]};function i7(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function l_e(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function c_e(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function u_e(t,e){return new Promise(function(r,n){function s(o){t.removeListener(e,i),n(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),r([].slice.call(arguments))}o7(t,e,i,{once:!0}),e!=="error"&&d_e(t,s,{once:!0})})}function d_e(t,e,r){typeof t.on=="function"&&o7(t,"error",e,r)}function o7(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){n.once&&t.removeEventListener(e,s),r(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var kd=bA.exports,Is={},Nw={};Nw.byteLength=p_e;Nw.toByteArray=m_e;Nw.fromByteArray=x_e;var no=[],qs=[],h_e=typeof Uint8Array<"u"?Uint8Array:Array,r_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Pu=0,f_e=r_.length;Pu<f_e;++Pu)no[Pu]=r_[Pu],qs[r_.charCodeAt(Pu)]=Pu;qs[45]=62;qs[95]=63;function a7(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function p_e(t){var e=a7(t),r=e[0],n=e[1];return(r+n)*3/4-n}function g_e(t,e,r){return(e+r)*3/4-r}function m_e(t){var e,r=a7(t),n=r[0],s=r[1],i=new h_e(g_e(t,n,s)),o=0,a=s>0?n-4:n,l;for(l=0;l<a;l+=4)e=qs[t.charCodeAt(l)]<<18|qs[t.charCodeAt(l+1)]<<12|qs[t.charCodeAt(l+2)]<<6|qs[t.charCodeAt(l+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=qs[t.charCodeAt(l)]<<2|qs[t.charCodeAt(l+1)]>>4,i[o++]=e&255),s===1&&(e=qs[t.charCodeAt(l)]<<10|qs[t.charCodeAt(l+1)]<<4|qs[t.charCodeAt(l+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function y_e(t){return no[t>>18&63]+no[t>>12&63]+no[t>>6&63]+no[t&63]}function v_e(t,e,r){for(var n,s=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(y_e(n));return s.join("")}function x_e(t){for(var e,r=t.length,n=r%3,s=[],i=16383,o=0,a=r-n;o<a;o+=i)s.push(v_e(t,o,o+i>a?a:o+i));return n===1?(e=t[r-1],s.push(no[e>>2]+no[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],s.push(no[e>>10]+no[e>>4&63]+no[e<<2&63]+"=")),s.join("")}var SA={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */SA.read=function(t,e,r,n,s){var i,o,a=s*8-n-1,l=(1<<a)-1,c=l>>1,d=-7,h=r?s-1:0,f=r?-1:1,p=t[e+h];for(h+=f,i=p&(1<<-d)-1,p>>=-d,d+=a;d>0;i=i*256+t[e+h],h+=f,d-=8);for(o=i&(1<<-d)-1,i>>=-d,d+=n;d>0;o=o*256+t[e+h],h+=f,d-=8);if(i===0)i=1-c;else{if(i===l)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-c}return(p?-1:1)*o*Math.pow(2,i-n)};SA.write=function(t,e,r,n,s,i){var o,a,l,c=i*8-s-1,d=(1<<c)-1,h=d>>1,f=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,g=n?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=d):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=f/l:e+=f*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=d?(a=0,o=d):o+h>=1?(a=(e*l-1)*Math.pow(2,s),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,s),o=0));s>=8;t[r+p]=a&255,p+=g,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;t[r+p]=o&255,p+=g,o/=256,c-=8);t[r+p-g]|=y*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){var e=Nw,r=SA,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=m,t.INSPECT_MAX_BYTES=50;var s=2147483647;t.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{var j=new Uint8Array(1),E={foo:function(){return 42}};return Object.setPrototypeOf(E,Uint8Array.prototype),Object.setPrototypeOf(j,E),j.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(j){if(j>s)throw new RangeError('The value "'+j+'" is invalid for option "size"');var E=new Uint8Array(j);return Object.setPrototypeOf(E,a.prototype),E}function a(j,E,S){if(typeof j=="number"){if(typeof E=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(j)}return l(j,E,S)}a.poolSize=8192;function l(j,E,S){if(typeof j=="string")return f(j,E);if(ArrayBuffer.isView(j))return p(j);if(j==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(G(j,ArrayBuffer)||j&&G(j.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(G(j,SharedArrayBuffer)||j&&G(j.buffer,SharedArrayBuffer)))return g(j,E,S);if(typeof j=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var k=j.valueOf&&j.valueOf();if(k!=null&&k!==j)return a.from(k,E,S);var N=y(j);if(N)return N;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof j[Symbol.toPrimitive]=="function")return a.from(j[Symbol.toPrimitive]("string"),E,S);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}a.from=function(j,E,S){return l(j,E,S)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(j){if(typeof j!="number")throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function d(j,E,S){return c(j),j<=0?o(j):E!==void 0?typeof S=="string"?o(j).fill(E,S):o(j).fill(E):o(j)}a.alloc=function(j,E,S){return d(j,E,S)};function h(j){return c(j),o(j<0?0:v(j)|0)}a.allocUnsafe=function(j){return h(j)},a.allocUnsafeSlow=function(j){return h(j)};function f(j,E){if((typeof E!="string"||E==="")&&(E="utf8"),!a.isEncoding(E))throw new TypeError("Unknown encoding: "+E);var S=x(j,E)|0,k=o(S),N=k.write(j,E);return N!==S&&(k=k.slice(0,N)),k}function p(j){for(var E=j.length<0?0:v(j.length)|0,S=o(E),k=0;k<E;k+=1)S[k]=j[k]&255;return S}function g(j,E,S){if(E<0||j.byteLength<E)throw new RangeError('"offset" is outside of buffer bounds');if(j.byteLength<E+(S||0))throw new RangeError('"length" is outside of buffer bounds');var k;return E===void 0&&S===void 0?k=new Uint8Array(j):S===void 0?k=new Uint8Array(j,E):k=new Uint8Array(j,E,S),Object.setPrototypeOf(k,a.prototype),k}function y(j){if(a.isBuffer(j)){var E=v(j.length)|0,S=o(E);return S.length===0||j.copy(S,0,0,E),S}if(j.length!==void 0)return typeof j.length!="number"||ue(j.length)?o(0):p(j);if(j.type==="Buffer"&&Array.isArray(j.data))return p(j.data)}function v(j){if(j>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return j|0}function m(j){return+j!=j&&(j=0),a.alloc(+j)}a.isBuffer=function(E){return E!=null&&E._isBuffer===!0&&E!==a.prototype},a.compare=function(E,S){if(G(E,Uint8Array)&&(E=a.from(E,E.offset,E.byteLength)),G(S,Uint8Array)&&(S=a.from(S,S.offset,S.byteLength)),!a.isBuffer(E)||!a.isBuffer(S))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(E===S)return 0;for(var k=E.length,N=S.length,q=0,W=Math.min(k,N);q<W;++q)if(E[q]!==S[q]){k=E[q],N=S[q];break}return k<N?-1:N<k?1:0},a.isEncoding=function(E){switch(String(E).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(E,S){if(!Array.isArray(E))throw new TypeError('"list" argument must be an Array of Buffers');if(E.length===0)return a.alloc(0);var k;if(S===void 0)for(S=0,k=0;k<E.length;++k)S+=E[k].length;var N=a.allocUnsafe(S),q=0;for(k=0;k<E.length;++k){var W=E[k];if(G(W,Uint8Array)&&(W=a.from(W)),!a.isBuffer(W))throw new TypeError('"list" argument must be an Array of Buffers');W.copy(N,q),q+=W.length}return N};function x(j,E){if(a.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||G(j,ArrayBuffer))return j.byteLength;if(typeof j!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);var S=j.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&S===0)return 0;for(var N=!1;;)switch(E){case"ascii":case"latin1":case"binary":return S;case"utf8":case"utf-8":return ee(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S*2;case"hex":return S>>>1;case"base64":return A(j).length;default:if(N)return k?-1:ee(j).length;E=(""+E).toLowerCase(),N=!0}}a.byteLength=x;function b(j,E,S){var k=!1;if((E===void 0||E<0)&&(E=0),E>this.length||((S===void 0||S>this.length)&&(S=this.length),S<=0)||(S>>>=0,E>>>=0,S<=E))return"";for(j||(j="utf8");;)switch(j){case"hex":return K(this,E,S);case"utf8":case"utf-8":return Y(this,E,S);case"ascii":return se(this,E,S);case"latin1":case"binary":return F(this,E,S);case"base64":return z(this,E,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,E,S);default:if(k)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),k=!0}}a.prototype._isBuffer=!0;function _(j,E,S){var k=j[E];j[E]=j[S],j[S]=k}a.prototype.swap16=function(){var E=this.length;if(E%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var S=0;S<E;S+=2)_(this,S,S+1);return this},a.prototype.swap32=function(){var E=this.length;if(E%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var S=0;S<E;S+=4)_(this,S,S+3),_(this,S+1,S+2);return this},a.prototype.swap64=function(){var E=this.length;if(E%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var S=0;S<E;S+=8)_(this,S,S+7),_(this,S+1,S+6),_(this,S+2,S+5),_(this,S+3,S+4);return this},a.prototype.toString=function(){var E=this.length;return E===0?"":arguments.length===0?Y(this,0,E):b.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(E){if(!a.isBuffer(E))throw new TypeError("Argument must be a Buffer");return this===E?!0:a.compare(this,E)===0},a.prototype.inspect=function(){var E="",S=t.INSPECT_MAX_BYTES;return E=this.toString("hex",0,S).replace(/(.{2})/g,"$1 ").trim(),this.length>S&&(E+=" ... "),"<Buffer "+E+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(E,S,k,N,q){if(G(E,Uint8Array)&&(E=a.from(E,E.offset,E.byteLength)),!a.isBuffer(E))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof E);if(S===void 0&&(S=0),k===void 0&&(k=E?E.length:0),N===void 0&&(N=0),q===void 0&&(q=this.length),S<0||k>E.length||N<0||q>this.length)throw new RangeError("out of range index");if(N>=q&&S>=k)return 0;if(N>=q)return-1;if(S>=k)return 1;if(S>>>=0,k>>>=0,N>>>=0,q>>>=0,this===E)return 0;for(var W=q-N,ne=k-S,we=Math.min(W,ne),Le=this.slice(N,q),Je=E.slice(S,k),Ue=0;Ue<we;++Ue)if(Le[Ue]!==Je[Ue]){W=Le[Ue],ne=Je[Ue];break}return W<ne?-1:ne<W?1:0};function C(j,E,S,k,N){if(j.length===0)return-1;if(typeof S=="string"?(k=S,S=0):S>2147483647?S=2147483647:S<-2147483648&&(S=-2147483648),S=+S,ue(S)&&(S=N?0:j.length-1),S<0&&(S=j.length+S),S>=j.length){if(N)return-1;S=j.length-1}else if(S<0)if(N)S=0;else return-1;if(typeof E=="string"&&(E=a.from(E,k)),a.isBuffer(E))return E.length===0?-1:T(j,E,S,k,N);if(typeof E=="number")return E=E&255,typeof Uint8Array.prototype.indexOf=="function"?N?Uint8Array.prototype.indexOf.call(j,E,S):Uint8Array.prototype.lastIndexOf.call(j,E,S):T(j,[E],S,k,N);throw new TypeError("val must be string, number or Buffer")}function T(j,E,S,k,N){var q=1,W=j.length,ne=E.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(j.length<2||E.length<2)return-1;q=2,W/=2,ne/=2,S/=2}function we(hi,jo){return q===1?hi[jo]:hi.readUInt16BE(jo*q)}var Le;if(N){var Je=-1;for(Le=S;Le<W;Le++)if(we(j,Le)===we(E,Je===-1?0:Le-Je)){if(Je===-1&&(Je=Le),Le-Je+1===ne)return Je*q}else Je!==-1&&(Le-=Le-Je),Je=-1}else for(S+ne>W&&(S=W-ne),Le=S;Le>=0;Le--){for(var Ue=!0,er=0;er<ne;er++)if(we(j,Le+er)!==we(E,er)){Ue=!1;break}if(Ue)return Le}return-1}a.prototype.includes=function(E,S,k){return this.indexOf(E,S,k)!==-1},a.prototype.indexOf=function(E,S,k){return C(this,E,S,k,!0)},a.prototype.lastIndexOf=function(E,S,k){return C(this,E,S,k,!1)};function O(j,E,S,k){S=Number(S)||0;var N=j.length-S;k?(k=Number(k),k>N&&(k=N)):k=N;var q=E.length;k>q/2&&(k=q/2);for(var W=0;W<k;++W){var ne=parseInt(E.substr(W*2,2),16);if(ue(ne))return W;j[S+W]=ne}return W}function R(j,E,S,k){return P(ee(E,j.length-S),j,S,k)}function I(j,E,S,k){return P(me(E),j,S,k)}function H(j,E,S,k){return I(j,E,S,k)}function re(j,E,S,k){return P(A(E),j,S,k)}function L(j,E,S,k){return P(Se(E,j.length-S),j,S,k)}a.prototype.write=function(E,S,k,N){if(S===void 0)N="utf8",k=this.length,S=0;else if(k===void 0&&typeof S=="string")N=S,k=this.length,S=0;else if(isFinite(S))S=S>>>0,isFinite(k)?(k=k>>>0,N===void 0&&(N="utf8")):(N=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var q=this.length-S;if((k===void 0||k>q)&&(k=q),E.length>0&&(k<0||S<0)||S>this.length)throw new RangeError("Attempt to write outside buffer bounds");N||(N="utf8");for(var W=!1;;)switch(N){case"hex":return O(this,E,S,k);case"utf8":case"utf-8":return R(this,E,S,k);case"ascii":return I(this,E,S,k);case"latin1":case"binary":return H(this,E,S,k);case"base64":return re(this,E,S,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,E,S,k);default:if(W)throw new TypeError("Unknown encoding: "+N);N=(""+N).toLowerCase(),W=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(j,E,S){return E===0&&S===j.length?e.fromByteArray(j):e.fromByteArray(j.slice(E,S))}function Y(j,E,S){S=Math.min(j.length,S);for(var k=[],N=E;N<S;){var q=j[N],W=null,ne=q>239?4:q>223?3:q>191?2:1;if(N+ne<=S){var we,Le,Je,Ue;switch(ne){case 1:q<128&&(W=q);break;case 2:we=j[N+1],(we&192)===128&&(Ue=(q&31)<<6|we&63,Ue>127&&(W=Ue));break;case 3:we=j[N+1],Le=j[N+2],(we&192)===128&&(Le&192)===128&&(Ue=(q&15)<<12|(we&63)<<6|Le&63,Ue>2047&&(Ue<55296||Ue>57343)&&(W=Ue));break;case 4:we=j[N+1],Le=j[N+2],Je=j[N+3],(we&192)===128&&(Le&192)===128&&(Je&192)===128&&(Ue=(q&15)<<18|(we&63)<<12|(Le&63)<<6|Je&63,Ue>65535&&Ue<1114112&&(W=Ue))}}W===null?(W=65533,ne=1):W>65535&&(W-=65536,k.push(W>>>10&1023|55296),W=56320|W&1023),k.push(W),N+=ne}return Q(k)}var pe=4096;function Q(j){var E=j.length;if(E<=pe)return String.fromCharCode.apply(String,j);for(var S="",k=0;k<E;)S+=String.fromCharCode.apply(String,j.slice(k,k+=pe));return S}function se(j,E,S){var k="";S=Math.min(j.length,S);for(var N=E;N<S;++N)k+=String.fromCharCode(j[N]&127);return k}function F(j,E,S){var k="";S=Math.min(j.length,S);for(var N=E;N<S;++N)k+=String.fromCharCode(j[N]);return k}function K(j,E,S){var k=j.length;(!E||E<0)&&(E=0),(!S||S<0||S>k)&&(S=k);for(var N="",q=E;q<S;++q)N+=Ye[j[q]];return N}function de(j,E,S){for(var k=j.slice(E,S),N="",q=0;q<k.length;q+=2)N+=String.fromCharCode(k[q]+k[q+1]*256);return N}a.prototype.slice=function(E,S){var k=this.length;E=~~E,S=S===void 0?k:~~S,E<0?(E+=k,E<0&&(E=0)):E>k&&(E=k),S<0?(S+=k,S<0&&(S=0)):S>k&&(S=k),S<E&&(S=E);var N=this.subarray(E,S);return Object.setPrototypeOf(N,a.prototype),N};function le(j,E,S){if(j%1!==0||j<0)throw new RangeError("offset is not uint");if(j+E>S)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUIntLE=function(E,S,k){E=E>>>0,S=S>>>0,k||le(E,S,this.length);for(var N=this[E],q=1,W=0;++W<S&&(q*=256);)N+=this[E+W]*q;return N},a.prototype.readUIntBE=function(E,S,k){E=E>>>0,S=S>>>0,k||le(E,S,this.length);for(var N=this[E+--S],q=1;S>0&&(q*=256);)N+=this[E+--S]*q;return N},a.prototype.readUInt8=function(E,S){return E=E>>>0,S||le(E,1,this.length),this[E]},a.prototype.readUInt16LE=function(E,S){return E=E>>>0,S||le(E,2,this.length),this[E]|this[E+1]<<8},a.prototype.readUInt16BE=function(E,S){return E=E>>>0,S||le(E,2,this.length),this[E]<<8|this[E+1]},a.prototype.readUInt32LE=function(E,S){return E=E>>>0,S||le(E,4,this.length),(this[E]|this[E+1]<<8|this[E+2]<<16)+this[E+3]*16777216},a.prototype.readUInt32BE=function(E,S){return E=E>>>0,S||le(E,4,this.length),this[E]*16777216+(this[E+1]<<16|this[E+2]<<8|this[E+3])},a.prototype.readIntLE=function(E,S,k){E=E>>>0,S=S>>>0,k||le(E,S,this.length);for(var N=this[E],q=1,W=0;++W<S&&(q*=256);)N+=this[E+W]*q;return q*=128,N>=q&&(N-=Math.pow(2,8*S)),N},a.prototype.readIntBE=function(E,S,k){E=E>>>0,S=S>>>0,k||le(E,S,this.length);for(var N=S,q=1,W=this[E+--N];N>0&&(q*=256);)W+=this[E+--N]*q;return q*=128,W>=q&&(W-=Math.pow(2,8*S)),W},a.prototype.readInt8=function(E,S){return E=E>>>0,S||le(E,1,this.length),this[E]&128?(255-this[E]+1)*-1:this[E]},a.prototype.readInt16LE=function(E,S){E=E>>>0,S||le(E,2,this.length);var k=this[E]|this[E+1]<<8;return k&32768?k|4294901760:k},a.prototype.readInt16BE=function(E,S){E=E>>>0,S||le(E,2,this.length);var k=this[E+1]|this[E]<<8;return k&32768?k|4294901760:k},a.prototype.readInt32LE=function(E,S){return E=E>>>0,S||le(E,4,this.length),this[E]|this[E+1]<<8|this[E+2]<<16|this[E+3]<<24},a.prototype.readInt32BE=function(E,S){return E=E>>>0,S||le(E,4,this.length),this[E]<<24|this[E+1]<<16|this[E+2]<<8|this[E+3]},a.prototype.readFloatLE=function(E,S){return E=E>>>0,S||le(E,4,this.length),r.read(this,E,!0,23,4)},a.prototype.readFloatBE=function(E,S){return E=E>>>0,S||le(E,4,this.length),r.read(this,E,!1,23,4)},a.prototype.readDoubleLE=function(E,S){return E=E>>>0,S||le(E,8,this.length),r.read(this,E,!0,52,8)},a.prototype.readDoubleBE=function(E,S){return E=E>>>0,S||le(E,8,this.length),r.read(this,E,!1,52,8)};function be(j,E,S,k,N,q){if(!a.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(E>N||E<q)throw new RangeError('"value" argument is out of bounds');if(S+k>j.length)throw new RangeError("Index out of range")}a.prototype.writeUIntLE=function(E,S,k,N){if(E=+E,S=S>>>0,k=k>>>0,!N){var q=Math.pow(2,8*k)-1;be(this,E,S,k,q,0)}var W=1,ne=0;for(this[S]=E&255;++ne<k&&(W*=256);)this[S+ne]=E/W&255;return S+k},a.prototype.writeUIntBE=function(E,S,k,N){if(E=+E,S=S>>>0,k=k>>>0,!N){var q=Math.pow(2,8*k)-1;be(this,E,S,k,q,0)}var W=k-1,ne=1;for(this[S+W]=E&255;--W>=0&&(ne*=256);)this[S+W]=E/ne&255;return S+k},a.prototype.writeUInt8=function(E,S,k){return E=+E,S=S>>>0,k||be(this,E,S,1,255,0),this[S]=E&255,S+1},a.prototype.writeUInt16LE=function(E,S,k){return E=+E,S=S>>>0,k||be(this,E,S,2,65535,0),this[S]=E&255,this[S+1]=E>>>8,S+2},a.prototype.writeUInt16BE=function(E,S,k){return E=+E,S=S>>>0,k||be(this,E,S,2,65535,0),this[S]=E>>>8,this[S+1]=E&255,S+2},a.prototype.writeUInt32LE=function(E,S,k){return E=+E,S=S>>>0,k||be(this,E,S,4,4294967295,0),this[S+3]=E>>>24,this[S+2]=E>>>16,this[S+1]=E>>>8,this[S]=E&255,S+4},a.prototype.writeUInt32BE=function(E,S,k){return E=+E,S=S>>>0,k||be(this,E,S,4,4294967295,0),this[S]=E>>>24,this[S+1]=E>>>16,this[S+2]=E>>>8,this[S+3]=E&255,S+4},a.prototype.writeIntLE=function(E,S,k,N){if(E=+E,S=S>>>0,!N){var q=Math.pow(2,8*k-1);be(this,E,S,k,q-1,-q)}var W=0,ne=1,we=0;for(this[S]=E&255;++W<k&&(ne*=256);)E<0&&we===0&&this[S+W-1]!==0&&(we=1),this[S+W]=(E/ne>>0)-we&255;return S+k},a.prototype.writeIntBE=function(E,S,k,N){if(E=+E,S=S>>>0,!N){var q=Math.pow(2,8*k-1);be(this,E,S,k,q-1,-q)}var W=k-1,ne=1,we=0;for(this[S+W]=E&255;--W>=0&&(ne*=256);)E<0&&we===0&&this[S+W+1]!==0&&(we=1),this[S+W]=(E/ne>>0)-we&255;return S+k},a.prototype.writeInt8=function(E,S,k){return E=+E,S=S>>>0,k||be(this,E,S,1,127,-128),E<0&&(E=255+E+1),this[S]=E&255,S+1},a.prototype.writeInt16LE=function(E,S,k){return E=+E,S=S>>>0,k||be(this,E,S,2,32767,-32768),this[S]=E&255,this[S+1]=E>>>8,S+2},a.prototype.writeInt16BE=function(E,S,k){return E=+E,S=S>>>0,k||be(this,E,S,2,32767,-32768),this[S]=E>>>8,this[S+1]=E&255,S+2},a.prototype.writeInt32LE=function(E,S,k){return E=+E,S=S>>>0,k||be(this,E,S,4,2147483647,-2147483648),this[S]=E&255,this[S+1]=E>>>8,this[S+2]=E>>>16,this[S+3]=E>>>24,S+4},a.prototype.writeInt32BE=function(E,S,k){return E=+E,S=S>>>0,k||be(this,E,S,4,2147483647,-2147483648),E<0&&(E=4294967295+E+1),this[S]=E>>>24,this[S+1]=E>>>16,this[S+2]=E>>>8,this[S+3]=E&255,S+4};function Be(j,E,S,k,N,q){if(S+k>j.length)throw new RangeError("Index out of range");if(S<0)throw new RangeError("Index out of range")}function He(j,E,S,k,N){return E=+E,S=S>>>0,N||Be(j,E,S,4),r.write(j,E,S,k,23,4),S+4}a.prototype.writeFloatLE=function(E,S,k){return He(this,E,S,!0,k)},a.prototype.writeFloatBE=function(E,S,k){return He(this,E,S,!1,k)};function ht(j,E,S,k,N){return E=+E,S=S>>>0,N||Be(j,E,S,8),r.write(j,E,S,k,52,8),S+8}a.prototype.writeDoubleLE=function(E,S,k){return ht(this,E,S,!0,k)},a.prototype.writeDoubleBE=function(E,S,k){return ht(this,E,S,!1,k)},a.prototype.copy=function(E,S,k,N){if(!a.isBuffer(E))throw new TypeError("argument should be a Buffer");if(k||(k=0),!N&&N!==0&&(N=this.length),S>=E.length&&(S=E.length),S||(S=0),N>0&&N<k&&(N=k),N===k||E.length===0||this.length===0)return 0;if(S<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("sourceEnd out of bounds");N>this.length&&(N=this.length),E.length-S<N-k&&(N=E.length-S+k);var q=N-k;if(this===E&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(S,k,N);else if(this===E&&k<S&&S<N)for(var W=q-1;W>=0;--W)E[W+S]=this[W+k];else Uint8Array.prototype.set.call(E,this.subarray(k,N),S);return q},a.prototype.fill=function(E,S,k,N){if(typeof E=="string"){if(typeof S=="string"?(N=S,S=0,k=this.length):typeof k=="string"&&(N=k,k=this.length),N!==void 0&&typeof N!="string")throw new TypeError("encoding must be a string");if(typeof N=="string"&&!a.isEncoding(N))throw new TypeError("Unknown encoding: "+N);if(E.length===1){var q=E.charCodeAt(0);(N==="utf8"&&q<128||N==="latin1")&&(E=q)}}else typeof E=="number"?E=E&255:typeof E=="boolean"&&(E=Number(E));if(S<0||this.length<S||this.length<k)throw new RangeError("Out of range index");if(k<=S)return this;S=S>>>0,k=k===void 0?this.length:k>>>0,E||(E=0);var W;if(typeof E=="number")for(W=S;W<k;++W)this[W]=E;else{var ne=a.isBuffer(E)?E:a.from(E,N),we=ne.length;if(we===0)throw new TypeError('The value "'+E+'" is invalid for argument "value"');for(W=0;W<k-S;++W)this[W+S]=ne[W%we]}return this};var U=/[^+/0-9A-Za-z-_]/g;function D(j){if(j=j.split("=")[0],j=j.trim().replace(U,""),j.length<2)return"";for(;j.length%4!==0;)j=j+"=";return j}function ee(j,E){E=E||1/0;for(var S,k=j.length,N=null,q=[],W=0;W<k;++W){if(S=j.charCodeAt(W),S>55295&&S<57344){if(!N){if(S>56319){(E-=3)>-1&&q.push(239,191,189);continue}else if(W+1===k){(E-=3)>-1&&q.push(239,191,189);continue}N=S;continue}if(S<56320){(E-=3)>-1&&q.push(239,191,189),N=S;continue}S=(N-55296<<10|S-56320)+65536}else N&&(E-=3)>-1&&q.push(239,191,189);if(N=null,S<128){if((E-=1)<0)break;q.push(S)}else if(S<2048){if((E-=2)<0)break;q.push(S>>6|192,S&63|128)}else if(S<65536){if((E-=3)<0)break;q.push(S>>12|224,S>>6&63|128,S&63|128)}else if(S<1114112){if((E-=4)<0)break;q.push(S>>18|240,S>>12&63|128,S>>6&63|128,S&63|128)}else throw new Error("Invalid code point")}return q}function me(j){for(var E=[],S=0;S<j.length;++S)E.push(j.charCodeAt(S)&255);return E}function Se(j,E){for(var S,k,N,q=[],W=0;W<j.length&&!((E-=2)<0);++W)S=j.charCodeAt(W),k=S>>8,N=S%256,q.push(N),q.push(k);return q}function A(j){return e.toByteArray(D(j))}function P(j,E,S,k){for(var N=0;N<k&&!(N+S>=E.length||N>=j.length);++N)E[N+S]=j[N];return N}function G(j,E){return j instanceof E||j!=null&&j.constructor!=null&&j.constructor.name!=null&&j.constructor.name===E.name}function ue(j){return j!==j}var Ye=function(){for(var j="0123456789abcdef",E=new Array(256),S=0;S<16;++S)for(var k=S*16,N=0;N<16;++N)E[k+N]=j[S]+j[N];return E}()})(Is);const w_e={lstatSync:()=>{}},b_e={...w_e,runtime:"browser"},n_=t=>{if(t==null)return 0;if(typeof t=="string")return Is.Buffer.byteLength(t);if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.length=="number")return t.length;if(typeof t.size=="number")return t.size;if(typeof t.path=="string")try{return b_e.lstatSync(t.path).size}catch{return}};var ck={exports:{}};typeof Object.create=="function"?ck.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:ck.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var Nh=ck.exports,s_,h3;function l7(){return h3||(h3=1,s_=kd.EventEmitter),s_}const S_e={},__e=Object.freeze(Object.defineProperty({__proto__:null,default:S_e},Symbol.toStringTag,{value:"Module"})),c7=E4(__e);var i_,f3;function C_e(){if(f3)return i_;f3=1;function t(g,y){var v=Object.keys(g);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(g);y&&(m=m.filter(function(x){return Object.getOwnPropertyDescriptor(g,x).enumerable})),v.push.apply(v,m)}return v}function e(g){for(var y=1;y<arguments.length;y++){var v=arguments[y]!=null?arguments[y]:{};y%2?t(Object(v),!0).forEach(function(m){r(g,m,v[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(v)):t(Object(v)).forEach(function(m){Object.defineProperty(g,m,Object.getOwnPropertyDescriptor(v,m))})}return g}function r(g,y,v){return y=o(y),y in g?Object.defineProperty(g,y,{value:v,enumerable:!0,configurable:!0,writable:!0}):g[y]=v,g}function n(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}function s(g,y){for(var v=0;v<y.length;v++){var m=y[v];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(g,o(m.key),m)}}function i(g,y,v){return y&&s(g.prototype,y),Object.defineProperty(g,"prototype",{writable:!1}),g}function o(g){var y=a(g,"string");return typeof y=="symbol"?y:String(y)}function a(g,y){if(typeof g!="object"||g===null)return g;var v=g[Symbol.toPrimitive];if(v!==void 0){var m=v.call(g,y||"default");if(typeof m!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(g)}var l=Is,c=l.Buffer,d=c7,h=d.inspect,f=h&&h.custom||"inspect";function p(g,y,v){c.prototype.copy.call(g,y,v)}return i_=function(){function g(){n(this,g),this.head=null,this.tail=null,this.length=0}return i(g,[{key:"push",value:function(v){var m={data:v,next:null};this.length>0?this.tail.next=m:this.head=m,this.tail=m,++this.length}},{key:"unshift",value:function(v){var m={data:v,next:this.head};this.length===0&&(this.tail=m),this.head=m,++this.length}},{key:"shift",value:function(){if(this.length!==0){var v=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,v}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(v){if(this.length===0)return"";for(var m=this.head,x=""+m.data;m=m.next;)x+=v+m.data;return x}},{key:"concat",value:function(v){if(this.length===0)return c.alloc(0);for(var m=c.allocUnsafe(v>>>0),x=this.head,b=0;x;)p(x.data,m,b),b+=x.data.length,x=x.next;return m}},{key:"consume",value:function(v,m){var x;return v<this.head.data.length?(x=this.head.data.slice(0,v),this.head.data=this.head.data.slice(v)):v===this.head.data.length?x=this.shift():x=m?this._getString(v):this._getBuffer(v),x}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(v){var m=this.head,x=1,b=m.data;for(v-=b.length;m=m.next;){var _=m.data,C=v>_.length?_.length:v;if(C===_.length?b+=_:b+=_.slice(0,v),v-=C,v===0){C===_.length?(++x,m.next?this.head=m.next:this.head=this.tail=null):(this.head=m,m.data=_.slice(C));break}++x}return this.length-=x,b}},{key:"_getBuffer",value:function(v){var m=c.allocUnsafe(v),x=this.head,b=1;for(x.data.copy(m),v-=x.data.length;x=x.next;){var _=x.data,C=v>_.length?_.length:v;if(_.copy(m,m.length-v,0,C),v-=C,v===0){C===_.length?(++b,x.next?this.head=x.next:this.head=this.tail=null):(this.head=x,x.data=_.slice(C));break}++b}return this.length-=b,m}},{key:f,value:function(v,m){return h(this,e(e({},m),{},{depth:0,customInspect:!1}))}}]),g}(),i_}var o_,p3;function u7(){if(p3)return o_;p3=1;function t(o,a){var l=this,c=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return c||d?(a?a(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(s,this,o)):process.nextTick(s,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(h){!a&&h?l._writableState?l._writableState.errorEmitted?process.nextTick(r,l):(l._writableState.errorEmitted=!0,process.nextTick(e,l,h)):process.nextTick(e,l,h):a?(process.nextTick(r,l),a(h)):process.nextTick(r,l)}),this)}function e(o,a){s(o,a),r(o)}function r(o){o._writableState&&!o._writableState.emitClose||o._readableState&&!o._readableState.emitClose||o.emit("close")}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(o,a){o.emit("error",a)}function i(o,a){var l=o._readableState,c=o._writableState;l&&l.autoDestroy||c&&c.autoDestroy?o.destroy(a):o.emit("error",a)}return o_={destroy:t,undestroy:n,errorOrDestroy:i},o_}var a_={},g3;function Rh(){if(g3)return a_;g3=1;function t(a,l){a.prototype=Object.create(l.prototype),a.prototype.constructor=a,a.__proto__=l}var e={};function r(a,l,c){c||(c=Error);function d(f,p,g){return typeof l=="string"?l:l(f,p,g)}var h=function(f){t(p,f);function p(g,y,v){return f.call(this,d(g,y,v))||this}return p}(c);h.prototype.name=c.name,h.prototype.code=a,e[a]=h}function n(a,l){if(Array.isArray(a)){var c=a.length;return a=a.map(function(d){return String(d)}),c>2?"one of ".concat(l," ").concat(a.slice(0,c-1).join(", "),", or ")+a[c-1]:c===2?"one of ".concat(l," ").concat(a[0]," or ").concat(a[1]):"of ".concat(l," ").concat(a[0])}else return"of ".concat(l," ").concat(String(a))}function s(a,l,c){return a.substr(0,l.length)===l}function i(a,l,c){return(c===void 0||c>a.length)&&(c=a.length),a.substring(c-l.length,c)===l}function o(a,l,c){return typeof c!="number"&&(c=0),c+l.length>a.length?!1:a.indexOf(l,c)!==-1}return r("ERR_INVALID_OPT_VALUE",function(a,l){return'The value "'+l+'" is invalid for option "'+a+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(a,l,c){var d;typeof l=="string"&&s(l,"not ")?(d="must not be",l=l.replace(/^not /,"")):d="must be";var h;if(i(a," argument"))h="The ".concat(a," ").concat(d," ").concat(n(l,"type"));else{var f=o(a,".")?"property":"argument";h='The "'.concat(a,'" ').concat(f," ").concat(d," ").concat(n(l,"type"))}return h+=". Received type ".concat(typeof c),h},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),a_.codes=e,a_}var l_,m3;function d7(){if(m3)return l_;m3=1;var t=Rh().codes.ERR_INVALID_OPT_VALUE;function e(n,s,i){return n.highWaterMark!=null?n.highWaterMark:s?n[i]:null}function r(n,s,i,o){var a=e(s,o,i);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var l=o?i:"highWaterMark";throw new t(l,a)}return Math.floor(a)}return n.objectMode?16:16*1024}return l_={getHighWaterMark:r},l_}var c_,y3;function E_e(){if(y3)return c_;y3=1,c_=t;function t(r,n){if(e("noDeprecation"))return r;var s=!1;function i(){if(!s){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),s=!0}return r.apply(this,arguments)}return i}function e(r){try{if(!Jr.localStorage)return!1}catch{return!1}var n=Jr.localStorage[r];return n==null?!1:String(n).toLowerCase()==="true"}return c_}var u_,v3;function h7(){if(v3)return u_;v3=1,u_=R;function t(U){var D=this;this.next=null,this.entry=null,this.finish=function(){ht(D,U)}}var e;R.WritableState=T;var r={deprecate:E_e()},n=l7(),s=Is.Buffer,i=(typeof Jr<"u"?Jr:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(U){return s.from(U)}function a(U){return s.isBuffer(U)||U instanceof i}var l=u7(),c=d7(),d=c.getHighWaterMark,h=Rh().codes,f=h.ERR_INVALID_ARG_TYPE,p=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_MULTIPLE_CALLBACK,y=h.ERR_STREAM_CANNOT_PIPE,v=h.ERR_STREAM_DESTROYED,m=h.ERR_STREAM_NULL_VALUES,x=h.ERR_STREAM_WRITE_AFTER_END,b=h.ERR_UNKNOWN_ENCODING,_=l.errorOrDestroy;Nh(R,n);function C(){}function T(U,D,ee){e=e||Zd(),U=U||{},typeof ee!="boolean"&&(ee=D instanceof e),this.objectMode=!!U.objectMode,ee&&(this.objectMode=this.objectMode||!!U.writableObjectMode),this.highWaterMark=d(this,U,"writableHighWaterMark",ee),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var me=U.decodeStrings===!1;this.decodeStrings=!me,this.defaultEncoding=U.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Se){Q(D,Se)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=U.emitClose!==!1,this.autoDestroy=!!U.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}T.prototype.getBuffer=function(){for(var D=this.bufferedRequest,ee=[];D;)ee.push(D),D=D.next;return ee},function(){try{Object.defineProperty(T.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var O;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(O=Function.prototype[Symbol.hasInstance],Object.defineProperty(R,Symbol.hasInstance,{value:function(D){return O.call(this,D)?!0:this!==R?!1:D&&D._writableState instanceof T}})):O=function(D){return D instanceof this};function R(U){e=e||Zd();var D=this instanceof e;if(!D&&!O.call(R,this))return new R(U);this._writableState=new T(U,this,D),this.writable=!0,U&&(typeof U.write=="function"&&(this._write=U.write),typeof U.writev=="function"&&(this._writev=U.writev),typeof U.destroy=="function"&&(this._destroy=U.destroy),typeof U.final=="function"&&(this._final=U.final)),n.call(this)}R.prototype.pipe=function(){_(this,new y)};function I(U,D){var ee=new x;_(U,ee),process.nextTick(D,ee)}function H(U,D,ee,me){var Se;return ee===null?Se=new m:typeof ee!="string"&&!D.objectMode&&(Se=new f("chunk",["string","Buffer"],ee)),Se?(_(U,Se),process.nextTick(me,Se),!1):!0}R.prototype.write=function(U,D,ee){var me=this._writableState,Se=!1,A=!me.objectMode&&a(U);return A&&!s.isBuffer(U)&&(U=o(U)),typeof D=="function"&&(ee=D,D=null),A?D="buffer":D||(D=me.defaultEncoding),typeof ee!="function"&&(ee=C),me.ending?I(this,ee):(A||H(this,me,U,ee))&&(me.pendingcb++,Se=L(this,me,A,U,D,ee)),Se},R.prototype.cork=function(){this._writableState.corked++},R.prototype.uncork=function(){var U=this._writableState;U.corked&&(U.corked--,!U.writing&&!U.corked&&!U.bufferProcessing&&U.bufferedRequest&&K(this,U))},R.prototype.setDefaultEncoding=function(D){if(typeof D=="string"&&(D=D.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((D+"").toLowerCase())>-1))throw new b(D);return this._writableState.defaultEncoding=D,this},Object.defineProperty(R.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function re(U,D,ee){return!U.objectMode&&U.decodeStrings!==!1&&typeof D=="string"&&(D=s.from(D,ee)),D}Object.defineProperty(R.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function L(U,D,ee,me,Se,A){if(!ee){var P=re(D,me,Se);me!==P&&(ee=!0,Se="buffer",me=P)}var G=D.objectMode?1:me.length;D.length+=G;var ue=D.length<D.highWaterMark;if(ue||(D.needDrain=!0),D.writing||D.corked){var Ye=D.lastBufferedRequest;D.lastBufferedRequest={chunk:me,encoding:Se,isBuf:ee,callback:A,next:null},Ye?Ye.next=D.lastBufferedRequest:D.bufferedRequest=D.lastBufferedRequest,D.bufferedRequestCount+=1}else z(U,D,!1,G,me,Se,A);return ue}function z(U,D,ee,me,Se,A,P){D.writelen=me,D.writecb=P,D.writing=!0,D.sync=!0,D.destroyed?D.onwrite(new v("write")):ee?U._writev(Se,D.onwrite):U._write(Se,A,D.onwrite),D.sync=!1}function Y(U,D,ee,me,Se){--D.pendingcb,ee?(process.nextTick(Se,me),process.nextTick(Be,U,D),U._writableState.errorEmitted=!0,_(U,me)):(Se(me),U._writableState.errorEmitted=!0,_(U,me),Be(U,D))}function pe(U){U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0}function Q(U,D){var ee=U._writableState,me=ee.sync,Se=ee.writecb;if(typeof Se!="function")throw new g;if(pe(ee),D)Y(U,ee,me,D,Se);else{var A=de(ee)||U.destroyed;!A&&!ee.corked&&!ee.bufferProcessing&&ee.bufferedRequest&&K(U,ee),me?process.nextTick(se,U,ee,A,Se):se(U,ee,A,Se)}}function se(U,D,ee,me){ee||F(U,D),D.pendingcb--,me(),Be(U,D)}function F(U,D){D.length===0&&D.needDrain&&(D.needDrain=!1,U.emit("drain"))}function K(U,D){D.bufferProcessing=!0;var ee=D.bufferedRequest;if(U._writev&&ee&&ee.next){var me=D.bufferedRequestCount,Se=new Array(me),A=D.corkedRequestsFree;A.entry=ee;for(var P=0,G=!0;ee;)Se[P]=ee,ee.isBuf||(G=!1),ee=ee.next,P+=1;Se.allBuffers=G,z(U,D,!0,D.length,Se,"",A.finish),D.pendingcb++,D.lastBufferedRequest=null,A.next?(D.corkedRequestsFree=A.next,A.next=null):D.corkedRequestsFree=new t(D),D.bufferedRequestCount=0}else{for(;ee;){var ue=ee.chunk,Ye=ee.encoding,j=ee.callback,E=D.objectMode?1:ue.length;if(z(U,D,!1,E,ue,Ye,j),ee=ee.next,D.bufferedRequestCount--,D.writing)break}ee===null&&(D.lastBufferedRequest=null)}D.bufferedRequest=ee,D.bufferProcessing=!1}R.prototype._write=function(U,D,ee){ee(new p("_write()"))},R.prototype._writev=null,R.prototype.end=function(U,D,ee){var me=this._writableState;return typeof U=="function"?(ee=U,U=null,D=null):typeof D=="function"&&(ee=D,D=null),U!=null&&this.write(U,D),me.corked&&(me.corked=1,this.uncork()),me.ending||He(this,me,ee),this},Object.defineProperty(R.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function de(U){return U.ending&&U.length===0&&U.bufferedRequest===null&&!U.finished&&!U.writing}function le(U,D){U._final(function(ee){D.pendingcb--,ee&&_(U,ee),D.prefinished=!0,U.emit("prefinish"),Be(U,D)})}function be(U,D){!D.prefinished&&!D.finalCalled&&(typeof U._final=="function"&&!D.destroyed?(D.pendingcb++,D.finalCalled=!0,process.nextTick(le,U,D)):(D.prefinished=!0,U.emit("prefinish")))}function Be(U,D){var ee=de(D);if(ee&&(be(U,D),D.pendingcb===0&&(D.finished=!0,U.emit("finish"),D.autoDestroy))){var me=U._readableState;(!me||me.autoDestroy&&me.endEmitted)&&U.destroy()}return ee}function He(U,D,ee){D.ending=!0,Be(U,D),ee&&(D.finished?process.nextTick(ee):U.once("finish",ee)),D.ended=!0,U.writable=!1}function ht(U,D,ee){var me=U.entry;for(U.entry=null;me;){var Se=me.callback;D.pendingcb--,Se(ee),me=me.next}D.corkedRequestsFree.next=U}return Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(D){this._writableState&&(this._writableState.destroyed=D)}}),R.prototype.destroy=l.destroy,R.prototype._undestroy=l.undestroy,R.prototype._destroy=function(U,D){D(U)},u_}var d_,x3;function Zd(){if(x3)return d_;x3=1;var t=Object.keys||function(c){var d=[];for(var h in c)d.push(h);return d};d_=o;var e=f7(),r=h7();Nh(o,e);for(var n=t(r.prototype),s=0;s<n.length;s++){var i=n[s];o.prototype[i]||(o.prototype[i]=r.prototype[i])}function o(c){if(!(this instanceof o))return new o(c);e.call(this,c),r.call(this,c),this.allowHalfOpen=!0,c&&(c.readable===!1&&(this.readable=!1),c.writable===!1&&(this.writable=!1),c.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||process.nextTick(l,this)}function l(c){c.end()}return Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(d){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=d,this._writableState.destroyed=d)}}),d_}var h_={},zm={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var w3;function k_e(){return w3||(w3=1,function(t,e){var r=Is,n=r.Buffer;function s(o,a){for(var l in o)a[l]=o[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(s(r,e),e.Buffer=i);function i(o,a,l){return n(o,a,l)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,l)},i.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=n(o);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}}(zm,zm.exports)),zm.exports}var b3;function S3(){if(b3)return h_;b3=1;var t=k_e().Buffer,e=t.isEncoding||function(m){switch(m=""+m,m&&m.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(m){if(!m)return"utf8";for(var x;;)switch(m){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return m;default:if(x)return;m=(""+m).toLowerCase(),x=!0}}function n(m){var x=r(m);if(typeof x!="string"&&(t.isEncoding===e||!e(m)))throw new Error("Unknown encoding: "+m);return x||m}h_.StringDecoder=s;function s(m){this.encoding=n(m);var x;switch(this.encoding){case"utf16le":this.text=h,this.end=f,x=4;break;case"utf8":this.fillLast=l,x=4;break;case"base64":this.text=p,this.end=g,x=3;break;default:this.write=y,this.end=v;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(x)}s.prototype.write=function(m){if(m.length===0)return"";var x,b;if(this.lastNeed){if(x=this.fillLast(m),x===void 0)return"";b=this.lastNeed,this.lastNeed=0}else b=0;return b<m.length?x?x+this.text(m,b):this.text(m,b):x||""},s.prototype.end=d,s.prototype.text=c,s.prototype.fillLast=function(m){if(this.lastNeed<=m.length)return m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,m.length),this.lastNeed-=m.length};function i(m){return m<=127?0:m>>5===6?2:m>>4===14?3:m>>3===30?4:m>>6===2?-1:-2}function o(m,x,b){var _=x.length-1;if(_<b)return 0;var C=i(x[_]);return C>=0?(C>0&&(m.lastNeed=C-1),C):--_<b||C===-2?0:(C=i(x[_]),C>=0?(C>0&&(m.lastNeed=C-2),C):--_<b||C===-2?0:(C=i(x[_]),C>=0?(C>0&&(C===2?C=0:m.lastNeed=C-3),C):0))}function a(m,x,b){if((x[0]&192)!==128)return m.lastNeed=0,"";if(m.lastNeed>1&&x.length>1){if((x[1]&192)!==128)return m.lastNeed=1,"";if(m.lastNeed>2&&x.length>2&&(x[2]&192)!==128)return m.lastNeed=2,""}}function l(m){var x=this.lastTotal-this.lastNeed,b=a(this,m);if(b!==void 0)return b;if(this.lastNeed<=m.length)return m.copy(this.lastChar,x,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,x,0,m.length),this.lastNeed-=m.length}function c(m,x){var b=o(this,m,x);if(!this.lastNeed)return m.toString("utf8",x);this.lastTotal=b;var _=m.length-(b-this.lastNeed);return m.copy(this.lastChar,0,_),m.toString("utf8",x,_)}function d(m){var x=m&&m.length?this.write(m):"";return this.lastNeed?x+"":x}function h(m,x){if((m.length-x)%2===0){var b=m.toString("utf16le",x);if(b){var _=b.charCodeAt(b.length-1);if(_>=55296&&_<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1],b.slice(0,-1)}return b}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=m[m.length-1],m.toString("utf16le",x,m.length-1)}function f(m){var x=m&&m.length?this.write(m):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return x+this.lastChar.toString("utf16le",0,b)}return x}function p(m,x){var b=(m.length-x)%3;return b===0?m.toString("base64",x):(this.lastNeed=3-b,this.lastTotal=3,b===1?this.lastChar[0]=m[m.length-1]:(this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1]),m.toString("base64",x,m.length-b))}function g(m){var x=m&&m.length?this.write(m):"";return this.lastNeed?x+this.lastChar.toString("base64",0,3-this.lastNeed):x}function y(m){return m.toString(this.encoding)}function v(m){return m&&m.length?this.write(m):""}return h_}var f_,_3;function _A(){if(_3)return f_;_3=1;var t=Rh().codes.ERR_STREAM_PREMATURE_CLOSE;function e(i){var o=!1;return function(){if(!o){o=!0;for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];i.apply(this,l)}}}function r(){}function n(i){return i.setHeader&&typeof i.abort=="function"}function s(i,o,a){if(typeof o=="function")return s(i,null,o);o||(o={}),a=e(a||r);var l=o.readable||o.readable!==!1&&i.readable,c=o.writable||o.writable!==!1&&i.writable,d=function(){i.writable||f()},h=i._writableState&&i._writableState.finished,f=function(){c=!1,h=!0,l||a.call(i)},p=i._readableState&&i._readableState.endEmitted,g=function(){l=!1,p=!0,c||a.call(i)},y=function(b){a.call(i,b)},v=function(){var b;if(l&&!p)return(!i._readableState||!i._readableState.ended)&&(b=new t),a.call(i,b);if(c&&!h)return(!i._writableState||!i._writableState.ended)&&(b=new t),a.call(i,b)},m=function(){i.req.on("finish",f)};return n(i)?(i.on("complete",f),i.on("abort",v),i.req?m():i.on("request",m)):c&&!i._writableState&&(i.on("end",d),i.on("close",d)),i.on("end",g),i.on("finish",f),o.error!==!1&&i.on("error",y),i.on("close",v),function(){i.removeListener("complete",f),i.removeListener("abort",v),i.removeListener("request",m),i.req&&i.req.removeListener("finish",f),i.removeListener("end",d),i.removeListener("close",d),i.removeListener("finish",f),i.removeListener("end",g),i.removeListener("error",y),i.removeListener("close",v)}}return f_=s,f_}var p_,C3;function T_e(){if(C3)return p_;C3=1;var t;function e(b,_,C){return _=r(_),_ in b?Object.defineProperty(b,_,{value:C,enumerable:!0,configurable:!0,writable:!0}):b[_]=C,b}function r(b){var _=n(b,"string");return typeof _=="symbol"?_:String(_)}function n(b,_){if(typeof b!="object"||b===null)return b;var C=b[Symbol.toPrimitive];if(C!==void 0){var T=C.call(b,_||"default");if(typeof T!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(b)}var s=_A(),i=Symbol("lastResolve"),o=Symbol("lastReject"),a=Symbol("error"),l=Symbol("ended"),c=Symbol("lastPromise"),d=Symbol("handlePromise"),h=Symbol("stream");function f(b,_){return{value:b,done:_}}function p(b){var _=b[i];if(_!==null){var C=b[h].read();C!==null&&(b[c]=null,b[i]=null,b[o]=null,_(f(C,!1)))}}function g(b){process.nextTick(p,b)}function y(b,_){return function(C,T){b.then(function(){if(_[l]){C(f(void 0,!0));return}_[d](C,T)},T)}}var v=Object.getPrototypeOf(function(){}),m=Object.setPrototypeOf((t={get stream(){return this[h]},next:function(){var _=this,C=this[a];if(C!==null)return Promise.reject(C);if(this[l])return Promise.resolve(f(void 0,!0));if(this[h].destroyed)return new Promise(function(I,H){process.nextTick(function(){_[a]?H(_[a]):I(f(void 0,!0))})});var T=this[c],O;if(T)O=new Promise(y(T,this));else{var R=this[h].read();if(R!==null)return Promise.resolve(f(R,!1));O=new Promise(this[d])}return this[c]=O,O}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var _=this;return new Promise(function(C,T){_[h].destroy(null,function(O){if(O){T(O);return}C(f(void 0,!0))})})}),t),v),x=function(_){var C,T=Object.create(m,(C={},e(C,h,{value:_,writable:!0}),e(C,i,{value:null,writable:!0}),e(C,o,{value:null,writable:!0}),e(C,a,{value:null,writable:!0}),e(C,l,{value:_._readableState.endEmitted,writable:!0}),e(C,d,{value:function(R,I){var H=T[h].read();H?(T[c]=null,T[i]=null,T[o]=null,R(f(H,!1))):(T[i]=R,T[o]=I)},writable:!0}),C));return T[c]=null,s(_,function(O){if(O&&O.code!=="ERR_STREAM_PREMATURE_CLOSE"){var R=T[o];R!==null&&(T[c]=null,T[i]=null,T[o]=null,R(O)),T[a]=O;return}var I=T[i];I!==null&&(T[c]=null,T[i]=null,T[o]=null,I(f(void 0,!0))),T[l]=!0}),_.on("readable",g.bind(null,T)),T};return p_=x,p_}var g_,E3;function j_e(){return E3||(E3=1,g_=function(){throw new Error("Readable.from is not available in the browser")}),g_}var m_,k3;function f7(){if(k3)return m_;k3=1,m_=I;var t;I.ReadableState=R,kd.EventEmitter;var e=function(P,G){return P.listeners(G).length},r=l7(),n=Is.Buffer,s=(typeof Jr<"u"?Jr:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function i(A){return n.from(A)}function o(A){return n.isBuffer(A)||A instanceof s}var a=c7,l;a&&a.debuglog?l=a.debuglog("stream"):l=function(){};var c=C_e(),d=u7(),h=d7(),f=h.getHighWaterMark,p=Rh().codes,g=p.ERR_INVALID_ARG_TYPE,y=p.ERR_STREAM_PUSH_AFTER_EOF,v=p.ERR_METHOD_NOT_IMPLEMENTED,m=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,x,b,_;Nh(I,r);var C=d.errorOrDestroy,T=["error","close","destroy","pause","resume"];function O(A,P,G){if(typeof A.prependListener=="function")return A.prependListener(P,G);!A._events||!A._events[P]?A.on(P,G):Array.isArray(A._events[P])?A._events[P].unshift(G):A._events[P]=[G,A._events[P]]}function R(A,P,G){t=t||Zd(),A=A||{},typeof G!="boolean"&&(G=P instanceof t),this.objectMode=!!A.objectMode,G&&(this.objectMode=this.objectMode||!!A.readableObjectMode),this.highWaterMark=f(this,A,"readableHighWaterMark",G),this.buffer=new c,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=A.emitClose!==!1,this.autoDestroy=!!A.autoDestroy,this.destroyed=!1,this.defaultEncoding=A.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,A.encoding&&(x||(x=S3().StringDecoder),this.decoder=new x(A.encoding),this.encoding=A.encoding)}function I(A){if(t=t||Zd(),!(this instanceof I))return new I(A);var P=this instanceof t;this._readableState=new R(A,this,P),this.readable=!0,A&&(typeof A.read=="function"&&(this._read=A.read),typeof A.destroy=="function"&&(this._destroy=A.destroy)),r.call(this)}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(P){this._readableState&&(this._readableState.destroyed=P)}}),I.prototype.destroy=d.destroy,I.prototype._undestroy=d.undestroy,I.prototype._destroy=function(A,P){P(A)},I.prototype.push=function(A,P){var G=this._readableState,ue;return G.objectMode?ue=!0:typeof A=="string"&&(P=P||G.defaultEncoding,P!==G.encoding&&(A=n.from(A,P),P=""),ue=!0),H(this,A,P,!1,ue)},I.prototype.unshift=function(A){return H(this,A,null,!0,!1)};function H(A,P,G,ue,Ye){l("readableAddChunk",P);var j=A._readableState;if(P===null)j.reading=!1,Q(A,j);else{var E;if(Ye||(E=L(j,P)),E)C(A,E);else if(j.objectMode||P&&P.length>0)if(typeof P!="string"&&!j.objectMode&&Object.getPrototypeOf(P)!==n.prototype&&(P=i(P)),ue)j.endEmitted?C(A,new m):re(A,j,P,!0);else if(j.ended)C(A,new y);else{if(j.destroyed)return!1;j.reading=!1,j.decoder&&!G?(P=j.decoder.write(P),j.objectMode||P.length!==0?re(A,j,P,!1):K(A,j)):re(A,j,P,!1)}else ue||(j.reading=!1,K(A,j))}return!j.ended&&(j.length<j.highWaterMark||j.length===0)}function re(A,P,G,ue){P.flowing&&P.length===0&&!P.sync?(P.awaitDrain=0,A.emit("data",G)):(P.length+=P.objectMode?1:G.length,ue?P.buffer.unshift(G):P.buffer.push(G),P.needReadable&&se(A)),K(A,P)}function L(A,P){var G;return!o(P)&&typeof P!="string"&&P!==void 0&&!A.objectMode&&(G=new g("chunk",["string","Buffer","Uint8Array"],P)),G}I.prototype.isPaused=function(){return this._readableState.flowing===!1},I.prototype.setEncoding=function(A){x||(x=S3().StringDecoder);var P=new x(A);this._readableState.decoder=P,this._readableState.encoding=this._readableState.decoder.encoding;for(var G=this._readableState.buffer.head,ue="";G!==null;)ue+=P.write(G.data),G=G.next;return this._readableState.buffer.clear(),ue!==""&&this._readableState.buffer.push(ue),this._readableState.length=ue.length,this};var z=1073741824;function Y(A){return A>=z?A=z:(A--,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A++),A}function pe(A,P){return A<=0||P.length===0&&P.ended?0:P.objectMode?1:A!==A?P.flowing&&P.length?P.buffer.head.data.length:P.length:(A>P.highWaterMark&&(P.highWaterMark=Y(A)),A<=P.length?A:P.ended?P.length:(P.needReadable=!0,0))}I.prototype.read=function(A){l("read",A),A=parseInt(A,10);var P=this._readableState,G=A;if(A!==0&&(P.emittedReadable=!1),A===0&&P.needReadable&&((P.highWaterMark!==0?P.length>=P.highWaterMark:P.length>0)||P.ended))return l("read: emitReadable",P.length,P.ended),P.length===0&&P.ended?ee(this):se(this),null;if(A=pe(A,P),A===0&&P.ended)return P.length===0&&ee(this),null;var ue=P.needReadable;l("need readable",ue),(P.length===0||P.length-A<P.highWaterMark)&&(ue=!0,l("length less than watermark",ue)),P.ended||P.reading?(ue=!1,l("reading or ended",ue)):ue&&(l("do read"),P.reading=!0,P.sync=!0,P.length===0&&(P.needReadable=!0),this._read(P.highWaterMark),P.sync=!1,P.reading||(A=pe(G,P)));var Ye;return A>0?Ye=D(A,P):Ye=null,Ye===null?(P.needReadable=P.length<=P.highWaterMark,A=0):(P.length-=A,P.awaitDrain=0),P.length===0&&(P.ended||(P.needReadable=!0),G!==A&&P.ended&&ee(this)),Ye!==null&&this.emit("data",Ye),Ye};function Q(A,P){if(l("onEofChunk"),!P.ended){if(P.decoder){var G=P.decoder.end();G&&G.length&&(P.buffer.push(G),P.length+=P.objectMode?1:G.length)}P.ended=!0,P.sync?se(A):(P.needReadable=!1,P.emittedReadable||(P.emittedReadable=!0,F(A)))}}function se(A){var P=A._readableState;l("emitReadable",P.needReadable,P.emittedReadable),P.needReadable=!1,P.emittedReadable||(l("emitReadable",P.flowing),P.emittedReadable=!0,process.nextTick(F,A))}function F(A){var P=A._readableState;l("emitReadable_",P.destroyed,P.length,P.ended),!P.destroyed&&(P.length||P.ended)&&(A.emit("readable"),P.emittedReadable=!1),P.needReadable=!P.flowing&&!P.ended&&P.length<=P.highWaterMark,U(A)}function K(A,P){P.readingMore||(P.readingMore=!0,process.nextTick(de,A,P))}function de(A,P){for(;!P.reading&&!P.ended&&(P.length<P.highWaterMark||P.flowing&&P.length===0);){var G=P.length;if(l("maybeReadMore read 0"),A.read(0),G===P.length)break}P.readingMore=!1}I.prototype._read=function(A){C(this,new v("_read()"))},I.prototype.pipe=function(A,P){var G=this,ue=this._readableState;switch(ue.pipesCount){case 0:ue.pipes=A;break;case 1:ue.pipes=[ue.pipes,A];break;default:ue.pipes.push(A);break}ue.pipesCount+=1,l("pipe count=%d opts=%j",ue.pipesCount,P);var Ye=(!P||P.end!==!1)&&A!==process.stdout&&A!==process.stderr,j=Ye?S:Je;ue.endEmitted?process.nextTick(j):G.once("end",j),A.on("unpipe",E);function E(Ue,er){l("onunpipe"),Ue===G&&er&&er.hasUnpiped===!1&&(er.hasUnpiped=!0,q())}function S(){l("onend"),A.end()}var k=le(G);A.on("drain",k);var N=!1;function q(){l("cleanup"),A.removeListener("close",we),A.removeListener("finish",Le),A.removeListener("drain",k),A.removeListener("error",ne),A.removeListener("unpipe",E),G.removeListener("end",S),G.removeListener("end",Je),G.removeListener("data",W),N=!0,ue.awaitDrain&&(!A._writableState||A._writableState.needDrain)&&k()}G.on("data",W);function W(Ue){l("ondata");var er=A.write(Ue);l("dest.write",er),er===!1&&((ue.pipesCount===1&&ue.pipes===A||ue.pipesCount>1&&Se(ue.pipes,A)!==-1)&&!N&&(l("false write response, pause",ue.awaitDrain),ue.awaitDrain++),G.pause())}function ne(Ue){l("onerror",Ue),Je(),A.removeListener("error",ne),e(A,"error")===0&&C(A,Ue)}O(A,"error",ne);function we(){A.removeListener("finish",Le),Je()}A.once("close",we);function Le(){l("onfinish"),A.removeListener("close",we),Je()}A.once("finish",Le);function Je(){l("unpipe"),G.unpipe(A)}return A.emit("pipe",G),ue.flowing||(l("pipe resume"),G.resume()),A};function le(A){return function(){var G=A._readableState;l("pipeOnDrain",G.awaitDrain),G.awaitDrain&&G.awaitDrain--,G.awaitDrain===0&&e(A,"data")&&(G.flowing=!0,U(A))}}I.prototype.unpipe=function(A){var P=this._readableState,G={hasUnpiped:!1};if(P.pipesCount===0)return this;if(P.pipesCount===1)return A&&A!==P.pipes?this:(A||(A=P.pipes),P.pipes=null,P.pipesCount=0,P.flowing=!1,A&&A.emit("unpipe",this,G),this);if(!A){var ue=P.pipes,Ye=P.pipesCount;P.pipes=null,P.pipesCount=0,P.flowing=!1;for(var j=0;j<Ye;j++)ue[j].emit("unpipe",this,{hasUnpiped:!1});return this}var E=Se(P.pipes,A);return E===-1?this:(P.pipes.splice(E,1),P.pipesCount-=1,P.pipesCount===1&&(P.pipes=P.pipes[0]),A.emit("unpipe",this,G),this)},I.prototype.on=function(A,P){var G=r.prototype.on.call(this,A,P),ue=this._readableState;return A==="data"?(ue.readableListening=this.listenerCount("readable")>0,ue.flowing!==!1&&this.resume()):A==="readable"&&!ue.endEmitted&&!ue.readableListening&&(ue.readableListening=ue.needReadable=!0,ue.flowing=!1,ue.emittedReadable=!1,l("on readable",ue.length,ue.reading),ue.length?se(this):ue.reading||process.nextTick(Be,this)),G},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(A,P){var G=r.prototype.removeListener.call(this,A,P);return A==="readable"&&process.nextTick(be,this),G},I.prototype.removeAllListeners=function(A){var P=r.prototype.removeAllListeners.apply(this,arguments);return(A==="readable"||A===void 0)&&process.nextTick(be,this),P};function be(A){var P=A._readableState;P.readableListening=A.listenerCount("readable")>0,P.resumeScheduled&&!P.paused?P.flowing=!0:A.listenerCount("data")>0&&A.resume()}function Be(A){l("readable nexttick read 0"),A.read(0)}I.prototype.resume=function(){var A=this._readableState;return A.flowing||(l("resume"),A.flowing=!A.readableListening,He(this,A)),A.paused=!1,this};function He(A,P){P.resumeScheduled||(P.resumeScheduled=!0,process.nextTick(ht,A,P))}function ht(A,P){l("resume",P.reading),P.reading||A.read(0),P.resumeScheduled=!1,A.emit("resume"),U(A),P.flowing&&!P.reading&&A.read(0)}I.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function U(A){var P=A._readableState;for(l("flow",P.flowing);P.flowing&&A.read()!==null;);}I.prototype.wrap=function(A){var P=this,G=this._readableState,ue=!1;A.on("end",function(){if(l("wrapped end"),G.decoder&&!G.ended){var E=G.decoder.end();E&&E.length&&P.push(E)}P.push(null)}),A.on("data",function(E){if(l("wrapped data"),G.decoder&&(E=G.decoder.write(E)),!(G.objectMode&&E==null)&&!(!G.objectMode&&(!E||!E.length))){var S=P.push(E);S||(ue=!0,A.pause())}});for(var Ye in A)this[Ye]===void 0&&typeof A[Ye]=="function"&&(this[Ye]=function(S){return function(){return A[S].apply(A,arguments)}}(Ye));for(var j=0;j<T.length;j++)A.on(T[j],this.emit.bind(this,T[j]));return this._read=function(E){l("wrapped _read",E),ue&&(ue=!1,A.resume())},this},typeof Symbol=="function"&&(I.prototype[Symbol.asyncIterator]=function(){return b===void 0&&(b=T_e()),b(this)}),Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(I.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(I.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(P){this._readableState&&(this._readableState.flowing=P)}}),I._fromList=D,Object.defineProperty(I.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function D(A,P){if(P.length===0)return null;var G;return P.objectMode?G=P.buffer.shift():!A||A>=P.length?(P.decoder?G=P.buffer.join(""):P.buffer.length===1?G=P.buffer.first():G=P.buffer.concat(P.length),P.buffer.clear()):G=P.buffer.consume(A,P.decoder),G}function ee(A){var P=A._readableState;l("endReadable",P.endEmitted),P.endEmitted||(P.ended=!0,process.nextTick(me,P,A))}function me(A,P){if(l("endReadableNT",A.endEmitted,A.length),!A.endEmitted&&A.length===0&&(A.endEmitted=!0,P.readable=!1,P.emit("end"),A.autoDestroy)){var G=P._writableState;(!G||G.autoDestroy&&G.finished)&&P.destroy()}}typeof Symbol=="function"&&(I.from=function(A,P){return _===void 0&&(_=j_e()),_(I,A,P)});function Se(A,P){for(var G=0,ue=A.length;G<ue;G++)if(A[G]===P)return G;return-1}return m_}var y_,T3;function p7(){if(T3)return y_;T3=1,y_=a;var t=Rh().codes,e=t.ERR_METHOD_NOT_IMPLEMENTED,r=t.ERR_MULTIPLE_CALLBACK,n=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=t.ERR_TRANSFORM_WITH_LENGTH_0,i=Zd();Nh(a,i);function o(d,h){var f=this._transformState;f.transforming=!1;var p=f.writecb;if(p===null)return this.emit("error",new r);f.writechunk=null,f.writecb=null,h!=null&&this.push(h),p(d);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function a(d){if(!(this instanceof a))return new a(d);i.call(this,d),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,d&&(typeof d.transform=="function"&&(this._transform=d.transform),typeof d.flush=="function"&&(this._flush=d.flush)),this.on("prefinish",l)}function l(){var d=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(h,f){c(d,h,f)}):c(this,null,null)}a.prototype.push=function(d,h){return this._transformState.needTransform=!1,i.prototype.push.call(this,d,h)},a.prototype._transform=function(d,h,f){f(new e("_transform()"))},a.prototype._write=function(d,h,f){var p=this._transformState;if(p.writecb=f,p.writechunk=d,p.writeencoding=h,!p.transforming){var g=this._readableState;(p.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},a.prototype._read=function(d){var h=this._transformState;h.writechunk!==null&&!h.transforming?(h.transforming=!0,this._transform(h.writechunk,h.writeencoding,h.afterTransform)):h.needTransform=!0},a.prototype._destroy=function(d,h){i.prototype._destroy.call(this,d,function(f){h(f)})};function c(d,h,f){if(h)return d.emit("error",h);if(f!=null&&d.push(f),d._writableState.length)throw new s;if(d._transformState.transforming)throw new n;return d.push(null)}return y_}var v_,j3;function A_e(){if(j3)return v_;j3=1,v_=e;var t=p7();Nh(e,t);function e(r){if(!(this instanceof e))return new e(r);t.call(this,r)}return e.prototype._transform=function(r,n,s){s(null,r)},v_}var x_,A3;function P_e(){if(A3)return x_;A3=1;var t;function e(f){var p=!1;return function(){p||(p=!0,f.apply(void 0,arguments))}}var r=Rh().codes,n=r.ERR_MISSING_ARGS,s=r.ERR_STREAM_DESTROYED;function i(f){if(f)throw f}function o(f){return f.setHeader&&typeof f.abort=="function"}function a(f,p,g,y){y=e(y);var v=!1;f.on("close",function(){v=!0}),t===void 0&&(t=_A()),t(f,{readable:p,writable:g},function(x){if(x)return y(x);v=!0,y()});var m=!1;return function(x){if(!v&&!m){if(m=!0,o(f))return f.abort();if(typeof f.destroy=="function")return f.destroy();y(x||new s("pipe"))}}}function l(f){f()}function c(f,p){return f.pipe(p)}function d(f){return!f.length||typeof f[f.length-1]!="function"?i:f.pop()}function h(){for(var f=arguments.length,p=new Array(f),g=0;g<f;g++)p[g]=arguments[g];var y=d(p);if(Array.isArray(p[0])&&(p=p[0]),p.length<2)throw new n("streams");var v,m=p.map(function(x,b){var _=b<p.length-1,C=b>0;return a(x,_,C,function(T){v||(v=T),T&&m.forEach(l),!_&&(m.forEach(l),y(v))})});return p.reduce(c)}return x_=h,x_}var N_e=li,CA=kd.EventEmitter,R_e=Nh;R_e(li,CA);li.Readable=f7();li.Writable=h7();li.Duplex=Zd();li.Transform=p7();li.PassThrough=A_e();li.finished=_A();li.pipeline=P_e();li.Stream=li;function li(){CA.call(this)}li.prototype.pipe=function(t,e){var r=this;function n(d){t.writable&&t.write(d)===!1&&r.pause&&r.pause()}r.on("data",n);function s(){r.readable&&r.resume&&r.resume()}t.on("drain",s),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));var i=!1;function o(){i||(i=!0,t.end())}function a(){i||(i=!0,typeof t.destroy=="function"&&t.destroy())}function l(d){if(c(),CA.listenerCount(this,"error")===0)throw d}r.on("error",l),t.on("error",l);function c(){r.removeListener("data",n),t.removeListener("drain",s),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};async function*w_(t,e,r){let n=1;const s={chunks:[],length:0};for await(const i of r(t))for(s.chunks.push(i),s.length+=i.byteLength;s.length>e;){const o=s.chunks.length>1?Is.Buffer.concat(s.chunks):s.chunks[0];yield{partNumber:n,data:o.subarray(0,e)},s.chunks=[o.subarray(e)],s.length=s.chunks[0].byteLength,n+=1}yield{partNumber:n,data:s.chunks.length!==1?Is.Buffer.concat(s.chunks):s.chunks[0],lastPart:!0}}async function*P3(t,e){let r=1,n=0,s=e;for(;s<t.byteLength;)yield{partNumber:r,data:t.subarray(n,s)},r+=1,n=s,s=n+e;yield{partNumber:r,data:t.subarray(n),lastPart:!0}}async function*O_e(t){for await(const e of t)Is.Buffer.isBuffer(e)||e instanceof Uint8Array?yield e:yield Is.Buffer.from(e)}async function*N3(t){const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)return;Is.Buffer.isBuffer(n)||n instanceof Uint8Array?yield n:yield Is.Buffer.from(n)}}catch(r){throw r}finally{e.releaseLock()}}const M_e=(t,e)=>{if(t instanceof Uint8Array)return P3(t,e);if(t instanceof N_e.Readable)return w_(t,e,O_e);if(t instanceof String||typeof t=="string")return P3(Is.Buffer.from(t),e);if(typeof t.stream=="function")return w_(t.stream(),e,N3);if(t instanceof ReadableStream)return w_(t,e,N3);throw new Error("Body Data is unsupported format, expected data to be one of: string | Uint8Array | Buffer | Readable | ReadableStream | Blob;.")},od=class od extends kd.EventEmitter{constructor(r){super();Te(this,"MAX_PARTS",1e4);Te(this,"queueSize",4);Te(this,"partSize",od.MIN_PART_SIZE);Te(this,"leavePartsOnError",!1);Te(this,"tags",[]);Te(this,"client");Te(this,"params");Te(this,"totalBytes");Te(this,"bytesUploadedSoFar");Te(this,"abortController");Te(this,"concurrentUploaders",[]);Te(this,"createMultiPartPromise");Te(this,"abortMultipartUploadCommand",null);Te(this,"uploadedParts",[]);Te(this,"uploadEnqueuedPartsCount",0);Te(this,"uploadId");Te(this,"uploadEvent");Te(this,"isMultiPart",!0);Te(this,"singleUploadResult");Te(this,"sent",!1);this.queueSize=r.queueSize||this.queueSize,this.partSize=r.partSize||this.partSize,this.leavePartsOnError=r.leavePartsOnError||this.leavePartsOnError,this.tags=r.tags||this.tags,this.client=r.client,this.params=r.params,this.__validateInput(),this.totalBytes=n_(this.params.Body),this.bytesUploadedSoFar=0,this.abortController=r.abortController??new i_e}async abort(){this.abortController.abort()}async done(){if(this.sent)throw new Error("@aws-sdk/lib-storage: this instance of Upload has already executed .done(). Create a new instance.");return this.sent=!0,await Promise.race([this.__doMultipartUpload(),this.__abortTimeout(this.abortController.signal)])}on(r,n){return this.uploadEvent=r,super.on(r,n)}async __uploadUsingPut(r){var y;this.isMultiPart=!1;const n={...this.params,Body:r.data},s=this.client.config,i=s.requestHandler,o=i instanceof kd.EventEmitter?i:null,a=v=>{this.bytesUploadedSoFar=v.loaded,this.totalBytes=v.total,this.__notifyProgress({loaded:this.bytesUploadedSoFar,total:this.totalBytes,part:r.partNumber,Key:this.params.Key,Bucket:this.params.Bucket})};o!==null&&o.on("xhr.upload.progress",a);const l=await Promise.all([this.client.send(new c3(n)),(y=s==null?void 0:s.endpoint)==null?void 0:y.call(s)]),c=l[0];let d=l[1];if(d||(d=Wj(await Dz(n,c3,{...s}))),!d)throw new Error('Could not resolve endpoint from S3 "client.config.endpoint()" nor EndpointsV2.');o!==null&&o.off("xhr.upload.progress",a);const h=this.params.Key.split("/").map(v=>Ev(v)).join("/"),f=Ev(this.params.Bucket),p=(()=>{const v=d.hostname.startsWith(`${f}.`),m=this.client.config.forcePathStyle,x=d.port?`:${d.port}`:"";return m?`${d.protocol}//${d.hostname}${x}/${f}/${h}`:v?`${d.protocol}//${d.hostname}${x}/${h}`:`${d.protocol}//${f}.${d.hostname}${x}/${h}`})();this.singleUploadResult={...c,Bucket:this.params.Bucket,Key:this.params.Key,Location:p};const g=n_(r.data);this.__notifyProgress({loaded:g,total:g,part:1,Key:this.params.Key,Bucket:this.params.Bucket})}async __createMultipartUpload(){const r=await this.client.config.requestChecksumCalculation();if(!this.createMultiPartPromise){const n={...this.params,Body:void 0};r==="WHEN_SUPPORTED"&&(n.ChecksumAlgorithm=this.params.ChecksumAlgorithm||rbe.CRC32),this.createMultiPartPromise=this.client.send(new t_e(n)).then(s=>(this.abortMultipartUploadCommand=new XSe({Bucket:this.params.Bucket,Key:this.params.Key,UploadId:s.UploadId}),s))}return this.createMultiPartPromise}async __doConcurrentUpload(r){for await(const n of r){if(this.uploadEnqueuedPartsCount>this.MAX_PARTS)throw new Error(`Exceeded ${this.MAX_PARTS} parts in multipart upload to Bucket: ${this.params.Bucket} Key: ${this.params.Key}.`);if(this.abortController.signal.aborted)return;if(n.partNumber===1&&n.lastPart)return await this.__uploadUsingPut(n);if(!this.uploadId){const{UploadId:d}=await this.__createMultipartUpload();if(this.uploadId=d,this.abortController.signal.aborted)return}const s=n_(n.data)||0,i=this.client.config.requestHandler,o=i instanceof kd.EventEmitter?i:null;let a=0;const l=(d,h)=>{(Number(h.query.partNumber)||-1)===n.partNumber&&(d.total&&s&&(this.bytesUploadedSoFar+=d.loaded-a,a=d.loaded),this.__notifyProgress({loaded:this.bytesUploadedSoFar,total:this.totalBytes,part:n.partNumber,Key:this.params.Key,Bucket:this.params.Bucket}))};o!==null&&o.on("xhr.upload.progress",l),this.uploadEnqueuedPartsCount+=1;const c=await this.client.send(new n_e({...this.params,ContentLength:void 0,UploadId:this.uploadId,Body:n.data,PartNumber:n.partNumber}));if(o!==null&&o.off("xhr.upload.progress",l),this.abortController.signal.aborted)return;if(!c.ETag)throw new Error(`Part ${n.partNumber} is missing ETag in UploadPart response. Missing Bucket CORS configuration for ETag header?`);this.uploadedParts.push({PartNumber:n.partNumber,ETag:c.ETag,...c.ChecksumCRC32&&{ChecksumCRC32:c.ChecksumCRC32},...c.ChecksumCRC32C&&{ChecksumCRC32C:c.ChecksumCRC32C},...c.ChecksumSHA1&&{ChecksumSHA1:c.ChecksumSHA1},...c.ChecksumSHA256&&{ChecksumSHA256:c.ChecksumSHA256}}),o===null&&(this.bytesUploadedSoFar+=s),this.__notifyProgress({loaded:this.bytesUploadedSoFar,total:this.totalBytes,part:n.partNumber,Key:this.params.Key,Bucket:this.params.Bucket})}}async __doMultipartUpload(){const r=M_e(this.params.Body,this.partSize),n=[];for(let i=0;i<this.queueSize;i++){const o=this.__doConcurrentUpload(r).catch(a=>{n.push(a)});this.concurrentUploaders.push(o)}if(await Promise.all(this.concurrentUploaders),n.length>=1)throw await this.markUploadAsAborted(),n[0];if(this.abortController.signal.aborted)throw await this.markUploadAsAborted(),Object.assign(new Error("Upload aborted."),{name:"AbortError"});let s;if(this.isMultiPart){this.uploadedParts.sort((o,a)=>o.PartNumber-a.PartNumber);const i={...this.params,Body:void 0,UploadId:this.uploadId,MultipartUpload:{Parts:this.uploadedParts}};s=await this.client.send(new e_e(i)),typeof(s==null?void 0:s.Location)=="string"&&s.Location.includes("%2F")&&(s.Location=s.Location.replace(/%2F/g,"/"))}else s=this.singleUploadResult;return this.abortMultipartUploadCommand=null,this.tags.length&&await this.client.send(new r_e({...this.params,Tagging:{TagSet:this.tags}})),s}async markUploadAsAborted(){this.uploadId&&!this.leavePartsOnError&&this.abortMultipartUploadCommand!==null&&(await this.client.send(this.abortMultipartUploadCommand),this.abortMultipartUploadCommand=null)}__notifyProgress(r){this.uploadEvent&&this.emit(this.uploadEvent,r)}async __abortTimeout(r){return new Promise((n,s)=>{r.onabort=()=>{const i=new Error("Upload aborted.");i.name="AbortError",s(i)}})}__validateInput(){if(!this.params)throw new Error("InputError: Upload requires params to be passed to upload.");if(!this.client)throw new Error("InputError: Upload requires a AWS client to do uploads with.");if(this.partSize<od.MIN_PART_SIZE)throw new Error(`EntityTooSmall: Your proposed upload partsize [${this.partSize}] is smaller than the minimum allowed size [${od.MIN_PART_SIZE}] (5MB)`);if(this.queueSize<1)throw new Error("Queue size: Must have at least one uploading queue.")}};Te(od,"MIN_PART_SIZE",1024*1024*5);let uk=od;const I_e={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_ENV:"development",VITE_AWS_ACCESS_KEY_ID:"AKIA3XYT4DR7Y5EQTTZP",VITE_AWS_REGION:"us-east-2",VITE_AWS_SECRET_ACCESS_KEY:"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",VITE_S3_BUCKET_NAME:"testvizualizer",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFpaW5kZXlpYXliZ2x3eGhvbGd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA2NzEwMTgsImV4cCI6MjA2NjI0NzAxOH0.KqsJX0jVKATlAVMR0KIhMM8ogCqv0d2tuZdfAymlcEs",VITE_SUPABASE_URL:"https://qiindeyiaybglwxholgx.supabase.co"},Nu=(t,e)=>I_e[t]||e,dr={region:Nu("VITE_AWS_REGION","us-east-1"),bucket:Nu("VITE_S3_BUCKET_NAME","your-bucket-name"),accessKeyId:Nu("VITE_AWS_ACCESS_KEY_ID"),secretAccessKey:Nu("VITE_AWS_SECRET_ACCESS_KEY"),cloudFrontUrl:Nu("VITE_CLOUDFRONT_URL"),apiBaseUrl:Nu("VITE_API_BASE_URL","http://localhost:3001/api")},dk=()=>{const t=[];return dr.accessKeyId||t.push("VITE_AWS_ACCESS_KEY_ID is not set"),dr.secretAccessKey||t.push("VITE_AWS_SECRET_ACCESS_KEY is not set"),dr.bucket==="your-bucket-name"&&t.push("VITE_S3_BUCKET_NAME is not properly configured"),{isValid:t.length===0,errors:t}},D_e=()=>{console.group(" S3 Configuration Debug"),console.log("Region:",dr.region),console.log("Bucket:",dr.bucket),console.log("Has Access Key:",!!dr.accessKeyId),console.log("Has Secret Key:",!!dr.secretAccessKey),console.log("CloudFront URL:",dr.cloudFrontUrl||"Not set"),console.log("API Base URL:",dr.apiBaseUrl);const t=dk();console.log("Is Valid:",t.isValid),t.isValid||console.error("Configuration Errors:",t.errors),console.groupEnd()},F_e=t=>dr.cloudFrontUrl?`${dr.cloudFrontUrl}/${t}`:`https://${dr.bucket}.s3.${dr.region}.amazonaws.com/${t}`,SP=class SP{static getS3Client(){if(!this.s3Client){const e=dk();if(!e.isValid)throw D_e(),new Error(`AWS credentials not configured: ${e.errors.join(", ")}`);this.s3Client=new YSe({region:dr.region,credentials:{accessKeyId:dr.accessKeyId,secretAccessKey:dr.secretAccessKey}})}return this.s3Client}static async uploadFile(e,r,n){try{const s=this.validateFile(e);if(!s.valid)throw new Error(s.error);const i=this.generateUniqueKey(e.name,r),o=this.getS3Client(),a=new uk({client:o,params:{Bucket:dr.bucket,Key:i,Body:e,ContentType:e.type,ACL:"public-read",Metadata:{"original-name":e.name,"upload-timestamp":new Date().toISOString()}}});return n&&a.on("httpUploadProgress",c=>{if(c.loaded&&c.total){const d={loaded:c.loaded,total:c.total,percentage:Math.round(c.loaded/c.total*100)};n(d)}}),await a.done(),{success:!0,fileUrl:F_e(i),key:i}}catch(s){console.error("Direct S3 upload error:",s);let i="Upload failed";return s instanceof Error&&(s.message.includes("credentials")?i="AWS credentials not configured properly":s.message.includes("Access Denied")?i="Access denied - check S3 bucket permissions":s.message.includes("NoSuchBucket")?i="S3 bucket not found - check bucket name":i=s.message),{success:!1,error:i}}}static validateFile(e,r=10*1024*1024,n=["image/jpeg","image/png","image/gif","image/webp"]){return e?e.size>r?{valid:!1,error:`File size exceeds ${Math.round(r/(1024*1024))}MB limit`}:n.includes(e.type)?{valid:!0}:{valid:!1,error:`File type ${e.type} is not allowed. Allowed types: ${n.join(", ")}`}:{valid:!1,error:"No file selected"}}static generateUniqueKey(e,r){const n=Date.now(),s=Math.random().toString(36).substring(2,8),i=e.split(".").pop()||"",o=e.replace(/\.[^/.]+$/,"");if(r)return`uploads/images/${r}/${o}_${n}_${s}.${i}`;const a=new Date,l=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0");return`uploads/images/${l}/${c}/${d}/${o}_${n}_${s}.${i}`}static generateUniqueFilename(e,r){return this.generateUniqueKey(e,r)}static isConfigured(){return dk().isValid}static getConfig(){return{region:dr.region,bucket:dr.bucket,hasCredentials:!!(dr.accessKeyId&&dr.secretAccessKey)}}};SP.s3Client=null;let dp=SP;const L_e=({onUploadSuccess:t,onUploadError:e,maxSize:r=10*1024*1024,allowedTypes:n=["image/jpeg","image/png","image/gif","image/webp"],className:s="",accept:i="image/*",createdProjectId:o,jobImageUpload:a})=>{const[l,c]=w.useState(null),[d,h]=w.useState(!1),[f,p]=w.useState(null),[g,y]=w.useState(null),[v,m]=w.useState(!1),x=w.useRef(null),b=Ze(GQ);w.useEffect(()=>{o&&o!==null&&H()},[o]);const _=w.useCallback(z=>{const Y=dp.validateFile(z,r,n);if(!Y.valid){y({success:!1,error:Y.error}),e==null||e(Y.error||"Invalid file");return}const pe=z;pe.preview=URL.createObjectURL(z),c(pe),y(null),p(null)},[r,n,e]),C=z=>{var pe;const Y=(pe=z.target.files)==null?void 0:pe[0];Y&&(_(Y),a(Y))},T=w.useCallback(z=>{z.preventDefault(),z.stopPropagation()},[]),O=w.useCallback(z=>{z.preventDefault(),z.stopPropagation(),m(!0)},[]),R=w.useCallback(z=>{z.preventDefault(),z.stopPropagation(),m(!1)},[]),I=w.useCallback(z=>{z.preventDefault(),z.stopPropagation(),m(!1);const Y=z.dataTransfer.files;Y&&Y[0]&&_(Y[0])},[_]),H=async()=>{if(!(!l||!b)){if(!dp.isConfigured()){const z="AWS credentials not configured. Please set your environment variables.";y({success:!1,error:z}),e==null||e(z);return}h(!0),p(null),y(null);try{const z=await dp.uploadFile(l,b.id,Y=>p(Y));console.log("Upload result:",z.fileUrl),y(z),z.success&&z.fileUrl&&z.key?t==null||t(z.fileUrl,z.key):e==null||e(z.error||"Upload failed")}catch(z){const Y=z instanceof Error?z.message:"Upload failed";y({success:!1,error:Y}),e==null||e(Y)}finally{h(!1)}}},re=()=>{l!=null&&l.preview&&URL.revokeObjectURL(l.preview),c(null),y(null),p(null),x.current&&(x.current.value="")},L=()=>{var z;(z=x.current)==null||z.click()};return u.jsxs("div",{className:`w-full max-w-md mx-auto ${s}`,children:[u.jsx("input",{ref:x,type:"file",accept:i,onChange:C,className:"hidden"}),u.jsx("div",{className:`
          relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors
          ${v?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}
          ${l?"border-green-500 bg-green-50":""}
        `,onClick:L,onDragEnter:O,onDragLeave:R,onDragOver:T,onDrop:I,children:l?u.jsxs("div",{className:"space-y-4",children:[l.preview&&u.jsxs("div",{className:"relative inline-block",children:[u.jsx("img",{src:l.preview,alt:"Preview",className:"max-w-full max-h-48 rounded-lg object-contain"}),u.jsx(ge,{variant:"outline",size:"sm",className:"absolute -top-2 -right-2 rounded-full w-8 h-8 p-0",onClick:z=>{z.stopPropagation(),re()},children:u.jsx(W2,{className:"h-4 w-4"})})]}),u.jsxs("div",{className:"text-sm text-gray-600",children:[u.jsx("p",{className:"font-medium",children:l.name}),u.jsxs("p",{children:[(l.size/(1024*1024)).toFixed(2)," MB"]})]})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsx(yd,{className:"mx-auto h-12 w-12 text-gray-400"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-lg font-medium text-gray-700",children:"Drop your image here, or click to select"}),u.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Supports: ",n.join(", ")]}),u.jsxs("p",{className:"text-sm text-gray-500",children:["Max size: ",Math.round(r/(1024*1024)),"MB"]})]})]})}),f&&u.jsxs("div",{className:"mt-4 space-y-2",children:[u.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[u.jsx("span",{children:"Uploading..."}),u.jsxs("span",{children:[f.percentage,"%"]})]}),u.jsx(hw,{value:f.percentage,className:"w-full"})]}),g&&u.jsxs(ml,{className:`mt-4 ${g.success?"border-green-500":"border-red-500"}`,children:[g.success?u.jsx(DU,{className:"h-4 w-4 text-green-600"}):u.jsx(B2,{className:"h-4 w-4 text-red-600"}),u.jsx(yl,{className:g.success?"text-green-700":"text-red-700",children:g.success?"Upload successful!":g.error})]}),u.jsxs("div",{className:"mt-4 flex gap-2",children:[l&&!(g!=null&&g.success)&&u.jsx(ge,{disabled:d,className:"flex-1",children:d?u.jsxs(u.Fragment,{children:[u.jsx(Wd,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):u.jsx(u.Fragment,{children:u.jsx(Wd,{className:"h-4 w-4 mr-2"})})}),(l||g)&&u.jsx(ge,{variant:"outline",onClick:re,disabled:d,children:"Clear"})]})]})},B_e=D2({name:Zs().min(1,"Project name is required").min(3,"Project name must be at least 3 characters").max(50,"Project name must be less than 50 characters"),description:Zs().max(200,"Description must be less than 200 characters").optional(),visibility:Uy(["public","private"]).default("private"),status:Uy(["active","pending","completed"]).default("active"),thumbnail:Zs().optional(),user_id:Zs().min(1,"User ID is required"),jobType:Uy(["living Room","kitchen","bathroom","bedRoom","counter Top"]).default("living Room"),imageFile:yle().optional()}),b_=["https://images.pexels.com/photos/1779487/pexels-photo-1779487.jpeg?auto=compress&cs=tinysrgb&w=400&h=250&dpr=2","https://images.pexels.com/photos/230544/pexels-photo-230544.jpeg?auto=compress&cs=tinysrgb&w=400&h=250&dpr=2","https://images.pexels.com/photos/196644/pexels-photo-196644.jpeg?auto=compress&cs=tinysrgb&w=400&h=250&dpr=2"],$_e=[{value:"living Room",label:"Living Room"},{value:"kitchen",label:"Kitchen"},{value:"bathroom",label:"Bathroom"},{value:"bedRoom",label:"Bedroom"},{value:"counter Top",label:"Counter Top"}];function U_e({open:t,user_id:e,onOpenChange:r,onJobCreated:n}){const s=Ar(),{isCreating:i}=Ze(v=>v.jobs),[o,a]=w.useState(null),[l,c]=w.useState(null),[d,h]=w.useState(null),f=O2({resolver:M2(B_e),defaultValues:{name:"",description:"",visibility:"private",status:"active",thumbnail:b_[0],user_id:e||"",jobType:"living Room",imageFile:null}}),p=async v=>{if(!v.name||v.name.trim()===""){Ve.error("Project name is required");return}const m={name:v.name,description:v.description??"",status:"active",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),user_id:e,thumbnail:v.thumbnail||b_[0]},x=await s(pd(m));if(pd.pending.match(x)){Ve.loading("Creating project...");return}pd.fulfilled.match(x)&&(h(x.payload.id||null),Ve.success("Project created successfully!"),a(null),c(null))},g=v=>v.type.startsWith("image/")?v.size>10*1024*1024?(Ve.error("File size must be less than 10MB"),!1):!0:(Ve.error("Please upload a valid image file"),!1),y=async(v,m)=>{if(console.log("Job created with URL:",v,"and key:",m),!v||!m||!d){Ve.error("Job creation failed. Please try again.");return}try{const x={project_id:d,jobType:f.getValues("jobType"),full_image:v,thumbnail:v,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},b=await s(rl(x));if(rl.pending.match(b)){Ve.loading("Creating job...");return}rl.fulfilled.match(b)&&(Ve.success("Job created successfully!"),f.reset(),h(null),c(null),a(null),n==null||n())}catch(x){console.error("Error creating job:",x),Ve.error("Job creation failed. Please try again.")}};return u.jsxs(Qpe,{open:t,onOpenChange:r,children:[u.jsx(ege,{asChild:!0,children:u.jsxs(ge,{className:"shadow-lg",children:[u.jsx(Jp,{className:"mr-2 h-4 w-4"}),"New Project"]})}),u.jsxs(FV,{className:"sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[u.jsxs(LV,{children:[u.jsx(BV,{children:"Create New Project"}),u.jsx($V,{children:"Start a new project and bring your ideas to life."})]}),u.jsx(L2,{...f,children:u.jsxs("form",{onSubmit:f.handleSubmit(p),className:"space-y-4",children:[u.jsx(vs,{control:f.control,name:"name",render:({field:v})=>u.jsxs(Xn,{children:[u.jsx(Jn,{children:"Project Name *"}),u.jsx(Zn,{children:u.jsx(Ai,{...v,placeholder:"Enter project name",disabled:i})}),u.jsx(xs,{})]})}),u.jsx(vs,{control:f.control,name:"description",render:({field:v})=>u.jsxs(Xn,{children:[u.jsx(Jn,{children:"Description"}),u.jsx(Zn,{children:u.jsx(UV,{...v,placeholder:"Describe your project (optional)",rows:3,disabled:i})}),u.jsx(xs,{})]})}),u.jsx(vs,{control:f.control,name:"thumbnail",render:({field:v})=>u.jsxs(Xn,{children:[u.jsx(Jn,{children:"Thumbnail"}),u.jsxs(bc,{onValueChange:v.onChange,defaultValue:v.value,disabled:i,children:[u.jsx(Zn,{children:u.jsx(nl,{children:u.jsx(Sc,{placeholder:"Select thumbnail"})})}),u.jsx(sl,{children:b_.map(m=>u.jsx(ki,{value:m,children:u.jsx("img",{src:m,alt:"Thumbnail",className:"w-12 h-8 object-cover rounded"})},m))})]}),u.jsx(xs,{})]})}),u.jsx(vs,{control:f.control,name:"jobType",render:({field:v})=>u.jsxs(Xn,{children:[u.jsx(Jn,{children:"Job Type"}),u.jsxs(bc,{onValueChange:v.onChange,defaultValue:v.value,disabled:i,children:[u.jsx(Zn,{children:u.jsx(nl,{children:u.jsx(Sc,{placeholder:"Select job type"})})}),u.jsx(sl,{children:$_e.map(m=>u.jsx(ki,{value:m.value,children:m.label},m.value))})]}),u.jsx(xs,{})]})}),u.jsx(L_e,{createdProjectId:d||null,jobImageUpload:g,onUploadSuccess:y}),u.jsx(vs,{control:f.control,name:"visibility",render:({field:v})=>u.jsxs(Xn,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[u.jsxs("div",{className:"space-y-0.5",children:[u.jsx(Jn,{className:"text-base",children:v.value==="public"?"Public Project":"Private Project"}),u.jsx("div",{className:"text-sm text-muted-foreground",children:v.value==="public"?"Anyone can view this project":"Only you can view this project"})]}),u.jsx(Zn,{children:u.jsx(jj,{checked:v.value==="public",onCheckedChange:m=>v.onChange(m?"public":"private"),disabled:i})})]})}),u.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[u.jsx(ge,{type:"button",variant:"outline",onClick:()=>r(!1),disabled:i,children:"Cancel"}),u.jsx(ge,{type:"submit",disabled:i,children:i?u.jsxs(u.Fragment,{children:[u.jsx(Hd,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Project"})]})]})})]})]})}const V_e=({selectedProjectId:t})=>{const e=Ar();ie.useEffect(()=>{t?r():console.warn("No project selected to fetch jobs for.")},[t,e]);const r=async()=>{try{const n=await e(vc(t));vc.fulfilled.match(n)&&console.log("Fetched jobs:",n.payload)}catch(n){console.error("Error fetching jobs:",n)}};return null},z_e=({selectedProjectId:t})=>{const e=Ze(rte),[r,n]=ie.useState(!1);return console.log(e),console.log("selectedProjectId:",t),w.useEffect(()=>{t&&e&&e.length===0&&(console.log("Fetching jobs for project:",t),n(!0))},[e,t]),u.jsx(u.Fragment,{children:r&&t&&u.jsx(V_e,{selectedProjectId:t})})};function H_e(){const t=Ar(),e=ci(),{list:r,isLoading:n,error:s}=Ze(m=>m.projects),{user:i}=Ze(m=>m.auth),[o,a]=w.useState(!1);w.useEffect(()=>{i!=null&&i.id&&t(Ty(i.id))},[t,i==null?void 0:i.id]),w.useEffect(()=>{s&&(Ve.error(s),t(wee()))},[s,t]);const[l,c]=w.useState(void 0),d=m=>{m&&(c(m),e(`/app/studio/${m}`))},h=m=>{},f=m=>{const x=`${window.location.origin}/studio/${m.id}`;navigator.clipboard.writeText(x),Ve.success("Project link copied to clipboard!")},p=m=>{switch(m){case"active":return"bg-green-500/10 text-green-500 border-green-500/20";case"completed":return"bg-blue-500/10 text-blue-500 border-blue-500/20";case"paused":return"bg-yellow-500/10 text-yellow-500 border-yellow-500/20";default:return"bg-gray-500/10 text-gray-500 border-gray-500/20"}},g=m=>new Date(m).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});if(n)return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx(kt,{className:"h-8 w-48 mb-2"}),u.jsx(kt,{className:"h-4 w-72"})]}),u.jsx(kt,{className:"h-10 w-32"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((m,x)=>u.jsxs(Ge,{children:[u.jsxs(vt,{children:[u.jsx(kt,{className:"h-6 w-3/4"}),u.jsx(kt,{className:"h-8 w-16"})]}),u.jsx(tt,{children:u.jsx(kt,{className:"h-4 w-full"})})]},x))}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((m,x)=>u.jsxs(Ge,{children:[u.jsxs(vt,{children:[u.jsx(kt,{className:"h-32 w-full rounded-md mb-3"}),u.jsx(kt,{className:"h-6 w-3/4"}),u.jsx(kt,{className:"h-4 w-full"})]}),u.jsxs(tt,{children:[u.jsx(kt,{className:"h-4 w-20 mb-2"}),u.jsx(kt,{className:"h-2 w-full"})]})]},x))})]});const y={total:r.length,active:r.filter(m=>m.status==="active").length,completed:r.filter(m=>m.status==="completed").length,avgProgress:r.length>0?Math.round(r.reduce((m,x)=>m+((x==null?void 0:x.progress)||0),0)/r.length):0},v=()=>{a(!1)};return u.jsxs(u.Fragment,{children:[u.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Projects"}),u.jsx("p",{className:"text-muted-foreground",children:"Manage your projects and track progress"})]}),u.jsxs(ge,{onClick:()=>a(!0),className:"flex items-center space-x-2",children:[u.jsx(Jp,{className:"h-4 w-4"}),u.jsx("span",{children:"Create Project"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:u.jsxs(Ge,{children:[u.jsxs(vt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(St,{className:"text-sm font-medium",children:"Total Projects"}),u.jsx(rp,{className:"h-4 w-4 text-muted-foreground"})]}),u.jsxs(tt,{children:[u.jsx("div",{className:"text-2xl font-bold",children:y.total}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"+2 from last month"})]})]})}),u.jsx(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:u.jsxs(Ge,{children:[u.jsxs(vt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(St,{className:"text-sm font-medium",children:"Active"}),u.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full"})]}),u.jsxs(tt,{children:[u.jsx("div",{className:"text-2xl font-bold",children:y.active}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently in progress"})]})]})}),u.jsx(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:u.jsxs(Ge,{children:[u.jsxs(vt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(St,{className:"text-sm font-medium",children:"Completed"}),u.jsx("div",{className:"h-2 w-2 bg-blue-500 rounded-full"})]}),u.jsxs(tt,{children:[u.jsx("div",{className:"text-2xl font-bold",children:y.completed}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Successfully finished"})]})]})}),u.jsx(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:u.jsxs(Ge,{children:[u.jsxs(vt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[u.jsx(St,{className:"text-sm font-medium",children:"Avg. Progress"}),u.jsx(mce,{className:"h-4 w-4 text-muted-foreground"})]}),u.jsxs(tt,{children:[u.jsxs("div",{className:"text-2xl font-bold",children:[y.avgProgress,"%"]}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all projects"})]})]})})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.jsx(hl,{children:r.map((m,x)=>{var b;return u.jsx(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5,delay:x*.1},layout:!0,children:u.jsxs(Ge,{className:"group hover:shadow-lg transition-all duration-300 cursor-pointer overflow-hidden",children:[u.jsxs("div",{className:"relative",onClick:()=>d(m.id),children:[m.jobData&&m.jobData.length>0?u.jsxs("div",{className:"relative overflow-hidden",children:[u.jsx("img",{src:((b=m.jobData[0])==null?void 0:b.thumbnail)||"/placeholder-image.png",alt:m.name,className:"w-full h-32 object-cover transition-transform duration-300 group-hover:scale-105"}),u.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}):u.jsx("div",{className:"w-full h-32 bg-gradient-to-br from-primary/10 to-primary/5 flex items-center justify-center",children:u.jsx(rp,{className:"h-8 w-8 text-primary/50"})}),u.jsx("div",{className:"absolute top-2 right-2 flex items-center space-x-1",children:u.jsxs(dt,{variant:"secondary",className:xe("text-xs",m.visibility==="public"?"bg-green-500/10 text-green-500 border-green-500/20":"bg-gray-500/10 text-gray-500 border-gray-500/20"),children:[m.visibility==="public"?u.jsx(zU,{className:"h-3 w-3 mr-1"}):u.jsx(Bc,{className:"h-3 w-3 mr-1"}),m.visibility]})}),u.jsx("div",{className:"absolute top-2 left-2"})]}),u.jsxs(vt,{className:"pb-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(St,{className:"text-lg truncate",children:m.name}),u.jsx(dt,{className:p((m==null?void 0:m.status)||"active"),children:m==null?void 0:m.status})]}),u.jsx(Xc,{className:"line-clamp-2",children:m.description||"No description provided"})]}),u.jsxs(tt,{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[u.jsx(MU,{className:"mr-2 h-4 w-4"}),"Updated ",g(m.updated_at||"")]}),u.jsx("div",{className:"flex items-center text-sm text-muted-foreground",children:u.jsx(Qx,{className:"mr-2 h-4 w-4"})}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{children:"Progress"}),u.jsxs("span",{children:[m.progress,"%"]})]}),u.jsx(hw,{value:m.progress,className:"h-2"})]}),u.jsxs("div",{className:"flex items-center justify-between pt-2",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(ge,{variant:"ghost",size:"sm",onClick:_=>{_.stopPropagation()},children:u.jsx(Qp,{className:"h-4 w-4"})}),u.jsx(ge,{variant:"ghost",size:"sm",onClick:_=>{_.stopPropagation(),d(m.id)},children:u.jsx(z2,{className:"h-4 w-4"})})]}),u.jsxs(bj,{children:[u.jsx(Sj,{asChild:!0,children:u.jsx(ge,{variant:"ghost",size:"sm",onClick:_=>_.stopPropagation(),children:u.jsx(VU,{className:"h-4 w-4"})})}),u.jsxs(yw,{align:"end",children:[u.jsxs(nn,{onClick:()=>f(m),children:[u.jsx(Jo,{className:"h-4 w-4 mr-2"}),"Copy Link"]}),u.jsx(Sv,{}),u.jsxs(nn,{onClick:()=>h(),children:[u.jsx(Zp,{className:"h-4 w-4 mr-2"}),"Manage Access"]})]})]})]})]})]})},m.id)})})}),r.length===0&&!n&&u.jsxs(ze.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[u.jsx(rp,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),u.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No projects yet"}),u.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first project to get started"}),u.jsxs(ge,{onClick:()=>a(!0),children:[u.jsx(Jp,{className:"mr-2 h-4 w-4"}),"Create Project"]})]})]}),u.jsx($pe,{}),u.jsx(z_e,{selectedProjectId:l||void 0}),o&&(i==null?void 0:i.id)&&u.jsx(U_e,{open:o,user_id:i==null?void 0:i.id,onOpenChange:a,onJobCreated:v}),u.jsx(XU,{})]})}function W_e({currentUserRole:t,canEdit:e,canAdmin:r,onShareClick:n}){const s=()=>{if(!t)return null;const o={admin:{icon:BU,color:"text-yellow-600 bg-yellow-50 border-yellow-200 dark:text-yellow-400 dark:bg-yellow-950 dark:border-yellow-800",label:"Admin"},editor:{icon:z2,color:"text-blue-600 bg-blue-50 border-blue-200 dark:text-blue-400 dark:bg-blue-950 dark:border-blue-800",label:"Editor"},viewer:{icon:Jc,color:"text-muted-foreground bg-muted border-border",label:"Viewer"}}[t],a=o.icon;return u.jsxs(dt,{variant:"outline",className:xe("text-xs",o.color),children:[u.jsx(a,{className:"h-3 w-3 mr-1"}),o.label]})};return u.jsxs("div",{className:"p-4 border-b border-border flex-shrink-0",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:u.jsx(Zp,{className:"h-5 w-5 text-primary"})}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Design Studio"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure your design"})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(s,{}),r&&u.jsx(ge,{variant:"outline",size:"sm",onClick:n,children:u.jsx(Qp,{className:"h-4 w-4"})})]})]}),!e&&u.jsxs(ml,{className:"mb-4",children:[u.jsx(fv,{className:"h-4 w-4"}),u.jsx(yl,{className:"text-xs",children:"You have view-only access to this project. Contact an admin to request edit permissions."})]})]})}var EA="Tabs",[q_e,Uje]=$s(EA,[pw]),g7=pw(),[G_e,kA]=q_e(EA),m7=w.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,d=Qc(a),[h,f]=Rs({prop:n,onChange:s,defaultProp:i});return u.jsx(G_e,{scope:r,baseId:ks(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:l,children:u.jsx(Fe.div,{dir:d,"data-orientation":o,...c,ref:e})})});m7.displayName=EA;var y7="TabsList",v7=w.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...s}=t,i=kA(y7,r),o=g7(r);return u.jsx(b8,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:u.jsx(Fe.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});v7.displayName=y7;var x7="TabsTrigger",w7=w.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...i}=t,o=kA(x7,r),a=g7(r),l=_7(o.baseId,n),c=C7(o.baseId,n),d=n===o.value;return u.jsx(S8,{asChild:!0,...a,focusable:!s,active:d,children:u.jsx(Fe.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":c,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:e,onMouseDown:_e(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:_e(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:_e(t.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!s&&h&&o.onValueChange(n)})})})});w7.displayName=x7;var b7="TabsContent",S7=w.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:s,children:i,...o}=t,a=kA(b7,r),l=_7(a.baseId,n),c=C7(a.baseId,n),d=n===a.value,h=w.useRef(d);return w.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),u.jsx(En,{present:s||d,children:({present:f})=>u.jsx(Fe.div,{"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:f&&i})})});S7.displayName=b7;function _7(t,e){return`${t}-trigger-${e}`}function C7(t,e){return`${t}-content-${e}`}var K_e=m7,E7=v7,k7=w7,T7=S7;const TA=K_e,Rw=w.forwardRef(({className:t,...e},r)=>u.jsx(E7,{ref:r,className:xe("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...e}));Rw.displayName=E7.displayName;const In=w.forwardRef(({className:t,...e},r)=>u.jsx(k7,{ref:r,className:xe("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...e}));In.displayName=k7.displayName;const Qs=w.forwardRef(({className:t,...e},r)=>u.jsx(T7,{ref:r,className:xe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Qs.displayName=T7.displayName;function Y_e(t,e){return w.useReducer((r,n)=>e[r][n]??r,t)}var jA="ScrollArea",[j7,Vje]=$s(jA),[X_e,di]=j7(jA),A7=w.forwardRef((t,e)=>{const{__scopeScrollArea:r,type:n="hover",dir:s,scrollHideDelay:i=600,...o}=t,[a,l]=w.useState(null),[c,d]=w.useState(null),[h,f]=w.useState(null),[p,g]=w.useState(null),[y,v]=w.useState(null),[m,x]=w.useState(0),[b,_]=w.useState(0),[C,T]=w.useState(!1),[O,R]=w.useState(!1),I=rt(e,re=>l(re)),H=Qc(s);return u.jsx(X_e,{scope:r,type:n,dir:H,scrollHideDelay:i,scrollArea:a,viewport:c,onViewportChange:d,content:h,onContentChange:f,scrollbarX:p,onScrollbarXChange:g,scrollbarXEnabled:C,onScrollbarXEnabledChange:T,scrollbarY:y,onScrollbarYChange:v,scrollbarYEnabled:O,onScrollbarYEnabledChange:R,onCornerWidthChange:x,onCornerHeightChange:_,children:u.jsx(Fe.div,{dir:H,...o,ref:I,style:{position:"relative","--radix-scroll-area-corner-width":m+"px","--radix-scroll-area-corner-height":b+"px",...t.style}})})});A7.displayName=jA;var P7="ScrollAreaViewport",N7=w.forwardRef((t,e)=>{const{__scopeScrollArea:r,children:n,asChild:s,nonce:i,...o}=t,a=di(P7,r),l=w.useRef(null),c=rt(e,l,a.onViewportChange);return u.jsxs(u.Fragment,{children:[u.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:i}),u.jsx(Fe.div,{"data-radix-scroll-area-viewport":"",...o,asChild:s,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...t.style},children:oCe({asChild:s,children:n},d=>u.jsx("div",{"data-radix-scroll-area-content":"",ref:a.onContentChange,style:{minWidth:a.scrollbarXEnabled?"fit-content":void 0},children:d}))})]})});N7.displayName=P7;var ko="ScrollAreaScrollbar",AA=w.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=di(ko,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,a=t.orientation==="horizontal";return w.useEffect(()=>(a?i(!0):o(!0),()=>{a?i(!1):o(!1)}),[a,i,o]),s.type==="hover"?u.jsx(J_e,{...n,ref:e,forceMount:r}):s.type==="scroll"?u.jsx(Z_e,{...n,ref:e,forceMount:r}):s.type==="auto"?u.jsx(R7,{...n,ref:e,forceMount:r}):s.type==="always"?u.jsx(PA,{...n,ref:e}):null});AA.displayName=ko;var J_e=w.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=di(ko,t.__scopeScrollArea),[i,o]=w.useState(!1);return w.useEffect(()=>{const a=s.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),o(!0)},d=()=>{l=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),u.jsx(En,{present:r||i,children:u.jsx(R7,{"data-state":i?"visible":"hidden",...n,ref:e})})}),Z_e=w.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=di(ko,t.__scopeScrollArea),i=t.orientation==="horizontal",o=Mw(()=>l("SCROLL_END"),100),[a,l]=Y_e("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return w.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,s.scrollHideDelay,l]),w.useEffect(()=>{const c=s.viewport,d=i?"scrollLeft":"scrollTop";if(c){let h=c[d];const f=()=>{const p=c[d];h!==p&&(l("SCROLL"),o()),h=p};return c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[s.viewport,i,l,o]),u.jsx(En,{present:r||a!=="hidden",children:u.jsx(PA,{"data-state":a==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:_e(t.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:_e(t.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),R7=w.forwardRef((t,e)=>{const r=di(ko,t.__scopeScrollArea),{forceMount:n,...s}=t,[i,o]=w.useState(!1),a=t.orientation==="horizontal",l=Mw(()=>{if(r.viewport){const c=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(a?c:d)}},10);return Qd(r.viewport,l),Qd(r.content,l),u.jsx(En,{present:n||i,children:u.jsx(PA,{"data-state":i?"visible":"hidden",...s,ref:e})})}),PA=w.forwardRef((t,e)=>{const{orientation:r="vertical",...n}=t,s=di(ko,t.__scopeScrollArea),i=w.useRef(null),o=w.useRef(0),[a,l]=w.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=F7(a.viewport,a.content),d={...n,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:f=>i.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function h(f,p){return sCe(f,o.current,a,p)}return r==="horizontal"?u.jsx(Q_e,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollLeft,p=R3(f,a,s.dir);i.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=h(f,s.dir))}}):r==="vertical"?u.jsx(eCe,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const f=s.viewport.scrollTop,p=R3(f,a);i.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=h(f))}}):null}),Q_e=w.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,i=di(ko,t.__scopeScrollArea),[o,a]=w.useState(),l=w.useRef(null),c=rt(e,l,i.onScrollbarXChange);return w.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),u.jsx(M7,{"data-orientation":"horizontal",...s,ref:c,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ow(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const f=i.viewport.scrollLeft+d.deltaX;t.onWheelScroll(f),B7(f,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:$v(o.paddingLeft),paddingEnd:$v(o.paddingRight)}})}})}),eCe=w.forwardRef((t,e)=>{const{sizes:r,onSizesChange:n,...s}=t,i=di(ko,t.__scopeScrollArea),[o,a]=w.useState(),l=w.useRef(null),c=rt(e,l,i.onScrollbarYChange);return w.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),u.jsx(M7,{"data-orientation":"vertical",...s,ref:c,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ow(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const f=i.viewport.scrollTop+d.deltaY;t.onWheelScroll(f),B7(f,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:$v(o.paddingTop),paddingEnd:$v(o.paddingBottom)}})}})}),[tCe,O7]=j7(ko),M7=w.forwardRef((t,e)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:d,onResize:h,...f}=t,p=di(ko,r),[g,y]=w.useState(null),v=rt(e,I=>y(I)),m=w.useRef(null),x=w.useRef(""),b=p.viewport,_=n.content-n.viewport,C=Sr(d),T=Sr(l),O=Mw(h,10);function R(I){if(m.current){const H=I.clientX-m.current.left,re=I.clientY-m.current.top;c({x:H,y:re})}}return w.useEffect(()=>{const I=H=>{const re=H.target;(g==null?void 0:g.contains(re))&&C(H,_)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[b,g,_,C]),w.useEffect(T,[n,T]),Qd(g,O),Qd(p.content,O),u.jsx(tCe,{scope:r,scrollbar:g,hasThumb:s,onThumbChange:Sr(i),onThumbPointerUp:Sr(o),onThumbPositionChange:T,onThumbPointerDown:Sr(a),children:u.jsx(Fe.div,{...f,ref:v,style:{position:"absolute",...f.style},onPointerDown:_e(t.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),m.current=g.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),R(I))}),onPointerMove:_e(t.onPointerMove,R),onPointerUp:_e(t.onPointerUp,I=>{const H=I.target;H.hasPointerCapture(I.pointerId)&&H.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=x.current,p.viewport&&(p.viewport.style.scrollBehavior=""),m.current=null})})})}),Bv="ScrollAreaThumb",I7=w.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=O7(Bv,t.__scopeScrollArea);return u.jsx(En,{present:r||s.hasThumb,children:u.jsx(rCe,{ref:e,...n})})}),rCe=w.forwardRef((t,e)=>{const{__scopeScrollArea:r,style:n,...s}=t,i=di(Bv,r),o=O7(Bv,r),{onThumbPositionChange:a}=o,l=rt(e,h=>o.onThumbChange(h)),c=w.useRef(),d=Mw(()=>{c.current&&(c.current(),c.current=void 0)},100);return w.useEffect(()=>{const h=i.viewport;if(h){const f=()=>{if(d(),!c.current){const p=iCe(h,a);c.current=p,a()}};return a(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[i.viewport,d,a]),u.jsx(Fe.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:_e(t.onPointerDownCapture,h=>{const p=h.target.getBoundingClientRect(),g=h.clientX-p.left,y=h.clientY-p.top;o.onThumbPointerDown({x:g,y})}),onPointerUp:_e(t.onPointerUp,o.onThumbPointerUp)})});I7.displayName=Bv;var NA="ScrollAreaCorner",D7=w.forwardRef((t,e)=>{const r=di(NA,t.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?u.jsx(nCe,{...t,ref:e}):null});D7.displayName=NA;var nCe=w.forwardRef((t,e)=>{const{__scopeScrollArea:r,...n}=t,s=di(NA,r),[i,o]=w.useState(0),[a,l]=w.useState(0),c=!!(i&&a);return Qd(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),l(d)}),Qd(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),o(d)}),c?u.jsx(Fe.div,{...n,ref:e,style:{width:i,height:a,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function $v(t){return t?parseInt(t,10):0}function F7(t,e){const r=t/e;return isNaN(r)?0:r}function Ow(t){const e=F7(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,n=(t.scrollbar.size-r)*e;return Math.max(n,18)}function sCe(t,e,r,n="ltr"){const s=Ow(r),i=s/2,o=e||i,a=s-o,l=r.scrollbar.paddingStart+o,c=r.scrollbar.size-r.scrollbar.paddingEnd-a,d=r.content-r.viewport,h=n==="ltr"?[0,d]:[d*-1,0];return L7([l,c],h)(t)}function R3(t,e,r="ltr"){const n=Ow(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,a=i-n,l=r==="ltr"?[0,o]:[o*-1,0],c=eg(t,l);return L7([0,o],[0,a])(c)}function L7(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function B7(t,e){return t>0&&t<e}var iCe=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},n=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},o=r.left!==i.left,a=r.top!==i.top;(o||a)&&e(),r=i,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function Mw(t,e){const r=Sr(t),n=w.useRef(0);return w.useEffect(()=>()=>window.clearTimeout(n.current),[]),w.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,e)},[r,e])}function Qd(t,e){const r=Sr(e);Fr(()=>{let n=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return s.observe(t),()=>{window.cancelAnimationFrame(n),s.unobserve(t)}}},[t,r])}function oCe(t,e){const{asChild:r,children:n}=t;if(!r)return typeof e=="function"?e(n):e;const s=w.Children.only(n);return w.cloneElement(s,{children:typeof e=="function"?e(s.props.children):e})}var $7=A7,aCe=N7,lCe=D7;const qg=w.forwardRef(({className:t,children:e,...r},n)=>u.jsxs($7,{ref:n,className:xe("relative overflow-hidden",t),...r,children:[u.jsx(aCe,{className:"h-full w-full rounded-[inherit]",children:e}),u.jsx(U7,{}),u.jsx(lCe,{})]}));qg.displayName=$7.displayName;const U7=w.forwardRef(({className:t,orientation:e="vertical",...r},n)=>u.jsx(AA,{ref:n,orientation:e,className:xe("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:u.jsx(I7,{className:"relative flex-1 rounded-full bg-border"})}));U7.displayName=AA.displayName;var RA="Checkbox",[cCe,zje]=$s(RA),[uCe,dCe]=cCe(RA),V7=w.forwardRef((t,e)=>{const{__scopeCheckbox:r,name:n,checked:s,defaultChecked:i,required:o,disabled:a,value:l="on",onCheckedChange:c,form:d,...h}=t,[f,p]=w.useState(null),g=rt(e,_=>p(_)),y=w.useRef(!1),v=f?d||!!f.closest("form"):!0,[m=!1,x]=Rs({prop:s,defaultProp:i,onChange:c}),b=w.useRef(m);return w.useEffect(()=>{const _=f==null?void 0:f.form;if(_){const C=()=>x(b.current);return _.addEventListener("reset",C),()=>_.removeEventListener("reset",C)}},[f,x]),u.jsxs(uCe,{scope:r,state:m,disabled:a,children:[u.jsx(Fe.button,{type:"button",role:"checkbox","aria-checked":al(m)?"mixed":m,"aria-required":o,"data-state":W7(m),"data-disabled":a?"":void 0,disabled:a,value:l,...h,ref:g,onKeyDown:_e(t.onKeyDown,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:_e(t.onClick,_=>{x(C=>al(C)?!0:!C),v&&(y.current=_.isPropagationStopped(),y.current||_.stopPropagation())})}),v&&u.jsx(hCe,{control:f,bubbles:!y.current,name:n,value:l,checked:m,required:o,disabled:a,form:d,style:{transform:"translateX(-100%)"},defaultChecked:al(i)?!1:i})]})});V7.displayName=RA;var z7="CheckboxIndicator",H7=w.forwardRef((t,e)=>{const{__scopeCheckbox:r,forceMount:n,...s}=t,i=dCe(z7,r);return u.jsx(En,{present:n||al(i.state)||i.state===!0,children:u.jsx(Fe.span,{"data-state":W7(i.state),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...t.style}})})});H7.displayName=z7;var hCe=t=>{const{control:e,checked:r,bubbles:n=!0,defaultChecked:s,...i}=t,o=w.useRef(null),a=ow(r),l=sw(e);w.useEffect(()=>{const d=o.current,h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(a!==r&&p){const g=new Event("click",{bubbles:n});d.indeterminate=al(r),p.call(d,al(r)?!1:r),d.dispatchEvent(g)}},[a,r,n]);const c=w.useRef(al(r)?!1:r);return u.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??c.current,...i,tabIndex:-1,ref:o,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function al(t){return t==="indeterminate"}function W7(t){return al(t)?"indeterminate":t?"checked":"unchecked"}var q7=V7,fCe=H7;const OA=w.forwardRef(({className:t,...e},r)=>u.jsx(q7,{ref:r,className:xe("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:u.jsx(fCe,{className:xe("flex items-center justify-center text-current"),children:u.jsx(q2,{className:"h-4 w-4"})})}));OA.displayName=q7.displayName;var pCe="Separator",O3="horizontal",gCe=["horizontal","vertical"],G7=w.forwardRef((t,e)=>{const{decorative:r,orientation:n=O3,...s}=t,i=mCe(n)?n:O3,a=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return u.jsx(Fe.div,{"data-orientation":i,...a,...s,ref:e})});G7.displayName=pCe;function mCe(t){return gCe.includes(t)}var K7=G7;const Gr=w.forwardRef(({className:t,orientation:e="horizontal",decorative:r=!0,...n},s)=>u.jsx(K7,{ref:s,decorative:r,orientation:e,className:xe("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));Gr.displayName=K7.displayName;function yCe({projectId:t,className:e}){const r=Ar(),{segments:n,activeSegmentId:s,selectedSegmentIds:i,copiedSegment:o}=Ze(L=>L.segments),[a,l]=w.useState(null),[c,d]=w.useState(""),h=(L,z=!1)=>{r(jy(L))},f=L=>{const z=n.find(Y=>Y.id===L);r(UB(L)),z&&r(Js({projectId:t,type:"segment_edited",action:"Segment Deleted",detail:`Segment "${z.name}" was deleted`,metadata:{segmentId:L,segmentName:z.name}})),Ve.success("Segment deleted")},p=L=>{const z=n.find(Y=>Y.id===L);r(Bee(L)),z&&r(Js({projectId:t,type:"segment_added",action:"Segment Duplicated",detail:`Segment "${z.name}" was duplicated`,metadata:{originalSegmentId:L,segmentName:z.name}})),Ve.success("Segment duplicated")},g=()=>{if(i.length===0){Ve.error("Select a segment to copy");return}const L=i[0],z=n.find(Y=>Y.id===L);r(I0(L)),z&&r(Js({projectId:t,type:"segment_edited",action:"Segment Copied",detail:`Segment "${z.name}" was copied`,metadata:{segmentId:L,segmentName:z.name}})),Ve.success("Segment copied")},y=L=>{r(I0(L)),Ve.success("Segment copied to clipboard")},v=()=>{o&&(r(KC()),r(Js({projectId:t,type:"segment_added",action:"Segment Pasted",detail:`Segment "${o.name}" was pasted`,metadata:{segmentName:o.name}})),Ve.success("Segment pasted"))},m=()=>{if(i.length<2){Ve.error("Select at least 2 segments to group");return}r($ee(i)),r(Js({projectId:t,type:"segment_edited",action:"Segments Grouped",detail:`${i.length} segments were grouped together`,metadata:{segmentIds:i,count:i.length}})),Ve.success("Segments grouped")},x=L=>{r(VB(L)),Ve.success("Segment moved forward")},b=L=>{r(zB(L)),Ve.success("Segment moved backward")},_=L=>{l(L.id),d(L.name)},C=()=>{var L;if(a&&c.trim()){const z=(L=n.find(Y=>Y.id===a))==null?void 0:L.name;r(_R({id:a,updates:{name:c.trim()}})),r(Js({projectId:t,type:"segment_edited",action:"Segment Renamed",detail:`Segment renamed from "${z}" to "${c.trim()}"`,metadata:{segmentId:a,oldName:z,newName:c.trim()}})),l(null),d(""),Ve.success("Segment renamed")}},T=()=>{l(null),d("")},O=L=>{const z=n.find(Y=>Y.id===L);z&&r(_R({id:L,updates:{visible:!z.visible}}))},R=L=>{r(jy(L)),Ve.success("Segment focused")},I=(i==null?void 0:i.length)||0,H=s!==null,re=o!==null;return u.jsxs("div",{className:xe("space-y-4",e),children:[u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(hv,{className:"h-4 w-4 text-primary"}),u.jsx("h3",{className:"text-sm font-medium",children:"Segments"}),u.jsx(dt,{variant:"secondary",className:"text-xs",children:n.length})]}),u.jsxs(ge,{variant:"outline",size:"sm",onClick:()=>{},disabled:n.length===0,children:[u.jsx(qU,{className:"h-3 w-3 mr-1"}),"Save"]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs(ge,{variant:"outline",size:"sm",onClick:g,disabled:!H,className:"text-xs",children:[u.jsx(Jo,{className:"h-3 w-3 mr-1"}),"Copy"]}),u.jsxs(ge,{variant:"outline",size:"sm",onClick:v,disabled:!re,className:"text-xs",children:[u.jsx(FU,{className:"h-3 w-3 mr-1"}),"Paste"]}),u.jsxs(ge,{variant:"outline",size:"sm",onClick:m,disabled:I<2,className:"text-xs",children:[u.jsx(_ce,{className:"h-3 w-3 mr-1"}),"Group"]}),u.jsxs(ge,{variant:"outline",size:"sm",onClick:()=>{},disabled:!H,className:"text-xs",children:[u.jsx(Vce,{className:"h-3 w-3 mr-1"}),"Ungroup"]})]}),H&&u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsxs(ge,{variant:"outline",size:"sm",onClick:()=>x(s),className:"text-xs flex-1",children:[u.jsx(dv,{className:"h-3 w-3 mr-1"}),"Forward"]}),u.jsxs(ge,{variant:"outline",size:"sm",onClick:()=>b(s),className:"text-xs flex-1",children:[u.jsx(Xp,{className:"h-3 w-3 mr-1"}),"Backward"]})]})]}),u.jsx(Gr,{}),n.length===0?u.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[u.jsx(hv,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),u.jsx("p",{className:"text-sm",children:"No segments created yet"}),u.jsx("p",{className:"text-xs",children:"Use the canvas tools to draw segments"})]}):u.jsx(qg,{className:"h-64",children:u.jsx("div",{className:"space-y-2",children:u.jsx(hl,{children:n.map((L,z)=>u.jsx(ze.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2,delay:z*.02},children:u.jsx(Ge,{className:xe("p-3 cursor-pointer transition-all hover:shadow-sm",s===L.id?"border-primary bg-primary/5":"border-border hover:border-primary/50"),onClick:()=>h(L.id),children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(OA,{checked:(i==null?void 0:i.includes(L.id))||!1,onCheckedChange:Y=>{},onClick:Y=>Y.stopPropagation()}),u.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-background shadow-sm flex-shrink-0",style:{backgroundColor:L.fillColor}}),u.jsx("div",{className:"flex-1 min-w-0",children:a===L.id?u.jsx("div",{className:"flex items-center space-x-2",children:u.jsx(Ai,{value:c,onChange:Y=>d(Y.target.value),onKeyDown:Y=>{Y.key==="Enter"&&C(),Y.key==="Escape"&&T()},onBlur:C,className:"h-6 text-xs",autoFocus:!0})}):u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium truncate",children:L.name}),u.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[u.jsxs("span",{children:[L.points.length," points"]}),L.material&&u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""}),u.jsxs("span",{className:"flex items-center",children:[u.jsx(ai,{className:"h-3 w-3 mr-1"}),L.material.materialName]})]})]})]})}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(ge,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:Y=>{Y.stopPropagation(),O(L.id)},children:L.visible!==!1?u.jsx(Jc,{className:"h-3 w-3"}):u.jsx($2,{className:"h-3 w-3"})}),u.jsxs(bj,{children:[u.jsx(Sj,{asChild:!0,children:u.jsx(ge,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:Y=>Y.stopPropagation(),children:u.jsx(VU,{className:"h-3 w-3"})})}),u.jsxs(yw,{align:"end",className:"w-40",children:[u.jsxs(nn,{onClick:()=>_(L),children:[u.jsx(z2,{className:"h-3 w-3 mr-2"}),"Rename"]}),u.jsxs(nn,{onClick:()=>R(L.id),children:[u.jsx(wce,{className:"h-3 w-3 mr-2"}),"Focus"]}),u.jsxs(nn,{onClick:()=>y(L.id),children:[u.jsx(Jo,{className:"h-3 w-3 mr-2"}),"Copy"]}),u.jsxs(nn,{onClick:()=>p(L.id),children:[u.jsx(Jx,{className:"h-3 w-3 mr-2"}),"Duplicate"]}),u.jsx(Sv,{}),u.jsxs(nn,{onClick:()=>x(L.id),children:[u.jsx(dv,{className:"h-3 w-3 mr-2"}),"Bring Forward"]}),u.jsxs(nn,{onClick:()=>b(L.id),children:[u.jsx(Xp,{className:"h-3 w-3 mr-2"}),"Send Backward"]}),u.jsx(Sv,{}),u.jsxs(nn,{onClick:()=>f(L.id),className:"text-destructive focus:text-destructive",children:[u.jsx(KU,{className:"h-3 w-3 mr-2"}),"Delete"]})]})]})]})]})})},L.id))})})}),I>0&&u.jsxs("div",{className:"text-xs text-muted-foreground text-center py-2 border-t border-border",children:[I," segment",I!==1?"s":""," selected"]})]})}var MA="Collapsible",[vCe,Y7]=$s(MA),[xCe,IA]=vCe(MA),X7=w.forwardRef((t,e)=>{const{__scopeCollapsible:r,open:n,defaultOpen:s,disabled:i,onOpenChange:o,...a}=t,[l=!1,c]=Rs({prop:n,defaultProp:s,onChange:o});return u.jsx(xCe,{scope:r,disabled:i,contentId:ks(),open:l,onOpenToggle:w.useCallback(()=>c(d=>!d),[c]),children:u.jsx(Fe.div,{"data-state":BA(l),"data-disabled":i?"":void 0,...a,ref:e})})});X7.displayName=MA;var J7="CollapsibleTrigger",DA=w.forwardRef((t,e)=>{const{__scopeCollapsible:r,...n}=t,s=IA(J7,r);return u.jsx(Fe.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":BA(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...n,ref:e,onClick:_e(t.onClick,s.onOpenToggle)})});DA.displayName=J7;var FA="CollapsibleContent",LA=w.forwardRef((t,e)=>{const{forceMount:r,...n}=t,s=IA(FA,t.__scopeCollapsible);return u.jsx(En,{present:r||s.open,children:({present:i})=>u.jsx(wCe,{...n,ref:e,present:i})})});LA.displayName=FA;var wCe=w.forwardRef((t,e)=>{const{__scopeCollapsible:r,present:n,children:s,...i}=t,o=IA(FA,r),[a,l]=w.useState(n),c=w.useRef(null),d=rt(e,c),h=w.useRef(0),f=h.current,p=w.useRef(0),g=p.current,y=o.open||a,v=w.useRef(y),m=w.useRef();return w.useEffect(()=>{const x=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(x)},[]),Fr(()=>{const x=c.current;if(x){m.current=m.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const b=x.getBoundingClientRect();h.current=b.height,p.current=b.width,v.current||(x.style.transitionDuration=m.current.transitionDuration,x.style.animationName=m.current.animationName),l(n)}},[o.open,n]),u.jsx(Fe.div,{"data-state":BA(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!y,...i,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...t.style},children:y&&s})});function BA(t){return t?"open":"closed"}var Z7=X7,bCe=DA,SCe=LA;const Q7=Z7,eH=DA,tH=LA,_Ce=t=>{switch(t){case"project_created":return bce;case"style_changed":return ai;case"material_applied":return V2;case"segment_added":case"segment_edited":return hv;case"image_uploaded":return Wd;case"ai_job_started":case"ai_job_completed":return Zx;case"ai_job_failed":return B2;case"design_saved":return qU;default:return Xo}},CCe=t=>{switch(t){case"project_created":return"text-blue-500";case"style_changed":return"text-purple-500";case"material_applied":return"text-green-500";case"segment_added":case"segment_edited":return"text-orange-500";case"image_uploaded":return"text-cyan-500";case"ai_job_started":case"ai_job_completed":return"text-yellow-500";case"ai_job_failed":return"text-red-500";case"design_saved":return"text-emerald-500";default:return"text-gray-500"}},ECe=t=>{const e=new Date(t),r=new Date,n=r.getTime()-e.getTime(),s=Math.floor(n/6e4),i=Math.floor(n/36e5),o=Math.floor(n/864e5);return s<1?"Just now":s<60?`${s}m ago`:i<24?`${i}h ago`:o<7?`${o}d ago`:e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:e.getFullYear()!==r.getFullYear()?"numeric":void 0})},kCe=t=>{const e={};return t.forEach(r=>{const n=new Date(r.timestamp),s=new Date,i=new Date(s);i.setDate(i.getDate()-1);let o;n.toDateString()===s.toDateString()?o="Today":n.toDateString()===i.toDateString()?o="Yesterday":o=n.toLocaleDateString("en-US",{month:"long",day:"numeric",year:n.getFullYear()!==s.getFullYear()?"numeric":void 0}),e[o]||(e[o]=[]),e[o].push(r)}),e};function TCe({projectId:t,className:e}){const{logs:r}=Ze(d=>d.activityLogs),[n,s]=w.useState(!1),[i,o]=w.useState(!1),a=r[t]||[],l=i?a:a.slice(0,10),c=kCe(l);return a.length===0?u.jsxs(Ge,{className:e,children:[u.jsx(vt,{className:"pb-3",children:u.jsxs(St,{className:"text-sm font-medium flex items-center",children:[u.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Activity Timeline"]})}),u.jsx(tt,{children:u.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[u.jsx(Xo,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),u.jsx("p",{className:"text-sm",children:"No activity yet"})]})})]}):u.jsx(Ge,{className:e,children:u.jsxs(Q7,{open:n,onOpenChange:s,children:[u.jsx(eH,{asChild:!0,children:u.jsx(vt,{className:"pb-3 cursor-pointer hover:bg-muted/50 transition-colors",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(St,{className:"text-sm font-medium flex items-center",children:[u.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Activity Timeline",u.jsx(dt,{variant:"secondary",className:"ml-2 text-xs",children:a.length})]}),n?u.jsx(dv,{className:"h-4 w-4 text-muted-foreground"}):u.jsx(Xp,{className:"h-4 w-4 text-muted-foreground"})]})})}),u.jsx(tH,{children:u.jsxs(tt,{className:"pt-0",children:[u.jsx(qg,{className:"h-64",children:u.jsx("div",{className:"space-y-4",children:Object.entries(c).map(([d,h])=>u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[u.jsx("h4",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:d}),u.jsx(Gr,{className:"flex-1"})]}),u.jsx("div",{className:"space-y-3",children:h.map((f,p)=>{const g=_Ce(f.type),y=CCe(f.type);return u.jsxs(ze.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:p*.05},className:"flex items-start space-x-3 group",children:[u.jsx("div",{className:xe("flex-shrink-0 w-8 h-8 rounded-full border-2 border-background bg-card flex items-center justify-center shadow-sm","group-hover:shadow-md transition-shadow"),children:u.jsx(g,{className:xe("h-4 w-4",y)})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("p",{className:"text-sm font-medium text-foreground",children:f.action}),u.jsx("span",{className:"text-xs text-muted-foreground",children:ECe(f.timestamp)})]}),u.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:f.detail}),f.metadata&&u.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:Object.entries(f.metadata).map(([v,m])=>u.jsxs(dt,{variant:"outline",className:"text-xs",children:[v,": ",String(m)]},v))})]})]},f.id)})})]},d))})}),a.length>10&&u.jsx("div",{className:"mt-4 text-center",children:u.jsx(ge,{variant:"ghost",size:"sm",onClick:()=>o(!i),className:"text-xs",children:i?"Show Less":`Show ${a.length-10} More`})})]})})]})})}var wa="Accordion",jCe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[$A,ACe,PCe]=Pg(wa),[Iw,Hje]=$s(wa,[PCe,Y7]),UA=Y7(),rH=ie.forwardRef((t,e)=>{const{type:r,...n}=t,s=n,i=n;return u.jsx($A.Provider,{scope:t.__scopeAccordion,children:r==="multiple"?u.jsx(MCe,{...i,ref:e}):u.jsx(OCe,{...s,ref:e})})});rH.displayName=wa;var[nH,NCe]=Iw(wa),[sH,RCe]=Iw(wa,{collapsible:!1}),OCe=ie.forwardRef((t,e)=>{const{value:r,defaultValue:n,onValueChange:s=()=>{},collapsible:i=!1,...o}=t,[a,l]=Rs({prop:r,defaultProp:n,onChange:s});return u.jsx(nH,{scope:t.__scopeAccordion,value:a?[a]:[],onItemOpen:l,onItemClose:ie.useCallback(()=>i&&l(""),[i,l]),children:u.jsx(sH,{scope:t.__scopeAccordion,collapsible:i,children:u.jsx(iH,{...o,ref:e})})})}),MCe=ie.forwardRef((t,e)=>{const{value:r,defaultValue:n,onValueChange:s=()=>{},...i}=t,[o=[],a]=Rs({prop:r,defaultProp:n,onChange:s}),l=ie.useCallback(d=>a((h=[])=>[...h,d]),[a]),c=ie.useCallback(d=>a((h=[])=>h.filter(f=>f!==d)),[a]);return u.jsx(nH,{scope:t.__scopeAccordion,value:o,onItemOpen:l,onItemClose:c,children:u.jsx(sH,{scope:t.__scopeAccordion,collapsible:!0,children:u.jsx(iH,{...i,ref:e})})})}),[ICe,Dw]=Iw(wa),iH=ie.forwardRef((t,e)=>{const{__scopeAccordion:r,disabled:n,dir:s,orientation:i="vertical",...o}=t,a=ie.useRef(null),l=rt(a,e),c=ACe(r),h=Qc(s)==="ltr",f=_e(t.onKeyDown,p=>{var R;if(!jCe.includes(p.key))return;const g=p.target,y=c().filter(I=>{var H;return!((H=I.ref.current)!=null&&H.disabled)}),v=y.findIndex(I=>I.ref.current===g),m=y.length;if(v===-1)return;p.preventDefault();let x=v;const b=0,_=m-1,C=()=>{x=v+1,x>_&&(x=b)},T=()=>{x=v-1,x<b&&(x=_)};switch(p.key){case"Home":x=b;break;case"End":x=_;break;case"ArrowRight":i==="horizontal"&&(h?C():T());break;case"ArrowDown":i==="vertical"&&C();break;case"ArrowLeft":i==="horizontal"&&(h?T():C());break;case"ArrowUp":i==="vertical"&&T();break}const O=x%m;(R=y[O].ref.current)==null||R.focus()});return u.jsx(ICe,{scope:r,disabled:n,direction:s,orientation:i,children:u.jsx($A.Slot,{scope:r,children:u.jsx(Fe.div,{...o,"data-orientation":i,ref:l,onKeyDown:n?void 0:f})})})}),Uv="AccordionItem",[DCe,VA]=Iw(Uv),oH=ie.forwardRef((t,e)=>{const{__scopeAccordion:r,value:n,...s}=t,i=Dw(Uv,r),o=NCe(Uv,r),a=UA(r),l=ks(),c=n&&o.value.includes(n)||!1,d=i.disabled||t.disabled;return u.jsx(DCe,{scope:r,open:c,disabled:d,triggerId:l,children:u.jsx(Z7,{"data-orientation":i.orientation,"data-state":hH(c),...a,...s,ref:e,disabled:d,open:c,onOpenChange:h=>{h?o.onItemOpen(n):o.onItemClose(n)}})})});oH.displayName=Uv;var aH="AccordionHeader",lH=ie.forwardRef((t,e)=>{const{__scopeAccordion:r,...n}=t,s=Dw(wa,r),i=VA(aH,r);return u.jsx(Fe.h3,{"data-orientation":s.orientation,"data-state":hH(i.open),"data-disabled":i.disabled?"":void 0,...n,ref:e})});lH.displayName=aH;var hk="AccordionTrigger",cH=ie.forwardRef((t,e)=>{const{__scopeAccordion:r,...n}=t,s=Dw(wa,r),i=VA(hk,r),o=RCe(hk,r),a=UA(r);return u.jsx($A.ItemSlot,{scope:r,children:u.jsx(bCe,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":s.orientation,id:i.triggerId,...a,...n,ref:e})})});cH.displayName=hk;var uH="AccordionContent",dH=ie.forwardRef((t,e)=>{const{__scopeAccordion:r,...n}=t,s=Dw(wa,r),i=VA(uH,r),o=UA(r);return u.jsx(SCe,{role:"region","aria-labelledby":i.triggerId,"data-orientation":s.orientation,...o,...n,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});dH.displayName=uH;function hH(t){return t?"open":"closed"}var FCe=rH,LCe=oH,BCe=lH,fH=cH,pH=dH;const $Ce=FCe,gH=w.forwardRef(({className:t,...e},r)=>u.jsx(LCe,{ref:r,className:xe("border-b",t),...e}));gH.displayName="AccordionItem";const mH=w.forwardRef(({className:t,children:e,...r},n)=>u.jsx(BCe,{className:"flex",children:u.jsxs(fH,{ref:n,className:xe("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...r,children:[e,u.jsx(JU,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));mH.displayName=fH.displayName;const yH=w.forwardRef(({className:t,children:e,...r},n)=>u.jsx(pH,{ref:n,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:u.jsx("div",{className:xe("pb-4 pt-0",t),children:e})}));yH.displayName=pH.displayName;function UCe({selectedSegmentType:t,className:e}){Ar();const r=ci(),{swatches:n,isLoading:s}=Ze(p=>p.swatches),[i,o]=w.useState([]),[a,l]=w.useState({});w.useEffect(()=>{if(t&&n.length>0){const p=n.filter(y=>y.segment_types.includes(t));o(p);const g=p.reduce((y,v)=>{const m=v.category;return y[m]||(y[m]=[]),y[m].push(v),y},{});l(g)}else o([]),l({})},[t,n]);const c=p=>({walls:"Walls",ceiling:"Ceiling",trim:"Trim & Molding",doors:"Doors",cabinets:"Cabinets",siding:"Exterior Siding"})[p]||p.charAt(0).toUpperCase()+p.slice(1),d=p=>({walls:"Interior and exterior wall surfaces",ceiling:"Overhead surfaces and architectural details",trim:"Baseboards, crown molding, and decorative elements",doors:"Entry doors, interior doors, and frames",cabinets:"Kitchen and bathroom cabinetry",siding:"Exterior wall cladding and weatherproofing"})[p]||`Surfaces and elements of type: ${p}`,h=()=>{r("/swatchbook")},f=()=>u.jsx("div",{className:"space-y-4",children:[...Array(3)].map((p,g)=>u.jsxs("div",{className:"space-y-3",children:[u.jsx(kt,{className:"h-6 w-32"}),u.jsx("div",{className:"grid grid-cols-1 gap-3",children:[...Array(2)].map((y,v)=>u.jsxs("div",{className:"flex space-x-3",children:[u.jsx(kt,{className:"w-16 h-16 rounded"}),u.jsxs("div",{className:"flex-1 space-y-2",children:[u.jsx(kt,{className:"h-4 w-3/4"}),u.jsx(kt,{className:"h-3 w-1/2"})]})]},v))})]},g))});return t?u.jsxs(Ge,{className:e,children:[u.jsxs(vt,{className:"pb-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(St,{className:"text-lg flex items-center",children:[u.jsx(RE,{className:"h-5 w-5 mr-2"}),"Recommended for ",c(t)]}),u.jsxs(dt,{variant:"secondary",className:"text-xs",children:[i.length," swatches"]})]}),u.jsx("p",{className:"text-sm text-muted-foreground",children:d(t)})]}),u.jsxs(tt,{className:"space-y-4",children:[u.jsxs(ml,{className:"border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-950",children:[u.jsx(Zx,{className:"h-4 w-4 text-blue-600"}),u.jsx(yl,{className:"text-blue-800 dark:text-blue-200 text-sm",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{children:"Smart AI suggestions coming soon!"}),u.jsx(kce,{className:"h-4 w-4 opacity-70"})]})})]}),s?u.jsx(f,{}):i.length===0?u.jsxs("div",{className:"text-center py-6",children:[u.jsx(HU,{className:"h-8 w-8 mx-auto mb-3 text-muted-foreground opacity-50"}),u.jsx("h4",{className:"font-medium mb-2",children:"No Specific Recommendations"}),u.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["No swatches are specifically tagged for ",c(t).toLowerCase()]}),u.jsxs(ge,{variant:"outline",size:"sm",onClick:h,children:[u.jsx(NE,{className:"h-4 w-4 mr-2"}),"View All Swatches"]})]}):u.jsxs("div",{className:"space-y-4",children:[u.jsx($Ce,{type:"multiple",defaultValue:Object.keys(a),className:"w-full",children:Object.entries(a).map(([p,g])=>u.jsxs(gH,{value:p,children:[u.jsx(mH,{className:"text-sm font-medium",children:u.jsxs("div",{className:"flex items-center justify-between w-full mr-2",children:[u.jsx("span",{children:p}),u.jsx(dt,{variant:"outline",className:"text-xs",children:g.length})]})}),u.jsx(yH,{children:u.jsxs("div",{className:"space-y-3 pt-2",children:[u.jsx(hl,{children:g.slice(0,4).map((y,v)=>u.jsx(ze.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2,delay:v*.05}},y._id))}),g.length>4&&u.jsxs(ge,{variant:"ghost",size:"sm",onClick:h,className:"w-full text-xs",children:["View ",g.length-4," more ",p.toLowerCase()," swatches",u.jsx(RU,{className:"h-3 w-3 ml-1"})]})]})})]},p))}),u.jsx("div",{className:"pt-4 border-t border-border",children:u.jsxs(ge,{variant:"outline",onClick:h,className:"w-full",children:[u.jsx(NE,{className:"h-4 w-4 mr-2"}),"View All Swatches in SwatchBook"]})})]})]})]}):u.jsxs(Ge,{className:e,children:[u.jsx(vt,{className:"pb-4",children:u.jsxs(St,{className:"text-lg flex items-center",children:[u.jsx(RE,{className:"h-5 w-5 mr-2"}),"Swatch Recommendations"]})}),u.jsx(tt,{children:u.jsxs("div",{className:"text-center py-8",children:[u.jsx(Jx,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),u.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Select a Segment"}),u.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose a segment on the canvas to see recommended swatches for that surface type"}),u.jsxs(ge,{variant:"outline",onClick:h,children:[u.jsx(ai,{className:"h-4 w-4 mr-2"}),"Browse All Swatches"]})]})})]})}var vH=["PageUp","PageDown"],xH=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],wH={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Oh="Slider",[fk,VCe,zCe]=Pg(Oh),[bH,Wje]=$s(Oh,[zCe]),[HCe,Fw]=bH(Oh),SH=w.forwardRef((t,e)=>{const{name:r,min:n=0,max:s=100,step:i=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[n],value:d,onValueChange:h=()=>{},onValueCommit:f=()=>{},inverted:p=!1,form:g,...y}=t,v=w.useRef(new Set),m=w.useRef(0),b=o==="horizontal"?WCe:qCe,[_=[],C]=Rs({prop:d,defaultProp:c,onChange:re=>{var z;(z=[...v.current][m.current])==null||z.focus(),h(re)}}),T=w.useRef(_);function O(re){const L=JCe(_,re);H(re,L)}function R(re){H(re,m.current)}function I(){const re=T.current[m.current];_[m.current]!==re&&f(_)}function H(re,L,{commit:z}={commit:!1}){const Y=tEe(i),pe=rEe(Math.round((re-n)/i)*i+n,Y),Q=eg(pe,[n,s]);C((se=[])=>{const F=YCe(se,Q,L);if(eEe(F,l*i)){m.current=F.indexOf(Q);const K=String(F)!==String(se);return K&&z&&f(F),K?F:se}else return se})}return u.jsx(HCe,{scope:t.__scopeSlider,name:r,disabled:a,min:n,max:s,valueIndexToChangeRef:m,thumbs:v.current,values:_,orientation:o,form:g,children:u.jsx(fk.Provider,{scope:t.__scopeSlider,children:u.jsx(fk.Slot,{scope:t.__scopeSlider,children:u.jsx(b,{"aria-disabled":a,"data-disabled":a?"":void 0,...y,ref:e,onPointerDown:_e(y.onPointerDown,()=>{a||(T.current=_)}),min:n,max:s,inverted:p,onSlideStart:a?void 0:O,onSlideMove:a?void 0:R,onSlideEnd:a?void 0:I,onHomeKeyDown:()=>!a&&H(n,0,{commit:!0}),onEndKeyDown:()=>!a&&H(s,_.length-1,{commit:!0}),onStepKeyDown:({event:re,direction:L})=>{if(!a){const pe=vH.includes(re.key)||re.shiftKey&&xH.includes(re.key)?10:1,Q=m.current,se=_[Q],F=i*pe*L;H(se+F,Q,{commit:!0})}}})})})})});SH.displayName=Oh;var[_H,CH]=bH(Oh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),WCe=w.forwardRef((t,e)=>{const{min:r,max:n,dir:s,inverted:i,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...d}=t,[h,f]=w.useState(null),p=rt(e,b=>f(b)),g=w.useRef(),y=Qc(s),v=y==="ltr",m=v&&!i||!v&&i;function x(b){const _=g.current||h.getBoundingClientRect(),C=[0,_.width],O=zA(C,m?[r,n]:[n,r]);return g.current=_,O(b-_.left)}return u.jsx(_H,{scope:t.__scopeSlider,startEdge:m?"left":"right",endEdge:m?"right":"left",direction:m?1:-1,size:"width",children:u.jsx(EH,{dir:y,"data-orientation":"horizontal",...d,ref:p,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const _=x(b.clientX);o==null||o(_)},onSlideMove:b=>{const _=x(b.clientX);a==null||a(_)},onSlideEnd:()=>{g.current=void 0,l==null||l()},onStepKeyDown:b=>{const C=wH[m?"from-left":"from-right"].includes(b.key);c==null||c({event:b,direction:C?-1:1})}})})}),qCe=w.forwardRef((t,e)=>{const{min:r,max:n,inverted:s,onSlideStart:i,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,d=w.useRef(null),h=rt(e,d),f=w.useRef(),p=!s;function g(y){const v=f.current||d.current.getBoundingClientRect(),m=[0,v.height],b=zA(m,p?[n,r]:[r,n]);return f.current=v,b(y-v.top)}return u.jsx(_H,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:u.jsx(EH,{"data-orientation":"vertical",...c,ref:h,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const v=g(y.clientY);i==null||i(v)},onSlideMove:y=>{const v=g(y.clientY);o==null||o(v)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:y=>{const m=wH[p?"from-bottom":"from-top"].includes(y.key);l==null||l({event:y,direction:m?-1:1})}})})}),EH=w.forwardRef((t,e)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:s,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,d=Fw(Oh,r);return u.jsx(Fe.span,{...c,ref:e,onKeyDown:_e(t.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(a(h),h.preventDefault()):vH.concat(xH).includes(h.key)&&(l(h),h.preventDefault())}),onPointerDown:_e(t.onPointerDown,h=>{const f=h.target;f.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(f)?f.focus():n(h)}),onPointerMove:_e(t.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&s(h)}),onPointerUp:_e(t.onPointerUp,h=>{const f=h.target;f.hasPointerCapture(h.pointerId)&&(f.releasePointerCapture(h.pointerId),i(h))})})}),kH="SliderTrack",TH=w.forwardRef((t,e)=>{const{__scopeSlider:r,...n}=t,s=Fw(kH,r);return u.jsx(Fe.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...n,ref:e})});TH.displayName=kH;var pk="SliderRange",jH=w.forwardRef((t,e)=>{const{__scopeSlider:r,...n}=t,s=Fw(pk,r),i=CH(pk,r),o=w.useRef(null),a=rt(e,o),l=s.values.length,c=s.values.map(f=>PH(f,s.min,s.max)),d=l>1?Math.min(...c):0,h=100-Math.max(...c);return u.jsx(Fe.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...n,ref:a,style:{...t.style,[i.startEdge]:d+"%",[i.endEdge]:h+"%"}})});jH.displayName=pk;var gk="SliderThumb",AH=w.forwardRef((t,e)=>{const r=VCe(t.__scopeSlider),[n,s]=w.useState(null),i=rt(e,a=>s(a)),o=w.useMemo(()=>n?r().findIndex(a=>a.ref.current===n):-1,[r,n]);return u.jsx(GCe,{...t,ref:i,index:o})}),GCe=w.forwardRef((t,e)=>{const{__scopeSlider:r,index:n,name:s,...i}=t,o=Fw(gk,r),a=CH(gk,r),[l,c]=w.useState(null),d=rt(e,x=>c(x)),h=l?o.form||!!l.closest("form"):!0,f=sw(l),p=o.values[n],g=p===void 0?0:PH(p,o.min,o.max),y=XCe(n,o.values.length),v=f==null?void 0:f[a.size],m=v?ZCe(v,g,a.direction):0;return w.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),u.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${g}% + ${m}px)`},children:[u.jsx(fk.ItemSlot,{scope:t.__scopeSlider,children:u.jsx(Fe.span,{role:"slider","aria-label":t["aria-label"]||y,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:d,style:p===void 0?{display:"none"}:t.style,onFocus:_e(t.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),h&&u.jsx(KCe,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},n)]})});AH.displayName=gk;var KCe=t=>{const{value:e,...r}=t,n=w.useRef(null),s=ow(e);return w.useEffect(()=>{const i=n.current,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(s!==e&&l){const c=new Event("input",{bubbles:!0});l.call(i,e),i.dispatchEvent(c)}},[s,e]),u.jsx("input",{style:{display:"none"},...r,ref:n,defaultValue:e})};function YCe(t=[],e,r){const n=[...t];return n[r]=e,n.sort((s,i)=>s-i)}function PH(t,e,r){const i=100/(r-e)*(t-e);return eg(i,[0,100])}function XCe(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function JCe(t,e){if(t.length===1)return 0;const r=t.map(s=>Math.abs(s-e)),n=Math.min(...r);return r.indexOf(n)}function ZCe(t,e,r){const n=t/2,i=zA([0,50],[0,n]);return(n-i(e)*r)*r}function QCe(t){return t.slice(0,-1).map((e,r)=>t[r+1]-e)}function eEe(t,e){if(e>0){const r=QCe(t);return Math.min(...r)>=e}return!0}function zA(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(t[1]-t[0]);return e[0]+n*(r-t[0])}}function tEe(t){return(String(t).split(".")[1]||"").length}function rEe(t,e){const r=Math.pow(10,e);return Math.round(t*r)/r}var NH=SH,nEe=TH,sEe=jH,iEe=AH;const RH=w.forwardRef(({className:t,...e},r)=>u.jsxs(NH,{ref:r,className:xe("relative flex w-full touch-none select-none items-center",t),...e,children:[u.jsx(nEe,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:u.jsx(sEe,{className:"absolute h-full bg-primary"})}),u.jsx(iEe,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));RH.displayName=NH.displayName;const oEe=[{value:"modern",label:"Modern",description:"Clean, minimalist design"},{value:"classic",label:"Classic",description:"Traditional, timeless style"},{value:"industrial",label:"Industrial",description:"Raw, urban aesthetic"},{value:"scandinavian",label:"Scandinavian",description:"Light, natural, cozy"},{value:"mediterranean",label:"Mediterranean",description:"Warm, coastal vibes"},{value:"contemporary",label:"Contemporary",description:"Current, trendy design"}],aEe=[{id:"roof",label:"Roof",description:"Keep original roof structure"},{id:"windows",label:"Windows",description:"Preserve window placement"},{id:"doors",label:"Doors",description:"Maintain door positions"},{id:"landscaping",label:"Landscaping",description:"Keep garden elements"},{id:"driveway",label:"Driveway",description:"Preserve driveway layout"},{id:"fence",label:"Fence",description:"Keep existing fencing"}],lEe=[{value:"warm",label:"Warm",color:"bg-orange-500"},{value:"cool",label:"Cool",color:"bg-blue-500"},{value:"neutral",label:"Neutral",color:"bg-gray-500"},{value:"vibrant",label:"Vibrant",color:"bg-purple-500"},{value:"earthy",label:"Earthy",color:"bg-green-600"}];function cEe({designSettings:t,isJobRunning:e,canEdit:r,jobError:n,currentJob:s,onStyleChange:i,onLevelChange:o,onPreserveToggle:a,onToneChange:l,onIntensityChange:c}){return u.jsxs(u.Fragment,{children:[e&&u.jsxs(ml,{className:"border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-950",children:[u.jsx(Zx,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),u.jsx(yl,{className:"text-blue-800 dark:text-blue-200",children:"AI is processing your design... This may take a few minutes."})]}),s&&n&&u.jsxs(ml,{variant:"destructive",children:[u.jsx(B2,{className:"h-4 w-4"}),u.jsx(yl,{children:n||"AI processing failed. Please try again."})]}),u.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(ai,{className:"h-4 w-4 text-primary"}),u.jsx(Rr,{className:"text-sm font-medium",children:"Style"})]}),u.jsxs(bc,{value:t.style,onValueChange:i,disabled:e||!r,children:[u.jsx(nl,{className:"w-full",children:u.jsx(Sc,{placeholder:"Select a style"})}),u.jsx(sl,{children:oEe.map(d=>u.jsx(ki,{value:d.value,children:u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:d.label}),u.jsx("div",{className:"text-xs text-muted-foreground",children:d.description})]})},d.value))})]})]}),u.jsx(Gr,{}),u.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Jx,{className:"h-4 w-4 text-primary"}),u.jsx(Rr,{className:"text-sm font-medium",children:"Processing Level"})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border bg-muted/30",children:[u.jsxs("div",{className:"space-y-1",children:[u.jsxs("div",{className:"text-sm font-medium",children:["Level ",t.level]}),u.jsx("div",{className:"text-xs text-muted-foreground",children:t.level===1?"Basic processing":"Advanced processing"})]}),u.jsx(jj,{checked:t.level===2,onCheckedChange:o,disabled:e||!r})]})]}),u.jsx(Gr,{}),u.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Jc,{className:"h-4 w-4 text-primary"}),u.jsx(Rr,{className:"text-sm font-medium",children:"Preserve Objects"})]}),u.jsx("div",{className:"space-y-3",children:aEe.map(d=>u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(OA,{id:d.id,checked:t.preserve.includes(d.id),onCheckedChange:()=>a(d.id),disabled:e||!r}),u.jsxs("div",{className:"flex-1",children:[u.jsx(Rr,{htmlFor:d.id,className:"text-sm font-medium cursor-pointer",children:d.label}),u.jsx("p",{className:"text-xs text-muted-foreground",children:d.description})]})]},d.id))})]}),u.jsx(Gr,{}),u.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(ai,{className:"h-4 w-4 text-primary"}),u.jsx(Rr,{className:"text-sm font-medium",children:"Color Tone"})]}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:lEe.map(d=>u.jsx("button",{onClick:()=>l(d.value),disabled:e||!r,className:xe("p-3 rounded-lg border text-left transition-all",t.tone===d.value?"border-primary bg-primary/5":"border-border hover:border-primary/50 bg-muted/30",(e||!r)&&"opacity-50 cursor-not-allowed"),children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:xe("w-3 h-3 rounded-full",d.color)}),u.jsx("span",{className:"text-sm font-medium",children:d.label})]})},d.value))})]}),u.jsx(Gr,{}),u.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(YU,{className:"h-4 w-4 text-primary"}),u.jsx(Rr,{className:"text-sm font-medium",children:"Intensity"})]}),u.jsxs(dt,{variant:"secondary",children:[t.intensity,"%"]})]}),u.jsx(RH,{value:[t.intensity],onValueChange:d=>c(d[0]),max:100,step:5,className:"w-full",disabled:e||!r}),u.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[u.jsx("span",{children:"Subtle"}),u.jsx("span",{children:"Dramatic"})]})]})]})}function uEe({activeTab:t,onTabChange:e,projectId:r,selectedSegmentType:n,designSettings:s,isJobRunning:i,canEdit:o,jobError:a,currentJob:l,onStyleChange:c,onLevelChange:d,onPreserveToggle:h,onToneChange:f,onIntensityChange:p}){return u.jsxs(TA,{value:t,onValueChange:e,className:"flex-1 flex flex-col",children:[u.jsx("div",{className:"px-4 pt-2 flex-shrink-0",children:u.jsxs(Rw,{className:"grid w-full grid-cols-5 h-9",children:[u.jsx(In,{value:"design",className:"text-xs p-1",children:u.jsx(ai,{className:"h-3 w-3"})}),u.jsx(In,{value:"segments",className:"text-xs p-1",children:u.jsx(hv,{className:"h-3 w-3"})}),u.jsx(In,{value:"swatches",className:"text-xs p-1",children:u.jsx(RE,{className:"h-3 w-3"})}),u.jsx(In,{value:"history",className:"text-xs p-1",children:u.jsx(Cce,{className:"h-3 w-3"})}),u.jsx(In,{value:"activity",className:"text-xs p-1",children:u.jsx(Xo,{className:"h-3 w-3"})})]})}),u.jsx(qg,{className:"flex-1 px-4",children:u.jsxs("div",{className:"py-4 space-y-6",children:[u.jsx(Qs,{value:"design",className:"space-y-6 mt-0",children:u.jsx(cEe,{designSettings:s,isJobRunning:i,canEdit:o,jobError:a,currentJob:l,onStyleChange:c,onLevelChange:d,onPreserveToggle:h,onToneChange:f,onIntensityChange:p})}),u.jsx(Qs,{value:"segments",className:"space-y-4 mt-0",children:r&&u.jsx(yCe,{projectId:r})}),u.jsx(Qs,{value:"swatches",className:"mt-0",children:u.jsx(UCe,{selectedSegmentType:n})}),u.jsx(Qs,{value:"history",className:"mt-0"}),u.jsx(Qs,{value:"activity",className:"mt-0",children:r&&u.jsx(TCe,{projectId:r})})]})})]})}function $(t,e,r){return(e=function(n){var s=function(i,o){if(typeof i!="object"||!i)return i;var a=i[Symbol.toPrimitive];if(a!==void 0){var l=a.call(i,o||"default");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(i)}(n,"string");return typeof s=="symbol"?s:s+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function M3(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function V(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?M3(Object(r),!0).forEach(function(n){$(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M3(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gt(t,e){if(t==null)return{};var r,n,s=function(o,a){if(o==null)return{};var l={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(a.indexOf(c)>=0)continue;l[c]=o[c]}return l}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function To(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}class I3{constructor(){$(this,"browserShadowBlurConstant",1),$(this,"DPI",96),$(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),$(this,"perfLimitSizeTotal",2097152),$(this,"maxCacheSideLimit",4096),$(this,"minCacheSideLimit",256),$(this,"disableStyleCopyPaste",!1),$(this,"enableGLFiltering",!0),$(this,"textureSize",4096),$(this,"forceGLPutImageData",!1),$(this,"cachesBoundsOfCurve",!1),$(this,"fontPaths",{}),$(this,"NUM_FRACTION_DIGITS",4)}}const Et=new class extends I3{constructor(t){super(),this.configure(t)}configure(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,t)}addFonts(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=V(V({},this.fontPaths),t)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(t=>{delete this.fontPaths[t]})}clearFonts(){this.fontPaths={}}restoreDefaults(t){const e=new I3,r=(t==null?void 0:t.reduce((n,s)=>(n[s]=e[s],n),{}))||e;this.configure(r)}},El=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return console[t]("fabric",...r)};class oo extends Error{constructor(e,r){super("fabric: ".concat(e),r)}}class OH extends oo{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class dEe{}class hEe extends dEe{testPrecision(e,r){const n="precision ".concat(r,` float;
void main(){}`),s=e.createShader(e.FRAGMENT_SHADER);return!!s&&(e.shaderSource(s,n),e.compileShader(s),!!e.getShaderParameter(s,e.COMPILE_STATUS))}queryWebGL(e){const r=e.getContext("webgl");r&&(this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(n=>this.testPrecision(r,n)),r.getExtension("WEBGL_lose_context").loseContext(),El("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const fEe={};let D3;const bo=()=>D3||(D3={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new hEe,dispose(){},copyPasteData:fEe}),Mh=()=>bo().document,Gg=()=>bo().window,MH=()=>{var t;return Math.max((t=Et.devicePixelRatio)!==null&&t!==void 0?t:Gg().devicePixelRatio,1)},hp=new class{constructor(){$(this,"charWidthsCache",{}),$(this,"boundsOfCurveCache",{})}getFontCache(t){let{fontFamily:e,fontStyle:r,fontWeight:n}=t;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const s=this.charWidthsCache[e],i="".concat(r.toLowerCase(),"_").concat((n+"").toLowerCase());return s[i]||(s[i]={}),s[i]}clearFontCache(t){(t=(t||"").toLowerCase())?this.charWidthsCache[t]&&delete this.charWidthsCache[t]:this.charWidthsCache={}}limitDimsByArea(t){const{perfLimitSizeTotal:e}=Et,r=Math.sqrt(e*t);return[Math.floor(r),Math.floor(e/r)]}},mk="6.7.0";function kc(){}const kl=Math.PI/2,ya=2*Math.PI,HA=Math.PI/180,Bn=Object.freeze([1,0,0,1,0,0]),WA=16,Pa=.4477152502,ct="center",jt="left",as="top",yk="bottom",hr="right",ls="none",qA=/\r?\n/,IH="moving",Lw="scaling",DH="rotating",GA="rotate",FH="skewing",ug="resizing",pEe="modifyPoly",gEe="modifyPath",Vv="changed",Bw="scale",$n="scaleX",Ds="scaleY",Ih="skewX",Dh="skewY",Dr="fill",cs="stroke",zv="modified",Ru="json",S_="svg",Me=new class{constructor(){this[Ru]=new Map,this[S_]=new Map}has(t){return this[Ru].has(t)}getClass(t){const e=this[Ru].get(t);if(!e)throw new oo("No class registered for ".concat(t));return e}setClass(t,e){e?this[Ru].set(e,t):(this[Ru].set(t.type,t),this[Ru].set(t.type.toLowerCase(),t))}getSVGClass(t){return this[S_].get(t)}setSVGClass(t,e){this[S_].set(e??t.type.toLowerCase(),t)}},Hv=new class extends Array{remove(t){const e=this.indexOf(t);e>-1&&this.splice(e,1)}cancelAll(){const t=this.splice(0);return t.forEach(e=>e.abort()),t}cancelByCanvas(t){if(!t)return[];const e=this.filter(r=>{var n;return r.target===t||typeof r.target=="object"&&((n=r.target)===null||n===void 0?void 0:n.canvas)===t});return e.forEach(r=>r.abort()),e}cancelByTarget(t){if(!t)return[];const e=this.filter(r=>r.target===t);return e.forEach(r=>r.abort()),e}};class mEe{constructor(){$(this,"__eventListeners",{})}on(e,r){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(n=>{let[s,i]=n;this.on(s,i)}),()=>this.off(e);if(r){const n=e;return this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(r),()=>this.off(n,r)}return()=>!1}once(e,r){if(typeof e=="object"){const n=[];return Object.entries(e).forEach(s=>{let[i,o]=s;n.push(this.once(i,o))}),()=>n.forEach(s=>s())}if(r){const n=this.on(e,function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];r.call(this,...i),n()});return n}return()=>!1}_removeEventListener(e,r){if(this.__eventListeners[e])if(r){const n=this.__eventListeners[e],s=n.indexOf(r);s>-1&&n.splice(s,1)}else this.__eventListeners[e]=[]}off(e,r){if(this.__eventListeners)if(e===void 0)for(const n in this.__eventListeners)this._removeEventListener(n);else typeof e=="object"?Object.entries(e).forEach(n=>{let[s,i]=n;this._removeEventListener(s,i)}):this._removeEventListener(e,r)}fire(e,r){var n;if(!this.__eventListeners)return;const s=(n=this.__eventListeners[e])===null||n===void 0?void 0:n.concat();if(s)for(let i=0;i<s.length;i++)s[i].call(this,r||{})}}const nc=(t,e)=>{const r=t.indexOf(e);return r!==-1&&t.splice(r,1),t},$i=t=>{if(t===0)return 1;switch(Math.abs(t)/kl){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)},Ui=t=>{if(t===0)return 0;const e=t/kl,r=Math.sign(t);switch(e){case 1:return r;case 2:return 0;case 3:return-r}return Math.sin(t)};class X{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=r)}add(e){return new X(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new X(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new X(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new X(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new X(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new X(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new X(this.x/e.x,this.y/e.y)}scalarDivide(e){return new X(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return r=Math.max(Math.min(1,r),0),new X(this.x+(e.x-this.x)*r,this.y+(e.y-this.y)*r)}distanceFrom(e){const r=this.x-e.x,n=this.y-e.y;return Math.sqrt(r*r+n*n)}midPointFrom(e){return this.lerp(e)}min(e){return new X(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new X(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,r){return this.x=e,this.y=r,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const r=this.x,n=this.y;this.x=e.x,this.y=e.y,e.x=r,e.y=n}clone(){return new X(this.x,this.y)}rotate(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:KA;const n=Ui(e),s=$i(e),i=this.subtract(r);return new X(i.x*s-i.y*n,i.x*n+i.y*s).add(r)}transform(e){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new X(e[0]*this.x+e[2]*this.y+(r?0:e[4]),e[1]*this.x+e[3]*this.y+(r?0:e[5]))}}const KA=new X(0,0),Xy=t=>!!t&&Array.isArray(t._objects);function LH(t){class e extends t{constructor(){super(...arguments),$(this,"_objects",[])}_onObjectAdded(n){}_onObjectRemoved(n){}_onStackOrderChanged(n){}add(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];const o=this._objects.push(...s);return s.forEach(a=>this._onObjectAdded(a)),o}insertAt(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),o=1;o<s;o++)i[o-1]=arguments[o];return this._objects.splice(n,0,...i),i.forEach(a=>this._onObjectAdded(a)),this._objects.length}remove(){const n=this._objects,s=[];for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return o.forEach(l=>{const c=n.indexOf(l);c!==-1&&(n.splice(c,1),s.push(l),this._onObjectRemoved(l))}),s}forEachObject(n){this.getObjects().forEach((s,i,o)=>n(s,i,o))}getObjects(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return s.length===0?[...this._objects]:this._objects.filter(o=>o.isType(...s))}item(n){return this._objects[n]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(n,s){return!!this._objects.includes(n)||!!s&&this._objects.some(i=>i instanceof e&&i.contains(n,!0))}complexity(){return this._objects.reduce((n,s)=>n+=s.complexity?s.complexity():0,0)}sendObjectToBack(n){return!(!n||n===this._objects[0])&&(nc(this._objects,n),this._objects.unshift(n),this._onStackOrderChanged(n),!0)}bringObjectToFront(n){return!(!n||n===this._objects[this._objects.length-1])&&(nc(this._objects,n),this._objects.push(n),this._onStackOrderChanged(n),!0)}sendObjectBackwards(n,s){if(!n)return!1;const i=this._objects.indexOf(n);if(i!==0){const o=this.findNewLowerIndex(n,i,s);return nc(this._objects,n),this._objects.splice(o,0,n),this._onStackOrderChanged(n),!0}return!1}bringObjectForward(n,s){if(!n)return!1;const i=this._objects.indexOf(n);if(i!==this._objects.length-1){const o=this.findNewUpperIndex(n,i,s);return nc(this._objects,n),this._objects.splice(o,0,n),this._onStackOrderChanged(n),!0}return!1}moveObjectTo(n,s){return n!==this._objects[s]&&(nc(this._objects,n),this._objects.splice(s,0,n),this._onStackOrderChanged(n),!0)}findNewLowerIndex(n,s,i){let o;if(i){o=s;for(let a=s-1;a>=0;--a)if(n.isOverlapping(this._objects[a])){o=a;break}}else o=s-1;return o}findNewUpperIndex(n,s,i){let o;if(i){o=s;for(let a=s+1;a<this._objects.length;++a)if(n.isOverlapping(this._objects[a])){o=a;break}}else o=s+1;return o}collectObjects(n){let{left:s,top:i,width:o,height:a}=n,{includeIntersecting:l=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=[],d=new X(s,i),h=d.add(new X(o,a));for(let f=this._objects.length-1;f>=0;f--){const p=this._objects[f];p.selectable&&p.visible&&(l&&p.intersectsWithRect(d,h)||p.isContainedWithinRect(d,h)||l&&p.containsPoint(d)||l&&p.containsPoint(h))&&c.push(p)}return c}}return e}class BH extends mEe{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const r in e)this.set(r,e[r])}_setObject(e){for(const r in e)this._set(r,e[r])}set(e,r){return typeof e=="object"?this._setObject(e):this._set(e,r),this}_set(e,r){this[e]=r}toggle(e){const r=this.get(e);return typeof r=="boolean"&&this.set(e,!r),this}get(e){return this[e]}}function fp(t){return Gg().requestAnimationFrame(t)}function $H(t){return Gg().cancelAnimationFrame(t)}let yEe=0;const Tl=()=>yEe++,So=()=>{const t=Mh().createElement("canvas");if(!t||t.getContext===void 0)throw new oo("Failed to create `canvas` element");return t},UH=()=>Mh().createElement("img"),Fs=t=>{const e=So();return e.width=t.width,e.height=t.height,e},YA=(t,e,r)=>t.toDataURL("image/".concat(e),r),XA=(t,e,r)=>new Promise((n,s)=>{t.toBlob(n,"image/".concat(e),r)}),or=t=>t*HA,_o=t=>t/HA,VH=t=>t.every((e,r)=>e===Bn[r]),yn=(t,e,r)=>new X(t).transform(e,r),_s=t=>{const e=1/(t[0]*t[3]-t[1]*t[2]),r=[e*t[3],-e*t[1],-e*t[2],e*t[0],0,0],{x:n,y:s}=new X(t[4],t[5]).transform(r,!0);return r[4]=-n,r[5]=-s,r},_r=(t,e,r)=>[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],r?0:t[0]*e[4]+t[2]*e[5]+t[4],r?0:t[1]*e[4]+t[3]*e[5]+t[5]],$w=(t,e)=>t.reduceRight((r,n)=>n&&r?_r(n,r,e):n||r,void 0)||Bn.concat(),zH=t=>{let[e,r]=t;return Math.atan2(r,e)},eh=t=>{const e=zH(t),r=Math.pow(t[0],2)+Math.pow(t[1],2),n=Math.sqrt(r),s=(t[0]*t[3]-t[2]*t[1])/n,i=Math.atan2(t[0]*t[2]+t[1]*t[3],r);return{angle:_o(e),scaleX:n,scaleY:s,skewX:_o(i),skewY:0,translateX:t[4]||0,translateY:t[5]||0}},Fh=function(t){return[1,0,0,1,t,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function fu(){let{angle:t=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:r=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=or(t),s=$i(n),i=Ui(n);return[s,i,-i,s,e?e-(s*e-i*r):0,r?r-(i*e+s*r):0]}const Uw=function(t){return[t,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,0,0]},HH=t=>Math.tan(or(t)),JA=t=>[1,0,HH(t),1,0,0],ZA=t=>[1,HH(t),0,1,0,0],Kg=t=>{let{scaleX:e=1,scaleY:r=1,flipX:n=!1,flipY:s=!1,skewX:i=0,skewY:o=0}=t,a=Uw(n?-e:e,s?-r:r);return i&&(a=_r(a,JA(i),!0)),o&&(a=_r(a,ZA(o),!0)),a},WH=t=>{const{translateX:e=0,translateY:r=0,angle:n=0}=t;let s=Fh(e,r);n&&(s=_r(s,fu({angle:n})));const i=Kg(t);return VH(i)||(s=_r(s,i)),s},pp=function(t){let{signal:e,crossOrigin:r=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(n,s){if(e&&e.aborted)return s(new OH("loadImage"));const i=UH();let o;e&&(o=function(l){i.src="",s(l)},e.addEventListener("abort",o,{once:!0}));const a=function(){i.onload=i.onerror=null,o&&(e==null||e.removeEventListener("abort",o)),n(i)};t?(i.onload=a,i.onerror=function(){o&&(e==null||e.removeEventListener("abort",o)),s(new oo("Error loading ".concat(i.src)))},r&&(i.crossOrigin=r),i.src=t):a()})},th=function(t){let{signal:e,reviver:r=kc}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((n,s)=>{const i=[];e&&e.addEventListener("abort",s,{once:!0}),Promise.all(t.map(o=>Me.getClass(o.type).fromObject(o,{signal:e}).then(a=>(r(o,a),i.push(a),a)))).then(n).catch(o=>{i.forEach(a=>{a.dispose&&a.dispose()}),s(o)}).finally(()=>{e&&e.removeEventListener("abort",s)})})},Yg=function(t){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((r,n)=>{const s=[];e&&e.addEventListener("abort",n,{once:!0});const i=Object.values(t).map(a=>a&&a.type&&Me.has(a.type)?th([a],{signal:e}).then(l=>{let[c]=l;return s.push(c),c}):a),o=Object.keys(t);Promise.all(i).then(a=>a.reduce((l,c,d)=>(l[o[d]]=c,l),{})).then(r).catch(a=>{s.forEach(l=>{l.dispose&&l.dispose()}),n(a)}).finally(()=>{e&&e.removeEventListener("abort",n)})})},pu=function(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,r)=>(r in t&&(e[r]=t[r]),e),{})},QA=(t,e)=>Object.keys(t).reduce((r,n)=>(e(t[n],n,t)&&(r[n]=t[n]),r),{}),Dt=(t,e)=>parseFloat(Number(t).toFixed(e)),rh=t=>"matrix("+t.map(e=>Dt(e,Et.NUM_FRACTION_DIGITS)).join(" ")+")",ei=t=>!!t&&t.toLive!==void 0,F3=t=>!!t&&typeof t.toObject=="function",L3=t=>!!t&&t.offsetX!==void 0&&"source"in t,sc=t=>!!t&&"multiSelectionStacking"in t;function qH(t){const e=t&&Pi(t);let r=0,n=0;if(!t||!e)return{left:r,top:n};let s=t;const i=e.documentElement,o=e.body||{scrollLeft:0,scrollTop:0};for(;s&&(s.parentNode||s.host)&&(s=s.parentNode||s.host,s===e?(r=o.scrollLeft||i.scrollLeft||0,n=o.scrollTop||i.scrollTop||0):(r+=s.scrollLeft||0,n+=s.scrollTop||0),s.nodeType!==1||s.style.position!=="fixed"););return{left:r,top:n}}const Pi=t=>t.ownerDocument||null,GH=t=>{var e;return((e=t.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},KH=function(t,e,r){let{width:n,height:s}=r,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;t.width=n,t.height=s,i>1&&(t.setAttribute("width",(n*i).toString()),t.setAttribute("height",(s*i).toString()),e.scale(i,i))},vk=(t,e)=>{let{width:r,height:n}=e;r&&(t.style.width=typeof r=="number"?"".concat(r,"px"):r),n&&(t.style.height=typeof n=="number"?"".concat(n,"px"):n)};function B3(t){return t.onselectstart!==void 0&&(t.onselectstart=()=>!1),t.style.userSelect=ls,t}class YH{constructor(e){$(this,"_originalCanvasStyle",void 0),$(this,"lower",void 0);const r=this.createLowerCanvas(e);this.lower={el:r,ctx:r.getContext("2d")}}createLowerCanvas(e){const r=(n=e)&&n.getContext!==void 0?e:e&&Mh().getElementById(e)||So();var n;if(r.hasAttribute("data-fabric"))throw new oo("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=r.style.cssText,r.setAttribute("data-fabric","main"),r.classList.add("lower-canvas"),r}cleanupDOM(e){let{width:r,height:n}=e;const{el:s}=this.lower;s.classList.remove("lower-canvas"),s.removeAttribute("data-fabric"),s.setAttribute("width","".concat(r)),s.setAttribute("height","".concat(n)),s.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,r){const{el:n,ctx:s}=this.lower;KH(n,s,e,r)}setCSSDimensions(e){vk(this.lower.el,e)}calcOffset(){return function(e){var r;const n=e&&Pi(e),s={left:0,top:0};if(!n)return s;const i=((r=GH(e))===null||r===void 0?void 0:r.getComputedStyle(e,null))||{};s.left+=parseInt(i.borderLeftWidth,10)||0,s.top+=parseInt(i.borderTopWidth,10)||0,s.left+=parseInt(i.paddingLeft,10)||0,s.top+=parseInt(i.paddingTop,10)||0;let o={left:0,top:0};const a=n.documentElement;e.getBoundingClientRect!==void 0&&(o=e.getBoundingClientRect());const l=qH(e);return{left:o.left+l.left-(a.clientLeft||0)+s.left,top:o.top+l.top-(a.clientTop||0)+s.top}}(this.lower.el)}dispose(){bo().dispose(this.lower.el),delete this.lower}}const vEe={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...Bn]};class Xg extends LH(BH){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return Xg.ownDefaults}constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(r),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new YH(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];const i=super.insertAt(e,...n);return n.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),i}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(El("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?MH():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,r){return this.setDimensions({width:e},r)}setHeight(e,r){return this.setDimensions({height:e},r)}_setDimensionsImpl(e){let{cssOnly:r=!1,backstoreOnly:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!r){const s=V({width:this.width,height:this.height},e);this.elements.setDimensions(s,this.getRetinaScaling()),this.hasLostContext=!0,this.width=s.width,this.height=s.height}n||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,r){this._setDimensionsImpl(e,r),r&&r.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,r){const n=e,s=[...this.viewportTransform],i=yn(e,_s(s));s[0]=r,s[3]=r;const o=yn(i,s);s[4]+=n.x-o.x,s[5]+=n.y-o.y,this.setViewportTransform(s)}setZoom(e){this.zoomToPoint(new X(0,0),e)}absolutePan(e){const r=[...this.viewportTransform];return r[4]=-e.x,r[5]=-e.y,this.setViewportTransform(r)}relativePan(e){return this.absolutePan(new X(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=fp(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,r=this.height,n=_s(this.viewportTransform),s=yn({x:0,y:0},n),i=yn({x:e,y:r},n),o=s.min(i),a=s.max(i);return this.vptCoords={tl:o,tr:new X(a.x,o.y),bl:new X(o.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&($H(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,r){if(this.destroyed)return;const n=this.viewportTransform,s=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(e,r),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),s&&(s._set("canvas",this),s.shouldCache(),s._transformDone=!0,s.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,s)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,r){const n=this.viewportTransform;e.save(),e.transform(...n),e.globalCompositeOperation="destination-in",r.transform(e),e.scale(1/r.zoomX,1/r.zoomY),e.drawImage(r._cacheCanvas,-r.cacheTranslationX,-r.cacheTranslationY),e.restore()}_renderObjects(e,r){for(let n=0,s=r.length;n<s;++n)r[n]&&r[n].render(e)}_renderBackgroundOrOverlay(e,r){const n=this["".concat(r,"Color")],s=this["".concat(r,"Image")],i=this.viewportTransform,o=this["".concat(r,"Vpt")];if(!n&&!s)return;const a=ei(n);if(n){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=a?n.toLive(e):n,o&&e.transform(...i),a){e.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);const l=n.gradientTransform||n.patternTransform;l&&e.transform(...l)}e.fill(),e.restore()}if(s){e.save();const{skipOffscreen:l}=this;this.skipOffscreen=o,o&&e.transform(...i),s.render(e),this.skipOffscreen=l,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new X(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new X(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new X(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new X(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new X(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return yn(this.getCenterPoint(),_s(this.viewportTransform))}_centerObject(e,r){e.setXY(r,ct,ct),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,r){const n=this.clipPath,s=n&&!n.excludeFromExport?this._toObject(n,e,r):null;return V(V(V({version:mk},pu(this,r)),{},{objects:this._objects.filter(i=>!i.excludeFromExport).map(i=>this._toObject(i,e,r))},this.__serializeBgOverlay(e,r)),s?{clipPath:s}:null)}_toObject(e,r,n){let s;this.includeDefaultValues||(s=e.includeDefaultValues,e.includeDefaultValues=!1);const i=e[r](n);return this.includeDefaultValues||(e.includeDefaultValues=!!s),i}__serializeBgOverlay(e,r){const n={},s=this.backgroundImage,i=this.overlayImage,o=this.backgroundColor,a=this.overlayColor;return ei(o)?o.excludeFromExport||(n.background=o.toObject(r)):o&&(n.background=o),ei(a)?a.excludeFromExport||(n.overlay=a.toObject(r)):a&&(n.overlay=a),s&&!s.excludeFromExport&&(n.backgroundImage=this._toObject(s,e,r)),i&&!i.excludeFromExport&&(n.overlayImage=this._toObject(i,e,r)),n}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;e.reviver=r;const n=[];return this._setSVGPreamble(n,e),this._setSVGHeader(n,e),this.clipPath&&n.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",r),this._setSVGObjects(n,r),this.clipPath&&n.push(`</g>
`),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",r),n.push("</svg>"),n.join("")}_setSVGPreamble(e,r){r.suppressPreamble||e.push('<?xml version="1.0" encoding="',r.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,r){const n=r.width||"".concat(this.width),s=r.height||"".concat(this.height),i=Et.NUM_FRACTION_DIGITS,o=r.viewBox;let a;if(o)a='viewBox="'.concat(o.x," ").concat(o.y," ").concat(o.width," ").concat(o.height,'" ');else if(this.svgViewportTransformation){const l=this.viewportTransform;a='viewBox="'.concat(Dt(-l[4]/l[0],i)," ").concat(Dt(-l[5]/l[3],i)," ").concat(Dt(this.width/l[0],i)," ").concat(Dt(this.height/l[3],i),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',s,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",mk,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(r),`</defs>
`)}createSVGClipPathMarkup(e){const r=this.clipPath;return r?(r.clipPathId="CLIPPATH_".concat(Tl()),'<clipPath id="'.concat(r.clipPathId,`" >
`).concat(r.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const r=this["".concat(e,"Color")];if(ei(r)){const n=this["".concat(e,"Vpt")],s=this.viewportTransform,i={isType:()=>!1,width:this.width/(n?s[0]:1),height:this.height/(n?s[3]:1)};return r.toSVG(i,{additionalTransform:n?rh(s):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],r={},n=Et.fontPaths;this._objects.forEach(function i(o){e.push(o),Xy(o)&&o._objects.forEach(i)}),e.forEach(i=>{if(!(o=i)||typeof o._renderText!="function")return;var o;const{styles:a,fontFamily:l}=i;!r[l]&&n[l]&&(r[l]=!0,a&&Object.values(a).forEach(c=>{Object.values(c).forEach(d=>{let{fontFamily:h=""}=d;!r[h]&&n[h]&&(r[h]=!0)})}))});const s=Object.keys(r).map(i=>`		@font-face {
			font-family: '`.concat(i,`';
			src: url('`).concat(n[i],`');
		}
`)).join("");return s?`	<style type="text/css"><![CDATA[
`.concat(s,`]]></style>
`):""}_setSVGObjects(e,r){this.forEachObject(n=>{n.excludeFromExport||this._setSVGObject(e,n,r)})}_setSVGObject(e,r,n){e.push(r.toSVG(n))}_setSVGBgOverlayImage(e,r,n){const s=this[r];s&&!s.excludeFromExport&&s.toSVG&&e.push(s.toSVG(n))}_setSVGBgOverlayColor(e,r){const n=this["".concat(r,"Color")];if(n)if(ei(n)){const s=n.repeat||"",i=this.width,o=this.height,a=this["".concat(r,"Vpt")]?rh(_s(this.viewportTransform)):"";e.push('<rect transform="'.concat(a," translate(").concat(i/2,",").concat(o/2,')" x="').concat(n.offsetX-i/2,'" y="').concat(n.offsetY-o/2,'" width="').concat(s!=="repeat-y"&&s!=="no-repeat"||!L3(n)?i:n.source.width,'" height="').concat(s!=="repeat-x"&&s!=="no-repeat"||!L3(n)?o:n.source.height,'" fill="url(#SVGID_').concat(n.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',`></rect>
`)}loadFromJSON(e,r){let{signal:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new oo("`json` is undefined"));const s=typeof e=="string"?JSON.parse(e):e,{objects:i=[],backgroundImage:o,background:a,overlayImage:l,overlay:c,clipPath:d}=s,h=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([th(i,{reviver:r,signal:n}),Yg({backgroundImage:o,backgroundColor:a,overlayImage:l,overlayColor:c,clipPath:d},{signal:n})]).then(f=>{let[p,g]=f;return this.clear(),this.add(...p),this.set(s),this.set(g),this.renderOnAddRemove=h,this})}clone(e){const r=this.toObject(e);return this.cloneWithoutData().loadFromJSON(r)}cloneWithoutData(){const e=Fs(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:r="png",quality:n=1,multiplier:s=1,enableRetinaScaling:i=!1}=e,o=s*(i?this.getRetinaScaling():1);return YA(this.toCanvasElement(o,e),r,n)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:r="png",quality:n=1,multiplier:s=1,enableRetinaScaling:i=!1}=e,o=s*(i?this.getRetinaScaling():1);return XA(this.toCanvasElement(o,e),r,n)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:r,height:n,left:s,top:i,filter:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(r||this.width)*e,l=(n||this.height)*e,c=this.getZoom(),d=this.width,h=this.height,f=this.skipControlsDrawing,p=c*e,g=this.viewportTransform,y=[p,0,0,p,(g[4]-(s||0))*e,(g[5]-(i||0))*e],v=this.enableRetinaScaling,m=Fs({width:a,height:l}),x=o?this._objects.filter(b=>o(b)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=y,this.width=a,this.height=l,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(m.getContext("2d"),x),this.viewportTransform=g,this.width=d,this.height=h,this.calcViewportBoundaries(),this.enableRetinaScaling=v,this.skipControlsDrawing=f,m}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),Hv.cancelByCanvas(this),this.disposed=!0,new Promise((e,r)=>{const n=()=>{this.destroy(),e(!0)};n.kill=r,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=n:n()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}$(Xg,"ownDefaults",vEe);const xEe=["touchstart","touchmove","touchend"],XH=t=>{const e=qH(t.target),r=function(n){const s=n.changedTouches;return s&&s[0]?s[0]:n}(t);return new X(r.clientX+e.left,r.clientY+e.top)},Wv=t=>xEe.includes(t.type)||t.pointerType==="touch",$3=t=>{t.preventDefault(),t.stopPropagation()},mo=t=>{let e=0,r=0,n=0,s=0;for(let i=0,o=t.length;i<o;i++){const{x:a,y:l}=t[i];(a>n||!i)&&(n=a),(a<e||!i)&&(e=a),(l>s||!i)&&(s=l),(l<r||!i)&&(r=l)}return{left:e,top:r,width:n-e,height:s-r}},wEe=["translateX","translateY","scaleX","scaleY"],JH=(t,e)=>nh(t,_r(e,t.calcOwnMatrix())),nh=(t,e)=>{const r=eh(e),{translateX:n,translateY:s,scaleX:i,scaleY:o}=r,a=Gt(r,wEe),l=new X(n,s);t.flipX=!1,t.flipY=!1,Object.assign(t,a),t.set({scaleX:i,scaleY:o}),t.setPositionByOrigin(l,ct,ct)},ZH=t=>{t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},eP=t=>({scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}),Vw=(t,e,r)=>{const n=t/2,s=e/2,i=[new X(-n,-s),new X(n,-s),new X(-n,s),new X(n,s)].map(a=>a.transform(r)),o=mo(i);return new X(o.width,o.height)},Jg=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Bn;return _r(_s(arguments.length>1&&arguments[1]!==void 0?arguments[1]:Bn),t)},Tc=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Bn,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Bn;return t.transform(Jg(e,r))},QH=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Bn,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Bn;return t.transform(Jg(e,r),!0)},xk=(t,e,r)=>{const n=Jg(e,r);return nh(t,_r(n,t.calcOwnMatrix())),n},eW=(t,e)=>{var r;const{transform:{target:n}}=e;(r=n.canvas)===null||r===void 0||r.fire("object:".concat(t),V(V({},e),{},{target:n})),n.fire(t,e)},bEe={left:-.5,top:-.5,center:0,bottom:.5,right:.5},wr=t=>typeof t=="string"?bEe[t]:t-.5,qv="not-allowed";function tW(t){return wr(t.originX)===wr(ct)&&wr(t.originY)===wr(ct)}function U3(t){return .5-wr(t)}const Ii=(t,e)=>t[e],rW=(t,e,r,n)=>({e:t,transform:e,pointer:new X(r,n)});function nW(t,e){const r=t.getTotalAngle()+_o(Math.atan2(e.y,e.x))+360;return Math.round(r%360/45)}function tP(t,e,r,n,s){var i;let{target:o,corner:a}=t;const l=o.controls[a],c=((i=o.canvas)===null||i===void 0?void 0:i.getZoom())||1,d=o.padding/c,h=function(f,p,g,y){const v=f.getRelativeCenterPoint(),m=g!==void 0&&y!==void 0?f.translateToGivenOrigin(v,ct,ct,g,y):new X(f.left,f.top);return(f.angle?p.rotate(-or(f.angle),v):p).subtract(m)}(o,new X(n,s),e,r);return h.x>=d&&(h.x-=d),h.x<=-d&&(h.x+=d),h.y>=d&&(h.y-=d),h.y<=d&&(h.y+=d),h.x-=l.offsetX,h.y-=l.offsetY,h}const SEe=(t,e,r,n)=>{const{target:s,offsetX:i,offsetY:o}=e,a=r-i,l=n-o,c=!Ii(s,"lockMovementX")&&s.left!==a,d=!Ii(s,"lockMovementY")&&s.top!==l;return c&&s.set(jt,a),d&&s.set(as,l),(c||d)&&eW(IH,rW(t,e,r,n)),c||d},V3={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},__=(t,e,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t),z3=(t,e,r,n)=>{t/=255,e/=255,r/=255;const s=Math.max(t,e,r),i=Math.min(t,e,r);let o,a;const l=(s+i)/2;if(s===i)o=a=0;else{const c=s-i;switch(a=l>.5?c/(2-s-i):c/(s+i),s){case t:o=(e-r)/c+(e<r?6:0);break;case e:o=(r-t)/c+2;break;case r:o=(t-e)/c+4}o/=6}return[Math.round(360*o),Math.round(100*a),Math.round(100*l),n]},H3=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(t)/(t.endsWith("%")?100:1)},Hm=t=>Math.min(Math.round(t),255).toString(16).toUpperCase().padStart(2,"0"),W3=t=>{let[e,r,n,s=1]=t;const i=Math.round(.3*e+.59*r+.11*n);return[i,i,i,s]};class At{constructor(e){if($(this,"isUnrecognised",!1),e)if(e instanceof At)this.setSource([...e._source]);else if(Array.isArray(e)){const[r,n,s,i=1]=e;this.setSource([r,n,s,i])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in V3&&(e=V3[e]),e==="transparent"?[255,255,255,0]:At.sourceFromHex(e)||At.sourceFromRgb(e)||At.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,r,n]=this.getSource();return"rgb(".concat(e,",").concat(r,",").concat(n,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,r,n]=z3(...this.getSource());return"hsl(".concat(e,",").concat(r,"%,").concat(n,"%)")}toHsla(){const[e,r,n,s]=z3(...this.getSource());return"hsla(".concat(e,",").concat(r,"%,").concat(n,"%,").concat(s,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,r,n,s]=this.getSource();return"".concat(Hm(e)).concat(Hm(r)).concat(Hm(n)).concat(Hm(Math.round(255*s)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(W3(this.getSource())),this}toBlackWhite(e){const[r,,,n]=W3(this.getSource()),s=r<(e||127)?0:255;return this.setSource([s,s,s,n]),this}overlayWith(e){e instanceof At||(e=new At(e));const r=this.getSource(),n=e.getSource(),[s,i,o]=r.map((a,l)=>Math.round(.5*a+.5*n[l]));return this.setSource([s,i,o,r[3]]),this}static fromRgb(e){return At.fromRgba(e)}static fromRgba(e){return new At(At.sourceFromRgb(e))}static sourceFromRgb(e){const r=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(r){const[n,s,i]=r.slice(1,4).map(o=>{const a=parseFloat(o);return o.endsWith("%")?Math.round(2.55*a):a});return[n,s,i,H3(r[4])]}}static fromHsl(e){return At.fromHsla(e)}static fromHsla(e){return new At(At.sourceFromHsl(e))}static sourceFromHsl(e){const r=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!r)return;const n=(At.parseAngletoDegrees(r[1])%360+360)%360/360,s=parseFloat(r[2])/100,i=parseFloat(r[3])/100;let o,a,l;if(s===0)o=a=l=i;else{const c=i<=.5?i*(s+1):i+s-i*s,d=2*i-c;o=__(d,c,n+1/3),a=__(d,c,n),l=__(d,c,n-1/3)}return[Math.round(255*o),Math.round(255*a),Math.round(255*l),H3(r[4])]}static fromHex(e){return new At(At.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const r=e.slice(e.indexOf("#")+1);let n;n=r.length<=4?r.split("").map(l=>l+l):r.match(/.{2}/g);const[s,i,o,a=255]=n.map(l=>parseInt(l,16));return[s,i,o,a/255]}}static parseAngletoDegrees(e){const r=e.toLowerCase(),n=parseFloat(r);return r.includes("rad")?_o(n):r.includes("turn")?360*n:n}}const jc=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:WA;const r=/\D{0,2}$/.exec(t),n=parseFloat(t),s=Et.DPI;switch(r==null?void 0:r[0]){case"mm":return n*s/25.4;case"cm":return n*s/2.54;case"in":return n*s;case"pt":return n*s/72;case"pc":return n*s/72*12;case"em":return n*e;default:return n}},sW=t=>{const[e,r]=t.trim().split(" "),[n,s]=(i=e)&&i!==ls?[i.slice(1,4),i.slice(5,8)]:i===ls?[i,i]:["Mid","Mid"];var i;return{meetOrSlice:r||"meet",alignX:n,alignY:s}},dg=function(t,e){let r,n,s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)r="url(#SVGID_".concat(e.id,")");else{const i=new At(e),o=i.getAlpha();r=i.toRgb(),o!==1&&(n=o.toString())}else r="none";return s?"".concat(t,": ").concat(r,"; ").concat(n?"".concat(t,"-opacity: ").concat(n,"; "):""):"".concat(t,'="').concat(r,'" ').concat(n?"".concat(t,'-opacity="').concat(n,'" '):"")};class iW{getSvgStyles(e){const r=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):ls,i=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=this.opacity!==void 0?this.opacity:"1",d=this.visible?"":" visibility: hidden;",h=e?"":this.getSvgFilter(),f=dg(Dr,this.fill);return[dg(cs,this.stroke),"stroke-width: ",n,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",f,"fill-rule: ",r,"; ","opacity: ",c,";",h,d].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const n=e?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'.concat(rh(n));return"".concat(s).concat(r,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:r,additionalTransform:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),i=e.indexOf("COMMON_PARTS");return e[i]=s,r?r(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:r,reviver:n,withShadow:s,additionalTransform:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=r?"":'style="'.concat(this.getSvgStyles(),'" '),a=s?'style="'.concat(this.getSvgFilter(),'" '):"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",d=l&&l.absolutePositioned,h=this.stroke,f=this.fill,p=this.shadow,g=[],y=e.indexOf("COMMON_PARTS");let v;l&&(l.clipPathId="CLIPPATH_".concat(Tl()),v='<clipPath id="'.concat(l.clipPathId,`" >
`).concat(l.toClipPathSVG(n),`</clipPath>
`)),d&&g.push("<g ",a,this.getSvgCommons(),` >
`),g.push("<g ",this.getSvgTransform(!1),d?"":a+this.getSvgCommons(),` >
`);const m=[o,c,r?"":this.addPaintOrder()," ",i?'transform="'.concat(i,'" '):""].join("");return e[y]=m,ei(f)&&g.push(f.toSVG(this)),ei(h)&&g.push(h.toSVG(this)),p&&g.push(p.toSVG(this)),l&&g.push(v),g.push(e.join("")),g.push(`</g>
`),d&&g.push(`</g>
`),n?n(g.join("")):g.join("")}addPaintOrder(){return this.paintFirst!==Dr?' paint-order="'.concat(this.paintFirst,'" '):""}}function zw(t){return new RegExp("^("+t.join("|")+")\\b","i")}const Hc="textDecorationThickness",oW=["fontSize","fontWeight","fontFamily","fontStyle"],aW=["underline","overline","linethrough"],lW=[...oW,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],cW=[...lW,...aW,"textBackgroundColor","direction",Hc],_Ee=[...oW,...aW,cs,"strokeWidth",Dr,"deltaY","textBackgroundColor",Hc],CEe={_reNewline:qA,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:jt,fontStyle:"normal",lineHeight:1.16,textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:jt,pathAlign:"baseline",charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.28167,overline:-.81333},_fontSizeMult:1.13,[Hc]:66.667},so="justify",Gv="justify-left",gp="justify-right",mp="justify-center";var q3,G3,K3;const Ni=String.raw(q3||(q3=To(["[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?"],["[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?"]))),C_=String.raw(G3||(G3=To(["(?:s*,?s+|s*,s*)"],["(?:\\s*,?\\s+|\\s*,\\s*)"]))),EEe=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+Ni+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+Ni+"))?\\s+(.*)"),kEe={cx:jt,x:jt,r:"radius",cy:as,y:as,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing","text-decoration-thickness":Hc},E_="font-size",k_="clip-path";zw(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);zw(["symbol","image","marker","pattern","view","svg"]);const Y3=zw(["symbol","g","a","svg","clipPath","defs"]);new RegExp(String.raw(K3||(K3=To(["^s*(",")","(",")","(",")","(",")s*$"],["^\\s*(",")","(",")","(",")","(",")\\s*$"])),Ni,C_,Ni,C_,Ni,C_,Ni));const TEe=new X(1,0),uW=new X,rP=(t,e)=>t.rotate(e),Kv=(t,e)=>new X(e).subtract(t),Yv=t=>t.distanceFrom(uW),Xv=(t,e)=>Math.atan2(Td(t,e),hW(t,e)),dW=t=>Xv(TEe,t),Hw=t=>t.eq(uW)?t:t.scalarDivide(Yv(t)),nP=function(t){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return Hw(new X(-t.y,t.x).scalarMultiply(e?1:-1))},Td=(t,e)=>t.x*e.y-t.y*e.x,hW=(t,e)=>t.x*e.x+t.y*e.y,wk=(t,e,r)=>{if(t.eq(e)||t.eq(r))return!0;const n=Td(e,r),s=Td(e,t),i=Td(r,t);return n>=0?s>=0&&i<=0:!(s<=0&&i>=0)},X3="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",J3=new RegExp("(?:\\s|^)"+X3+X3+"("+Ni+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class yo{constructor(e){const r=typeof e=="string"?yo.parseShadow(e):e;Object.assign(this,yo.ownDefaults,r),this.id=Tl()}static parseShadow(e){const r=e.trim(),[,n=0,s=0,i=0]=(J3.exec(r)||[]).map(o=>parseFloat(o)||0);return{color:(r.replace(J3,"")||"rgb(0,0,0)").trim(),offsetX:n,offsetY:s,blur:i}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const r=rP(new X(this.offsetX,this.offsetY),or(-e.angle)),n=new At(this.color);let s=40,i=40;return e.width&&e.height&&(s=100*Dt((Math.abs(r.x)+this.blur)/e.width,Et.NUM_FRACTION_DIGITS)+20,i=100*Dt((Math.abs(r.y)+this.blur)/e.height,Et.NUM_FRACTION_DIGITS)+20),e.flipX&&(r.x*=-1),e.flipY&&(r.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(i,'%" height="').concat(100+2*i,'%" x="-').concat(s,'%" width="').concat(100+2*s,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(Dt(this.blur?this.blur/2:0,Et.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(Dt(r.x,Et.NUM_FRACTION_DIGITS),'" dy="').concat(Dt(r.y,Et.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(n.toRgb(),'" flood-opacity="').concat(n.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},r=yo.ownDefaults;return this.includeDefaultValues?e:QA(e,(n,s)=>n!==r[s])}static async fromObject(e){return new this(e)}}$(yo,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),$(yo,"type","shadow"),Me.setClass(yo,"shadow");const Wc=(t,e,r)=>Math.max(t,Math.min(e,r)),jEe=[as,jt,$n,Ds,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Ih,Dh],ba=[Dr,cs,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],AEe={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:jt,originY:as,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:Dr,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},T_=(t,e,r,n)=>(t<Math.abs(e)?(t=e,n=r/4):n=e===0&&t===0?r/ya*Math.asin(1):r/ya*Math.asin(e/t),{a:t,c:e,p:r,s:n}),Z3=(t,e,r,n,s)=>t*Math.pow(2,10*(n-=1))*Math.sin((n*s-e)*ya/r),fW=(t,e,r,n)=>-r*Math.cos(t/n*kl)+r+e,bk=(t,e,r,n)=>(t/=n)<1/2.75?r*(7.5625*t*t)+e:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+e:r*(7.5625*(t-=2.625/2.75)*t+.984375)+e,Q3=(t,e,r,n)=>r-bk(n-t,0,r,n)+e;var PEe=Object.freeze({__proto__:null,defaultEasing:fW,easeInBack:function(t,e,r,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return r*(t/=n)*t*((s+1)*t-s)+e},easeInBounce:Q3,easeInCirc:(t,e,r,n)=>-r*(Math.sqrt(1-(t/=n)*t)-1)+e,easeInCubic:(t,e,r,n)=>r*(t/n)**3+e,easeInElastic:(t,e,r,n)=>{const s=r;let i=0;if(t===0)return e;if((t/=n)===1)return e+r;i||(i=.3*n);const{a:o,s:a,p:l}=T_(s,r,i,1.70158);return-Z3(o,a,l,t,n)+e},easeInExpo:(t,e,r,n)=>t===0?e:r*2**(10*(t/n-1))+e,easeInOutBack:function(t,e,r,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return(t/=n/2)<1?r/2*(t*t*((1+(s*=1.525))*t-s))+e:r/2*((t-=2)*t*((1+(s*=1.525))*t+s)+2)+e},easeInOutBounce:(t,e,r,n)=>t<n/2?.5*Q3(2*t,0,r,n)+e:.5*bk(2*t-n,0,r,n)+.5*r+e,easeInOutCirc:(t,e,r,n)=>(t/=n/2)<1?-r/2*(Math.sqrt(1-t**2)-1)+e:r/2*(Math.sqrt(1-(t-=2)*t)+1)+e,easeInOutCubic:(t,e,r,n)=>(t/=n/2)<1?r/2*t**3+e:r/2*((t-2)**3+2)+e,easeInOutElastic:(t,e,r,n)=>{const s=r;let i=0;if(t===0)return e;if((t/=n/2)===2)return e+r;i||(i=n*(.3*1.5));const{a:o,s:a,p:l,c}=T_(s,r,i,1.70158);return t<1?-.5*Z3(o,a,l,t,n)+e:o*Math.pow(2,-10*(t-=1))*Math.sin((t*n-a)*ya/l)*.5+c+e},easeInOutExpo:(t,e,r,n)=>t===0?e:t===n?e+r:(t/=n/2)<1?r/2*2**(10*(t-1))+e:r/2*-(2**(-10*--t)+2)+e,easeInOutQuad:(t,e,r,n)=>(t/=n/2)<1?r/2*t**2+e:-r/2*(--t*(t-2)-1)+e,easeInOutQuart:(t,e,r,n)=>(t/=n/2)<1?r/2*t**4+e:-r/2*((t-=2)*t**3-2)+e,easeInOutQuint:(t,e,r,n)=>(t/=n/2)<1?r/2*t**5+e:r/2*((t-2)**5+2)+e,easeInOutSine:(t,e,r,n)=>-r/2*(Math.cos(Math.PI*t/n)-1)+e,easeInQuad:(t,e,r,n)=>r*(t/=n)*t+e,easeInQuart:(t,e,r,n)=>r*(t/=n)*t**3+e,easeInQuint:(t,e,r,n)=>r*(t/n)**5+e,easeInSine:(t,e,r,n)=>-r*Math.cos(t/n*kl)+r+e,easeOutBack:function(t,e,r,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return r*((t=t/n-1)*t*((s+1)*t+s)+1)+e},easeOutBounce:bk,easeOutCirc:(t,e,r,n)=>r*Math.sqrt(1-(t=t/n-1)*t)+e,easeOutCubic:(t,e,r,n)=>r*((t/n-1)**3+1)+e,easeOutElastic:(t,e,r,n)=>{const s=r;let i=0;if(t===0)return e;if((t/=n)===1)return e+r;i||(i=.3*n);const{a:o,s:a,p:l,c}=T_(s,r,i,1.70158);return o*2**(-10*t)*Math.sin((t*n-a)*ya/l)+c+e},easeOutExpo:(t,e,r,n)=>t===n?e+r:r*-(2**(-10*t/n)+1)+e,easeOutQuad:(t,e,r,n)=>-r*(t/=n)*(t-2)+e,easeOutQuart:(t,e,r,n)=>-r*((t=t/n-1)*t**3-1)+e,easeOutQuint:(t,e,r,n)=>r*((t/n-1)**5+1)+e,easeOutSine:(t,e,r,n)=>r*Math.sin(t/n*kl)+e});const NEe=()=>!1;class sP{constructor(e){let{startValue:r,byValue:n,duration:s=500,delay:i=0,easing:o=fW,onStart:a=kc,onChange:l=kc,onComplete:c=kc,abort:d=NEe,target:h}=e;$(this,"_state","pending"),$(this,"durationProgress",0),$(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=s,this.delay=i,this.easing=o,this._onStart=a,this._onChange=l,this._onComplete=c,this._abort=d,this.target=h,this.startValue=r,this.byValue=n,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=r=>{this._state==="pending"&&(this.startTime=r||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>fp(e),this.delay):fp(e)}tick(e){const r=(e||+new Date)-this.startTime,n=Math.min(r,this.duration);this.durationProgress=n/this.duration;const{value:s,valueProgress:i}=this.calculate(n);this.value=Object.freeze(s),this.valueProgress=i,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):r>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),fp(this.tick)))}register(){Hv.push(this)}unregister(){Hv.remove(this)}abort(){this._state="aborted",this.unregister()}}const REe=["startValue","endValue"];class OEe extends sP{constructor(e){let{startValue:r=0,endValue:n=100}=e;super(V(V({},Gt(e,REe)),{},{startValue:r,byValue:n-r}))}calculate(e){const r=this.easing(e,this.startValue,this.byValue,this.duration);return{value:r,valueProgress:Math.abs((r-this.startValue)/this.byValue)}}}const MEe=["startValue","endValue"];class IEe extends sP{constructor(e){let{startValue:r=[0],endValue:n=[100]}=e;super(V(V({},Gt(e,MEe)),{},{startValue:r,byValue:n.map((s,i)=>s-r[i])}))}calculate(e){const r=this.startValue.map((n,s)=>this.easing(e,n,this.byValue[s],this.duration,s));return{value:r,valueProgress:Math.abs((r[0]-this.startValue[0])/this.byValue[0])}}}const DEe=["startValue","endValue","easing","onChange","onComplete","abort"],FEe=(t,e,r,n)=>e+r*(1-Math.cos(t/n*kl)),j_=t=>t&&((e,r,n)=>t(new At(e).toRgba(),r,n));class LEe extends sP{constructor(e){let{startValue:r,endValue:n,easing:s=FEe,onChange:i,onComplete:o,abort:a}=e,l=Gt(e,DEe);const c=new At(r).getSource(),d=new At(n).getSource();super(V(V({},l),{},{startValue:c,byValue:d.map((h,f)=>h-c[f]),easing:s,onChange:j_(i),onComplete:j_(o),abort:j_(a)}))}calculate(e){const[r,n,s,i]=this.startValue.map((a,l)=>this.easing(e,a,this.byValue[l],this.duration,l)),o=[...[r,n,s].map(Math.round),Wc(0,i,1)];return{value:o,valueProgress:o.map((a,l)=>this.byValue[l]!==0?Math.abs((a-this.startValue[l])/this.byValue[l]):0).find(a=>a!==0)||0}}}function iP(t){const e=(r=>Array.isArray(r.startValue)||Array.isArray(r.endValue))(t)?new IEe(t):new OEe(t);return e.start(),e}function pW(t){const e=new LEe(t);return e.start(),e}class Kt{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(r=>r.eq(e))}append(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.points=this.points.concat(r.filter(s=>!this.includes(s))),this}static isPointContained(e,r,n){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(r.eq(n))return e.eq(r);if(r.x===n.x)return e.x===r.x&&(s||e.y>=Math.min(r.y,n.y)&&e.y<=Math.max(r.y,n.y));if(r.y===n.y)return e.y===r.y&&(s||e.x>=Math.min(r.x,n.x)&&e.x<=Math.max(r.x,n.x));{const i=Kv(r,n),o=Kv(r,e).divide(i);return s?Math.abs(o.x)===Math.abs(o.y):o.x===o.y&&o.x>=0&&o.x<=1}}static isPointInPolygon(e,r){const n=new X(e).setX(Math.min(e.x-1,...r.map(i=>i.x)));let s=0;for(let i=0;i<r.length;i++){const o=this.intersectSegmentSegment(r[i],r[(i+1)%r.length],e,n);if(o.includes(e))return!0;s+=+(o.status==="Intersection")}return s%2==1}static intersectLineLine(e,r,n,s){let i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a=r.x-e.x,l=r.y-e.y,c=s.x-n.x,d=s.y-n.y,h=e.x-n.x,f=e.y-n.y,p=c*f-d*h,g=a*f-l*h,y=d*a-c*l;if(y!==0){const v=p/y,m=g/y;return(i||0<=v&&v<=1)&&(o||0<=m&&m<=1)?new Kt("Intersection").append(new X(e.x+v*a,e.y+v*l)):new Kt}if(p===0||g===0){const v=i||o||Kt.isPointContained(e,n,s)||Kt.isPointContained(r,n,s)||Kt.isPointContained(n,e,r)||Kt.isPointContained(s,e,r);return new Kt(v?"Coincident":void 0)}return new Kt("Parallel")}static intersectSegmentLine(e,r,n,s){return Kt.intersectLineLine(e,r,n,s,!1,!0)}static intersectSegmentSegment(e,r,n,s){return Kt.intersectLineLine(e,r,n,s,!1,!1)}static intersectLinePolygon(e,r,n){let s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const i=new Kt,o=n.length;for(let a,l,c,d=0;d<o;d++){if(a=n[d],l=n[(d+1)%o],c=Kt.intersectLineLine(e,r,a,l,s,!1),c.status==="Coincident")return c;i.append(...c.points)}return i.points.length>0&&(i.status="Intersection"),i}static intersectSegmentPolygon(e,r,n){return Kt.intersectLinePolygon(e,r,n,!1)}static intersectPolygonPolygon(e,r){const n=new Kt,s=e.length,i=[];for(let o=0;o<s;o++){const a=e[o],l=e[(o+1)%s],c=Kt.intersectSegmentPolygon(a,l,r);c.status==="Coincident"?(i.push(c),n.append(a,l)):n.append(...c.points)}return i.length>0&&i.length===e.length?new Kt("Coincident"):(n.points.length>0&&(n.status="Intersection"),n)}static intersectPolygonRectangle(e,r,n){const s=r.min(n),i=r.max(n),o=new X(i.x,s.y),a=new X(s.x,i.y);return Kt.intersectPolygonPolygon(e,[s,o,i,a])}}class BEe extends BH{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?yn(e,this.group.calcTransformMatrix()):e}setXY(e,r,n){this.group&&(e=yn(e,_s(this.group.calcTransformMatrix()))),this.setRelativeXY(e,r,n)}getRelativeXY(){return new X(this.left,this.top)}setRelativeXY(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,r,n)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:r,br:n,bl:s}=this.aCoords||(this.aCoords=this.calcACoords()),i=[e,r,n,s];if(this.group){const o=this.group.calcTransformMatrix();return i.map(a=>yn(a,o))}return i}intersectsWithRect(e,r){return Kt.intersectPolygonRectangle(this.getCoords(),e,r).status==="Intersection"}intersectsWithObject(e){const r=Kt.intersectPolygonPolygon(this.getCoords(),e.getCoords());return r.status==="Intersection"||r.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(r=>e.containsPoint(r))}isContainedWithinRect(e,r){const{left:n,top:s,width:i,height:o}=this.getBoundingRect();return n>=e.x&&n+i<=r.x&&s>=e.y&&s+o<=r.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return Kt.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:r}=this.canvas.vptCoords;return!!this.getCoords().some(n=>n.x<=r.x&&n.x>=e.x&&n.y<=r.y&&n.y>=e.y)||!!this.intersectsWithRect(e,r)||this.containsPoint(e.midPointFrom(r))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:r}=this.canvas.vptCoords;return this.intersectsWithRect(e,r)?!0:this.getCoords().every(n=>(n.x>=r.x||n.x<=e.x)&&(n.y>=r.y||n.y<=e.y))&&this.containsPoint(e.midPointFrom(r))}getBoundingRect(){return mo(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set($n,e),this._set(Ds,e),this.setCoords()}scaleToWidth(e){const r=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/r)}scaleToHeight(e){const r=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/r)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?_o(zH(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||Bn.concat()}calcACoords(){const e=fu({angle:this.angle}),{x:r,y:n}=this.getRelativeCenterPoint(),s=Fh(r,n),i=_r(s,e),o=this._getTransformedDimensions(),a=o.x/2,l=o.y/2;return{tl:yn({x:-a,y:-l},i),tr:yn({x:a,y:-l},i),bl:yn({x:-a,y:l},i),br:yn({x:a,y:l},i)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],r=[];return!e&&this.group&&(r=this.group.transformMatrixKey(e)),r.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,wr(this.originX),wr(this.originY)),r}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],r=this.calcOwnMatrix();if(e||!this.group)return r;const n=this.transformMatrixKey(e),s=this.matrixCache;return s&&s.key.every((i,o)=>i===n[o])?s.value:(this.group&&(r=_r(this.group.calcTransformMatrix(!1),r)),this.matrixCache={key:n,value:r},r)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),r=this.ownMatrixCache;if(r&&r.key===e)return r.value;const n=this.getRelativeCenterPoint(),s={angle:this.angle,translateX:n.x,translateY:n.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},i=WH(s);return this.ownMatrixCache={key:e,value:i},i}_getNonTransformedDimensions(){return new X(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=V({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),n=r.strokeWidth;let s=n,i=0;this.strokeUniform&&(s=0,i=n);const o=r.width+s,a=r.height+s;let l;return l=r.skewX===0&&r.skewY===0?new X(o*r.scaleX,a*r.scaleY):Vw(o,a,Kg(r)),l.scalarAdd(i)}translateToGivenOrigin(e,r,n,s,i){let o=e.x,a=e.y;const l=wr(s)-wr(r),c=wr(i)-wr(n);if(l||c){const d=this._getTransformedDimensions();o+=l*d.x,a+=c*d.y}return new X(o,a)}translateToCenterPoint(e,r,n){if(r===ct&&n===ct)return e;const s=this.translateToGivenOrigin(e,r,n,ct,ct);return this.angle?s.rotate(or(this.angle),e):s}translateToOriginPoint(e,r,n){const s=this.translateToGivenOrigin(e,ct,ct,r,n);return this.angle?s.rotate(or(this.angle),e):s}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?yn(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new X(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,r){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,r)}setPositionByOrigin(e,r,n){const s=this.translateToCenterPoint(e,r,n),i=this.translateToOriginPoint(s,this.originX,this.originY);this.set({left:i.x,top:i.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),jt,as)}}const $Ee=["type"],UEe=["extraParam"];let Oo=class Jy extends BEe{static getDefaults(){return Jy.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){El("warn","Setting type has no effect",e)}constructor(e){super(),$(this,"_cacheContext",null),Object.assign(this,Jy.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=So(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const r=e.width,n=e.height,s=Et.maxCacheSideLimit,i=Et.minCacheSideLimit;if(r<=s&&n<=s&&r*n<=Et.perfLimitSizeTotal)return r<i&&(e.width=i),n<i&&(e.height=i),e;const o=r/n,[a,l]=hp.limitDimsByArea(o),c=Wc(i,a,s),d=Wc(i,l,s);return r>c&&(e.zoomX/=r/c,e.width=c,e.capped=!0),n>d&&(e.zoomY/=n/d,e.height=d,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),r=this._getTransformedDimensions({skewX:0,skewY:0}),n=r.x*e.x/this.scaleX,s=r.y*e.y/this.scaleY;return{width:Math.ceil(n+2),height:Math.ceil(s+2),zoomX:e.x,zoomY:e.y,x:n,y:s}}_updateCacheCanvas(){const e=this._cacheCanvas,r=this._cacheContext,{width:n,height:s,zoomX:i,zoomY:o,x:a,y:l}=this._limitCacheSize(this._getCacheCanvasDimensions()),c=n!==e.width||s!==e.height,d=this.zoomX!==i||this.zoomY!==o;if(!e||!r)return!1;if(c||d){n!==e.width||s!==e.height?(e.width=n,e.height=s):(r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,e.width,e.height));const h=a/2,f=l/2;return this.cacheTranslationX=Math.round(e.width/2-h)+h,this.cacheTranslationY=Math.round(e.height/2-f)+f,r.translate(this.cacheTranslationX,this.cacheTranslationY),r.scale(i,o),this.zoomX=i,this.zoomY=o,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const r=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,n=this.calcTransformMatrix(!r);e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}getObjectScaling(){if(!this.group)return new X(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=eh(this.calcTransformMatrix());return new X(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const r=this.canvas.getZoom(),n=this.getCanvasRetinaScaling();return e.scalarMultiply(r*n)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,r){e!==$n&&e!==Ds||(r=this._constrainScale(r)),e===$n&&r<0?(this.flipX=!this.flipX,r*=-1):e==="scaleY"&&r<0?(this.flipY=!this.flipY,r*=-1):e!=="shadow"||!r||r instanceof yo||(r=new yo(r));const n=this[e]!==r;return this[e]=r,n&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||n&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:r,zoomY:n,cacheTranslationX:s,cacheTranslationY:i}=this,{width:o,height:a}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:r,zoomY:n,cacheTranslationX:s,cacheTranslationY:i,width:o,height:a,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===cs&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,r,n){e.save(),r.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(n,0,0),e.restore()}drawObject(e,r,n){const s=this.fill,i=this.stroke;r?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,n),this.fill=s,this.stroke=i}createClipPathLayer(e,r){const n=Fs(r),s=n.getContext("2d");if(s.translate(r.cacheTranslationX,r.cacheTranslationY),s.scale(r.zoomX,r.zoomY),e._cacheCanvas=n,r.parentClipPaths.forEach(i=>{i.transform(s)}),r.parentClipPaths.push(e),e.absolutePositioned){const i=_s(this.calcTransformMatrix());s.transform(i[0],i[1],i[2],i[3],i[4],i[5])}return e.transform(s),e.drawObject(s,!0,r),n}_drawClipPath(e,r,n){if(!r)return;r._transformDone=!0;const s=this.createClipPathLayer(r,n);this.drawClipPathOnCache(e,r,s)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const r=this._cacheCanvas,n=this._cacheContext;return!(!r||!n||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(r&&n&&!e&&(n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,r.width,r.height),n.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const r=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,r){const n=r.stroke;n&&(e.lineWidth=r.strokeWidth,e.lineCap=r.strokeLineCap,e.lineDashOffset=r.strokeDashOffset,e.lineJoin=r.strokeLineJoin,e.miterLimit=r.strokeMiterLimit,ei(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(e,n):(e.strokeStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.strokeStyle=r.stroke)}_setFillStyles(e,r){let{fill:n}=r;n&&(ei(n)?(e.fillStyle=n.toLive(e),this._applyPatternGradientTransform(e,n)):e.fillStyle=n)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,r){r&&r.length!==0&&e.setLineDash(r)}_setShadow(e){if(!this.shadow)return;const r=this.shadow,n=this.canvas,s=this.getCanvasRetinaScaling(),[i,,,o]=(n==null?void 0:n.viewportTransform)||Bn,a=i*s,l=o*s,c=r.nonScaling?new X(1,1):this.getObjectScaling();e.shadowColor=r.color,e.shadowBlur=r.blur*Et.browserShadowBlurConstant*(a+l)*(c.x+c.y)/4,e.shadowOffsetX=r.offsetX*a*c.x,e.shadowOffsetY=r.offsetY*l*c.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,r){if(!ei(r))return{offsetX:0,offsetY:0};const n=r.gradientTransform||r.patternTransform,s=-this.width/2+r.offsetX||0,i=-this.height/2+r.offsetY||0;return r.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,s,i):e.transform(1,0,0,1,s,i),n&&e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:s,offsetY:i}}_renderPaintInOrder(e){this.paintFirst===cs?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const r=this.getObjectScaling();e.scale(1/r.x,1/r.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,r){var n;const s=this._limitCacheSize(this._getCacheCanvasDimensions()),i=this.getCanvasRetinaScaling(),o=s.x/this.scaleX/i,a=s.y/this.scaleY/i,l=Fs({width:Math.ceil(o),height:Math.ceil(a)}),c=l.getContext("2d");c&&(c.beginPath(),c.moveTo(0,0),c.lineTo(o,0),c.lineTo(o,a),c.lineTo(0,a),c.closePath(),c.translate(o/2,a/2),c.scale(s.zoomX/this.scaleX/i,s.zoomY/this.scaleY/i),this._applyPatternGradientTransform(c,r),c.fillStyle=r.toLive(e),c.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(i*this.scaleX/s.zoomX,i*this.scaleY/s.zoomY),e.strokeStyle=(n=c.createPattern(l,"no-repeat"))!==null&&n!==void 0?n:"")}_findCenterFromElement(){return new X(this.left+this.width/2,this.top+this.height/2)}clone(e){const r=this.toObject(e);return this.constructor.fromObject(r)}cloneAsImage(e){const r=this.toCanvasElement(e);return new(Me.getClass("image"))(r)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=eP(this),n=this.group,s=this.shadow,i=Math.abs,o=e.enableRetinaScaling?MH():1,a=(e.multiplier||1)*o,l=e.canvasProvider||(x=>new Xg(x,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&ZH(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&xk(this,this.getViewportTransform()),this.setCoords();const c=So(),d=this.getBoundingRect(),h=this.shadow,f=new X;if(h){const x=h.blur,b=h.nonScaling?new X(1,1):this.getObjectScaling();f.x=2*Math.round(i(h.offsetX)+x)*i(b.x),f.y=2*Math.round(i(h.offsetY)+x)*i(b.y)}const p=d.width+f.x,g=d.height+f.y;c.width=Math.ceil(p),c.height=Math.ceil(g);const y=l(c);e.format==="jpeg"&&(y.backgroundColor="#fff"),this.setPositionByOrigin(new X(y.width/2,y.height/2),ct,ct);const v=this.canvas;y._objects=[this],this.set("canvas",y),this.setCoords();const m=y.toCanvasElement(a||1,e);return this.set("canvas",v),this.shadow=s,n&&(this.group=n),this.set(r),this.setCoords(),y._objects=[],y.destroy(),m}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return YA(this.toCanvasElement(e),e.format||"png",e.quality||1)}toBlob(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return XA(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.includes(this.constructor.type)||r.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:r,originX:n,originY:s}=this;if(r){const{x:i,y:o}=this.getRelativeCenterPoint();this.originX=ct,this.originY=ct,this.left=i,this.top=o}if(this.set("angle",e),r){const{x:i,y:o}=this.translateToOriginPoint(this.getRelativeCenterPoint(),n,s);this.left=i,this.top=o,this.originX=n,this.originY=s}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){Hv.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&bo().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,r){return Object.entries(e).reduce((n,s)=>{let[i,o]=s;return n[i]=this._animate(i,o,r),n},{})}_animate(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=e.split("."),i=this.constructor.colorProperties.includes(s[s.length-1]),{abort:o,startValue:a,onChange:l,onComplete:c}=n,d=V(V({},n),{},{target:this,startValue:a??s.reduce((h,f)=>h[f],this),endValue:r,abort:o==null?void 0:o.bind(this),onChange:(h,f,p)=>{s.reduce((g,y,v)=>(v===s.length-1&&(g[y]=h),g[y]),this),l&&l(h,f,p)},onComplete:(h,f,p)=>{this.setCoords(),c&&c(h,f,p)}});return i?pW(d):iP(d)}isDescendantOf(e){const{parent:r,group:n}=this;return r===e||n===e||!!r&&r.isDescendantOf(e)||!!n&&n!==r&&n.isDescendantOf(e)}getAncestors(){const e=[];let r=this;do r=r.parent,r&&e.push(r);while(r);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const r=this.getAncestors(),n=e.getAncestors();if(r.length===0&&n.length>0&&this===n[n.length-1])return{fork:[],otherFork:[e,...n.slice(0,n.length-1)],common:[this]};for(let s,i=0;i<r.length;i++){if(s=r[i],s===e)return{fork:[this,...r.slice(0,i)],otherFork:[],common:r.slice(i)};for(let o=0;o<n.length;o++){if(this===n[o])return{fork:[],otherFork:[e,...n.slice(0,o)],common:[this,...r]};if(s===n[o])return{fork:[this,...r.slice(0,i)],otherFork:[e,...n.slice(0,o)],common:r.slice(i)}}}return{fork:[this,...r],otherFork:[e,...n],common:[]}}hasCommonAncestors(e){const r=this.findCommonAncestors(e);return r&&!!r.common.length}isInFrontOf(e){if(this===e)return;const r=this.findCommonAncestors(e);if(r.fork.includes(e))return!0;if(r.otherFork.includes(this))return!1;const n=r.common[0]||this.canvas;if(!n)return;const s=r.fork.pop(),i=r.otherFork.pop(),o=n._objects.indexOf(s),a=n._objects.indexOf(i);return o>-1&&o>a}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Jy.customProperties,this.constructor.customProperties||[]);let r;const n=Et.NUM_FRACTION_DIGITS,{clipPath:s,fill:i,stroke:o,shadow:a,strokeDashArray:l,left:c,top:d,originX:h,originY:f,width:p,height:g,strokeWidth:y,strokeLineCap:v,strokeDashOffset:m,strokeLineJoin:x,strokeUniform:b,strokeMiterLimit:_,scaleX:C,scaleY:T,angle:O,flipX:R,flipY:I,opacity:H,visible:re,backgroundColor:L,fillRule:z,paintFirst:Y,globalCompositeOperation:pe,skewX:Q,skewY:se}=this;s&&!s.excludeFromExport&&(r=s.toObject(e.concat("inverted","absolutePositioned")));const F=de=>Dt(de,n),K=V(V({},pu(this,e)),{},{type:this.constructor.type,version:mk,originX:h,originY:f,left:F(c),top:F(d),width:F(p),height:F(g),fill:F3(i)?i.toObject():i,stroke:F3(o)?o.toObject():o,strokeWidth:F(y),strokeDashArray:l&&l.concat(),strokeLineCap:v,strokeDashOffset:m,strokeLineJoin:x,strokeUniform:b,strokeMiterLimit:F(_),scaleX:F(C),scaleY:F(T),angle:F(O),flipX:R,flipY:I,opacity:F(H),shadow:a&&a.toObject(),visible:re,backgroundColor:L,fillRule:z,paintFirst:Y,globalCompositeOperation:pe,skewX:F(Q),skewY:F(se)},r?{clipPath:r}:null);return this.includeDefaultValues?K:this._removeDefaultValues(K)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const r=this.constructor.getDefaults(),n=Object.keys(r).length>0?r:Object.getPrototypeOf(this);return QA(e,(s,i)=>{if(i===jt||i===as||i==="type")return!0;const o=n[i];return s!==o&&!(Array.isArray(s)&&Array.isArray(o)&&s.length===0&&o.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let r=Gt(e,$Ee),n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:s}=n,i=Gt(n,UEe);return Yg(r,i).then(o=>s?(delete o[s],new this(r[s],o)):new this(o))}static fromObject(e,r){return this._fromObject(e,r)}};$(Oo,"stateProperties",jEe),$(Oo,"cacheProperties",ba),$(Oo,"ownDefaults",AEe),$(Oo,"type","FabricObject"),$(Oo,"colorProperties",[Dr,cs,"backgroundColor"]),$(Oo,"customProperties",[]),Me.setClass(Oo),Me.setClass(Oo,"object");const Lh=(t,e,r)=>(n,s,i,o)=>{const a=e(n,s,i,o);return a&&eW(t,V(V({},rW(n,s,i,o)),r)),a};function Bh(t){return(e,r,n,s)=>{const{target:i,originX:o,originY:a}=r,l=i.getRelativeCenterPoint(),c=i.translateToOriginPoint(l,o,a),d=t(e,r,n,s);return i.setPositionByOrigin(c,r.originX,r.originY),d}}const e4=Lh(ug,Bh((t,e,r,n)=>{const s=tP(e,e.originX,e.originY,r,n);if(wr(e.originX)===wr(ct)||wr(e.originX)===wr(hr)&&s.x<0||wr(e.originX)===wr(jt)&&s.x>0){const{target:i}=e,o=i.strokeWidth/(i.strokeUniform?i.scaleX:1),a=tW(e)?2:1,l=i.width,c=Math.abs(s.x*a/i.scaleX)-o;return i.set("width",Math.max(c,1)),l!==i.width}return!1}));function VEe(t,e,r,n,s){n=n||{};const i=this.sizeX||n.cornerSize||s.cornerSize,o=this.sizeY||n.cornerSize||s.cornerSize,a=n.transparentCorners!==void 0?n.transparentCorners:s.transparentCorners,l=a?cs:Dr,c=!a&&(n.cornerStrokeColor||s.cornerStrokeColor);let d,h=e,f=r;t.save(),t.fillStyle=n.cornerColor||s.cornerColor||"",t.strokeStyle=n.cornerStrokeColor||s.cornerStrokeColor||"",i>o?(d=i,t.scale(1,o/i),f=r*i/o):o>i?(d=o,t.scale(i/o,1),h=e*o/i):d=i,t.beginPath(),t.arc(h,f,d/2,0,ya,!1),t[l](),c&&t.stroke(),t.restore()}function zEe(t,e,r,n,s){n=n||{};const i=this.sizeX||n.cornerSize||s.cornerSize,o=this.sizeY||n.cornerSize||s.cornerSize,a=n.transparentCorners!==void 0?n.transparentCorners:s.transparentCorners,l=a?cs:Dr,c=!a&&(n.cornerStrokeColor||s.cornerStrokeColor),d=i/2,h=o/2;t.save(),t.fillStyle=n.cornerColor||s.cornerColor||"",t.strokeStyle=n.cornerStrokeColor||s.cornerStrokeColor||"",t.translate(e,r);const f=s.getTotalAngle();t.rotate(or(f)),t["".concat(l,"Rect")](-d,-h,i,o),c&&t.strokeRect(-d,-h,i,o),t.restore()}class wi{constructor(e){$(this,"visible",!0),$(this,"actionName",Bw),$(this,"angle",0),$(this,"x",0),$(this,"y",0),$(this,"offsetX",0),$(this,"offsetY",0),$(this,"sizeX",0),$(this,"sizeY",0),$(this,"touchSizeX",0),$(this,"touchSizeY",0),$(this,"cursorStyle","crosshair"),$(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,r,n,s){var i;let{tl:o,tr:a,br:l,bl:c}=s;return((i=r.canvas)===null||i===void 0?void 0:i.getActiveObject())===r&&r.isControlVisible(e)&&Kt.isPointInPolygon(n,[o,a,l,c])}getActionHandler(e,r,n){return this.actionHandler}getMouseDownHandler(e,r,n){return this.mouseDownHandler}getMouseUpHandler(e,r,n){return this.mouseUpHandler}cursorStyleHandler(e,r,n){return r.cursorStyle}getActionName(e,r,n){return r.actionName}getVisibility(e,r){var n,s;return(n=(s=e._controlsVisibility)===null||s===void 0?void 0:s[r])!==null&&n!==void 0?n:this.visible}setVisibility(e,r,n){this.visible=e}positionHandler(e,r,n,s){return new X(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(r)}calcCornerCoords(e,r,n,s,i,o){const a=$w([Fh(n,s),fu({angle:e}),Uw((i?this.touchSizeX:this.sizeX)||r,(i?this.touchSizeY:this.sizeY)||r)]);return{tl:new X(-.5,-.5).transform(a),tr:new X(.5,-.5).transform(a),br:new X(.5,.5).transform(a),bl:new X(-.5,.5).transform(a)}}render(e,r,n,s,i){((s=s||{}).cornerStyle||i.cornerStyle)==="circle"?VEe.call(this,e,r,n,s,i):zEe.call(this,e,r,n,s,i)}}const HEe=(t,e,r)=>r.lockRotation?qv:e.cursorStyle,WEe=Lh(DH,Bh((t,e,r,n)=>{let{target:s,ex:i,ey:o,theta:a,originX:l,originY:c}=e;const d=s.translateToOriginPoint(s.getRelativeCenterPoint(),l,c);if(Ii(s,"lockRotation"))return!1;const h=Math.atan2(o-d.y,i-d.x),f=Math.atan2(n-d.y,r-d.x);let p=_o(f-h+a);if(s.snapAngle&&s.snapAngle>0){const y=s.snapAngle,v=s.snapThreshold||y,m=Math.ceil(p/y)*y,x=Math.floor(p/y)*y;Math.abs(p-x)<v?p=x:Math.abs(p-m)<v&&(p=m)}p<0&&(p=360+p),p%=360;const g=s.angle!==p;return s.angle=p,g}));function gW(t,e){const r=e.canvas,n=t[r.uniScaleKey];return r.uniformScaling&&!n||!r.uniformScaling&&n}function mW(t,e,r){const n=Ii(t,"lockScalingX"),s=Ii(t,"lockScalingY");if(n&&s||!e&&(n||s)&&r||n&&e==="x"||s&&e==="y")return!0;const{width:i,height:o,strokeWidth:a}=t;return i===0&&a===0&&e!=="y"||o===0&&a===0&&e!=="x"}const qEe=["e","se","s","sw","w","nw","n","ne","e"],Ef=(t,e,r)=>{const n=gW(t,r);if(mW(r,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",n))return qv;const s=nW(r,e);return"".concat(qEe[s],"-resize")};function oP(t,e,r,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const i=e.target,o=s.by,a=gW(t,i);let l,c,d,h,f,p;if(mW(i,o,a))return!1;if(e.gestureScale)c=e.scaleX*e.gestureScale,d=e.scaleY*e.gestureScale;else{if(l=tP(e,e.originX,e.originY,r,n),f=o!=="y"?Math.sign(l.x||e.signX||1):1,p=o!=="x"?Math.sign(l.y||e.signY||1):1,e.signX||(e.signX=f),e.signY||(e.signY=p),Ii(i,"lockScalingFlip")&&(e.signX!==f||e.signY!==p))return!1;if(h=i._getTransformedDimensions(),a&&!o){const v=Math.abs(l.x)+Math.abs(l.y),{original:m}=e,x=v/(Math.abs(h.x*m.scaleX/i.scaleX)+Math.abs(h.y*m.scaleY/i.scaleY));c=m.scaleX*x,d=m.scaleY*x}else c=Math.abs(l.x*i.scaleX/h.x),d=Math.abs(l.y*i.scaleY/h.y);tW(e)&&(c*=2,d*=2),e.signX!==f&&o!=="y"&&(e.originX=U3(e.originX),c*=-1,e.signX=f),e.signY!==p&&o!=="x"&&(e.originY=U3(e.originY),d*=-1,e.signY=p)}const g=i.scaleX,y=i.scaleY;return o?(o==="x"&&i.set($n,c),o==="y"&&i.set(Ds,d)):(!Ii(i,"lockScalingX")&&i.set($n,c),!Ii(i,"lockScalingY")&&i.set(Ds,d)),g!==i.scaleX||y!==i.scaleY}const Wm=Lh(Lw,Bh((t,e,r,n)=>oP(t,e,r,n))),GEe=Lh(Lw,Bh((t,e,r,n)=>oP(t,e,r,n,{by:"x"}))),KEe=Lh(Lw,Bh((t,e,r,n)=>oP(t,e,r,n,{by:"y"}))),YEe=["target","ex","ey","skewingSide"],A_={x:{counterAxis:"y",scale:$n,skew:Ih,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Ds,skew:Dh,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},XEe=["ns","nesw","ew","nwse"],JEe=(t,e,r)=>{if(e.x!==0&&Ii(r,"lockSkewingY")||e.y!==0&&Ii(r,"lockSkewingX"))return qv;const n=nW(r,e)%4;return"".concat(XEe[n],"-resize")};function yW(t,e,r,n,s){const{target:i}=r,{counterAxis:o,origin:a,lockSkewing:l,skew:c,flip:d}=A_[t];if(Ii(i,l))return!1;const{origin:h,flip:f}=A_[o],p=wr(r[h])*(i[f]?-1:1),g=-Math.sign(p)*(i[d]?-1:1),y=.5*-((i[c]===0&&tP(r,ct,ct,n,s)[t]>0||i[c]>0?1:-1)*g)+.5;return Lh(FH,Bh((m,x,b,_)=>function(C,T,O){let{target:R,ex:I,ey:H,skewingSide:re}=T,L=Gt(T,YEe);const{skew:z}=A_[C],Y=O.subtract(new X(I,H)).divide(new X(R.scaleX,R.scaleY))[C],pe=R[z],Q=L[z],se=Math.tan(or(Q)),F=C==="y"?R._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:R._getTransformedDimensions({scaleX:1,scaleY:1}).y,K=2*Y*re/Math.max(F,1)+se,de=_o(Math.atan(K));R.set(z,de);const le=pe!==R[z];if(le&&C==="y"){const{skewX:be,scaleX:Be}=R,He=R._getTransformedDimensions({skewY:pe}),ht=R._getTransformedDimensions(),U=be!==0?He.x/ht.x:1;U!==1&&R.set($n,U*Be)}return le}(t,x,new X(b,_))))(e,V(V({},r),{},{[a]:y,skewingSide:g}),n,s)}const ZEe=(t,e,r,n)=>yW("x",t,e,r,n),QEe=(t,e,r,n)=>yW("y",t,e,r,n);function Ww(t,e){return t[e.canvas.altActionKey]}const qm=(t,e,r)=>{const n=Ww(t,r);return e.x===0?n?Ih:Ds:e.y===0?n?Dh:$n:""},nd=(t,e,r)=>Ww(t,r)?JEe(0,e,r):Ef(t,e,r),t4=(t,e,r,n)=>Ww(t,e.target)?QEe(t,e,r,n):GEe(t,e,r,n),r4=(t,e,r,n)=>Ww(t,e.target)?ZEe(t,e,r,n):KEe(t,e,r,n),vW=()=>({ml:new wi({x:-.5,y:0,cursorStyleHandler:nd,actionHandler:t4,getActionName:qm}),mr:new wi({x:.5,y:0,cursorStyleHandler:nd,actionHandler:t4,getActionName:qm}),mb:new wi({x:0,y:.5,cursorStyleHandler:nd,actionHandler:r4,getActionName:qm}),mt:new wi({x:0,y:-.5,cursorStyleHandler:nd,actionHandler:r4,getActionName:qm}),tl:new wi({x:-.5,y:-.5,cursorStyleHandler:Ef,actionHandler:Wm}),tr:new wi({x:.5,y:-.5,cursorStyleHandler:Ef,actionHandler:Wm}),bl:new wi({x:-.5,y:.5,cursorStyleHandler:Ef,actionHandler:Wm}),br:new wi({x:.5,y:.5,cursorStyleHandler:Ef,actionHandler:Wm}),mtr:new wi({x:0,y:-.5,actionHandler:WEe,cursorStyleHandler:HEe,offsetY:-40,withConnection:!0,actionName:GA})}),eke=()=>({mr:new wi({x:.5,y:0,actionHandler:e4,cursorStyleHandler:nd,actionName:ug}),ml:new wi({x:-.5,y:0,actionHandler:e4,cursorStyleHandler:nd,actionName:ug})}),tke=()=>V(V({},vW()),eke());class hg extends Oo{static getDefaults(){return V(V({},super.getDefaults()),hg.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),hg.ownDefaults),this.setOptions(e)}static createControls(){return{controls:vW()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const r=e._currentTransform,n=r.target,s=r.action;if(this===n&&s&&s.startsWith(Bw))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const n=Object.entries(this.oCoords);for(let s=n.length-1;s>=0;s--){const[i,o]=n[s],a=this.controls[i];if(a.shouldActivate(i,this,e,r?o.touchCorner:o.corner))return this.__corner=i,{key:i,control:a,coord:this.oCoords[i]}}}calcOCoords(){const e=this.getViewportTransform(),r=this.getCenterPoint(),n=Fh(r.x,r.y),s=fu({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),i=_r(n,s),o=_r(e,i),a=_r(o,[1/e[0],0,0,1/e[3],0,0]),l=this.group?eh(this.calcTransformMatrix()):void 0;l&&(l.scaleX=Math.abs(l.scaleX),l.scaleY=Math.abs(l.scaleY));const c=this._calculateCurrentDimensions(l),d={};return this.forEachControl((h,f)=>{const p=h.positionHandler(c,a,this,h);d[f]=Object.assign(p,this._calcCornerCoords(h,p))}),d}_calcCornerCoords(e,r){const n=this.getTotalAngle();return{corner:e.calcCornerCoords(n,this.cornerSize,r.x,r.y,!1,this),touchCorner:e.calcCornerCoords(n,this.touchCornerSize,r.x,r.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const r in this.controls)e(this.controls[r],r,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const r=this.getRelativeCenterPoint(),n=this._calculateCurrentDimensions(),s=this.getViewportTransform();e.translate(r.x,r.y),e.scale(1/s[0],1/s[3]),e.rotate(or(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),e.restore()}strokeBorders(e,r){e.strokeRect(-r.x/2,-r.y/2,r.x,r.y)}_drawBorders(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=V({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},n);e.save(),e.strokeStyle=s.borderColor,this._setLineDash(e,s.borderDashArray),this.strokeBorders(e,r),s.hasControls&&this.drawControlsConnectingLines(e,r),e.restore()}_renderControls(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:n,hasControls:s}=this,i=V({hasBorders:n,hasControls:s},r),o=this.getViewportTransform(),a=i.hasBorders,l=i.hasControls,c=_r(o,this.calcTransformMatrix()),d=eh(c);e.save(),e.translate(d.translateX,d.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(d.angle-=180),e.rotate(or(this.group?d.angle:this.angle)),a&&this.drawBorders(e,d,r),l&&this.drawControls(e,r),e.restore()}drawBorders(e,r,n){let s;if(n&&n.forActiveSelection||this.group){const i=Vw(this.width,this.height,Kg(r)),o=this.isStrokeAccountedForInDimensions()?KA:(this.strokeUniform?new X().scalarAdd(this.canvas?this.canvas.getZoom():1):new X(r.scaleX,r.scaleY)).scalarMultiply(this.strokeWidth);s=i.add(o).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else s=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,s,n)}drawControlsConnectingLines(e,r){let n=!1;e.beginPath(),this.forEachControl((s,i)=>{s.withConnection&&s.getVisibility(this,i)&&(n=!0,e.moveTo(s.x*r.x,s.y*r.y),e.lineTo(s.x*r.x+s.offsetX,s.y*r.y+s.offsetY))}),n&&e.stroke()}drawControls(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const n=this.getCanvasRetinaScaling(),{cornerStrokeColor:s,cornerDashArray:i,cornerColor:o}=this,a=V({cornerStrokeColor:s,cornerDashArray:i,cornerColor:o},r);e.setTransform(n,0,0,n,0,0),e.strokeStyle=e.fillStyle=a.cornerColor,this.transparentCorners||(e.strokeStyle=a.cornerStrokeColor),this._setLineDash(e,a.cornerDashArray),this.forEachControl((l,c)=>{if(l.getVisibility(this,c)){const d=this.oCoords[c];l.render(e,d.x,d.y,a,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,r){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=r}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(r=>{let[n,s]=r;return this.setControlVisible(n,s)})}clearContextTop(e){if(!this.canvas)return;const r=this.canvas.contextTop;if(!r)return;const n=this.canvas.viewportTransform;r.save(),r.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(r);const s=this.width+4,i=this.height+4;return r.clearRect(-s/2,-i/2,s,i),e||r.restore(),r}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function xW(t,e){return e.forEach(r=>{Object.getOwnPropertyNames(r.prototype).forEach(n=>{n!=="constructor"&&Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(r.prototype,n)||Object.create(null))})}),t}$(hg,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class Sn extends hg{}xW(Sn,[iW]),Me.setClass(Sn),Me.setClass(Sn,"object");const wW=(t,e,r,n)=>{const s=2*(n=Math.round(n))+1,{data:i}=t.getImageData(e-n,r-n,s,s);for(let o=3;o<i.length;o+=4)if(i[o]>0)return!1;return!0};class bW{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new X(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new X(1/this.options.scaleX,1/this.options.scaleY):new X(1,1)}createSideVector(e,r){const n=Kv(e,r);return this.options.strokeUniform?n.multiply(this.scale):n}projectOrthogonally(e,r,n){return this.applySkew(e.add(this.calcOrthogonalProjection(e,r,n)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const r=new X(e);return r.y+=r.x*Math.tan(or(this.options.skewY)),r.x+=r.y*Math.tan(or(this.options.skewX)),r}scaleUnitVector(e,r){return e.multiply(this.strokeUniformScalar).scalarMultiply(r)}}const rke=new X;class jd extends bW{static getOrthogonalRotationFactor(e,r){const n=r?Xv(e,r):dW(e);return Math.abs(n)<kl?-1:1}constructor(e,r,n,s){super(s),$(this,"AB",void 0),$(this,"AC",void 0),$(this,"alpha",void 0),$(this,"bisector",void 0),this.A=new X(e),this.B=new X(r),this.C=new X(n),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=Xv(this.AB,this.AC),this.bisector=Hw(rP(this.AB.eq(rke)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,r),i=nP(s),o=jd.getOrthogonalRotationFactor(i,this.bisector);return this.scaleUnitVector(i,n*o)}projectBevel(){const e=[];return(this.alpha%ya==0?[this.B]:[this.B,this.C]).forEach(r=>{e.push(this.projectOrthogonally(this.A,r)),e.push(this.projectOrthogonally(this.A,r,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],r=Math.abs(this.alpha),n=1/Math.sin(r/2),s=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*n),i=this.options.strokeUniform?Yv(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return Yv(s)/this.strokeProjectionMagnitude<=i&&e.push(this.applySkew(this.A.add(s))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,r){const n=[],s=new X(jd.getOrthogonalRotationFactor(this.bisector),jd.getOrthogonalRotationFactor(new X(this.bisector.y,this.bisector.x)));return[new X(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s),new X(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s)].forEach(i=>{wk(i,e,r)&&n.push(this.A.add(i))}),n}projectRoundWithSkew(e,r){const n=[],{skewX:s,skewY:i,scaleX:o,scaleY:a,strokeUniform:l}=this.options,c=new X(Math.tan(or(s)),Math.tan(or(i))),d=this.strokeProjectionMagnitude,h=l?d/a/Math.sqrt(1/a**2+1/o**2*c.y**2):d/Math.sqrt(1+c.y**2),f=new X(Math.sqrt(Math.max(d**2-h**2,0)),h),p=l?d/Math.sqrt(1+c.x**2*(1/a)**2/(1/o+1/o*c.x*c.y)**2):d/Math.sqrt(1+c.x**2/(1+c.x*c.y)**2),g=new X(p,Math.sqrt(Math.max(d**2-p**2,0)));return[g,g.scalarMultiply(-1),f,f.scalarMultiply(-1)].map(y=>this.applySkew(l?y.multiply(this.strokeUniformScalar):y)).forEach(y=>{wk(y,e,r)&&n.push(this.applySkew(this.A).add(y))}),n}projectRound(){const e=[];e.push(...this.projectBevel());const r=this.alpha%ya==0,n=this.applySkew(this.A),s=e[r?0:2].subtract(n),i=e[r?1:0].subtract(n),o=r?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=Td(s,o)>0,l=a?s:i,c=a?i:s;return this.isSkewed()?e.push(...this.projectRoundWithSkew(l,c)):e.push(...this.projectRoundNoSkew(l,c)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class n4 extends bW{constructor(e,r,n){super(n),this.A=new X(e),this.T=new X(r)}calcOrthogonalProjection(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,r);return this.scaleUnitVector(nP(s),n)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const r=new X(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(r)),this.applySkew(this.A.subtract(r)))}else e.push(...new jd(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const r=new X(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(r),this.A.subtract(r))}else{const r=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),n=this.scaleUnitVector(Hw(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),s=this.A.add(n);e.push(s.add(r),s.subtract(r))}return e.map(r=>this.applySkew(r))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const SW=function(t,e){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const n=[];if(t.length===0)return n;const s=t.reduce((i,o)=>(i[i.length-1].eq(o)||i.push(new X(o)),i),[new X(t[0])]);if(s.length===1)r=!0;else if(!r){const i=s[0],o=((a,l)=>{for(let c=a.length-1;c>=0;c--)if(l(a[c],c,a))return c;return-1})(s,a=>!a.eq(i));s.splice(o+1)}return s.forEach((i,o,a)=>{let l,c;o===0?(c=a[1],l=r?i:a[a.length-1]):o===a.length-1?(l=a[o-1],c=r?i:a[0]):(l=a[o-1],c=a[o+1]),r&&a.length===1?n.push(...new n4(i,i,e).project()):!r||o!==0&&o!==a.length-1?n.push(...new jd(i,l,c,e).project()):n.push(...new n4(i,o===0?c:l,e).project())}),n},aP=t=>{const e={};return Object.keys(t).forEach(r=>{e[r]={},Object.keys(t[r]).forEach(n=>{e[r][n]=V({},t[r][n])})}),e},_W=t=>t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;");let af;const qw=t=>{if(af||af||(af="Intl"in Gg()&&"Segmenter"in Intl&&new Intl.Segmenter(void 0,{granularity:"grapheme"})),af){const e=af.segment(t);return Array.from(e).map(r=>{let{segment:n}=r;return n})}return nke(t)},nke=t=>{const e=[];for(let r,n=0;n<t.length;n++)(r=ske(t,n))!==!1&&e.push(r);return e},ske=(t,e)=>{const r=t.charCodeAt(e);if(isNaN(r))return"";if(r<55296||r>57343)return t.charAt(e);if(55296<=r&&r<=56319){if(t.length<=e+1)throw"High surrogate without following low surrogate";const s=t.charCodeAt(e+1);if(56320>s||s>57343)throw"High surrogate without following low surrogate";return t.charAt(e)+t.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const n=t.charCodeAt(e-1);if(55296>n||n>56319)throw"Low surrogate without preceding high surrogate";return!1};var ike=Object.freeze({__proto__:null,capitalize:function(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return"".concat(t.charAt(0).toUpperCase()).concat(e?t.slice(1):t.slice(1).toLowerCase())},escapeXml:_W,graphemeSplit:qw});const Gw=function(t,e){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.textDecorationThickness!==e.textDecorationThickness||t.textBackgroundColor!==e.textBackgroundColor||t.deltaY!==e.deltaY||r&&(t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough)},CW=(t,e)=>{const r=e.split(`
`),n=[];let s=-1,i={};t=aP(t);for(let o=0;o<r.length;o++){const a=qw(r[o]);if(t[o])for(let l=0;l<a.length;l++){s++;const c=t[o][l];c&&Object.keys(c).length>0&&(Gw(i,c,!0)?n.push({start:s,end:s+1,style:c}):n[n.length-1].end++),i=c||{}}else s+=a.length,i={}}return n},EW=(t,e)=>{if(!Array.isArray(t))return aP(t);const r=e.split(qA),n={};let s=-1,i=0;for(let o=0;o<r.length;o++){const a=qw(r[o]);for(let l=0;l<a.length;l++)s++,t[i]&&t[i].start<=s&&s<t[i].end&&(n[o]=n[o]||{},n[o][l]=V({},t[i].style),s===t[i].end-1&&i++)}return n},zl=["display","transform",Dr,"fill-opacity","fill-rule","opacity",cs,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function s4(t,e){const r=t.nodeName,n=t.getAttribute("class"),s=t.getAttribute("id"),i="(?![a-zA-Z\\-]+)";let o;if(o=new RegExp("^"+r,"i"),e=e.replace(o,""),s&&e.length&&(o=new RegExp("#"+s+i,"i"),e=e.replace(o,"")),n&&e.length){const a=n.split(" ");for(let l=a.length;l--;)o=new RegExp("\\."+a[l]+i,"i"),e=e.replace(o,"")}return e.length===0}function oke(t,e){let r=!0;const n=s4(t,e.pop());return n&&e.length&&(r=function(s,i){let o,a=!0;for(;s.parentElement&&s.parentElement.nodeType===1&&i.length;)a&&(o=i.pop()),a=s4(s=s.parentElement,o);return i.length===0}(t,e)),n&&r&&e.length===0}const ake=t=>{var e;return(e=kEe[t])!==null&&e!==void 0?e:t},lke=new RegExp("(".concat(Ni,")"),"gi"),cke=t=>t.replace(lke," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var i4,o4,a4,l4,c4,u4,d4;const Mn="(".concat(Ni,")"),uke=String.raw(i4||(i4=To(["(skewX)(",")"],["(skewX)\\(","\\)"])),Mn),dke=String.raw(o4||(o4=To(["(skewY)(",")"],["(skewY)\\(","\\)"])),Mn),hke=String.raw(a4||(a4=To(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Mn,Mn,Mn),fke=String.raw(l4||(l4=To(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Mn,Mn),pke=String.raw(c4||(c4=To(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Mn,Mn),gke=String.raw(u4||(u4=To(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Mn,Mn,Mn,Mn,Mn,Mn),lP="(?:".concat(gke,"|").concat(pke,"|").concat(hke,"|").concat(fke,"|").concat(uke,"|").concat(dke,")"),mke="(?:".concat(lP,"*)"),yke=String.raw(d4||(d4=To(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),mke),vke=new RegExp(yke),xke=new RegExp(lP),wke=new RegExp(lP,"g");function Sk(t){const e=[];if(!(t=cke(t).replace(/\s*([()])\s*/gi,"$1"))||t&&!vke.test(t))return[...Bn];for(const r of t.matchAll(wke)){const n=xke.exec(r[0]);if(!n)continue;let s=Bn;const i=n.filter(g=>!!g),[,o,...a]=i,[l,c,d,h,f,p]=a.map(g=>parseFloat(g));switch(o){case"translate":s=Fh(l,c);break;case GA:s=fu({angle:l},{x:c,y:d});break;case Bw:s=Uw(l,c);break;case Ih:s=JA(l);break;case Dh:s=ZA(l);break;case"matrix":s=[l,c,d,h,f,p]}e.push(s)}return $w(e)}function bke(t,e,r,n){const s=Array.isArray(e);let i,o=e;if(t!==Dr&&t!==cs||e!==ls){if(t==="strokeUniform")return e==="non-scaling-stroke";if(t==="strokeDashArray")o=e===ls?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(t==="transformMatrix")o=r&&r.transformMatrix?_r(r.transformMatrix,Sk(e)):Sk(e);else if(t==="visible")o=e!==ls&&e!=="hidden",r&&r.visible===!1&&(o=!1);else if(t==="opacity")o=parseFloat(e),r&&r.opacity!==void 0&&(o*=r.opacity);else if(t==="textAnchor")o=e==="start"?jt:e==="end"?hr:ct;else if(t==="charSpacing"||t===Hc)i=jc(e,n)/n*1e3;else if(t==="paintFirst"){const a=e.indexOf(Dr),l=e.indexOf(cs);o=Dr,(a>-1&&l>-1&&l<a||a===-1&&l>-1)&&(o=cs)}else{if(t==="href"||t==="xlink:href"||t==="font"||t==="id")return e;if(t==="imageSmoothing")return e==="optimizeQuality";i=s?e.map(jc):jc(e,n)}}else o="";return!s&&isNaN(i)?o:i}function Ske(t,e){const r=t.match(EEe);if(!r)return;const n=r[1],s=r[3],i=r[4],o=r[5],a=r[6];n&&(e.fontStyle=n),s&&(e.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),i&&(e.fontSize=jc(i)),a&&(e.fontFamily=a),o&&(e.lineHeight=o==="normal"?1:o)}function _ke(t,e){t.replace(/;\s*$/,"").split(";").forEach(r=>{if(!r)return;const[n,s]=r.split(":");e[n.trim().toLowerCase()]=s.trim()})}function Cke(t){const e={},r=t.getAttribute("style");return r&&(typeof r=="string"?_ke(r,e):function(n,s){Object.entries(n).forEach(i=>{let[o,a]=i;a!==void 0&&(s[o.toLowerCase()]=a)})}(r,e)),e}const Eke={stroke:"strokeOpacity",fill:"fillOpacity"};function Sa(t,e,r){if(!t)return{};let n,s={},i=WA;t.parentNode&&Y3.test(t.parentNode.nodeName)&&(s=Sa(t.parentElement,e,r),s.fontSize&&(n=i=jc(s.fontSize)));const o=V(V(V({},e.reduce((c,d)=>{const h=t.getAttribute(d);return h&&(c[d]=h),c},{})),function(c){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h={};for(const f in d)oke(c,f.split(" "))&&(h=V(V({},h),d[f]));return h}(t,r)),Cke(t));o[k_]&&t.setAttribute(k_,o[k_]),o[E_]&&(n=jc(o[E_],i),o[E_]="".concat(n));const a={};for(const c in o){const d=ake(c),h=bke(d,o[c],s,n);a[d]=h}a&&a.font&&Ske(a.font,a);const l=V(V({},s),a);return Y3.test(t.nodeName)?l:function(c){const d=Sn.getDefaults();return Object.entries(Eke).forEach(h=>{let[f,p]=h;if(c[p]===void 0||c[f]==="")return;if(c[f]===void 0){if(!d[f])return;c[f]=d[f]}if(c[f].indexOf("url(")===0)return;const g=new At(c[f]);c[f]=g.setAlpha(Dt(g.getAlpha()*c[p],2)).toRgba()}),c}(l)}const kke=["left","top","width","height","visible"],kW=["rx","ry"];class Zi extends Sn{static getDefaults(){return V(V({},super.getDefaults()),Zi.ownDefaults)}constructor(e){super(),Object.assign(this,Zi.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:r}=this;e&&!r?this.ry=e:r&&!e&&(this.rx=r)}_render(e){const{width:r,height:n}=this,s=-r/2,i=-n/2,o=this.rx?Math.min(this.rx,r/2):0,a=this.ry?Math.min(this.ry,n/2):0,l=o!==0||a!==0;e.beginPath(),e.moveTo(s+o,i),e.lineTo(s+r-o,i),l&&e.bezierCurveTo(s+r-Pa*o,i,s+r,i+Pa*a,s+r,i+a),e.lineTo(s+r,i+n-a),l&&e.bezierCurveTo(s+r,i+n-Pa*a,s+r-Pa*o,i+n,s+r-o,i+n),e.lineTo(s+o,i+n),l&&e.bezierCurveTo(s+Pa*o,i+n,s,i+n-Pa*a,s,i+n-a),e.lineTo(s,i+a),l&&e.bezierCurveTo(s,i+Pa*a,s+Pa*o,i,s+o,i),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...kW,...e])}_toSVG(){const{width:e,height:r,rx:n,ry:s}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-r/2,'" rx="').concat(n,'" ry="').concat(s,'" width="').concat(e,'" height="').concat(r,`" />
`)]}static async fromElement(e,r,n){const s=Sa(e,this.ATTRIBUTE_NAMES,n),{left:i=0,top:o=0,width:a=0,height:l=0,visible:c=!0}=s,d=Gt(s,kke);return new this(V(V(V({},r),d),{},{left:i,top:o,width:a,height:l,visible:!!(c&&a&&l)}))}}$(Zi,"type","Rect"),$(Zi,"cacheProperties",[...ba,...kW]),$(Zi,"ownDefaults",{rx:0,ry:0}),$(Zi,"ATTRIBUTE_NAMES",[...zl,"x","y","rx","ry","width","height"]),Me.setClass(Zi),Me.setSVGClass(Zi);const zo="initialization",Jv="added",cP="removed",Zv="imperative",TW=(t,e)=>{const{strokeUniform:r,strokeWidth:n,width:s,height:i,group:o}=e,a=o&&o!==t?Jg(o.calcTransformMatrix(),t.calcTransformMatrix()):null,l=a?e.getRelativeCenterPoint().transform(a):e.getRelativeCenterPoint(),c=!e.isStrokeAccountedForInDimensions(),d=r&&c?QH(new X(n,n),void 0,t.calcTransformMatrix()):KA,h=!r&&c?n:0,f=Vw(s+h,i+h,$w([a,e.calcOwnMatrix()],!0)).add(d).scalarDivide(2);return[l.subtract(f),l.add(f)]};class Kw{calcLayoutResult(e,r){if(this.shouldPerformLayout(e))return this.calcBoundingBox(r,e)}shouldPerformLayout(e){let{type:r,prevStrategy:n,strategy:s}=e;return r===zo||r===Zv||!!n&&s!==n}shouldLayoutClipPath(e){let{type:r,target:{clipPath:n}}=e;return r!==zo&&n&&!n.absolutePositioned}getInitialSize(e,r){return r.size}calcBoundingBox(e,r){const{type:n,target:s}=r;if(n===Zv&&r.overrides)return r.overrides;if(e.length===0)return;const{left:i,top:o,width:a,height:l}=mo(e.map(h=>TW(s,h)).reduce((h,f)=>h.concat(f),[])),c=new X(a,l),d=new X(i,o).add(c.scalarDivide(2));if(n===zo){const h=this.getInitialSize(r,{size:c,center:d});return{center:d,relativeCorrection:new X(0,0),size:h}}return{center:d.transform(s.calcOwnMatrix()),size:c}}}$(Kw,"type","strategy");class _k extends Kw{shouldPerformLayout(e){return!0}}$(_k,"type","fit-content"),Me.setClass(_k);const Tke=["strategy"],jke=["target","strategy","bubbles","prevStrategy"],jW="layoutManager";class fg{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new _k;$(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const r=V(V({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(r);const n=this.getLayoutResult(r);n&&this.commitLayout(r,n),this.onAfterLayout(r,n),this._prevLayoutStrategy=r.strategy}attachHandlers(e,r){const{target:n}=r;return[zv,IH,ug,DH,Lw,FH,Vv,pEe,gEe].map(s=>e.on(s,i=>this.performLayout(s===zv?{type:"object_modified",trigger:s,e:i,target:n}:{type:"object_modifying",trigger:s,e:i,target:n})))}subscribe(e,r){this.unsubscribe(e,r);const n=this.attachHandlers(e,r);this._subscriptions.set(e,n)}unsubscribe(e,r){(this._subscriptions.get(e)||[]).forEach(n=>n()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(r=>this.unsubscribe(r,e))}subscribeTargets(e){e.targets.forEach(r=>this.subscribe(r,e))}onBeforeLayout(e){const{target:r,type:n}=e,{canvas:s}=r;if(n===zo||n===Jv?this.subscribeTargets(e):n===cP&&this.unsubscribeTargets(e),r.fire("layout:before",{context:e}),s&&s.fire("object:layout:before",{target:r,context:e}),n===Zv&&e.deep){const i=Gt(e,Tke);r.forEachObject(o=>o.layoutManager&&o.layoutManager.performLayout(V(V({},i),{},{bubbles:!1,target:o})))}}getLayoutResult(e){const{target:r,strategy:n,type:s}=e,i=n.calcLayoutResult(e,r.getObjects());if(!i)return;const o=s===zo?new X:r.getRelativeCenterPoint(),{center:a,correction:l=new X,relativeCorrection:c=new X}=i,d=o.subtract(a).add(l).transform(s===zo?Bn:_s(r.calcOwnMatrix()),!0).add(c);return{result:i,prevCenter:o,nextCenter:a,offset:d}}commitLayout(e,r){const{target:n}=e,{result:{size:s},nextCenter:i}=r;var o,a;n.set({width:s.x,height:s.y}),this.layoutObjects(e,r),e.type===zo?n.set({left:(o=e.x)!==null&&o!==void 0?o:i.x+s.x*wr(n.originX),top:(a=e.y)!==null&&a!==void 0?a:i.y+s.y*wr(n.originY)}):(n.setPositionByOrigin(i,ct,ct),n.setCoords(),n.set("dirty",!0))}layoutObjects(e,r){const{target:n}=e;n.forEachObject(s=>{s.group===n&&this.layoutObject(e,r,s)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,r,n.clipPath)}layoutObject(e,r,n){let{offset:s}=r;n.set({left:n.left+s.x,top:n.top+s.y})}onAfterLayout(e,r){const{target:n,strategy:s,bubbles:i,prevStrategy:o}=e,a=Gt(e,jke),{canvas:l}=n;n.fire("layout:after",{context:e,result:r}),l&&l.fire("object:layout:after",{context:e,result:r,target:n});const c=n.parent;i&&c!=null&&c.layoutManager&&((a.path||(a.path=[])).push(n),c.layoutManager.performLayout(V(V({},a),{},{target:c}))),n.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(r=>r.forEach(n=>n())),e.clear()}toObject(){return{type:jW,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}Me.setClass(fg,jW);const Ake=["type","objects","layoutManager"];class Pke extends fg{performLayout(){}}class sa extends LH(Sn){static getDefaults(){return V(V({},super.getDefaults()),sa.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),$(this,"_activeObjects",[]),$(this,"__objectSelectionTracker",void 0),$(this,"__objectSelectionDisposer",void 0),Object.assign(this,sa.ownDefaults),this.setOptions(r),this.groupInit(e,r)}groupInit(e,r){var n;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(s=>{this.enterGroup(s,!1)}),this.layoutManager=(n=r.layoutManager)!==null&&n!==void 0?n:new fg,this.layoutManager.performLayout({type:zo,target:this,targets:[...e],x:r.left,y:r.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(El("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(El("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((r,n,s)=>this.canEnterGroup(r)&&s.indexOf(r)===n)}add(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];const s=this._filterObjectsBeforeEnteringGroup(r),i=super.add(...s);return this._onAfterObjectsChange(Jv,s),i}insertAt(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];const i=this._filterObjectsBeforeEnteringGroup(n),o=super.insertAt(e,...i);return this._onAfterObjectsChange(Jv,i),o}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(cP,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,r){this.exitGroup(e,r),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,r){this.layoutManager.performLayout({type:e,targets:r,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,r){const n=this[e];return super._set(e,r),e==="canvas"&&n!==r&&(this._objects||[]).forEach(s=>{s._set(e,r)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,r){let{target:n}=r;const s=this._activeObjects;if(e)s.push(n),this._set("dirty",!0);else if(s.length>0){const i=s.indexOf(n);i>-1&&(s.splice(i,1),this._set("dirty",!0))}}_watchObject(e,r){e&&this._watchObject(!1,r),e?(r.on("selected",this.__objectSelectionTracker),r.on("deselected",this.__objectSelectionDisposer)):(r.off("selected",this.__objectSelectionTracker),r.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,r){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,r)}_enterGroup(e,r){r&&nh(e,_r(_s(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const n=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();n&&(n===e||e.isDescendantOf(n))&&this._activeObjects.push(e)}exitGroup(e,r){this._exitGroup(e,r),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,r){e._set("group",void 0),r||(nh(e,_r(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const n=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;n>-1&&this._activeObjects.splice(n,1)}shouldCache(){const e=Sn.prototype.shouldCache.call(this);if(e){for(let r=0;r<this._objects.length;r++)if(this._objects[r].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,r,n){this._renderBackground(e);for(let i=0;i<this._objects.length;i++){var s;const o=this._objects[i];(s=this.canvas)!==null&&s!==void 0&&s.preserveObjectStacking&&o.group!==this?(e.save(),e.transform(..._s(this.calcTransformMatrix())),o.render(e),e.restore()):o.group===this&&o.render(e)}this._drawClipPath(e,this.clipPath,n)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(V({target:this,type:Zv},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,r){const n=this.includeDefaultValues;return this._objects.filter(function(s){return!s.excludeFromExport}).map(function(s){const i=s.includeDefaultValues;s.includeDefaultValues=n;const o=s[e||"toObject"](r);return s.includeDefaultValues=i,o})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const r=this.layoutManager.toObject();return V(V(V({},super.toObject(["subTargetCheck","interactive",...e])),r.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:r}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const r=Zi.prototype._toSVG.call(this),n=r.indexOf("COMMON_PARTS");r[n]='for="group" ';const s=r.join("");return e?e(s):s}_toSVG(e){const r=["<g ","COMMON_PARTS",` >
`],n=this._createSVGBgRect(e);n&&r.push("		",n);for(let s=0;s<this._objects.length;s++)r.push("		",this._objects[s].toSVG(e));return r.push(`</g>
`),r}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",r=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),r].join("")}toClipPathSVG(e){const r=[],n=this._createSVGBgRect(e);n&&r.push("	",n);for(let s=0;s<this._objects.length;s++)r.push("	",this._objects[s].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(r,{reviver:e})}static fromObject(e,r){let{type:n,objects:s=[],layoutManager:i}=e,o=Gt(e,Ake);return Promise.all([th(s,r),Yg(o,r)]).then(a=>{let[l,c]=a;const d=new this(l,V(V(V({},o),c),{},{layoutManager:new Pke}));if(i){const h=Me.getClass(i.type),f=Me.getClass(i.strategy);d.layoutManager=new h(new f)}else d.layoutManager=new fg;return d.layoutManager.subscribeTargets({type:zo,target:d,targets:d.getObjects()}),d.setCoords(),d})}}$(sa,"type","Group"),$(sa,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),Me.setClass(sa);const AW=(t,e)=>Math.min(e.width/t.width,e.height/t.height),PW=(t,e)=>Math.max(e.width/t.width,e.height/t.height),Ck="\\s*,?\\s*",lf="".concat(Ck,"(").concat(Ni,")"),Nke="".concat(lf).concat(lf).concat(lf).concat(Ck,"([01])").concat(Ck,"([01])").concat(lf).concat(lf),Rke={m:"l",M:"L"},Oke=(t,e,r,n,s,i,o,a,l,c,d)=>{const h=$i(t),f=Ui(t),p=$i(e),g=Ui(e),y=r*s*p-n*i*g+o,v=n*s*p+r*i*g+a;return["C",c+l*(-r*s*f-n*i*h),d+l*(-n*s*f+r*i*h),y+l*(r*s*g+n*i*p),v+l*(n*s*g-r*i*p),y,v]},h4=(t,e,r,n)=>{const s=Math.atan2(e,t),i=Math.atan2(n,r);return i>=s?i-s:2*Math.PI-(s-i)};function Ek(t,e,r,n,s,i,o,a){let l;if(Et.cachesBoundsOfCurve&&(l=[...arguments].join(),hp.boundsOfCurveCache[l]))return hp.boundsOfCurveCache[l];const c=Math.sqrt,d=Math.abs,h=[],f=[[0,0],[0,0]];let p=6*t-12*r+6*s,g=-3*t+9*r-9*s+3*o,y=3*r-3*t;for(let _=0;_<2;++_){if(_>0&&(p=6*e-12*n+6*i,g=-3*e+9*n-9*i+3*a,y=3*n-3*e),d(g)<1e-12){if(d(p)<1e-12)continue;const I=-y/p;0<I&&I<1&&h.push(I);continue}const C=p*p-4*y*g;if(C<0)continue;const T=c(C),O=(-p+T)/(2*g);0<O&&O<1&&h.push(O);const R=(-p-T)/(2*g);0<R&&R<1&&h.push(R)}let v=h.length;const m=v,x=RW(t,e,r,n,s,i,o,a);for(;v--;){const{x:_,y:C}=x(h[v]);f[0][v]=_,f[1][v]=C}f[0][m]=t,f[1][m]=e,f[0][m+1]=o,f[1][m+1]=a;const b=[new X(Math.min(...f[0]),Math.min(...f[1])),new X(Math.max(...f[0]),Math.max(...f[1]))];return Et.cachesBoundsOfCurve&&(hp.boundsOfCurveCache[l]=b),b}const Mke=(t,e,r)=>{let[n,s,i,o,a,l,c,d]=r;const h=((f,p,g,y,v,m,x)=>{if(g===0||y===0)return[];let b=0,_=0,C=0;const T=Math.PI,O=x*HA,R=Ui(O),I=$i(O),H=.5*(-I*f-R*p),re=.5*(-I*p+R*f),L=g**2,z=y**2,Y=re**2,pe=H**2,Q=L*z-L*Y-z*pe;let se=Math.abs(g),F=Math.abs(y);if(Q<0){const Se=Math.sqrt(1-Q/(L*z));se*=Se,F*=Se}else C=(v===m?-1:1)*Math.sqrt(Q/(L*Y+z*pe));const K=C*se*re/F,de=-C*F*H/se,le=I*K-R*de+.5*f,be=R*K+I*de+.5*p;let Be=h4(1,0,(H-K)/se,(re-de)/F),He=h4((H-K)/se,(re-de)/F,(-H-K)/se,(-re-de)/F);m===0&&He>0?He-=2*T:m===1&&He<0&&(He+=2*T);const ht=Math.ceil(Math.abs(He/T*2)),U=[],D=He/ht,ee=8/3*Math.sin(D/4)*Math.sin(D/4)/Math.sin(D/2);let me=Be+D;for(let Se=0;Se<ht;Se++)U[Se]=Oke(Be,me,I,R,se,F,le,be,ee,b,_),b=U[Se][5],_=U[Se][6],Be=me,me+=D;return U})(c-t,d-e,s,i,a,l,o);for(let f=0,p=h.length;f<p;f++)h[f][1]+=t,h[f][2]+=e,h[f][3]+=t,h[f][4]+=e,h[f][5]+=t,h[f][6]+=e;return h},NW=t=>{let e=0,r=0,n=0,s=0;const i=[];let o,a=0,l=0;for(const c of t){const d=[...c];let h;switch(d[0]){case"l":d[1]+=e,d[2]+=r;case"L":e=d[1],r=d[2],h=["L",e,r];break;case"h":d[1]+=e;case"H":e=d[1],h=["L",e,r];break;case"v":d[1]+=r;case"V":r=d[1],h=["L",e,r];break;case"m":d[1]+=e,d[2]+=r;case"M":e=d[1],r=d[2],n=d[1],s=d[2],h=["M",e,r];break;case"c":d[1]+=e,d[2]+=r,d[3]+=e,d[4]+=r,d[5]+=e,d[6]+=r;case"C":a=d[3],l=d[4],e=d[5],r=d[6],h=["C",d[1],d[2],a,l,e,r];break;case"s":d[1]+=e,d[2]+=r,d[3]+=e,d[4]+=r;case"S":o==="C"?(a=2*e-a,l=2*r-l):(a=e,l=r),e=d[3],r=d[4],h=["C",a,l,d[1],d[2],e,r],a=h[3],l=h[4];break;case"q":d[1]+=e,d[2]+=r,d[3]+=e,d[4]+=r;case"Q":a=d[1],l=d[2],e=d[3],r=d[4],h=["Q",a,l,e,r];break;case"t":d[1]+=e,d[2]+=r;case"T":o==="Q"?(a=2*e-a,l=2*r-l):(a=e,l=r),e=d[1],r=d[2],h=["Q",a,l,e,r];break;case"a":d[6]+=e,d[7]+=r;case"A":Mke(e,r,d).forEach(f=>i.push(f)),e=d[6],r=d[7];break;case"z":case"Z":e=n,r=s,h=["Z"]}h?(i.push(h),o=h[0]):o=""}return i},Qv=(t,e,r,n)=>Math.sqrt((r-t)**2+(n-e)**2),RW=(t,e,r,n,s,i,o,a)=>l=>{const c=l**3,d=(p=>3*p**2*(1-p))(l),h=(p=>3*p*(1-p)**2)(l),f=(p=>(1-p)**3)(l);return new X(o*c+s*d+r*h+t*f,a*c+i*d+n*h+e*f)},OW=t=>t**2,MW=t=>2*t*(1-t),IW=t=>(1-t)**2,Ike=(t,e,r,n,s,i,o,a)=>l=>{const c=OW(l),d=MW(l),h=IW(l),f=3*(h*(r-t)+d*(s-r)+c*(o-s)),p=3*(h*(n-e)+d*(i-n)+c*(a-i));return Math.atan2(p,f)},Dke=(t,e,r,n,s,i)=>o=>{const a=OW(o),l=MW(o),c=IW(o);return new X(s*a+r*l+t*c,i*a+n*l+e*c)},Fke=(t,e,r,n,s,i)=>o=>{const a=1-o,l=2*(a*(r-t)+o*(s-r)),c=2*(a*(n-e)+o*(i-n));return Math.atan2(c,l)},f4=(t,e,r)=>{let n=new X(e,r),s=0;for(let i=1;i<=100;i+=1){const o=t(i/100);s+=Qv(n.x,n.y,o.x,o.y),n=o}return s},Lke=(t,e)=>{let r,n=0,s=0,i={x:t.x,y:t.y},o=V({},i),a=.01,l=0;const c=t.iterator,d=t.angleFinder;for(;s<e&&a>1e-4;)o=c(n),l=n,r=Qv(i.x,i.y,o.x,o.y),r+s>e?(n-=a,a/=2):(i=o,n+=a,s+=r);return V(V({},o),{},{angle:d(l)})},uP=t=>{let e,r,n=0,s=0,i=0,o=0,a=0;const l=[];for(const c of t){const d={x:s,y:i,command:c[0],length:0};switch(c[0]){case"M":r=d,r.x=o=s=c[1],r.y=a=i=c[2];break;case"L":r=d,r.length=Qv(s,i,c[1],c[2]),s=c[1],i=c[2];break;case"C":e=RW(s,i,c[1],c[2],c[3],c[4],c[5],c[6]),r=d,r.iterator=e,r.angleFinder=Ike(s,i,c[1],c[2],c[3],c[4],c[5],c[6]),r.length=f4(e,s,i),s=c[5],i=c[6];break;case"Q":e=Dke(s,i,c[1],c[2],c[3],c[4]),r=d,r.iterator=e,r.angleFinder=Fke(s,i,c[1],c[2],c[3],c[4]),r.length=f4(e,s,i),s=c[3],i=c[4];break;case"Z":r=d,r.destX=o,r.destY=a,r.length=Qv(s,i,o,a),s=o,i=a}n+=r.length,l.push(r)}return l.push({length:n,x:s,y:i}),l},DW=function(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:uP(t),n=0;for(;e-r[n].length>0&&n<r.length-2;)e-=r[n].length,n++;const s=r[n],i=e/s.length,o=t[n];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":return V(V({},new X(s.x,s.y).lerp(new X(s.destX,s.destY),i)),{},{angle:Math.atan2(s.destY-s.y,s.destX-s.x)});case"L":return V(V({},new X(s.x,s.y).lerp(new X(o[1],o[2]),i)),{},{angle:Math.atan2(o[2]-s.y,o[1]-s.x)});case"C":case"Q":return Lke(s,e)}},Bke=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),p4=new RegExp(Nke,"g"),$ke=new RegExp(Ni,"gi"),Uke={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},FW=t=>{var e;const r=[],n=(e=t.match(Bke))!==null&&e!==void 0?e:[];for(const s of n){const i=s[0];if(i==="z"||i==="Z"){r.push([i]);continue}const o=Uke[i.toLowerCase()];let a=[];if(i==="a"||i==="A"){p4.lastIndex=0;for(let l=null;l=p4.exec(s);)a.push(...l.slice(1))}else a=s.match($ke)||[];for(let l=0;l<a.length;l+=o){const c=new Array(o),d=Rke[i];c[0]=l>0&&d?d:i;for(let h=0;h<o;h++)c[h+1]=parseFloat(a[l+h]);r.push(c)}}return r},Vke=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=new X(t[0]),n=new X(t[1]),s=1,i=0;const o=[],a=t.length,l=a>2;let c;for(l&&(s=t[2].x<n.x?-1:t[2].x===n.x?0:1,i=t[2].y<n.y?-1:t[2].y===n.y?0:1),o.push(["M",r.x-s*e,r.y-i*e]),c=1;c<a;c++){if(!r.eq(n)){const d=r.midPointFrom(n);o.push(["Q",r.x,r.y,d.x,d.y])}r=t[c],c+1<t.length&&(n=t[c+1])}return l&&(s=r.x>t[c-2].x?1:r.x===t[c-2].x?0:-1,i=r.y>t[c-2].y?1:r.y===t[c-2].y?0:-1),o.push(["L",r.x+s*e,r.y+i*e]),o},LW=(t,e)=>t.map(r=>r.map((n,s)=>s===0||e===void 0?n:Dt(n,e)).join(" ")).join(" ");function ex(t,e){const r=t.style;r&&e&&(typeof e=="string"?r.cssText+=";"+e:Object.entries(e).forEach(n=>{let[s,i]=n;return r.setProperty(s,i)}))}const zke=(t,e)=>Math.floor(Math.random()*(e-t+1))+t;function Hke(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=e.onComplete||kc,n=new(Gg()).XMLHttpRequest,s=e.signal,i=function(){n.abort()},o=function(){s&&s.removeEventListener("abort",i),n.onerror=n.ontimeout=kc};if(s&&s.aborted)throw new OH("request");return s&&s.addEventListener("abort",i,{once:!0}),n.onreadystatechange=function(){n.readyState===4&&(o(),r(n),n.onreadystatechange=kc)},n.onerror=n.ontimeout=o,n.open("get",t,!0),n.send(),n}const Wke=(t,e)=>{let r=t._findCenterFromElement();t.transformMatrix&&((n=>{if(n.transformMatrix){const{scaleX:s,scaleY:i,angle:o,skewX:a}=eh(n.transformMatrix);n.flipX=!1,n.flipY=!1,n.set($n,s),n.set(Ds,i),n.angle=o,n.skewX=a,n.skewY=0}})(t),r=r.transform(t.transformMatrix)),delete t.transformMatrix,e&&(t.scaleX*=e.scaleX,t.scaleY*=e.scaleY,t.cropX=e.cropX,t.cropY=e.cropY,r.x+=e.offsetLeft,r.y+=e.offsetTop,t.width=e.width,t.height=e.height),t.setPositionByOrigin(r,ct,ct)};var g4=Object.freeze({__proto__:null,addTransformToObject:JH,animate:iP,animateColor:pW,applyTransformToObject:nh,calcAngleBetweenVectors:Xv,calcDimensionsMatrix:Kg,calcPlaneChangeMatrix:Jg,calcVectorRotation:dW,cancelAnimFrame:$H,capValue:Wc,composeMatrix:WH,copyCanvasElement:t=>{var e;const r=Fs(t);return(e=r.getContext("2d"))===null||e===void 0||e.drawImage(t,0,0),r},cos:$i,createCanvasElement:So,createImage:UH,createRotateMatrix:fu,createScaleMatrix:Uw,createSkewXMatrix:JA,createSkewYMatrix:ZA,createTranslateMatrix:Fh,createVector:Kv,crossProduct:Td,degreesToRadians:or,dotProduct:hW,ease:PEe,enlivenObjectEnlivables:Yg,enlivenObjects:th,findScaleToCover:PW,findScaleToFit:AW,getBoundsOfCurve:Ek,getOrthonormalVector:nP,getPathSegmentsInfo:uP,getPointOnPath:DW,getPointer:XH,getRandomInt:zke,getRegularPolygonPath:(t,e)=>{const r=2*Math.PI/t;let n=-kl;t%2==0&&(n+=r/2);const s=new Array(t+1);for(let i=0;i<t;i++){const o=i*r+n,{x:a,y:l}=new X($i(o),Ui(o)).scalarMultiply(e);s[i]=[i===0?"M":"L",a,l]}return s[t]=["Z"],s},getSmoothPathFromPoints:Vke,getSvgAttributes:t=>{const e=["instantiated_by_use","style","id","class"];switch(t){case"linearGradient":return e.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return e.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return e.concat(["offset","stop-color","stop-opacity"])}return e},getUnitVector:Hw,groupSVGElements:(t,e)=>t&&t.length===1?t[0]:new sa(t,e),hasStyleChanged:Gw,invertTransform:_s,isBetweenVectors:wk,isIdentityMatrix:VH,isTouchEvent:Wv,isTransparent:wW,joinPath:LW,loadImage:pp,magnitude:Yv,makeBoundingBoxFromPoints:mo,makePathSimpler:NW,matrixToSVG:rh,mergeClipPaths:(t,e)=>{var r;let n=t,s=e;n.inverted&&!s.inverted&&(n=e,s=t),xk(s,(r=s.group)===null||r===void 0?void 0:r.calcTransformMatrix(),n.calcTransformMatrix());const i=n.inverted&&s.inverted;return i&&(n.inverted=s.inverted=!1),new sa([n],{clipPath:s,inverted:i})},multiplyTransformMatrices:_r,multiplyTransformMatrixArray:$w,parsePath:FW,parsePreserveAspectRatioAttribute:sW,parseUnit:jc,pick:pu,projectStrokeOnPoints:SW,qrDecompose:eh,radiansToDegrees:_o,removeFromArray:nc,removeTransformFromObject:(t,e)=>{const r=_s(e),n=_r(r,t.calcOwnMatrix());nh(t,n)},removeTransformMatrixForSvgParsing:Wke,request:Hke,requestAnimFrame:fp,resetObjectTransform:ZH,rotatePoint:(t,e,r)=>t.rotate(r,e),rotateVector:rP,saveObjectTransform:eP,sendObjectToPlane:xk,sendPointToPlane:Tc,sendVectorToPlane:QH,setStyle:ex,sin:Ui,sizeAfterTransform:Vw,string:ike,stylesFromArray:EW,stylesToArray:CW,toBlob:XA,toDataURL:YA,toFixed:Dt,transformPath:(t,e,r)=>(r&&(e=_r(e,[1,0,0,1,-r.x,-r.y])),t.map(n=>{const s=[...n];for(let i=1;i<n.length-1;i+=2){const{x:o,y:a}=yn({x:n[i],y:n[i+1]},e);s[i]=o,s[i+1]=a}return s})),transformPoint:yn});class qke extends YH{constructor(e){let{allowTouchScrolling:r=!1,containerClass:n=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),$(this,"upper",void 0),$(this,"container",void 0);const{el:s}=this.lower,i=this.createUpperCanvas();this.upper={el:i,ctx:i.getContext("2d")},this.applyCanvasStyle(s,{allowTouchScrolling:r}),this.applyCanvasStyle(i,{allowTouchScrolling:r,styles:{position:"absolute",left:"0",top:"0"}});const o=this.createContainerElement();o.classList.add(n),s.parentNode&&s.parentNode.replaceChild(o,s),o.append(s,i),this.container=o}createUpperCanvas(){const{el:e}=this.lower,r=So();return r.className=e.className,r.classList.remove("lower-canvas"),r.classList.add("upper-canvas"),r.setAttribute("data-fabric","top"),r.style.cssText=e.style.cssText,r.setAttribute("draggable","true"),r}createContainerElement(){const e=Mh().createElement("div");return e.setAttribute("data-fabric","wrapper"),ex(e,{position:"relative"}),B3(e),e}applyCanvasStyle(e,r){const{styles:n,allowTouchScrolling:s}=r;ex(e,V(V({},n),{},{"touch-action":s?"manipulation":ls})),B3(e)}setDimensions(e,r){super.setDimensions(e,r);const{el:n,ctx:s}=this.upper;KH(n,s,e,r)}setCSSDimensions(e){super.setCSSDimensions(e),vk(this.upper.el,e),vk(this.container,e)}cleanupDOM(e){const r=this.container,{el:n}=this.lower,{el:s}=this.upper;super.cleanupDOM(e),r.removeChild(s),r.removeChild(n),r.parentNode&&r.parentNode.replaceChild(n,r)}dispose(){super.dispose(),bo().dispose(this.upper.el),delete this.upper,delete this.container}}class Yw extends Xg{constructor(){super(...arguments),$(this,"targets",[]),$(this,"_hoveredTargets",[]),$(this,"_objectsToRender",void 0),$(this,"_currentTransform",null),$(this,"_groupSelector",null),$(this,"contextTopDirty",!1)}static getDefaults(){return V(V({},super.getDefaults()),Yw.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new qke(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(r=>!r.group&&r!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const r=this.getRetinaScaling(),n=Math.ceil((2*e+1)*r);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=n,this.pixelFindContext.scale(r,r)}isTargetTransparent(e,r,n){const s=this.targetFindTolerance,i=this.pixelFindContext;this.clearContext(i),i.save(),i.translate(-r+s,-n+s),i.transform(...this.viewportTransform);const o=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(i),e.selectionBackgroundColor=o,i.restore();const a=Math.round(s*this.getRetinaScaling());return wW(i,a,a,a)}_isSelectionKeyPressed(e){const r=this.selectionKey;return!!r&&(Array.isArray(r)?!!r.find(n=>!!n&&e[n]===!0):e[r])}_shouldClearSelection(e,r){const n=this.getActiveObjects(),s=this._activeObject;return!!(!r||r&&s&&n.length>1&&n.indexOf(r)===-1&&s!==r&&!this._isSelectionKeyPressed(e)||r&&!r.evented||r&&!r.selectable&&s&&s!==r)}_shouldCenterTransform(e,r,n){if(!e)return;let s;return r===Bw||r===$n||r===Ds||r===ug?s=this.centeredScaling||e.centeredScaling:r===GA&&(s=this.centeredRotation||e.centeredRotation),s?!n:n}_getOriginFromCorner(e,r){const n={x:e.originX,y:e.originY};return r&&(["ml","tl","bl"].includes(r)?n.x=hr:["mr","tr","br"].includes(r)&&(n.x=jt),["tl","mt","tr"].includes(r)?n.y=yk:["bl","mb","br"].includes(r)&&(n.y=as)),n}_setupCurrentTransform(e,r,n){var s;const i=r.group?Tc(this.getScenePoint(e),void 0,r.group.calcTransformMatrix()):this.getScenePoint(e),{key:o="",control:a}=r.getActiveControl()||{},l=n&&a?(s=a.getActionHandler(e,r,a))===null||s===void 0?void 0:s.bind(a):SEe,c=((p,g,y,v)=>{if(!g||!p)return"drag";const m=v.controls[g];return m.getActionName(y,m,v)})(n,o,e,r),d=e[this.centeredKey],h=this._shouldCenterTransform(r,c,d)?{x:ct,y:ct}:this._getOriginFromCorner(r,o),f={target:r,action:c,actionHandler:l,actionPerformed:!1,corner:o,scaleX:r.scaleX,scaleY:r.scaleY,skewX:r.skewX,skewY:r.skewY,offsetX:i.x-r.left,offsetY:i.y-r.top,originX:h.x,originY:h.y,ex:i.x,ey:i.y,lastX:i.x,lastY:i.y,theta:or(r.angle),width:r.width,height:r.height,shiftKey:e.shiftKey,altKey:d,original:V(V({},eP(r)),{},{originX:h.x,originY:h.y})};this._currentTransform=f,this.fire("before:transform",{e,transform:f})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:r,y:n,deltaX:s,deltaY:i}=this._groupSelector,o=new X(r,n).transform(this.viewportTransform),a=new X(r+s,n+i).transform(this.viewportTransform),l=this.selectionLineWidth/2;let c=Math.min(o.x,a.x),d=Math.min(o.y,a.y),h=Math.max(o.x,a.x),f=Math.max(o.y,a.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(c,d,h-c,f-d)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,c+=l,d+=l,h-=l,f-=l,Sn.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(c,d,h-c,f-d))}findTarget(e){if(this.skipTargetFind)return;const r=this.getViewportPoint(e),n=this._activeObject,s=this.getActiveObjects();if(this.targets=[],n&&s.length>=1){if(n.findControl(r,Wv(e))||s.length>1&&this.searchPossibleTargets([n],r))return n;if(n===this.searchPossibleTargets([n],r)){if(this.preserveObjectStacking){const i=this.targets;this.targets=[];const o=this.searchPossibleTargets(this._objects,r);return e[this.altSelectionKey]&&o&&o!==n?(this.targets=i,n):o}return n}}return this.searchPossibleTargets(this._objects,r)}_pointIsInObjectSelectionArea(e,r){let n=e.getCoords();const s=this.getZoom(),i=e.padding/s;if(i){const[o,a,l,c]=n,d=Math.atan2(a.y-o.y,a.x-o.x),h=$i(d)*i,f=Ui(d)*i,p=h+f,g=h-f;n=[new X(o.x-g,o.y-p),new X(a.x+p,a.y-g),new X(l.x+g,l.y+p),new X(c.x-p,c.y+g)]}return Kt.isPointInPolygon(r,n)}_checkTarget(e,r){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,Tc(r,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,r.x,r.y)))}_searchPossibleTargets(e,r){let n=e.length;for(;n--;){const s=e[n];if(this._checkTarget(s,r)){if(Xy(s)&&s.subTargetCheck){const i=this._searchPossibleTargets(s._objects,r);i&&this.targets.push(i)}return s}}}searchPossibleTargets(e,r){const n=this._searchPossibleTargets(e,r);if(n&&Xy(n)&&n.interactive&&this.targets[0]){const s=this.targets;for(let i=s.length-1;i>0;i--){const o=s[i];if(!Xy(o)||!o.interactive)return o}return s[0]}return n}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const n=this.upperCanvasEl,s=n.getBoundingClientRect();let i=XH(e),o=s.width||0,a=s.height||0;o&&a||(as in s&&yk in s&&(a=Math.abs(s.top-s.bottom)),hr in s&&jt in s&&(o=Math.abs(s.right-s.left))),this.calcOffset(),i.x=i.x-this._offset.left,i.y=i.y-this._offset.top,r||(i=Tc(i,void 0,this.viewportTransform));const l=this.getRetinaScaling();l!==1&&(i.x/=l,i.y/=l);const c=o===0||a===0?new X(1,1):new X(n.width/o,n.height/a);return i.multiply(c)}_setDimensionsImpl(e,r){this._resetTransformEventData(),super._setDimensionsImpl(e,r),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=So(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return sc(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,r){let n=!1,s=!1;const i=this.getActiveObjects(),o=[],a=[];e.forEach(l=>{i.includes(l)||(n=!0,l.fire("deselected",{e:r,target:l}),a.push(l))}),i.forEach(l=>{e.includes(l)||(n=!0,l.fire("selected",{e:r,target:l}),o.push(l))}),e.length>0&&i.length>0?(s=!0,n&&this.fire("selection:updated",{e:r,selected:o,deselected:a})):i.length>0?(s=!0,this.fire("selection:created",{e:r,selected:o})):e.length>0&&(s=!0,this.fire("selection:cleared",{e:r,deselected:a})),s&&(this._objectsToRender=void 0)}setActiveObject(e,r){const n=this.getActiveObjects(),s=this._setActiveObject(e,r);return this._fireSelectionEvents(n,r),s}_setActiveObject(e,r){const n=this._activeObject;return n!==e&&!(!this._discardActiveObject(r,e)&&this._activeObject)&&!e.onSelect({e:r})&&(this._activeObject=e,sc(e)&&n!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,r){const n=this._activeObject;return!!n&&!n.onDeselect({e,object:r})&&(this._currentTransform&&this._currentTransform.target===n&&this.endCurrentTransform(e),sc(n)&&n===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const r=this.getActiveObjects(),n=this.getActiveObject();r.length&&this.fire("before:selection:cleared",{e,deselected:[n]});const s=this._discardActiveObject(e);return this._fireSelectionEvents(r,e),s}endCurrentTransform(e){const r=this._currentTransform;this._finalizeCurrentTransform(e),r&&r.target&&(r.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const r=this._currentTransform,n=r.target,s={e,target:n,transform:r,action:r.action};n._scaling&&(n._scaling=!1),n.setCoords(),r.actionPerformed&&(this.fire("object:modified",s),n.fire(zv,s))}setViewportTransform(e){super.setViewportTransform(e);const r=this._activeObject;r&&r.setCoords()}destroy(){const e=this._activeObject;sc(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const r=this._activeObject;r&&r._renderControls(e)}_toObject(e,r,n){const s=this._realizeGroupTransformOnObject(e),i=super._toObject(e,r,n);return e.set(s),i}_realizeGroupTransformOnObject(e){const{group:r}=e;if(r&&sc(r)&&this._activeObject===r){const n=pu(e,["angle","flipX","flipY",jt,$n,Ds,Ih,Dh,as]);return JH(e,r.calcOwnMatrix()),n}return{}}_setSVGObject(e,r,n){const s=this._realizeGroupTransformOnObject(r);super._setSVGObject(e,r,n),r.set(s)}}$(Yw,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class Gke{constructor(e){$(this,"targets",[]),$(this,"__disposer",void 0);const r=()=>{const{hiddenTextarea:s}=e.getActiveObject()||{};s&&s.focus()},n=e.upperCanvasEl;n.addEventListener("click",r),this.__disposer=()=>n.removeEventListener("click",r)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),nc(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var r;!((r=this.target)===null||r===void 0)&&r.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const Kke=["target","oldTarget","fireCanvas","e"],hs={passive:!1},Ou=(t,e)=>{const r=t.getViewportPoint(e),n=t.getScenePoint(e);return{viewportPoint:r,scenePoint:n,pointer:r,absolutePointer:n}},Na=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.addEventListener(...r)},zs=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.removeEventListener(...r)},Yke={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class kk extends Yw{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),$(this,"_isClick",void 0),$(this,"textEditingManager",new Gke(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(r=>{this[r]=this[r].bind(this)}),this.addOrRemove(Na,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,r){const n=this.upperCanvasEl,s=this._getEventPrefix();e(GH(n),"resize",this._onResize),e(n,s+"down",this._onMouseDown),e(n,"".concat(s,"move"),this._onMouseMove,hs),e(n,"".concat(s,"out"),this._onMouseOut),e(n,"".concat(s,"enter"),this._onMouseEnter),e(n,"wheel",this._onMouseWheel),e(n,"contextmenu",this._onContextMenu),e(n,"click",this._onClick),e(n,"dblclick",this._onClick),e(n,"dragstart",this._onDragStart),e(n,"dragend",this._onDragEnd),e(n,"dragover",this._onDragOver),e(n,"dragenter",this._onDragEnter),e(n,"dragleave",this._onDragLeave),e(n,"drop",this._onDrop),this.enablePointerEvents||e(n,"touchstart",this._onTouchStart,hs)}removeListeners(){this.addOrRemove(zs,"remove");const e=this._getEventPrefix(),r=Pi(this.upperCanvasEl);zs(r,"".concat(e,"up"),this._onMouseUp),zs(r,"touchend",this._onTouchEnd,hs),zs(r,"".concat(e,"move"),this._onMouseMove,hs),zs(r,"touchmove",this._onMouseMove,hs),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const r=this._hoveredTarget,n=V({e},Ou(this,e));this.fire("mouse:out",V(V({},n),{},{target:r})),this._hoveredTarget=void 0,r&&r.fire("mouseout",V({},n)),this._hoveredTargets.forEach(s=>{this.fire("mouse:out",V(V({},n),{},{target:s})),s&&s.fire("mouseout",V({},n))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",V({e},Ou(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const r=this.getActiveObject();if(r&&r.onDragStart(e)){this._dragSource=r;const n={e,target:r};return this.fire("dragstart",n),r.fire("dragstart",n),void Na(this.upperCanvasEl,"drag",this._onDragProgress)}$3(e)}_renderDragEffects(e,r,n){let s=!1;const i=this._dropTarget;i&&i!==r&&i!==n&&(i.clearContextTop(),s=!0),r==null||r.clearContextTop(),n!==r&&(n==null||n.clearContextTop());const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),r&&(o.save(),r.transform(o),r.renderDragSourceEffect(e),o.restore(),s=!0),n&&(o.save(),n.transform(o),n.renderDropTargetEffect(e),o.restore(),s=!0),o.restore(),s&&(this.contextTopDirty=!0)}_onDragEnd(e){const r=!!e.dataTransfer&&e.dataTransfer.dropEffect!==ls,n=r?this._activeObject:void 0,s={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:r,dropTarget:n};zs(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",s),this._dragSource&&this._dragSource.fire("dragend",s),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const r={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",r),this._dragSource&&this._dragSource.fire("drag",r)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const r="dragover",{target:n,targets:s}=this.findDragTargets(e),i=this._dragSource,o={e,target:n,subTargets:s,dragSource:i,canDrop:!1,dropTarget:void 0};let a;this.fire(r,o),this._fireEnterLeaveEvents(n,o),n&&(n.canDrop(e)&&(a=n),n.fire(r,o));for(let l=0;l<s.length;l++){const c=s[l];c.canDrop(e)&&(a=c),c.fire(r,o)}this._renderDragEffects(e,i,a),this._dropTarget=a}_onDragEnter(e){const{target:r,targets:n}=this.findDragTargets(e),s={e,target:r,subTargets:n,dragSource:this._dragSource};this.fire("dragenter",s),this._fireEnterLeaveEvents(r,s)}_onDragLeave(e){const r={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",r),this._fireEnterLeaveEvents(void 0,r),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:r,targets:n}=this.findDragTargets(e),s=this._basicEventHandler("drop:before",V({e,target:r,subTargets:n,dragSource:this._dragSource},Ou(this,e)));s.didDrop=!1,s.dropTarget=void 0,this._basicEventHandler("drop",s),this.fire("drop:after",s)}_onContextMenu(e){const r=this.findTarget(e),n=this.targets||[],s=this._basicEventHandler("contextmenu:before",{e,target:r,subTargets:n});return this.stopContextMenu&&$3(e),this._basicEventHandler("contextmenu",s),!1}_onClick(e){const r=e.detail;r>3||r<2||(this._cacheTransformEventData(e),r==2&&e.type==="dblclick"&&this._handleEvent(e,"dblclick"),r==3&&this._handleEvent(e,"tripleclick"),this._resetTransformEventData())}getPointerId(e){const r=e.changedTouches;return r?r[0]&&r[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let r=!this.allowTouchScrolling;const n=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||n&&this._target===n)&&(r=!0),r&&e.preventDefault(),this._resetTransformEventData();const s=this.upperCanvasEl,i=this._getEventPrefix(),o=Pi(s);Na(o,"touchend",this._onTouchEnd,hs),r&&Na(o,"touchmove",this._onMouseMove,hs),zs(s,"".concat(i,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const r=this.upperCanvasEl,n=this._getEventPrefix();zs(r,"".concat(n,"move"),this._onMouseMove,hs);const s=Pi(r);Na(s,"".concat(n,"up"),this._onMouseUp),Na(s,"".concat(n,"move"),this._onMouseMove,hs)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const r=this._getEventPrefix(),n=Pi(this.upperCanvasEl);zs(n,"touchend",this._onTouchEnd,hs),zs(n,"touchmove",this._onMouseMove,hs),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Na(this.upperCanvasEl,"".concat(r,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const r=this.upperCanvasEl,n=this._getEventPrefix();if(this._isMainEvent(e)){const s=Pi(this.upperCanvasEl);zs(s,"".concat(n,"up"),this._onMouseUp),zs(s,"".concat(n,"move"),this._onMouseMove,hs),Na(r,"".concat(n,"move"),this._onMouseMove,hs)}}_onMouseMove(e){const r=this.getActiveObject();!this.allowTouchScrolling&&(!r||!r.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const r=this.getActiveObject();return!!r!=!!e||r&&e&&r!==e}__onMouseUp(e){var r;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const n=this._currentTransform,s=this._isClick,i=this._target,{button:o}=e;if(o)return(this.fireMiddleClick&&o===1||this.fireRightClick&&o===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let a,l,c=!1;if(n&&(this._finalizeCurrentTransform(e),c=n.actionPerformed),!s){const d=i===this._activeObject;this.handleSelection(e),c||(c=this._shouldRender(i)||!d&&i===this._activeObject)}if(i){const d=i.findControl(this.getViewportPoint(e),Wv(e)),{key:h,control:f}=d||{};if(l=h,i.selectable&&i!==this._activeObject&&i.activeOn==="up")this.setActiveObject(i,e),c=!0;else if(f){const p=f.getMouseUpHandler(e,i,f);p&&(a=this.getScenePoint(e),p.call(f,e,n,a.x,a.y))}i.isMoving=!1}if(n&&(n.target!==i||n.corner!==l)){const d=n.target&&n.target.controls[n.corner],h=d&&d.getMouseUpHandler(e,n.target,d);a=a||this.getScenePoint(e),h&&h.call(d,e,n,a.x,a.y)}this._setCursorFromEvent(e,i),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,i&&(i.__corner=void 0),c?this.requestRenderAll():s||(r=this._activeObject)!==null&&r!==void 0&&r.isEditing||this.renderTop()}_basicEventHandler(e,r){const{target:n,subTargets:s=[]}=r;this.fire(e,r),n&&n.fire(e,r);for(let i=0;i<s.length;i++)s[i]!==n&&s[i].fire(e,r);return r}_handleEvent(e,r,n){const s=this._target,i=this.targets||[],o=V(V(V({e,target:s,subTargets:i},Ou(this,e)),{},{transform:this._currentTransform},r==="up:before"||r==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{}),r==="down:before"||r==="down"?n:{});this.fire("mouse:".concat(r),o),s&&s.fire("mouse".concat(r),o);for(let a=0;a<i.length;a++)i[a]!==s&&i[a].fire("mouse".concat(r),o)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const r=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(r,{e,pointer:r}),this._handleEvent(e,"down",{alreadySelected:!1})}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const r=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(r,{e,pointer:r})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const r=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:r}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let r=this._target,n=!!r&&r===this._activeObject;const{button:s}=e;if(s)return(this.fireMiddleClick&&s===1||this.fireRightClick&&s===2)&&this._handleEvent(e,"down",{alreadySelected:n}),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let i=this._shouldRender(r),o=!1;if(this.handleMultiSelection(e,r)?(r=this._activeObject,o=!0,i=!0):this._shouldClearSelection(e,r)&&this.discardActiveObject(e),this.selection&&(!r||!r.selectable&&!r.isEditing&&r!==this._activeObject)){const a=this.getScenePoint(e);this._groupSelector={x:a.x,y:a.y,deltaY:0,deltaX:0}}if(n=!!r&&r===this._activeObject,r){r.selectable&&r.activeOn==="down"&&this.setActiveObject(r,e);const a=r.findControl(this.getViewportPoint(e),Wv(e));if(r===this._activeObject&&(a||!o)){this._setupCurrentTransform(e,r,n);const l=a?a.control:void 0,c=this.getScenePoint(e),d=l&&l.getMouseDownHandler(e,r,l);d&&d.call(l,e,this._currentTransform,c.x,c.y)}}i&&(this._objectsToRender=void 0),this._handleEvent(e,"down",{alreadySelected:n}),i&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=Tc(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const r=this._groupSelector;if(r){const n=this.getScenePoint(e);r.deltaX=n.x-r.x,r.deltaY=n.y-r.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const n=this.findTarget(e);this._setCursorFromEvent(e,n),this._fireOverOutEvents(e,n)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,r){const n=this._hoveredTarget,s=this._hoveredTargets,i=this.targets,o=Math.max(s.length,i.length);this.fireSyntheticInOutEvents("mouse",{e,target:r,oldTarget:n,fireCanvas:!0});for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("mouse",{e,target:i[a],oldTarget:s[a]});this._hoveredTarget=r,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,r){const n=this._draggedoverTarget,s=this._hoveredTargets,i=this.targets,o=Math.max(s.length,i.length);this.fireSyntheticInOutEvents("drag",V(V({},r),{},{target:e,oldTarget:n,fireCanvas:!0}));for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("drag",V(V({},r),{},{target:i[a],oldTarget:s[a]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,r){let{target:n,oldTarget:s,fireCanvas:i,e:o}=r,a=Gt(r,Kke);const{targetIn:l,targetOut:c,canvasIn:d,canvasOut:h}=Yke[e],f=s!==n;if(s&&f){const p=V(V({},a),{},{e:o,target:s,nextTarget:n},Ou(this,o));i&&this.fire(h,p),s.fire(c,p)}if(n&&f){const p=V(V({},a),{},{e:o,target:n,previousTarget:s},Ou(this,o));i&&this.fire(d,p),n.fire(l,p)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const r=this.getScenePoint(e),n=this._currentTransform,s=n.target,i=s.group?Tc(r,void 0,s.group.calcTransformMatrix()):r;n.shiftKey=e.shiftKey,n.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,n,i),n.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,r,n){const{action:s,actionHandler:i,target:o}=r,a=!!i&&i(e,r,n.x,n.y);a&&o.setCoords(),s==="drag"&&a&&(r.target.isMoving=!0,this.setCursor(r.target.moveCursor||this.moveCursor)),r.actionPerformed=r.actionPerformed||a}_setCursorFromEvent(e,r){if(!r)return void this.setCursor(this.defaultCursor);let n=r.hoverCursor||this.hoverCursor;const s=sc(this._activeObject)?this._activeObject:null,i=(!s||r.group!==s)&&r.findControl(this.getViewportPoint(e));if(i){const o=i.control;this.setCursor(o.cursorStyleHandler(e,o,r))}else r.subTargetCheck&&this.targets.concat().reverse().map(o=>{n=o.hoverCursor||n}),this.setCursor(n)}handleMultiSelection(e,r){const n=this._activeObject,s=sc(n);if(n&&this._isSelectionKeyPressed(e)&&this.selection&&r&&r.selectable&&(n!==r||s)&&(s||!r.isDescendantOf(n)&&!n.isDescendantOf(r))&&!r.onSelect({e})&&!n.getActiveControl()){if(s){const i=n.getObjects();if(r===n){const o=this.getViewportPoint(e);if(!(r=this.searchPossibleTargets(i,o)||this.searchPossibleTargets(this._objects,o))||!r.selectable)return!1}r.group===n?(n.remove(r),this._hoveredTarget=r,this._hoveredTargets=[...this.targets],n.size()===1&&this._setActiveObject(n.item(0),e)):(n.multiSelectAdd(r),this._hoveredTarget=n,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(i,e)}else{n.isEditing&&n.exitEditing();const i=new(Me.getClass("ActiveSelection"))([],{canvas:this});i.multiSelectAdd(n,r),this._hoveredTarget=i,this._setActiveObject(i,e),this._fireSelectionEvents([n],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:r,y:n,deltaX:s,deltaY:i}=this._groupSelector,o=new X(r,n),a=o.add(new X(s,i)),l=o.min(a),c=o.max(a).subtract(l),d=this.collectObjects({left:l.x,top:l.y,width:c.x,height:c.y},{includeIntersecting:!this.selectionFullyContained}),h=o.eq(a)?d[0]?[d[0]]:[]:d.length>1?d.filter(f=>!f.onSelect({e})).reverse():d;if(h.length===1)this.setActiveObject(h[0],e);else if(h.length>1){const f=Me.getClass("ActiveSelection");this.setActiveObject(new f(h,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const BW={x1:0,y1:0,x2:0,y2:0},Xke=V(V({},BW),{},{r1:0,r2:0}),sd=(t,e)=>isNaN(t)&&typeof e=="number"?e:t,Jke=/^(\d+\.\d+)%|(\d+)%$/;function $W(t){return t&&Jke.test(t)}function UW(t,e){const r=typeof t=="number"?t:typeof t=="string"?parseFloat(t)/($W(t)?100:1):NaN;return Wc(0,sd(r,e),1)}const Zke=/\s*;\s*/,Qke=/\s*:\s*/;function eTe(t,e){let r,n;const s=t.getAttribute("style");if(s){const o=s.split(Zke);o[o.length-1]===""&&o.pop();for(let a=o.length;a--;){const[l,c]=o[a].split(Qke).map(d=>d.trim());l==="stop-color"?r=c:l==="stop-opacity"&&(n=c)}}const i=new At(r||t.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:UW(t.getAttribute("offset"),0),color:i.toRgb(),opacity:sd(parseFloat(n||t.getAttribute("stop-opacity")||""),1)*i.getAlpha()*e}}function tTe(t,e){const r=[],n=t.getElementsByTagName("stop"),s=UW(e,1);for(let i=n.length;i--;)r.push(eTe(n[i],s));return r}function VW(t){return t.nodeName==="linearGradient"||t.nodeName==="LINEARGRADIENT"?"linear":"radial"}function zW(t){return t.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function pi(t,e){return t.getAttribute(e)}function rTe(t,e){return function(r,n){let s,{width:i,height:o,gradientUnits:a}=n;return Object.keys(r).reduce((l,c)=>{const d=r[c];return d==="Infinity"?s=1:d==="-Infinity"?s=0:(s=typeof d=="string"?parseFloat(d):d,typeof d=="string"&&$W(d)&&(s*=.01,a==="pixels"&&(c!=="x1"&&c!=="x2"&&c!=="r2"||(s*=i),c!=="y1"&&c!=="y2"||(s*=o)))),l[c]=s,l},{})}(VW(t)==="linear"?function(r){return{x1:pi(r,"x1")||0,y1:pi(r,"y1")||0,x2:pi(r,"x2")||"100%",y2:pi(r,"y2")||0}}(t):function(r){return{x1:pi(r,"fx")||pi(r,"cx")||"50%",y1:pi(r,"fy")||pi(r,"cy")||"50%",r1:0,x2:pi(r,"cx")||"50%",y2:pi(r,"cy")||"50%",r2:pi(r,"r")||"50%"}}(t),V(V({},e),{},{gradientUnits:zW(t)}))}class Gm{constructor(e){const{type:r="linear",gradientUnits:n="pixels",coords:s={},colorStops:i=[],offsetX:o=0,offsetY:a=0,gradientTransform:l,id:c}=e||{};Object.assign(this,{type:r,gradientUnits:n,coords:V(V({},r==="radial"?Xke:BW),s),colorStops:i,offsetX:o,offsetY:a,gradientTransform:l,id:c?"".concat(c,"_").concat(Tl()):Tl()})}addColorStop(e){for(const r in e){const n=new At(e[r]);this.colorStops.push({offset:parseFloat(r),color:n.toRgb(),opacity:n.getAlpha()})}return this}toObject(e){return V(V({},pu(this,e)),{},{type:this.type,coords:V({},this.coords),colorStops:this.colorStops.map(r=>V({},r)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=[],s=this.gradientTransform?this.gradientTransform.concat():Bn.concat(),i=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",o=this.colorStops.map(h=>V({},h)).sort((h,f)=>h.offset-f.offset);let a=-this.offsetX,l=-this.offsetY;var c;i==="objectBoundingBox"?(a/=e.width,l/=e.height):(a+=e.width/2,l+=e.height/2),(c=e)&&typeof c._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=e.pathOffset.x,l-=e.pathOffset.y),s[4]-=a,s[5]-=l;const d=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(i,'"'),'gradientTransform="'.concat(r?r+" ":"").concat(rh(s),'"'),""].join(" ");if(this.type==="linear"){const{x1:h,y1:f,x2:p,y2:g}=this.coords;n.push("<linearGradient ",d,' x1="',h,'" y1="',f,'" x2="',p,'" y2="',g,`">
`)}else if(this.type==="radial"){const{x1:h,y1:f,x2:p,y2:g,r1:y,r2:v}=this.coords,m=y>v;n.push("<radialGradient ",d,' cx="',m?h:p,'" cy="',m?f:g,'" r="',m?y:v,'" fx="',m?p:h,'" fy="',m?g:f,`">
`),m&&(o.reverse(),o.forEach(b=>{b.offset=1-b.offset}));const x=Math.min(y,v);if(x>0){const b=x/Math.max(y,v);o.forEach(_=>{_.offset+=b*(1-_.offset)})}}return o.forEach(h=>{let{color:f,offset:p,opacity:g}=h;n.push("<stop ",'offset="',100*p+"%",'" style="stop-color:',f,g!==void 0?";stop-opacity: "+g:";",`"/>
`)}),n.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),n.join("")}toLive(e){const{x1:r,y1:n,x2:s,y2:i,r1:o,r2:a}=this.coords,l=this.type==="linear"?e.createLinearGradient(r,n,s,i):e.createRadialGradient(r,n,o,s,i,a);return this.colorStops.forEach(c=>{let{color:d,opacity:h,offset:f}=c;l.addColorStop(f,h!==void 0?new At(d).setAlpha(h).toRgba():d)}),l}static async fromObject(e){const{colorStops:r,gradientTransform:n}=e;return new this(V(V({},e),{},{colorStops:r?r.map(s=>V({},s)):void 0,gradientTransform:n?[...n]:void 0}))}static fromElement(e,r,n){const s=zW(e),i=r._findCenterFromElement();return new this(V({id:e.getAttribute("id")||void 0,type:VW(e),coords:rTe(e,{width:n.viewBoxWidth||n.width,height:n.viewBoxHeight||n.height}),colorStops:tTe(e,n.opacity),gradientUnits:s,gradientTransform:Sk(e.getAttribute("gradientTransform")||"")},s==="pixels"?{offsetX:r.width/2-i.x,offsetY:r.height/2-i.y}:{offsetX:0,offsetY:0}))}}$(Gm,"type","Gradient"),Me.setClass(Gm,"gradient"),Me.setClass(Gm,"linear"),Me.setClass(Gm,"radial");const nTe=["type","source","patternTransform"];class P_{get type(){return"pattern"}set type(e){El("warn","Setting type has no effect",e)}constructor(e){$(this,"repeat","repeat"),$(this,"offsetX",0),$(this,"offsetY",0),$(this,"crossOrigin",""),this.id=Tl(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:r,crossOrigin:n}=this;return V(V({},pu(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:r,crossOrigin:n,offsetX:Dt(this.offsetX,Et.NUM_FRACTION_DIGITS),offsetY:Dt(this.offsetY,Et.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:r,height:n}=e;const{source:s,repeat:i,id:o}=this,a=sd(this.offsetX/r,0),l=sd(this.offsetY/n,0),c=i==="repeat-y"||i==="no-repeat"?1+Math.abs(a||0):sd(s.width/r,0),d=i==="repeat-x"||i==="no-repeat"?1+Math.abs(l||0):sd(s.height/n,0);return['<pattern id="SVGID_'.concat(o,'" x="').concat(a,'" y="').concat(l,'" width="').concat(c,'" height="').concat(d,'">'),'<image x="0" y="0" width="'.concat(s.width,'" height="').concat(s.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,r){let{type:n,source:s,patternTransform:i}=e,o=Gt(e,nTe);const a=await pp(s,V(V({},r),{},{crossOrigin:o.crossOrigin}));return new this(V(V({},o),{},{patternTransform:i&&i.slice(0),source:a}))}}$(P_,"type","Pattern"),Me.setClass(P_),Me.setClass(P_,"pattern");const sTe=["path","left","top"],iTe=["d"];class ic extends Sn{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:n,left:s,top:i}=r,o=Gt(r,sTe);super(),Object.assign(this,ic.ownDefaults),this.setOptions(o),this._setPath(e||[],!0),typeof s=="number"&&this.set(jt,s),typeof i=="number"&&this.set(as,i)}_setPath(e,r){this.path=NW(Array.isArray(e)?e:FW(e)),this.setBoundingBox(r)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new X(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const r=-this.pathOffset.x,n=-this.pathOffset.y;e.beginPath();for(const s of this.path)switch(s[0]){case"L":e.lineTo(s[1]+r,s[2]+n);break;case"M":e.moveTo(s[1]+r,s[2]+n);break;case"C":e.bezierCurveTo(s[1]+r,s[2]+n,s[3]+r,s[4]+n,s[5]+r,s[6]+n);break;case"Q":e.quadraticCurveTo(s[1]+r,s[2]+n,s[3]+r,s[4]+n);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return V(V({},super.toObject(e)),{},{path:this.path.map(r=>r.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const r=this.toObject(e);return this.sourcePath&&(delete r.path,r.sourcePath=this.sourcePath),r}_toSVG(){const e=LW(this.path,Et.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=Et.NUM_FRACTION_DIGITS;return" translate(".concat(Dt(-this.pathOffset.x,e),", ").concat(Dt(-this.pathOffset.y,e),")")}toClipPathSVG(e){const r=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:r})}toSVG(e){const r=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:r})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:r,height:n,pathOffset:s}=this._calcDimensions();this.set({width:r,height:n,pathOffset:s}),e&&this.setPositionByOrigin(s,ct,ct)}_calcBoundsFromPath(){const e=[];let r=0,n=0,s=0,i=0;for(const o of this.path)switch(o[0]){case"L":s=o[1],i=o[2],e.push({x:r,y:n},{x:s,y:i});break;case"M":s=o[1],i=o[2],r=s,n=i;break;case"C":e.push(...Ek(s,i,o[1],o[2],o[3],o[4],o[5],o[6])),s=o[5],i=o[6];break;case"Q":e.push(...Ek(s,i,o[1],o[2],o[1],o[2],o[3],o[4])),s=o[3],i=o[4];break;case"Z":s=r,i=n}return mo(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return V(V({},e),{},{pathOffset:new X(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,r,n){const s=Sa(e,this.ATTRIBUTE_NAMES,n),{d:i}=s;return new this(i,V(V(V({},Gt(s,iTe)),r),{},{left:void 0,top:void 0}))}}$(ic,"type","Path"),$(ic,"cacheProperties",[...ba,"path","fillRule"]),$(ic,"ATTRIBUTE_NAMES",[...zl,"d"]),Me.setClass(ic),Me.setSVGClass(ic);const oTe=["left","top","radius"],HW=["radius","startAngle","endAngle","counterClockwise"];class Qi extends Sn{static getDefaults(){return V(V({},super.getDefaults()),Qi.ownDefaults)}constructor(e){super(),Object.assign(this,Qi.ownDefaults),this.setOptions(e)}_set(e,r){return super._set(e,r),e==="radius"&&this.setRadius(r),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,or(this.startAngle),or(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get($n)}getRadiusY(){return this.get("radius")*this.get(Ds)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...HW,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:r}=this,n=or(this.startAngle),s=or(this.endAngle),i=$i(n)*r,o=Ui(n)*r,a=$i(s)*r,l=Ui(s)*r,c=e>180?1:0,d=this.counterClockwise?0:1;return['<path d="M '.concat(i," ").concat(o," A ").concat(r," ").concat(r," 0 ").concat(c," ").concat(d," ").concat(a," ").concat(l,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,r,n){const s=Sa(e,this.ATTRIBUTE_NAMES,n),{left:i=0,top:o=0,radius:a=0}=s;return new this(V(V({},Gt(s,oTe)),{},{radius:a,left:i-a,top:o-a}))}static fromObject(e){return super._fromObject(e)}}$(Qi,"type","Circle"),$(Qi,"cacheProperties",[...ba,...HW]),$(Qi,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),$(Qi,"ATTRIBUTE_NAMES",["cx","cy","r",...zl]),Me.setClass(Qi),Me.setSVGClass(Qi);const aTe=["x1","y1","x2","y2"],lTe=["x1","y1","x2","y2"],Tk=["x1","x2","y1","y2"];class Lo extends Sn{constructor(){let[e,r,n,s]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Lo.ownDefaults),this.setOptions(i),this.x1=e,this.x2=n,this.y1=r,this.y2=s,this._setWidthHeight();const{left:o,top:a}=i;typeof o=="number"&&this.set(jt,o),typeof a=="number"&&this.set(as,a)}_setWidthHeight(){const{x1:e,y1:r,x2:n,y2:s}=this;this.width=Math.abs(n-e),this.height=Math.abs(s-r);const{left:i,top:o,width:a,height:l}=mo([{x:e,y:r},{x:n,y:s}]),c=new X(i+a/2,o+l/2);this.setPositionByOrigin(c,ct,ct)}_set(e,r){return super._set(e,r),Tk.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const r=this.calcLinePoints();e.moveTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineWidth=this.strokeWidth;const n=e.strokeStyle;var s;ei(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(s=this.stroke)!==null&&s!==void 0?s:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=n}_findCenterFromElement(){return new X((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return V(V({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:r,y1:n,y2:s,width:i,height:o}=this,a=e<=r?-1:1,l=n<=s?-1:1;return{x1:a*i/2,x2:a*-i/2,y1:l*o/2,y2:l*-o/2}}_toSVG(){const{x1:e,x2:r,y1:n,y2:s}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(n,'" x2="').concat(r,'" y2="').concat(s,`" />
`)]}static async fromElement(e,r,n){const s=Sa(e,this.ATTRIBUTE_NAMES,n),{x1:i=0,y1:o=0,x2:a=0,y2:l=0}=s;return new this([i,o,a,l],Gt(s,aTe))}static fromObject(e){let{x1:r,y1:n,x2:s,y2:i}=e,o=Gt(e,lTe);return this._fromObject(V(V({},o),{},{points:[r,n,s,i]}),{extraParam:"points"})}}$(Lo,"type","Line"),$(Lo,"cacheProperties",[...ba,...Tk]),$(Lo,"ATTRIBUTE_NAMES",zl.concat(Tk)),Me.setClass(Lo),Me.setSVGClass(Lo);class fc extends Sn{static getDefaults(){return V(V({},super.getDefaults()),fc.ownDefaults)}constructor(e){super(),Object.assign(this,fc.ownDefaults),this.setOptions(e)}_render(e){const r=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-r,n),e.lineTo(0,-n),e.lineTo(r,n),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,r=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(r,",0 ").concat(-r,",").concat(e," ").concat(r),'" />']}}$(fc,"type","Triangle"),$(fc,"ownDefaults",{width:100,height:100}),Me.setClass(fc),Me.setSVGClass(fc);const WW=["rx","ry"];class Fo extends Sn{static getDefaults(){return V(V({},super.getDefaults()),Fo.ownDefaults)}constructor(e){super(),Object.assign(this,Fo.ownDefaults),this.setOptions(e)}_set(e,r){switch(super._set(e,r),e){case"rx":this.rx=r,this.set("width",2*r);break;case"ry":this.ry=r,this.set("height",2*r)}return this}getRx(){return this.get("rx")*this.get($n)}getRy(){return this.get("ry")*this.get(Ds)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...WW,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,ya,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,r,n){const s=Sa(e,this.ATTRIBUTE_NAMES,n);return s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,new this(s)}}function cTe(t){if(!t)return[];const e=t.replace(/,/g," ").trim().split(/\s+/),r=[];for(let n=0;n<e.length;n+=2)r.push({x:parseFloat(e[n]),y:parseFloat(e[n+1])});return r}$(Fo,"type","Ellipse"),$(Fo,"cacheProperties",[...ba,...WW]),$(Fo,"ownDefaults",{rx:0,ry:0}),$(Fo,"ATTRIBUTE_NAMES",[...zl,"cx","cy","rx","ry"]),Me.setClass(Fo),Me.setSVGClass(Fo);const uTe=["left","top"],qW={exactBoundingBox:!1};class Ci extends Sn{static getDefaults(){return V(V({},super.getDefaults()),Ci.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),$(this,"strokeDiff",void 0),Object.assign(this,Ci.ownDefaults),this.setOptions(r),this.points=e;const{left:n,top:s}=r;this.initialized=!0,this.setBoundingBox(!0),typeof n=="number"&&this.set(jt,n),typeof s=="number"&&this.set(as,s)}isOpen(){return!0}_projectStrokeOnPoints(e){return SW(this.points,e,this.isOpen())}_calcDimensions(e){e=V({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const r=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(c=>c.projectedPoint):this.points;if(r.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new X,strokeOffset:new X,strokeDiff:new X};const n=mo(r),s=Kg(V(V({},e),{},{scaleX:1,scaleY:1})),i=mo(this.points.map(c=>yn(c,s,!0))),o=new X(this.scaleX,this.scaleY);let a=n.left+n.width/2,l=n.top+n.height/2;return this.exactBoundingBox&&(a-=l*Math.tan(or(this.skewX)),l-=a*Math.tan(or(this.skewY))),V(V({},n),{},{pathOffset:new X(a,l),strokeOffset:new X(i.left,i.top).subtract(new X(n.left,n.top)).multiply(o),strokeDiff:new X(n.width,n.height).subtract(new X(i.width,i.height)).multiply(o)})}_findCenterFromElement(){const e=mo(this.points);return new X(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:r,top:n,width:s,height:i,pathOffset:o,strokeOffset:a,strokeDiff:l}=this._calcDimensions();this.set({width:s,height:i,pathOffset:o,strokeOffset:a,strokeDiff:l}),e&&this.setPositionByOrigin(new X(r+s/2,n+i/2),ct,ct)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new X(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let o;if(Object.keys(e).some(a=>this.strokeUniform||this.constructor.layoutProperties.includes(a))){var r,n;const{width:a,height:l}=this._calcDimensions(e);o=new X((r=e.width)!==null&&r!==void 0?r:a,(n=e.height)!==null&&n!==void 0?n:l)}else{var s,i;o=new X((s=e.width)!==null&&s!==void 0?s:this.width,(i=e.height)!==null&&i!==void 0?i:this.height)}return o.multiply(new X(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,r){const n=this.initialized&&this[e]!==r,s=super._set(e,r);return this.exactBoundingBox&&n&&((e===$n||e===Ds)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),s}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return V(V({},super.toObject(e)),{},{points:this.points.map(r=>{let{x:n,y:s}=r;return{x:n,y:s}})})}_toSVG(){const e=[],r=this.pathOffset.x,n=this.pathOffset.y,s=Et.NUM_FRACTION_DIGITS;for(let i=0,o=this.points.length;i<o;i++)e.push(Dt(this.points[i].x-r,s),",",Dt(this.points[i].y-n,s)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const r=this.points.length,n=this.pathOffset.x,s=this.pathOffset.y;if(r&&!isNaN(this.points[r-1].y)){e.beginPath(),e.moveTo(this.points[0].x-n,this.points[0].y-s);for(let i=0;i<r;i++){const o=this.points[i];e.lineTo(o.x-n,o.y-s)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,r,n){return new this(cTe(e.getAttribute("points")),V(V({},Gt(Sa(e,this.ATTRIBUTE_NAMES,n),uTe)),r))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}$(Ci,"ownDefaults",qW),$(Ci,"type","Polyline"),$(Ci,"layoutProperties",[Ih,Dh,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),$(Ci,"cacheProperties",[...ba,"points"]),$(Ci,"ATTRIBUTE_NAMES",[...zl]),Me.setClass(Ci),Me.setSVGClass(Ci);class kf extends Ci{isOpen(){return!1}}$(kf,"ownDefaults",qW),$(kf,"type","Polygon"),Me.setClass(kf),Me.setSVGClass(kf);class GW extends Sn{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const r=e===void 0?this.styles:{line:this.styles[e]};for(const n in r)for(const s in r[n])for(const i in r[n][s])return!1;return!0}styleHas(e,r){if(!this.styles||r!==void 0&&!this.styles[r])return!1;const n=r===void 0?this.styles:{0:this.styles[r]};for(const s in n)for(const i in n[s])if(n[s][i][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const r=this.styles;let n,s,i=0,o=!0,a=0;for(const l in r){n=0;for(const c in r[l]){const d=r[l][c]||{};i++,d[e]!==void 0?(s?d[e]!==s&&(o=!1):s=d[e],d[e]===this[e]&&delete d[e]):o=!1,Object.keys(d).length!==0?n++:delete r[l][c]}n===0&&delete r[l]}for(let l=0;l<this._textLines.length;l++)a+=this._textLines[l].length;o&&i===a&&(this[e]=s,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const r=this.styles;let n,s,i;for(s in r){for(i in n=r[s],n)delete n[i][e],Object.keys(n[i]).length===0&&delete n[i];Object.keys(n).length===0&&delete r[s]}}_extendStyles(e,r){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(e);this._getLineStyle(n)||this._setLineStyle(n);const i=QA(V(V({},this._getStyleDeclaration(n,s)),r),o=>o!==void 0);this._setStyleDeclaration(n,s,i)}getSelectionStyles(e,r,n){const s=[];for(let i=e;i<(r||e);i++)s.push(this.getStyleAtPosition(i,n));return s}getStyleAtPosition(e,r){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(e);return r?this.getCompleteStyleDeclaration(n,s):this._getStyleDeclaration(n,s)}setSelectionStyles(e,r,n){for(let s=r;s<(n||r);s++)this._extendStyles(s,e);this._forceClearCache=!0}_getStyleDeclaration(e,r){var n;const s=this.styles&&this.styles[e];return s&&(n=s[r])!==null&&n!==void 0?n:{}}getCompleteStyleDeclaration(e,r){return V(V({},pu(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,r))}_setStyleDeclaration(e,r,n){this.styles[e][r]=n}_deleteStyleDeclaration(e,r){delete this.styles[e][r]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}$(GW,"_styleProperties",_Ee);const dTe=/  +/g,hTe=/"/g;function N_(t,e,r,n,s){return"		".concat(function(i,o){let{left:a,top:l,width:c,height:d}=o,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Et.NUM_FRACTION_DIGITS;const f=dg(Dr,i,!1),[p,g,y,v]=[a,l,c,d].map(m=>Dt(m,h));return"<rect ".concat(f,' x="').concat(p,'" y="').concat(g,'" width="').concat(y,'" height="').concat(v,'"></rect>')}(t,{left:e,top:r,width:n,height:s}),`
`)}const fTe=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let R_;class Rn extends GW{static getDefaults(){return V(V({},super.getDefaults()),Rn.ownDefaults)}constructor(e,r){super(),$(this,"__charBounds",[]),Object.assign(this,Rn.ownDefaults),this.setOptions(r),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=uP(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(so)&&this.enlargeSpaces()}enlargeSpaces(){let e,r,n,s,i,o,a;for(let l=0,c=this._textLines.length;l<c;l++)if((this.textAlign===so||l!==c-1&&!this.isEndOfWrapping(l))&&(s=0,i=this._textLines[l],r=this.getLineWidth(l),r<this.width&&(a=this.textLines[l].match(this._reSpacesAndTabs)))){n=a.length,e=(this.width-r)/n;for(let d=0;d<=i.length;d++)o=this.__charBounds[l][d],this._reSpaceAndTab.test(i[d])?(o.width+=e,o.kernedWidth+=e,o.left+=s,s+=e):o.left+=s}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,r){const n=r?this._unwrappedTextLines:this._textLines;let s;for(s=0;s<n.length;s++){if(e<=n[s].length)return{lineIndex:s,charIndex:e};e-=n[s].length+this.missingNewlineOffset(s,r)}return{lineIndex:s-1,charIndex:n[s-1].length<e?n[s-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),r=this.fontSize;return e.width+=r*e.zoomX,e.height+=r*e.zoomY,e}_render(e){const r=this.path;r&&!r.isNotVisible()&&r._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===cs?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,r,n){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case ct:e.textBaseline="middle";break;case"ascender":e.textBaseline=as;break;case"descender":e.textBaseline=yk}e.font=this._getFontDeclaration(r,n)}calcTextWidth(){let e=this.getLineWidth(0);for(let r=1,n=this._textLines.length;r<n;r++){const s=this.getLineWidth(r);s>e&&(e=s)}return e}_renderTextLine(e,r,n,s,i,o){this._renderChars(e,r,n,s,i,o)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const r=e.fillStyle,n=this._getLeftOffset();let s=this._getTopOffset();for(let i=0,o=this._textLines.length;i<o;i++){const a=this.getHeightOfLine(i);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",i)){s+=a;continue}const l=this._textLines[i].length,c=this._getLineLeftOffset(i);let d,h,f=0,p=0,g=this.getValueOfPropertyAt(i,0,"textBackgroundColor");for(let y=0;y<l;y++){const v=this.__charBounds[i][y];h=this.getValueOfPropertyAt(i,y,"textBackgroundColor"),this.path?(e.save(),e.translate(v.renderLeft,v.renderTop),e.rotate(v.angle),e.fillStyle=h,h&&e.fillRect(-v.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),v.width,a/this.lineHeight),e.restore()):h!==g?(d=n+c+p,this.direction==="rtl"&&(d=this.width-d-f),e.fillStyle=g,g&&e.fillRect(d,s,f,a/this.lineHeight),p=v.left,f=v.width,g=h):f+=v.kernedWidth}h&&!this.path&&(d=n+c+p,this.direction==="rtl"&&(d=this.width-d-f),e.fillStyle=h,e.fillRect(d,s,f,a/this.lineHeight)),s+=a}e.fillStyle=r,this._removeShadow(e)}_measureChar(e,r,n,s){const i=hp.getFontCache(r),o=this._getFontDeclaration(r),a=n+e,l=n&&o===this._getFontDeclaration(s),c=r.fontSize/this.CACHE_FONT_SIZE;let d,h,f,p;if(n&&i[n]!==void 0&&(f=i[n]),i[e]!==void 0&&(p=d=i[e]),l&&i[a]!==void 0&&(h=i[a],p=h-f),d===void 0||f===void 0||h===void 0){const g=function(){return R_||(R_=Fs({width:0,height:0}).getContext("2d")),R_}();this._setTextStyles(g,r,!0),d===void 0&&(p=d=g.measureText(e).width,i[e]=d),f===void 0&&l&&n&&(f=g.measureText(n).width,i[n]=f),l&&h===void 0&&(h=g.measureText(a).width,i[a]=h,p=h-f)}return{width:d*c,kernedWidth:p*c}}getHeightOfChar(e,r){return this.getValueOfPropertyAt(e,r,"fontSize")}measureLine(e){const r=this._measureLine(e);return this.charSpacing!==0&&(r.width-=this._getWidthOfCharSpacing()),r.width<0&&(r.width=0),r}_measureLine(e){let r,n,s=0;const i=this.pathSide===hr,o=this.path,a=this._textLines[e],l=a.length,c=new Array(l);this.__charBounds[e]=c;for(let d=0;d<l;d++){const h=a[d];n=this._getGraphemeBox(h,e,d,r),c[d]=n,s+=n.kernedWidth,r=h}if(c[l]={left:n?n.left+n.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o&&o.segmentsInfo){let d=0;const h=o.segmentsInfo[o.segmentsInfo.length-1].length;switch(this.textAlign){case jt:d=i?h-s:0;break;case ct:d=(h-s)/2;break;case hr:d=i?0:h-s}d+=this.pathStartOffset*(i?-1:1);for(let f=i?l-1:0;i?f>=0:f<l;i?f--:f++)n=c[f],d>h?d%=h:d<0&&(d+=h),this._setGraphemeOnPath(d,n),d+=n.kernedWidth}return{width:s,numOfSpaces:0}}_setGraphemeOnPath(e,r){const n=e+r.kernedWidth/2,s=this.path,i=DW(s.path,n,s.segmentsInfo);r.renderLeft=i.x-s.pathOffset.x,r.renderTop=i.y-s.pathOffset.y,r.angle=i.angle+(this.pathSide===hr?Math.PI:0)}_getGraphemeBox(e,r,n,s,i){const o=this.getCompleteStyleDeclaration(r,n),a=s?this.getCompleteStyleDeclaration(r,n-1):{},l=this._measureChar(e,o,s,a);let c,d=l.kernedWidth,h=l.width;this.charSpacing!==0&&(c=this._getWidthOfCharSpacing(),h+=c,d+=c);const f={width:h,left:0,height:o.fontSize,kernedWidth:d,deltaY:o.deltaY};if(n>0&&!i){const p=this.__charBounds[r][n-1];f.left=p.left+p.width+l.kernedWidth-l.width}return f}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let r=this.getHeightOfChar(e,0);for(let n=1,s=this._textLines[e].length;n<s;n++)r=Math.max(this.getHeightOfChar(e,n),r);return this.__lineHeights[e]=r*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,r=0;for(let n=0,s=this._textLines.length;n<s;n++)e=this.getHeightOfLine(n),r+=n===s-1?e/this.lineHeight:e;return r}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,r){e.save();let n=0;const s=this._getLeftOffset(),i=this._getTopOffset();for(let o=0,a=this._textLines.length;o<a;o++){const l=this.getHeightOfLine(o),c=l/this.lineHeight,d=this._getLineLeftOffset(o);this._renderTextLine(r,e,this._textLines[o],s+d,i+n+c,o),n+=l}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(Dr))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,r,n,s,i,o){const a=this.getHeightOfLine(o),l=this.textAlign.includes(so),c=this.path,d=!l&&this.charSpacing===0&&this.isEmptyStyles(o)&&!c,h=this.direction==="ltr",f=this.direction==="ltr"?1:-1,p=r.direction;let g,y,v,m,x,b="",_=0;if(r.save(),p!==this.direction&&(r.canvas.setAttribute("dir",h?"ltr":"rtl"),r.direction=h?"ltr":"rtl",r.textAlign=h?jt:hr),i-=a*this._fontSizeFraction/this.lineHeight,d)return this._renderChar(e,r,o,0,n.join(""),s,i),void r.restore();for(let C=0,T=n.length-1;C<=T;C++)m=C===T||this.charSpacing||c,b+=n[C],v=this.__charBounds[o][C],_===0?(s+=f*(v.kernedWidth-v.width),_+=v.width):_+=v.kernedWidth,l&&!m&&this._reSpaceAndTab.test(n[C])&&(m=!0),m||(g=g||this.getCompleteStyleDeclaration(o,C),y=this.getCompleteStyleDeclaration(o,C+1),m=Gw(g,y,!1)),m&&(c?(r.save(),r.translate(v.renderLeft,v.renderTop),r.rotate(v.angle),this._renderChar(e,r,o,C,b,-_/2,0),r.restore()):(x=s,this._renderChar(e,r,o,C,b,x,i)),b="",g=y,s+=f*_,_=0);r.restore()}_applyPatternGradientTransformText(e){const r=this.width+this.strokeWidth,n=this.height+this.strokeWidth,s=Fs({width:r,height:n}),i=s.getContext("2d");return s.width=r,s.height=n,i.beginPath(),i.moveTo(0,0),i.lineTo(r,0),i.lineTo(r,n),i.lineTo(0,n),i.closePath(),i.translate(r/2,n/2),i.fillStyle=e.toLive(i),this._applyPatternGradientTransform(i,e),i.fill(),i.createPattern(s,"no-repeat")}handleFiller(e,r,n){let s,i;return ei(n)?n.gradientUnits==="percentage"||n.gradientTransform||n.patternTransform?(s=-this.width/2,i=-this.height/2,e.translate(s,i),e[r]=this._applyPatternGradientTransformText(n),{offsetX:s,offsetY:i}):(e[r]=n.toLive(e),this._applyPatternGradientTransform(e,n)):(e[r]=n,{offsetX:0,offsetY:0})}_setStrokeStyles(e,r){let{stroke:n,strokeWidth:s}=r;return e.lineWidth=s,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",n)}_setFillStyles(e,r){let{fill:n}=r;return this.handleFiller(e,"fillStyle",n)}_renderChar(e,r,n,s,i,o,a){const l=this._getStyleDeclaration(n,s),c=this.getCompleteStyleDeclaration(n,s),d=e==="fillText"&&c.fill,h=e==="strokeText"&&c.stroke&&c.strokeWidth;if(h||d){if(r.save(),r.font=this._getFontDeclaration(c),l.textBackgroundColor&&this._removeShadow(r),l.deltaY&&(a+=l.deltaY),d){const f=this._setFillStyles(r,c);r.fillText(i,o-f.offsetX,a-f.offsetY)}if(h){const f=this._setStrokeStyles(r,c);r.strokeText(i,o-f.offsetX,a-f.offsetY)}r.restore()}}setSuperscript(e,r){this._setScript(e,r,this.superscript)}setSubscript(e,r){this._setScript(e,r,this.subscript)}_setScript(e,r,n){const s=this.get2DCursorLocation(e,!0),i=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),o=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),a={fontSize:i*n.size,deltaY:o+i*n.baseline};this.setSelectionStyles(a,e,r)}_getLineLeftOffset(e){const r=this.getLineWidth(e),n=this.width-r,s=this.textAlign,i=this.direction,o=this.isEndOfWrapping(e);let a=0;return s===so||s===mp&&!o||s===gp&&!o||s===Gv&&!o?0:(s===ct&&(a=n/2),s===hr&&(a=n),s===mp&&(a=n/2),s===gp&&(a=n),i==="rtl"&&(s===hr||s===so||s===gp?a=0:s===jt||s===Gv?a=-n:s!==ct&&s!==mp||(a=-n/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:r}=this.measureLine(e);return this.__lineWidths[e]=r,r}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,r,n){var s;return(s=this._getStyleDeclaration(e,r)[n])!==null&&s!==void 0?s:this[n]}_renderTextDecoration(e,r){if(!this[r]&&!this.styleHas(r))return;let n=this._getTopOffset();const s=this._getLeftOffset(),i=this.path,o=this._getWidthOfCharSpacing(),a=r==="linethrough"?.5:r==="overline"?1:0,l=this.offsets[r];for(let c=0,d=this._textLines.length;c<d;c++){const h=this.getHeightOfLine(c);if(!this[r]&&!this.styleHas(r,c)){n+=h;continue}const f=this._textLines[c],p=h/this.lineHeight,g=this._getLineLeftOffset(c);let y=0,v=0,m=this.getValueOfPropertyAt(c,0,r),x=this.getValueOfPropertyAt(c,0,Dr),b=this.getValueOfPropertyAt(c,0,Hc),_=m,C=x,T=b;const O=n+p*(1-this._fontSizeFraction);let R=this.getHeightOfChar(c,0),I=this.getValueOfPropertyAt(c,0,"deltaY");for(let L=0,z=f.length;L<z;L++){const Y=this.__charBounds[c][L];_=this.getValueOfPropertyAt(c,L,r),C=this.getValueOfPropertyAt(c,L,Dr),T=this.getValueOfPropertyAt(c,L,Hc);const pe=this.getHeightOfChar(c,L),Q=this.getValueOfPropertyAt(c,L,"deltaY");if(i&&_&&C){const se=this.fontSize*T/1e3;e.save(),e.fillStyle=x,e.translate(Y.renderLeft,Y.renderTop),e.rotate(Y.angle),e.fillRect(-Y.kernedWidth/2,l*pe+Q-a*se,Y.kernedWidth,se),e.restore()}else if((_!==m||C!==x||pe!==R||T!==b||Q!==I)&&v>0){const se=this.fontSize*b/1e3;let F=s+g+y;this.direction==="rtl"&&(F=this.width-F-v),m&&x&&b&&(e.fillStyle=x,e.fillRect(F,O+l*R+I-a*se,v,se)),y=Y.left,v=Y.width,m=_,b=T,x=C,R=pe,I=Q}else v+=Y.kernedWidth}let H=s+g+y;this.direction==="rtl"&&(H=this.width-H-v),e.fillStyle=C;const re=this.fontSize*T/1e3;_&&C&&T&&e.fillRect(H,O+l*R+I-a*re,v-o,re),n+=h}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:r=this.fontStyle,fontWeight:n=this.fontWeight,fontSize:s=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;const o=e.includes("'")||e.includes('"')||e.includes(",")||Rn.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[r,n,"".concat(i?this.CACHE_FONT_SIZE:s,"px"),o].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return qw(e)}_splitTextIntoLines(e){const r=e.split(this._reNewline),n=new Array(r.length),s=[`
`];let i=[];for(let o=0;o<r.length;o++)n[o]=this.graphemeSplit(r[o]),i=i.concat(n[o],s);return i.pop(),{_unwrappedLines:n,lines:r,graphemeText:i,graphemeLines:n}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return V(V({},super.toObject([...cW,...e])),{},{styles:CW(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,r){const{textLayoutProperties:n}=this.constructor;super.set(e,r);let s=!1,i=!1;if(typeof e=="object")for(const o in e)o==="path"&&this.setPathInfo(),s=s||n.includes(o),i=i||o==="path";else s=n.includes(e),i=e==="path";return i&&this.setPathInfo(),s&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,r,n){const s=Sa(e,Rn.ATTRIBUTE_NAMES,n),i=V(V({},r),s),{textAnchor:o=jt,textDecoration:a="",dx:l=0,dy:c=0,top:d=0,left:h=0,fontSize:f=WA,strokeWidth:p=1}=i,g=Gt(i,fTe),y=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),V({left:h+l,top:d+c,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:f},g)),v=y.getScaledHeight()/y.height,m=((y.height+y.strokeWidth)*y.lineHeight-y.height)*v,x=y.getScaledHeight()+m;let b=0;return o===ct&&(b=y.getScaledWidth()/2),o===hr&&(b=y.getScaledWidth()),y.set({left:y.left-b,top:y.top-(x-y.fontSize*(.07+y._fontSizeFraction))/y.lineHeight,strokeWidth:p}),y}static fromObject(e){return this._fromObject(V(V({},e),{},{styles:EW(e.styles||{},e.text)}),{extraParam:"text"})}}$(Rn,"textLayoutProperties",lW),$(Rn,"cacheProperties",[...ba,...cW]),$(Rn,"ownDefaults",CEe),$(Rn,"type","Text"),$(Rn,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),$(Rn,"ATTRIBUTE_NAMES",zl.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),xW(Rn,[class extends iW{_toSVG(){const t=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(t){const e=this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0}),r=this.path;return r?e+r._createBaseSVGMarkup(r._toSVG(),{reviver:t,withShadow:!0,additionalTransform:rh(this.calcOwnMatrix())}):e}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(t){let{textBgRects:e,textSpans:r}=t;const n=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ','font-family="'.concat(this.fontFamily.replace(hTe,"'"),'" '),'font-size="'.concat(this.fontSize,'" '),this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",n?'text-decoration="'.concat(n,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",r.join(""),`</text>
`]}_getSVGTextAndBg(t,e){const r=[],n=[];let s,i=t;this.backgroundColor&&n.push(...N_(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let o=0,a=this._textLines.length;o<a;o++)s=this._getLineLeftOffset(o),this.direction==="rtl"&&(s+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(n,o,e+s,i),this._setSVGTextLineText(r,o,e+s,i),i+=this.getHeightOfLine(o);return{textSpans:r,textBgRects:n}}_createTextCharSpan(t,e,r,n,s){const i=Et.NUM_FRACTION_DIGITS,o=this.getSvgSpanStyles(e,t!==t.trim()||!!t.match(dTe)),a=o?'style="'.concat(o,'"'):"",l=e.deltaY,c=l?' dy="'.concat(Dt(l,i),'" '):"",{angle:d,renderLeft:h,renderTop:f,width:p}=s;let g="";if(h!==void 0){const y=p/2;d&&(g=' rotate="'.concat(Dt(_o(d),i),'"'));const v=fu({angle:_o(d)});v[4]=h,v[5]=f;const m=new X(-y,0).transform(v);r=m.x,n=m.y}return'<tspan x="'.concat(Dt(r,i),'" y="').concat(Dt(n,i),'" ').concat(c).concat(g).concat(a,">").concat(_W(t),"</tspan>")}_setSVGTextLineText(t,e,r,n){const s=this.getHeightOfLine(e),i=this.textAlign.includes(so),o=this._textLines[e];let a,l,c,d,h,f="",p=0;n+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let g=0,y=o.length-1;g<=y;g++)h=g===y||this.charSpacing||this.path,f+=o[g],c=this.__charBounds[e][g],p===0?(r+=c.kernedWidth-c.width,p+=c.width):p+=c.kernedWidth,i&&!h&&this._reSpaceAndTab.test(o[g])&&(h=!0),h||(a=a||this.getCompleteStyleDeclaration(e,g),l=this.getCompleteStyleDeclaration(e,g+1),h=Gw(a,l,!0)),h&&(d=this._getStyleDeclaration(e,g),t.push(this._createTextCharSpan(f,d,r,n,c)),f="",a=l,this.direction==="rtl"?r-=p:r+=p,p=0)}_setSVGTextLineBg(t,e,r,n){const s=this._textLines[e],i=this.getHeightOfLine(e)/this.lineHeight;let o,a=0,l=0,c=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let d=0;d<s.length;d++){const{left:h,width:f,kernedWidth:p}=this.__charBounds[e][d];o=this.getValueOfPropertyAt(e,d,"textBackgroundColor"),o!==c?(c&&t.push(...N_(c,r+l,n,a,i)),l=h,a=f,c=o):a+=p}o&&t.push(...N_(c,r+l,n,a,i))}_getSVGLineTopOffset(t){let e,r=0;for(e=0;e<t;e++)r+=this.getHeightOfLine(e);const n=this.getHeightOfLine(e);return{lineTop:r,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(t){return"".concat(super.getSvgStyles(t)," text-decoration-thickness: ").concat(Dt(this.textDecorationThickness*this.getObjectScaling().y/10,Et.NUM_FRACTION_DIGITS),"%; white-space: pre;")}getSvgSpanStyles(t,e){const{fontFamily:r,strokeWidth:n,stroke:s,fill:i,fontSize:o,fontStyle:a,fontWeight:l,deltaY:c,textDecorationThickness:d,linethrough:h,overline:f,underline:p}=t,g=this.getSvgTextDecoration({underline:p??this.underline,overline:f??this.overline,linethrough:h??this.linethrough}),y=d||this.textDecorationThickness;return[s?dg(cs,s):"",n?"stroke-width: ".concat(n,"; "):"",r?"font-family: ".concat(r.includes("'")||r.includes('"')?r:"'".concat(r,"'"),"; "):"",o?"font-size: ".concat(o,"px; "):"",a?"font-style: ".concat(a,"; "):"",l?"font-weight: ".concat(l,"; "):"",g?"text-decoration: ".concat(g,"; text-decoration-thickness: ").concat(Dt(y*this.getObjectScaling().y/10,Et.NUM_FRACTION_DIGITS),"%; "):"",i?dg(Dr,i):"",c?"baseline-shift: ".concat(-c,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(t){return["overline","underline","line-through"].filter(e=>t[e.replace("-","")]).join(" ")}}]),Me.setClass(Rn),Me.setSVGClass(Rn);class pTe{constructor(e){$(this,"target",void 0),$(this,"__mouseDownInPlace",!1),$(this,"__dragStartFired",!1),$(this,"__isDraggingOver",!1),$(this,"__dragStartSelection",void 0),$(this,"__dragImageDisposer",void 0),$(this,"_dispose",void 0),this.target=e;const r=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{r.forEach(n=>n()),this._dispose=void 0}}isPointerOverSelection(e){const r=this.target,n=r.getSelectionStartFromPointer(e);return r.isEditing&&n>=r.selectionStart&&n<=r.selectionEnd&&r.selectionStart<r.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const r=this.isActive();return r&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,r}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,r){var n;let{selectionStart:s,selectionEnd:i}=r;const o=this.target,a=o.canvas,l=new X(o.flipX?-1:1,o.flipY?-1:1),c=o._getCursorBoundaries(s),d=new X(c.left+c.leftOffset,c.top+c.topOffset).multiply(l).transform(o.calcTransformMatrix()),h=a.getScenePoint(e).subtract(d),f=o.getCanvasRetinaScaling(),p=o.getBoundingRect(),g=d.subtract(new X(p.left,p.top)),y=a.viewportTransform,v=g.add(h).transform(y,!0),m=o.backgroundColor,x=aP(o.styles);o.backgroundColor="";const b={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(b,0,s),o.setSelectionStyles(b,i,o.text.length),o.dirty=!0;const _=o.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});o.backgroundColor=m,o.styles=x,o.dirty=!0,ex(_,{position:"fixed",left:"".concat(-_.width,"px"),border:ls,width:"".concat(_.width/f,"px"),height:"".concat(_.height/f,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{_.remove()},Pi(e.target||this.target.hiddenTextarea).body.appendChild(_),(n=e.dataTransfer)===null||n===void 0||n.setDragImage(_,v.x,v.y)}onDragStart(e){this.__dragStartFired=!0;const r=this.target,n=this.isActive();if(n&&e.dataTransfer){const s=this.__dragStartSelection={selectionStart:r.selectionStart,selectionEnd:r.selectionEnd},i=r._text.slice(s.selectionStart,s.selectionEnd).join(""),o=V({text:r.text,value:i},s);e.dataTransfer.setData("text/plain",i),e.dataTransfer.setData("application/fabric",JSON.stringify({value:i,styles:r.getSelectionStyles(s.selectionStart,s.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,o)}return r.abortCursorAnimation(),n}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const r=this.target.getSelectionStartFromPointer(e),n=this.__dragStartSelection;return r<n.selectionStart||r>n.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:r}=e;const n=this.targetCanDrop(r);!this.__isDraggingOver&&n&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:r}=e,n=this.targetCanDrop(r);!this.__isDraggingOver&&n?this.__isDraggingOver=!0:this.__isDraggingOver&&!n&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(r.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var r;const{e:n}=e,s=n.defaultPrevented;this.__isDraggingOver=!1,n.preventDefault();let i=(r=n.dataTransfer)===null||r===void 0?void 0:r.getData("text/plain");if(i&&!s){const o=this.target,a=o.canvas;let l=o.getSelectionStartFromPointer(n);const{styles:c}=n.dataTransfer.types.includes("application/fabric")?JSON.parse(n.dataTransfer.getData("application/fabric")):{},d=i[Math.max(0,i.length-1)],h=0;if(this.__dragStartSelection){const f=this.__dragStartSelection.selectionStart,p=this.__dragStartSelection.selectionEnd;l>f&&l<=p?l=f:l>p&&(l-=p-f),o.removeChars(f,p),delete this.__dragStartSelection}o._reNewline.test(d)&&(o._reNewline.test(o._text[l])||l===o._text.length)&&(i=i.trimEnd()),e.didDrop=!0,e.dropTarget=o,o.insertChars(i,c,l),a.setActiveObject(o),o.enterEditing(n),o.selectionStart=Math.min(l+h,o._text.length),o.selectionEnd=Math.min(o.selectionStart+i.length,o._text.length),o.hiddenTextarea.value=o.text,o._updateTextarea(),o.hiddenTextarea.focus(),o.fire(Vv,{index:l+h,action:"drop"}),a.fire("text:changed",{target:o}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(e){let{e:r}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var n;const s=this.target,i=this.target.canvas,{selectionStart:o,selectionEnd:a}=this.__dragStartSelection,l=((n=r.dataTransfer)===null||n===void 0?void 0:n.dropEffect)||ls;l===ls?(s.selectionStart=o,s.selectionEnd=a,s._updateTextarea(),s.hiddenTextarea.focus()):(s.clearContextTop(),l==="move"&&(s.removeChars(o,a),s.selectionStart=s.selectionEnd=o,s.hiddenTextarea&&(s.hiddenTextarea.value=s.text),s._updateTextarea(),s.fire(Vv,{index:o,action:"dragend"}),i.fire("text:changed",{target:s}),i.requestRenderAll()),s.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const m4=/[ \n\.,;!\?\-]/;class gTe extends Rn{constructor(){super(...arguments),$(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:r,duration:n,delay:s,onComplete:i}=e;return iP({startValue:this._currentCursorOpacity,endValue:r,duration:n,delay:s,onComplete:i,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:o=>{this._currentCursorOpacity=o,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(r=>{r&&!r.isDone()&&(e=!0,r.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}cmdAll(){this.selectAll(),this.renderCursorOrSelection()}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let r=0,n=e-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)r++,n--;for(;/\S/.test(this._text[n])&&n>-1;)r++,n--;return e-r}findWordBoundaryRight(e){let r=0,n=e;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)r++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)r++,n++;return e+r}findLineBoundaryLeft(e){let r=0,n=e-1;for(;!/\n/.test(this._text[n])&&n>-1;)r++,n--;return e-r}findLineBoundaryRight(e){let r=0,n=e;for(;!/\n/.test(this._text[n])&&n<this._text.length;)r++,n++;return e+r}searchWordBoundary(e,r){const n=this._text;let s=e>0&&this._reSpace.test(n[e])&&(r===-1||!qA.test(n[e-1]))?e-1:e,i=n[s];for(;s>0&&s<n.length&&!m4.test(i);)s+=r,i=n[s];return r===-1&&m4.test(i)&&s++,s}selectWord(e){var r;e=(r=e)!==null&&r!==void 0?r:this.selectionStart;const n=this.searchWordBoundary(e,-1),s=Math.max(n,this.searchWordBoundary(e,1));this.selectionStart=n,this.selectionEnd=s,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){var r;e=(r=e)!==null&&r!==void 0?r:this.selectionStart;const n=this.findLineBoundaryLeft(e),s=this.findLineBoundaryRight(e);this.selectionStart=n,this.selectionEnd=s,this._fireSelectionChanged(),this._updateTextarea()}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const r=this.hiddenTextarea;Pi(r).activeElement!==r&&r.focus();const n=this.getSelectionStartFromPointer(e),s=this.selectionStart,i=this.selectionEnd;(n===this.__selectionStartOnMouseDown&&s!==i||s!==n&&i!==n)&&(n>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=n):(this.selectionStart=n,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===s&&this.selectionEnd===i||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,r,n){const s=n.slice(0,e),i=this.graphemeSplit(s).length;if(e===r)return{selectionStart:i,selectionEnd:i};const o=n.slice(e,r);return{selectionStart:i,selectionEnd:i+this.graphemeSplit(o).length}}fromGraphemeToStringSelection(e,r,n){const s=n.slice(0,e).join("").length;return e===r?{selectionStart:s,selectionEnd:s}:{selectionStart:s,selectionEnd:s+n.slice(e,r).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const r=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=r.selectionEnd,this.inCompositionMode||(this.selectionStart=r.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,r=this._getCursorBoundaries(e),n=this.get2DCursorLocation(e),s=n.lineIndex,i=n.charIndex,o=this.getValueOfPropertyAt(s,i,"fontSize")*this.lineHeight,a=r.leftOffset,l=this.getCanvasRetinaScaling(),c=this.canvas.upperCanvasEl,d=c.width/l,h=c.height/l,f=d-o,p=h-o,g=new X(r.left+a,r.top+r.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new X(c.clientWidth/d,c.clientHeight/h));return g.x<0&&(g.x=0),g.x>f&&(g.x=f),g.y<0&&(g.y=0),g.y>p&&(g.y=p),g.x+=this.canvas._offset.left,g.y+=this.canvas._offset.top,{left:"".concat(g.x,"px"),top:"".concat(g.y,"px"),fontSize:"".concat(o,"px"),charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(zv),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,r){const{lineIndex:n,charIndex:s}=this.get2DCursorLocation(e,!0),{lineIndex:i,charIndex:o}=this.get2DCursorLocation(r,!0);if(n!==i){if(this.styles[n])for(let a=s;a<this._unwrappedTextLines[n].length;a++)delete this.styles[n][a];if(this.styles[i])for(let a=o;a<this._unwrappedTextLines[i].length;a++){const l=this.styles[i][a];l&&(this.styles[n]||(this.styles[n]={}),this.styles[n][s+a-o]=l)}for(let a=n+1;a<=i;a++)delete this.styles[a];this.shiftLineStyles(i,n-i)}else if(this.styles[n]){const a=this.styles[n],l=o-s;for(let c=s;c<o;c++)delete a[c];for(const c in this.styles[n]){const d=parseInt(c,10);d>=o&&(a[d-l]=a[c],delete a[c])}}}shiftLineStyles(e,r){const n=Object.assign({},this.styles);for(const s in this.styles){const i=parseInt(s,10);i>e&&(this.styles[i+r]=n[i],n[i-r]||delete this.styles[i])}}insertNewlineStyleObject(e,r,n,s){const i={},o=this._unwrappedTextLines[e].length,a=o===r;let l=!1;n||(n=1),this.shiftLineStyles(e,n);const c=this.styles[e]?this.styles[e][r===0?r:r-1]:void 0;for(const h in this.styles[e]){const f=parseInt(h,10);f>=r&&(l=!0,i[f-r]=this.styles[e][h],a&&r===0||delete this.styles[e][h])}let d=!1;for(l&&!a&&(this.styles[e+n]=i,d=!0),(d||o>r)&&n--;n>0;)s&&s[n-1]?this.styles[e+n]={0:V({},s[n-1])}:c?this.styles[e+n]={0:V({},c)}:delete this.styles[e+n],n--;this._forceClearCache=!0}insertCharStyleObject(e,r,n,s){this.styles||(this.styles={});const i=this.styles[e],o=i?V({},i):{};n||(n=1);for(const l in o){const c=parseInt(l,10);c>=r&&(i[c+n]=o[c],o[c-n]||delete i[c])}if(this._forceClearCache=!0,s){for(;n--;)Object.keys(s[n]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][r+n]=V({},s[n]));return}if(!i)return;const a=i[r?r-1:1];for(;a&&n--;)this.styles[e][r+n]=V({},a)}insertNewStyleBlock(e,r,n){const s=this.get2DCursorLocation(r,!0),i=[0];let o,a=0;for(let l=0;l<e.length;l++)e[l]===`
`?(a++,i[a]=0):i[a]++;for(i[0]>0&&(this.insertCharStyleObject(s.lineIndex,s.charIndex,i[0],n),n=n&&n.slice(i[0]+1)),a&&this.insertNewlineStyleObject(s.lineIndex,s.charIndex+i[0],a),o=1;o<a;o++)i[o]>0?this.insertCharStyleObject(s.lineIndex+o,0,i[o],n):n&&this.styles[s.lineIndex+o]&&n[0]&&(this.styles[s.lineIndex+o][0]=n[0]),n=n&&n.slice(i[o]+1);i[o]>0&&this.insertCharStyleObject(s.lineIndex+o,0,i[o],n)}removeChars(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,r),this._text.splice(e,r-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,r,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:n;s>n&&this.removeStyleFromTo(n,s);const i=this.graphemeSplit(e);this.insertNewStyleBlock(i,n,r),this._text=[...this._text.slice(0,n),...i,...this._text.slice(s)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,r,n){n<=e?(r===e?this._selectionDirection=jt:this._selectionDirection===hr&&(this._selectionDirection=jt,this.selectionEnd=e),this.selectionStart=n):n>e&&n<r?this._selectionDirection===hr?this.selectionEnd=n:this.selectionStart=n:(r===e?this._selectionDirection=hr:this._selectionDirection===jt&&(this._selectionDirection=hr,this.selectionStart=r),this.selectionEnd=n)}}class mTe extends gTe{initHiddenTextarea(){const e=this.canvas&&Pi(this.canvas.getElement())||Mh(),r=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(o=>{let[a,l]=o;return r.setAttribute(a,l)});const{top:n,left:s,fontSize:i}=this._calcTextareaPosition();r.style.cssText="position: absolute; top: ".concat(n,"; left: ").concat(s,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(i,";"),(this.hiddenTextareaContainer||e.body).appendChild(r),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(o=>{let[a,l]=o;return r.addEventListener(a,this[l].bind(this))}),this.hiddenTextarea=r}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const r=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in r)this[r[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const r=this.fromPaste,{value:n,selectionStart:s,selectionEnd:i}=this.hiddenTextarea;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const o=()=>{this.updateFromTextArea(),this.fire(Vv),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void o();const a=this._splitTextIntoLines(n).graphemeText,l=this._text.length,c=a.length,d=this.selectionStart,h=this.selectionEnd,f=d!==h;let p,g,y,v,m=c-l;const x=this.fromStringToGraphemeSelection(s,i,n),b=d>x.selectionStart;f?(g=this._text.slice(d,h),m+=h-d):c<l&&(g=b?this._text.slice(h+m,h):this._text.slice(d,d-m));const _=a.slice(x.selectionEnd-m,x.selectionEnd);if(g&&g.length&&(_.length&&(p=this.getSelectionStyles(d,d+1,!1),p=_.map(()=>p[0])),f?(y=d,v=h):b?(y=h-g.length,v=h):(y=h,v=h+g.length),this.removeStyleFromTo(y,v)),_.length){const{copyPasteData:C}=bo();r&&_.join("")===C.copiedText&&!Et.disableStyleCopyPaste&&(p=C.copiedTextStyle),this.insertNewStyleBlock(_,d,p)}o()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:r}=e;const{selectionStart:n,selectionEnd:s}=r;this.compositionStart=n,this.compositionEnd=s,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=bo();e.copiedText=this.getSelectedText(),Et.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,r){let n,s=this._getLineLeftOffset(e);return r>0&&(n=this.__charBounds[e][r-1],s+=n.left+n.width),s}getDownCursorOffset(e,r){const n=this._getSelectionForOffset(e,r),s=this.get2DCursorLocation(n),i=s.lineIndex;if(i===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-n;const o=s.charIndex,a=this._getWidthBeforeCursor(i,o),l=this._getIndexOnLine(i+1,a);return this._textLines[i].slice(o).length+l+1+this.missingNewlineOffset(i)}_getSelectionForOffset(e,r){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&r?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,r){const n=this._getSelectionForOffset(e,r),s=this.get2DCursorLocation(n),i=s.lineIndex;if(i===0||e.metaKey||e.keyCode===33)return-n;const o=s.charIndex,a=this._getWidthBeforeCursor(i,o),l=this._getIndexOnLine(i-1,a),c=this._textLines[i].slice(0,o),d=this.missingNewlineOffset(i-1);return-this._textLines[i-1].length+l-c.length+(1-d)}_getIndexOnLine(e,r){const n=this._textLines[e];let s,i,o=this._getLineLeftOffset(e),a=0;for(let l=0,c=n.length;l<c;l++)if(s=this.__charBounds[e][l].width,o+=s,o>r){i=!0;const d=o-s,h=o,f=Math.abs(d-r);a=Math.abs(h-r)<f?l:l-1;break}return i||(a=n.length-1),a}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,r){const n=this["get".concat(e,"CursorOffset")](r,this._selectionDirection===hr);if(r.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),n!==0){const s=this.text.length;this.selectionStart=Wc(0,this.selectionStart,s),this.selectionEnd=Wc(0,this.selectionEnd,s),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const r=this._selectionDirection===jt?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,r),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,r,n){let s;if(e.altKey)s=this["findWordBoundary".concat(n)](this[r]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[r]+=n==="Left"?-1:1,!0;s=this["findLineBoundary".concat(n)](this[r])}return s!==void 0&&this[r]!==s&&(this[r]=s,!0)}_moveLeft(e,r){return this._move(e,r,"Left")}_moveRight(e,r){return this._move(e,r,"Right")}moveCursorLeftWithoutShift(e){let r=!0;return this._selectionDirection=jt,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(r=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,r}moveCursorLeftWithShift(e){return this._selectionDirection===hr&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=jt,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,r){const n="moveCursor".concat(e).concat(r.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[n](r)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===jt&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=hr,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let r=!0;return this._selectionDirection=hr,this.selectionStart===this.selectionEnd?(r=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,r}}const y4=t=>!!t.button;class yTe extends mTe{constructor(){super(...arguments),$(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("mousetripleclick",this.tripleClickHandler),this.draggableTextDelegate=new pTe(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}doubleClickHandler(e){this.isEditing&&(this.selectWord(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}tripleClickHandler(e){this.isEditing&&(this.selectLine(this.getSelectionStartFromPointer(e.e)),this.renderCursorOrSelection())}_mouseDownHandler(e){let{e:r,alreadySelected:n}=e;this.canvas&&this.editable&&!y4(r)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(r)||(this.canvas.textEditingManager.register(this),n&&(this.inCompositionMode=!1,this.setCursorByClick(r)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()),this.selected||(this.selected=n||this.isEditing)))}mouseUpHandler(e){let{e:r,transform:n}=e;const s=this.draggableTextDelegate.end(r);if(this.canvas){this.canvas.textEditingManager.unregister(this);const i=this.canvas._activeObject;if(i&&i!==this)return}!this.editable||this.group&&!this.group.interactive||n&&n.actionPerformed||y4(r)||s||this.selected&&!this.getActiveControl()&&(this.enterEditing(r),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection())}setCursorByClick(e){const r=this.getSelectionStartFromPointer(e),n=this.selectionStart,s=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(n,s,r):(this.selectionStart=r,this.selectionEnd=r),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const r=this.canvas.getScenePoint(e).transform(_s(this.calcTransformMatrix())).add(new X(-this._getLeftOffset(),-this._getTopOffset()));let n=0,s=0,i=0;for(let c=0;c<this._textLines.length&&n<=r.y;c++)n+=this.getHeightOfLine(c),i=c,c>0&&(s+=this._textLines[c-1].length+this.missingNewlineOffset(c-1));let o=Math.abs(this._getLineLeftOffset(i));const a=this._textLines[i].length,l=this.__charBounds[i];for(let c=0;c<a;c++){const d=o+l[c].kernedWidth;if(r.x<=d){Math.abs(r.x-d)<=Math.abs(r.x-o)&&s++;break}o=d,s++}return Math.min(this.flipX?a-s:s,this._text.length)}}const Km="moveCursorUp",Ym="moveCursorDown",Xm="moveCursorLeft",Jm="moveCursorRight",Zm="exitEditing",v4=(t,e)=>{const r=e.getRetinaScaling();t.setTransform(r,0,0,r,0,0);const n=e.viewportTransform;t.transform(n[0],n[1],n[2],n[3],n[4],n[5])},vTe=V({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Zm,27:Zm,33:Km,34:Ym,35:Jm,36:Xm,37:Xm,38:Km,39:Jm,40:Ym},keysMapRtl:{9:Zm,27:Zm,33:Km,34:Ym,35:Xm,36:Jm,37:Jm,38:Km,39:Xm,40:Ym},ctrlKeysMapDown:{65:"cmdAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Ho extends yTe{static getDefaults(){return V(V({},super.getDefaults()),Ho.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,r){super(e,V(V({},Ho.ownDefaults),r)),this.initBehavior()}_set(e,r){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=r,this):(e==="canvas"&&(this.canvas instanceof kk&&this.canvas.textEditingManager.remove(this),r instanceof kk&&r.textEditingManager.add(this)),super._set(e,r))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,r){this[e]!==r&&(this._fireSelectionChanged(),this[e]=r),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,n=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,r,n)}setSelectionStyles(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,r,n)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,r=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,r)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const r=this.isEditing;this.isEditing=!1;const n=super.toCanvasElement(e);return this.isEditing=r,n}renderCursorOrSelection(){if(!this.isEditing||!this.canvas)return;const e=this.clearContextTop(!0);if(!e)return;const r=this._getCursorBoundaries(),n=this.findAncestorsWithClipPath(),s=n.length>0;let i,o=e;if(s){i=Fs(e.canvas),o=i.getContext("2d"),v4(o,this.canvas);const a=this.calcTransformMatrix();o.transform(a[0],a[1],a[2],a[3],a[4],a[5])}if(this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(o,r):this.renderCursor(o,r),s)for(const a of n){const l=a.clipPath,c=Fs(e.canvas),d=c.getContext("2d");if(v4(d,this.canvas),!l.absolutePositioned){const h=a.calcTransformMatrix();d.transform(h[0],h[1],h[2],h[3],h[4],h[5])}l.transform(d),l.drawObject(d,!0,{}),this.drawClipPathOnCache(o,l,c)}s&&(e.setTransform(1,0,0,1,0,0),e.drawImage(i,0,0)),this.canvas.contextTopDirty=!0,e.restore()}findAncestorsWithClipPath(){const e=[];let r=this;for(;r;)r.clipPath&&e.push(r),r=r.parent;return e}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,r=arguments.length>1?arguments[1]:void 0;const n=this._getLeftOffset(),s=this._getTopOffset(),i=this._getCursorBoundariesOffsets(e,r);return{left:n,top:s,leftOffset:i.left,topOffset:i.top}}_getCursorBoundariesOffsets(e,r){return r?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let r=0,n=0;const{charIndex:s,lineIndex:i}=this.get2DCursorLocation(e);for(let c=0;c<i;c++)r+=this.getHeightOfLine(c);const o=this._getLineLeftOffset(i),a=this.__charBounds[i][s];a&&(n=a.left),this.charSpacing!==0&&s===this._textLines[i].length&&(n-=this._getWidthOfCharSpacing());const l={top:r,left:o+(n>0?n:0)};return this.direction==="rtl"&&(this.textAlign===hr||this.textAlign===so||this.textAlign===gp?l.left*=-1:this.textAlign===jt||this.textAlign===Gv?l.left=o-(n>0?n:0):this.textAlign!==ct&&this.textAlign!==mp||(l.left=o-(n>0?n:0))),l}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,r){this._renderCursor(e,r,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const n=this.get2DCursorLocation(e),s=n.lineIndex,i=n.charIndex>0?n.charIndex-1:0,o=this.getValueOfPropertyAt(s,i,"fontSize"),a=this.getObjectScaling().x*this.canvas.getZoom(),l=this.cursorWidth/a,c=this.getValueOfPropertyAt(s,i,"deltaY"),d=r.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-o*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(s,i,"fill"),opacity:this._currentCursorOpacity,left:r.left+r.leftOffset-l/2,top:d+r.top+c,width:l,height:o}}_renderCursor(e,r,n){const{color:s,opacity:i,left:o,top:a,width:l,height:c}=this.getCursorRenderingData(n,r);e.fillStyle=s,e.globalAlpha=i,e.fillRect(o,a,l,c)}renderSelection(e,r){const n={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,n,r)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const r=this.getSelectionStartFromPointer(e);this.renderCursorAt(r)}_renderSelection(e,r,n){const s=r.selectionStart,i=r.selectionEnd,o=this.textAlign.includes(so),a=this.get2DCursorLocation(s),l=this.get2DCursorLocation(i),c=a.lineIndex,d=l.lineIndex,h=a.charIndex<0?0:a.charIndex,f=l.charIndex<0?0:l.charIndex;for(let p=c;p<=d;p++){const g=this._getLineLeftOffset(p)||0;let y=this.getHeightOfLine(p),v=0,m=0,x=0;if(p===c&&(m=this.__charBounds[c][h].left),p>=c&&p<d)x=o&&!this.isEndOfWrapping(p)?this.width:this.getLineWidth(p)||5;else if(p===d)if(f===0)x=this.__charBounds[d][f].left;else{const O=this._getWidthOfCharSpacing();x=this.__charBounds[d][f-1].left+this.__charBounds[d][f-1].width-O}v=y,(this.lineHeight<1||p===d&&this.lineHeight>1)&&(y/=this.lineHeight);let b=n.left+g+m,_=y,C=0;const T=x-m;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",_=1,C=y):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===hr||this.textAlign===so||this.textAlign===gp?b=this.width-b-T:this.textAlign===jt||this.textAlign===Gv?b=n.left+g-x:this.textAlign!==ct&&this.textAlign!==mp||(b=n.left+g-x)),e.fillRect(b,n.top+n.topOffset+C,T,_),n.topOffset+=v}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,Dr)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),r=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:r}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}$(Ho,"ownDefaults",vTe),$(Ho,"type","IText"),Me.setClass(Ho),Me.setClass(Ho,"i-text");class pc extends Ho{static getDefaults(){return V(V({},super.getDefaults()),pc.ownDefaults)}constructor(e,r){super(e,V(V({},pc.ownDefaults),r))}static createControls(){return{controls:tke()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(so)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let r=0,n=0,s=0;const i={};for(let o=0;o<e.graphemeLines.length;o++)e.graphemeText[s]===`
`&&o>0?(n=0,s++,r++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[s])&&o>0&&(n++,s++),i[o]={line:r,offset:n},s+=e.graphemeLines[o].length,n+=e.graphemeLines[o].length;return i}styleHas(e,r){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[r];n&&(r=n.line)}return super.styleHas(e,r)}isEmptyStyles(e){if(!this.styles)return!0;let r,n=0,s=e+1,i=!1;const o=this._styleMap[e],a=this._styleMap[e+1];o&&(e=o.line,n=o.offset),a&&(s=a.line,i=s===e,r=a.offset);const l=e===void 0?this.styles:{line:this.styles[e]};for(const c in l)for(const d in l[c]){const h=parseInt(d,10);if(h>=n&&(!i||h<r))for(const f in l[c][d])return!1}return!0}_getStyleDeclaration(e,r){if(this._styleMap&&!this.isWrapping){const n=this._styleMap[e];if(!n)return{};e=n.line,r=n.offset+r}return super._getStyleDeclaration(e,r)}_setStyleDeclaration(e,r,n){const s=this._styleMap[e];super._setStyleDeclaration(s.line,s.offset+r,n)}_deleteStyleDeclaration(e,r){const n=this._styleMap[e];super._deleteStyleDeclaration(n.line,n.offset+r)}_getLineStyle(e){const r=this._styleMap[e];return!!this.styles[r.line]}_setLineStyle(e){const r=this._styleMap[e];super._setLineStyle(r.line)}_wrapText(e,r){this.isWrapping=!0;const n=this.getGraphemeDataForRender(e),s=[];for(let i=0;i<n.wordsData.length;i++)s.push(...this._wrapLine(i,r,n));return this.isWrapping=!1,s}getGraphemeDataForRender(e){const r=this.splitByGrapheme,n=r?"":" ";let s=0;return{wordsData:e.map((i,o)=>{let a=0;const l=r?this.graphemeSplit(i):this.wordSplit(i);return l.length===0?[{word:[],width:0}]:l.map(c=>{const d=r?[c]:this.graphemeSplit(c),h=this._measureWord(d,o,a);return s=Math.max(h,s),a+=d.length+n.length,{word:d,width:h}})}),largestWordWidth:s}}_measureWord(e,r){let n,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=0;for(let o=0,a=e.length;o<a;o++)i+=this._getGraphemeBox(e[o],r,o+s,n,!0).kernedWidth,n=e[o];return i}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,r,n){let{largestWordWidth:s,wordsData:i}=n,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a=this._getWidthOfCharSpacing(),l=this.splitByGrapheme,c=[],d=l?"":" ";let h=0,f=[],p=0,g=0,y=!0;r-=o;const v=Math.max(r,s,this.dynamicMinWidth),m=i[e];let x;for(p=0,x=0;x<m.length;x++){const{word:b,width:_}=m[x];p+=b.length,h+=g+_-a,h>v&&!y?(c.push(f),f=[],h=_,y=!0):h+=a,y||l||f.push(d),f=f.concat(b),g=l?0:this._measureWord([d],e,p),p++,y=!1}return x&&c.push(f),s+o>this.dynamicMinWidth&&(this.dynamicMinWidth=s-a+o),c}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,r){return this.splitByGrapheme&&!r?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const r=super._splitTextIntoLines(e),n=this._wrapText(r.lines,this.width),s=new Array(n.length);for(let i=0;i<n.length;i++)s[i]=n[i].join("");return r.lines=s,r.graphemeLines=n,r}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const r in this._styleMap){const n=parseInt(r,10);if(this._textLines[n]){const s=this._styleMap[r].line;e.set("".concat(s),!0)}}for(const r in this.styles)e.has(r)||delete this.styles[r]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}$(pc,"type","Textbox"),$(pc,"textLayoutProperties",[...Ho.textLayoutProperties,"width"]),$(pc,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),Me.setClass(pc);class x4 extends Kw{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,r){const{target:n}=e,{clipPath:s,group:i}=n;if(!s||!this.shouldPerformLayout(e))return;const{width:o,height:a}=mo(TW(n,s)),l=new X(o,a);if(s.absolutePositioned)return{center:Tc(s.getRelativeCenterPoint(),void 0,i?i.calcTransformMatrix():void 0),size:l};{const c=s.getRelativeCenterPoint().transform(n.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:d=new X,correction:h=new X}=this.calcBoundingBox(r,e)||{};return{center:d.add(c),correction:h.subtract(c),size:l}}return{center:n.getRelativeCenterPoint().add(c),size:l}}}}$(x4,"type","clip-path"),Me.setClass(x4);class w4 extends Kw{getInitialSize(e,r){let{target:n}=e,{size:s}=r;return new X(n.width||s.x,n.height||s.y)}}$(w4,"type","fixed"),Me.setClass(w4);class xTe extends fg{subscribeTargets(e){const r=e.target;e.targets.reduce((n,s)=>(s.parent&&n.add(s.parent),n),new Set).forEach(n=>{n.layoutManager.subscribeTargets({target:n,targets:[r]})})}unsubscribeTargets(e){const r=e.target,n=r.getObjects();e.targets.reduce((s,i)=>(i.parent&&s.add(i.parent),s),new Set).forEach(s=>{!n.some(i=>i.parent===s)&&s.layoutManager.unsubscribeTargets({target:s,targets:[r]})})}}class gc extends sa{static getDefaults(){return V(V({},super.getDefaults()),gc.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,gc.ownDefaults),this.setOptions(r);const{left:n,top:s,layoutManager:i}=r;this.groupInit(e,{left:n,top:s,layoutManager:i??new xTe})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];this.multiSelectionStacking==="selection-order"?this.add(...r):r.forEach(s=>{const i=this._objects.findIndex(a=>a.isInFrontOf(s)),o=i===-1?this.size():i;this.insertAt(o,s)})}canEnterGroup(e){return this.getObjects().some(r=>r.isDescendantOf(e)||e.isDescendantOf(r))?(El("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,r){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,r)}exitGroup(e,r){this._exitGroup(e,r),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,r){super._onAfterObjectsChange(e,r);const n=new Set;r.forEach(s=>{const{parent:i}=s;i&&n.add(i)}),e===cP?n.forEach(s=>{s._onAfterObjectsChange(Jv,r)}):n.forEach(s=>{s._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,r,n){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const s=V(V({hasControls:!1},n),{},{forActiveSelection:!0});for(let i=0;i<this._objects.length;i++)this._objects[i]._renderControls(e,s);super._renderControls(e,r),e.restore()}}$(gc,"type","ActiveSelection"),$(gc,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),Me.setClass(gc),Me.setClass(gc,"activeSelection");class wTe{constructor(){$(this,"resources",{})}applyFilters(e,r,n,s,i){const o=i.getContext("2d");if(!o)return;o.drawImage(r,0,0,n,s);const a={sourceWidth:n,sourceHeight:s,imageData:o.getImageData(0,0,n,s),originalEl:r,originalImageData:o.getImageData(0,0,n,s),canvasEl:i,ctx:o,filterBackend:this};e.forEach(c=>{c.applyTo(a)});const{imageData:l}=a;return l.width===n&&l.height===s||(i.width=l.width,i.height=l.height),o.putImageData(l,0,0),a}}class KW{constructor(){let{tileSize:e=Et.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),$(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,r){this.dispose(),this.createWebGLCanvas(e,r)}createWebGLCanvas(e,r){const n=Fs({width:e,height:r}),s=n.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});s&&(s.clearColor(0,0,0,0),this.canvas=n,this.gl=s)}applyFilters(e,r,n,s,i,o){const a=this.gl,l=i.getContext("2d");if(!a||!l)return;let c;o&&(c=this.getCachedTexture(o,r));const d={originalWidth:r.width||r.naturalWidth||0,originalHeight:r.height||r.naturalHeight||0,sourceWidth:n,sourceHeight:s,destinationWidth:n,destinationHeight:s,context:a,sourceTexture:this.createTexture(a,n,s,c?void 0:r),targetTexture:this.createTexture(a,n,s),originalTexture:c||this.createTexture(a,n,s,c?void 0:r),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:i},h=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,h),e.forEach(f=>{f&&f.applyTo(d)}),function(f){const p=f.targetCanvas,g=p.width,y=p.height,v=f.destinationWidth,m=f.destinationHeight;g===v&&y===m||(p.width=v,p.height=m)}(d),this.copyGLTo2D(a,d),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(d.sourceTexture),a.deleteTexture(d.targetTexture),a.deleteFramebuffer(h),l.setTransform(1,0,0,1,0,0),d}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,r,n,s,i){const{NEAREST:o,TEXTURE_2D:a,RGBA:l,UNSIGNED_BYTE:c,CLAMP_TO_EDGE:d,TEXTURE_MAG_FILTER:h,TEXTURE_MIN_FILTER:f,TEXTURE_WRAP_S:p,TEXTURE_WRAP_T:g}=e,y=e.createTexture();return e.bindTexture(a,y),e.texParameteri(a,h,i||o),e.texParameteri(a,f,i||o),e.texParameteri(a,p,d),e.texParameteri(a,g,d),s?e.texImage2D(a,0,l,l,c,s):e.texImage2D(a,0,l,r,n,0,l,c,null),y}getCachedTexture(e,r,n){const{textureCache:s}=this;if(s[e])return s[e];{const i=this.createTexture(this.gl,r.width,r.height,r,n);return i&&(s[e]=i),i}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,r){const n=e.canvas,s=r.targetCanvas,i=s.getContext("2d");if(!i)return;i.translate(0,s.height),i.scale(1,-1);const o=n.height-s.height;i.drawImage(n,0,o,s.width,s.height,0,0,s.width,s.height)}copyGLTo2DPutImageData(e,r){const n=r.targetCanvas.getContext("2d"),s=r.destinationWidth,i=r.destinationHeight,o=s*i*4;if(!n)return;const a=new Uint8Array(this.imageBuffer,0,o),l=new Uint8ClampedArray(this.imageBuffer,0,o);e.readPixels(0,0,s,i,e.RGBA,e.UNSIGNED_BYTE,a);const c=new ImageData(l,s,i);n.putImageData(c,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,r={renderer:"",vendor:""};if(!e)return r;const n=e.getExtension("WEBGL_debug_renderer_info");if(n){const s=e.getParameter(n.UNMASKED_RENDERER_WEBGL),i=e.getParameter(n.UNMASKED_VENDOR_WEBGL);s&&(r.renderer=s.toLowerCase()),i&&(r.vendor=i.toLowerCase())}return this.gpuInfo=r,r}}let O_;function bTe(){const{WebGLProbe:t}=bo();return t.queryWebGL(So()),Et.enableGLFiltering&&t.isSupported(Et.textureSize)?new KW({tileSize:Et.textureSize}):new wTe}function M_(){return!O_&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(O_=bTe()),O_}const STe=["filters","resizeFilter","src","crossOrigin","type"],YW=["cropX","cropY"];class ys extends Sn{static getDefaults(){return V(V({},super.getDefaults()),ys.ownDefaults)}constructor(e,r){super(),$(this,"_lastScaleX",1),$(this,"_lastScaleY",1),$(this,"_filterScalingX",1),$(this,"_filterScalingY",1),this.filters=[],Object.assign(this,ys.ownDefaults),this.setOptions(r),this.cacheKey="texture".concat(Tl()),this.setElement(typeof e=="string"?(this.canvas&&Pi(this.canvas.getElement())||Mh()).getElementById(e):e,r)}getElement(){return this._element}setElement(e){var r;let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(n),(r=e.classList)===null||r===void 0||r.add(ys.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const r=M_(!1);r instanceof KW&&r.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const r=this[e];r&&bo().dispose(r),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const r=this.width/2,n=this.height/2;e.beginPath(),e.moveTo(-r,-n),e.lineTo(r,-n),e.lineTo(r,n),e.lineTo(-r,n),e.lineTo(-r,-n),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const r=[];return this.filters.forEach(n=>{n&&r.push(n.toObject())}),V(V({},super.toObject([...YW,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:r},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],r=this._element,n=-this.width/2,s=-this.height/2;let i=[],o=[],a="",l="";if(!r)return[];if(this.hasCrop()){const c=Tl();i.push('<clipPath id="imageCrop_'+c+`">
`,'	<rect x="'+n+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(n-this.cropX,'" y="').concat(s-this.cropY,'" width="').concat(r.width||r.naturalWidth,'" height="').concat(r.height||r.naturalHeight,'"').concat(l).concat(a,`></image>
`)),this.stroke||this.strokeDashArray){const c=this.fill;this.fill=null,o=['	<rect x="'.concat(n,'" y="').concat(s,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=c}return i=this.paintFirst!==Dr?i.concat(o,e):i.concat(e,o),i}getSrc(e){const r=e?this._element:this._originalElement;return r?r.toDataURL?r.toDataURL():this.srcFromAttribute?r.getAttribute("src")||"":r.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:r,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return pp(e,{crossOrigin:r,signal:n}).then(s=>{r!==void 0&&this.set({crossOrigin:r}),this.setElement(s)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,r=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),s=n.x,i=n.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||s>r&&i>r)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,void(this._lastScaleY=i);const a=Fs(o),{width:l,height:c}=o;this._element=a,this._lastScaleX=e.scaleX=s,this._lastScaleY=e.scaleY=i,M_().applyFilters([e],o,l,c,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(i=>i&&!i.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const r=this._originalElement,n=r.naturalWidth||r.width,s=r.naturalHeight||r.height;if(this._element===this._originalElement){const i=Fs({width:n,height:s});this._element=i,this._filteredEl=i}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,s),this._lastScaleX=1,this._lastScaleY=1);M_().applyFilters(e,this._originalElement,n,s,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const r=this._element;if(!r)return;const n=this._filterScalingX,s=this._filterScalingY,i=this.width,o=this.height,a=Math.max(this.cropX,0),l=Math.max(this.cropY,0),c=r.naturalWidth||r.width,d=r.naturalHeight||r.height,h=a*n,f=l*s,p=Math.min(i*n,c-h),g=Math.min(o*s,d-f),y=-i/2,v=-o/2,m=Math.min(i,c/n-a),x=Math.min(o,d/s-l);r&&e.drawImage(r,h,f,p,g,y,v,m,x)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.getOriginalSize();this.width=e||n.width,this.height=r||n.height}parsePreserveAspectRatioAttribute(){const e=sW(this.preserveAspectRatio||""),r=this.width,n=this.height,s={width:r,height:n};let i,o=this._element.width,a=this._element.height,l=1,c=1,d=0,h=0,f=0,p=0;return!e||e.alignX===ls&&e.alignY===ls?(l=r/o,c=n/a):(e.meetOrSlice==="meet"&&(l=c=AW(this._element,s),i=(r-o*l)/2,e.alignX==="Min"&&(d=-i),e.alignX==="Max"&&(d=i),i=(n-a*c)/2,e.alignY==="Min"&&(h=-i),e.alignY==="Max"&&(h=i)),e.meetOrSlice==="slice"&&(l=c=PW(this._element,s),i=o-r/l,e.alignX==="Mid"&&(f=i/2),e.alignX==="Max"&&(f=i),i=a-n/c,e.alignY==="Mid"&&(p=i/2),e.alignY==="Max"&&(p=i),o=r/l,a=n/c)),{width:o,height:a,scaleX:l,scaleY:c,offsetLeft:d,offsetTop:h,cropX:f,cropY:p}}static fromObject(e,r){let{filters:n,resizeFilter:s,src:i,crossOrigin:o,type:a}=e,l=Gt(e,STe);return Promise.all([pp(i,V(V({},r),{},{crossOrigin:o})),n&&th(n,r),s&&th([s],r),Yg(l,r)]).then(c=>{let[d,h=[],[f]=[],p={}]=c;return new this(d,V(V({},l),{},{src:i,filters:h,resizeFilter:f},p))})}static fromURL(e){let{crossOrigin:r=null,signal:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return pp(e,{crossOrigin:r,signal:n}).then(i=>new this(i,s))}static async fromElement(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const s=Sa(e,this.ATTRIBUTE_NAMES,n);return this.fromURL(s["xlink:href"]||s.href,r,s).catch(i=>(El("log","Unable to parse Image",i),null))}}$(ys,"type","Image"),$(ys,"cacheProperties",[...ba,...YW]),$(ys,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),$(ys,"CSS_CANVAS","canvas-img"),$(ys,"ATTRIBUTE_NAMES",[...zl,"x","y","width","height","preserveAspectRatio","xlink:href","href","crossOrigin","image-rendering"]),Me.setClass(ys),Me.setSVGClass(ys);zw(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const Xw=t=>t.webgl!==void 0,dP="precision highp float",_Te=`
    `.concat(dP,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),CTe=["type"],ETe=["type"],kTe=new RegExp(dP,"g");class Lr{get type(){return this.constructor.type}constructor(){let e=Gt(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},CTe);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return _Te}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:s="highp"}}=bo();s!=="highp"&&(r=r.replace(kTe,dP.replace("highp",s)));const i=e.createShader(e.VERTEX_SHADER),o=e.createShader(e.FRAGMENT_SHADER),a=e.createProgram();if(!i||!o||!a)throw new oo("Vertex, fragment shader or program creation error");if(e.shaderSource(i,n),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new oo("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(i)));if(e.shaderSource(o,r),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw new oo("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(o)));if(e.attachShader(a,i),e.attachShader(a,o),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new oo('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(a)));const l=this.getUniformLocations(e,a)||{};return l.uStepW=e.getUniformLocation(a,"uStepW"),l.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(e,a),uniformLocations:l}}getAttributeLocations(e,r){return{aPosition:e.getAttribLocation(r,"aPosition")}}getUniformLocations(e,r){const n=this.constructor.uniformLocations,s={};for(let i=0;i<n.length;i++)s[n[i]]=e.getUniformLocation(r,n[i]);return s}sendAttributeData(e,r,n){const s=r.aPosition,i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}_setupFrameBuffer(e){const r=e.context;if(e.passes>1){const n=e.destinationWidth,s=e.destinationHeight;e.sourceWidth===n&&e.sourceHeight===s||(r.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(r,n,s)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e.targetTexture,0)}else r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish()}_swapTextures(e){e.passes--,e.pass++;const r=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=r}isNeutralState(e){return!1}applyTo(e){Xw(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const r=this.getCacheKey();return e.programCache[r]||(e.programCache[r]=this.createProgram(e.context)),e.programCache[r]}applyToWebGL(e){const r=e.context,n=this.retrieveShader(e);e.pass===0&&e.originalTexture?r.bindTexture(r.TEXTURE_2D,e.originalTexture):r.bindTexture(r.TEXTURE_2D,e.sourceTexture),r.useProgram(n.program),this.sendAttributeData(r,n.attributeLocations,e.aPosition),r.uniform1f(n.uniformLocations.uStepW,1/e.sourceWidth),r.uniform1f(n.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(r,n.uniformLocations),r.viewport(0,0,e.destinationWidth,e.destinationHeight),r.drawArrays(r.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,r,n){e.activeTexture(n),e.bindTexture(e.TEXTURE_2D,r),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,r){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:r,sourceHeight:n}=e,s=Fs({width:r,height:n});e.helpLayer=s}}toObject(){const e=Object.keys(this.constructor.defaults||{});return V({type:this.type},e.reduce((r,n)=>(r[n]=this[n],r),{}))}toJSON(){return this.toObject()}static async fromObject(e,r){return new this(Gt(e,ETe))}}$(Lr,"type","BaseFilter"),$(Lr,"uniformLocations",[]);const TTe={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class Qm extends Lr{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(TTe[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:r}}=e;const n=new At(this.color).getSource(),s=this.alpha,i=n[0]*s,o=n[1]*s,a=n[2]*s,l=1-s;for(let c=0;c<r.length;c+=4){const d=r[c],h=r[c+1],f=r[c+2];let p,g,y;switch(this.mode){case"multiply":p=d*i/255,g=h*o/255,y=f*a/255;break;case"screen":p=255-(255-d)*(255-i)/255,g=255-(255-h)*(255-o)/255,y=255-(255-f)*(255-a)/255;break;case"add":p=d+i,g=h+o,y=f+a;break;case"difference":p=Math.abs(d-i),g=Math.abs(h-o),y=Math.abs(f-a);break;case"subtract":p=d-i,g=h-o,y=f-a;break;case"darken":p=Math.min(d,i),g=Math.min(h,o),y=Math.min(f,a);break;case"lighten":p=Math.max(d,i),g=Math.max(h,o),y=Math.max(f,a);break;case"overlay":p=i<128?2*d*i/255:255-2*(255-d)*(255-i)/255,g=o<128?2*h*o/255:255-2*(255-h)*(255-o)/255,y=a<128?2*f*a/255:255-2*(255-f)*(255-a)/255;break;case"exclusion":p=i+d-2*i*d/255,g=o+h-2*o*h/255,y=a+f-2*a*f/255;break;case"tint":p=i+d*l,g=o+h*l,y=a+f*l}r[c]=p,r[c+1]=g,r[c+2]=y}}sendUniformData(e,r){const n=new At(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,e.uniform4fv(r.uColor,n)}}$(Qm,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),$(Qm,"type","BlendColor"),$(Qm,"uniformLocations",["uColor"]),Me.setClass(Qm);const jTe={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},ATe=["type","image"];class ey extends Lr{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return jTe[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const r=e.context,n=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(r,n,r.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(r,r.TEXTURE1)}createTexture(e,r){return e.getCachedTexture(r.cacheKey,r.getElement())}calculateMatrix(){const e=this.image,{width:r,height:n}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/r,-e.top/n,1]}applyTo2d(e){let{imageData:{data:r,width:n,height:s},filterBackend:{resources:i}}=e;const o=this.image;i.blendImage||(i.blendImage=So());const a=i.blendImage,l=a.getContext("2d");a.width!==n||a.height!==s?(a.width=n,a.height=s):l.clearRect(0,0,n,s),l.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),l.drawImage(o.getElement(),0,0,n,s);const c=l.getImageData(0,0,n,s).data;for(let d=0;d<r.length;d+=4){const h=r[d],f=r[d+1],p=r[d+2],g=r[d+3],y=c[d],v=c[d+1],m=c[d+2],x=c[d+3];switch(this.mode){case"multiply":r[d]=h*y/255,r[d+1]=f*v/255,r[d+2]=p*m/255,r[d+3]=g*x/255;break;case"mask":r[d+3]=x}}}sendUniformData(e,r){const n=this.calculateMatrix();e.uniform1i(r.uImage,1),e.uniformMatrix3fv(r.uTransformMatrix,!1,n)}toObject(){return V(V({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,r){let{type:n,image:s}=e,i=Gt(e,ATe);return ys.fromObject(s,r).then(o=>new this(V(V({},i),{},{image:o})))}}$(ey,"type","BlendImage"),$(ey,"defaults",{mode:"multiply",alpha:1}),$(ey,"uniformLocations",["uTransformMatrix","uImage"]),Me.setClass(ey);class ty extends Lr{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float totalC = 0.0;
      float totalA = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        vec4 sample = texture2D(uTexture, vTexCoord + uDelta * percent);
        float weight = 1.0 - abs(percent);
        float alpha = weight * sample.a;
        color.rgb += sample.rgb * alpha;
        color.a += alpha;
        totalA += weight;
        totalC += alpha;
      }
      gl_FragColor.rgb = color.rgb / totalC;
      gl_FragColor.a = color.a / totalA;
    }
  `}applyTo(e){Xw(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){let{imageData:{data:r,width:n,height:s}}=e;this.aspectRatio=n/s,this.horizontal=!0;let i=this.getBlurValue()*n;const o=new Uint8ClampedArray(r),a=15,l=4*n;for(let c=0;c<r.length;c+=4){let d=0,h=0,f=0,p=0,g=0;const y=c-c%l,v=y+l;for(let m=-14;m<a;m++){const x=m/a,b=4*Math.floor(i*x),_=1-Math.abs(x);let C=c+b;C<y?C=y:C>v&&(C=v);const T=r[C+3]*_;d+=r[C]*T,h+=r[C+1]*T,f+=r[C+2]*T,p+=T,g+=_}o[c]=d/p,o[c+1]=h/p,o[c+2]=f/p,o[c+3]=p/g}this.horizontal=!1,i=this.getBlurValue()*s;for(let c=0;c<o.length;c+=4){let d=0,h=0,f=0,p=0,g=0;const y=c%l,v=o.length-l+y;for(let m=-14;m<a;m++){const x=m/a,b=Math.floor(i*x)*l,_=1-Math.abs(x);let C=c+b;C<y?C=y:C>v&&(C=v);const T=o[C+3]*_;d+=o[C]*T,h+=o[C+1]*T,f+=o[C+2]*T,p+=T,g+=_}r[c]=d/p,r[c+1]=h/p,r[c+2]=f/p,r[c+3]=p/g}}sendUniformData(e,r){const n=this.chooseRightDelta();e.uniform2fv(r.uDelta,n)}isNeutralState(){return this.blur===0}getBlurValue(){let e=1;const{horizontal:r,aspectRatio:n}=this;return r?n>1&&(e=1/n):n<1&&(e=n),e*this.blur*.12}chooseRightDelta(){const e=this.getBlurValue();return this.horizontal?[e,0]:[0,e]}}$(ty,"type","Blur"),$(ty,"defaults",{blur:0}),$(ty,"uniformLocations",["uDelta"]),Me.setClass(ty);class ry extends Lr{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:r}}=e;const n=Math.round(255*this.brightness);for(let s=0;s<r.length;s+=4)r[s]+=n,r[s+1]+=n,r[s+2]+=n}isNeutralState(){return this.brightness===0}sendUniformData(e,r){e.uniform1f(r.uBrightness,this.brightness)}}$(ry,"type","Brightness"),$(ry,"defaults",{brightness:0}),$(ry,"uniformLocations",["uBrightness"]),Me.setClass(ry);const XW={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class id extends Lr{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const r=e.imageData.data,n=this.matrix,s=this.colorsOnly;for(let i=0;i<r.length;i+=4){const o=r[i],a=r[i+1],l=r[i+2];if(r[i]=o*n[0]+a*n[1]+l*n[2]+255*n[4],r[i+1]=o*n[5]+a*n[6]+l*n[7]+255*n[9],r[i+2]=o*n[10]+a*n[11]+l*n[12]+255*n[14],!s){const c=r[i+3];r[i]+=c*n[3],r[i+1]+=c*n[8],r[i+2]+=c*n[13],r[i+3]=o*n[15]+a*n[16]+l*n[17]+c*n[18]+255*n[19]}}}sendUniformData(e,r){const n=this.matrix,s=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],i=[n[4],n[9],n[14],n[19]];e.uniformMatrix4fv(r.uColorMatrix,!1,s),e.uniform4fv(r.uConstants,i)}toObject(){return V(V({},super.toObject()),{},{matrix:[...this.matrix]})}}function gu(t,e){var r;const n=($(r=class extends id{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",t),$(r,"defaults",{colorsOnly:!1,matrix:e}),r);return Me.setClass(n,t),n}$(id,"type","ColorMatrix"),$(id,"defaults",XW),$(id,"uniformLocations",["uColorMatrix","uConstants"]),Me.setClass(id);gu("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);gu("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);gu("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);gu("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);gu("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);gu("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);gu("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class b4 extends Lr{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){Xw(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(r=>{r.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,r){return Promise.all((e.subFilters||[]).map(n=>Me.getClass(n.type).fromObject(n,r))).then(n=>new this({subFilters:n}))}}$(b4,"type","Composed"),Me.setClass(b4);class ny extends Lr{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:r}}=e;const n=Math.floor(255*this.contrast),s=259*(n+255)/(255*(259-n));for(let i=0;i<r.length;i+=4)r[i]=s*(r[i]-128)+128,r[i+1]=s*(r[i+1]-128)+128,r[i+2]=s*(r[i+2]-128)+128}sendUniformData(e,r){e.uniform1f(r.uContrast,this.contrast)}}$(ny,"type","Contrast"),$(ny,"defaults",{contrast:0}),$(ny,"uniformLocations",["uContrast"]),Me.setClass(ny);const PTe={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class sy extends Lr{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return PTe[this.getCacheKey()]}applyTo2d(e){const r=e.imageData,n=r.data,s=this.matrix,i=Math.round(Math.sqrt(s.length)),o=Math.floor(i/2),a=r.width,l=r.height,c=e.ctx.createImageData(a,l),d=c.data,h=this.opaque?1:0;let f,p,g,y,v,m,x,b,_,C,T,O,R;for(T=0;T<l;T++)for(C=0;C<a;C++){for(v=4*(T*a+C),f=0,p=0,g=0,y=0,R=0;R<i;R++)for(O=0;O<i;O++)x=T+R-o,m=C+O-o,x<0||x>=l||m<0||m>=a||(b=4*(x*a+m),_=s[R*i+O],f+=n[b]*_,p+=n[b+1]*_,g+=n[b+2]*_,h||(y+=n[b+3]*_));d[v]=f,d[v+1]=p,d[v+2]=g,d[v+3]=h?n[v+3]:y}e.imageData=c}sendUniformData(e,r){e.uniform1fv(r.uMatrix,this.matrix)}toObject(){return V(V({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}$(sy,"type","Convolute"),$(sy,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),$(sy,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),Me.setClass(sy);const JW="Gamma";class iy extends Lr{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:r}}=e;const n=this.gamma,s=1/n[0],i=1/n[1],o=1/n[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let l=0;l<256;l++)a.r[l]=255*Math.pow(l/255,s),a.g[l]=255*Math.pow(l/255,i),a.b[l]=255*Math.pow(l/255,o);for(let l=0;l<r.length;l+=4)r[l]=a.r[r[l]],r[l+1]=a.g[r[l+1]],r[l+2]=a.b[r[l+2]]}sendUniformData(e,r){e.uniform3fv(r.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:JW,gamma:this.gamma.concat()}}}$(iy,"type",JW),$(iy,"defaults",{gamma:[1,1,1]}),$(iy,"uniformLocations",["uGamma"]),Me.setClass(iy);const NTe={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class oy extends Lr{applyTo2d(e){let{imageData:{data:r}}=e;for(let n,s=0;s<r.length;s+=4){const i=r[s],o=r[s+1],a=r[s+2];switch(this.mode){case"average":n=(i+o+a)/3;break;case"lightness":n=(Math.min(i,o,a)+Math.max(i,o,a))/2;break;case"luminosity":n=.21*i+.72*o+.07*a}r[s+2]=r[s+1]=r[s]=n}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return NTe[this.mode]}sendUniformData(e,r){e.uniform1i(r.uMode,1)}isNeutralState(){return!1}}$(oy,"type","Grayscale"),$(oy,"defaults",{mode:"average"}),$(oy,"uniformLocations",["uMode"]),Me.setClass(oy);const RTe=V(V({},XW),{},{rotation:0});class I_ extends id{calculateMatrix(){const e=this.rotation*Math.PI,r=$i(e),n=Ui(e),s=1/3,i=Math.sqrt(s)*n,o=1-r;this.matrix=[r+o/3,s*o-i,s*o+i,0,0,s*o+i,r+s*o,s*o-i,0,0,s*o-i,s*o+i,r+s*o,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}$(I_,"type","HueRotation"),$(I_,"defaults",RTe),Me.setClass(I_);class ay extends Lr{applyTo2d(e){let{imageData:{data:r}}=e;for(let n=0;n<r.length;n+=4)r[n]=255-r[n],r[n+1]=255-r[n+1],r[n+2]=255-r[n+2],this.alpha&&(r[n+3]=255-r[n+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,r){e.uniform1i(r.uInvert,Number(this.invert)),e.uniform1i(r.uAlpha,Number(this.alpha))}}$(ay,"type","Invert"),$(ay,"defaults",{alpha:!1,invert:!0}),$(ay,"uniformLocations",["uInvert","uAlpha"]),Me.setClass(ay);class ly extends Lr{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:r}}=e;const n=this.noise;for(let s=0;s<r.length;s+=4){const i=(.5-Math.random())*n;r[s]+=i,r[s+1]+=i,r[s+2]+=i}}sendUniformData(e,r){e.uniform1f(r.uNoise,this.noise/255),e.uniform1f(r.uSeed,Math.random())}isNeutralState(){return this.noise===0}}$(ly,"type","Noise"),$(ly,"defaults",{noise:0}),$(ly,"uniformLocations",["uNoise","uSeed"]),Me.setClass(ly);class cy extends Lr{applyTo2d(e){let{imageData:{data:r,width:n,height:s}}=e;for(let i=0;i<s;i+=this.blocksize)for(let o=0;o<n;o+=this.blocksize){const a=4*i*n+4*o,l=r[a],c=r[a+1],d=r[a+2],h=r[a+3];for(let f=i;f<Math.min(i+this.blocksize,s);f++)for(let p=o;p<Math.min(o+this.blocksize,n);p++){const g=4*f*n+4*p;r[g]=l,r[g+1]=c,r[g+2]=d,r[g+3]=h}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,r){e.uniform1f(r.uBlocksize,this.blocksize)}}$(cy,"type","Pixelate"),$(cy,"defaults",{blocksize:4}),$(cy,"uniformLocations",["uBlocksize"]),Me.setClass(cy);class uy extends Lr{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:r}}=e;const n=255*this.distance,s=new At(this.color).getSource(),i=[s[0]-n,s[1]-n,s[2]-n],o=[s[0]+n,s[1]+n,s[2]+n];for(let a=0;a<r.length;a+=4){const l=r[a],c=r[a+1],d=r[a+2];l>i[0]&&c>i[1]&&d>i[2]&&l<o[0]&&c<o[1]&&d<o[2]&&(r[a+3]=0)}}sendUniformData(e,r){const n=new At(this.color).getSource(),s=this.distance,i=[0+n[0]/255-s,0+n[1]/255-s,0+n[2]/255-s,1],o=[n[0]/255+s,n[1]/255+s,n[2]/255+s,1];e.uniform4fv(r.uLow,i),e.uniform4fv(r.uHigh,o)}}$(uy,"type","RemoveColor"),$(uy,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),$(uy,"uniformLocations",["uLow","uHigh"]),Me.setClass(uy);class dy extends Lr{sendUniformData(e,r){e.uniform2fv(r.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(r.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),r=this.tempScale,n=this.getFilterWindow(),s=new Array(n);for(let i=1;i<=n;i++)s[i-1]=e(i*r);return s}generateShader(e){const r=new Array(e);for(let n=1;n<=e;n++)r[n-1]="".concat(n,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(r.map((n,s)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(n,") * uTaps[").concat(s,"] + texture2D(uTexture, vTexCoord - ").concat(n,") * uTaps[").concat(s,`];
              sum += 2.0 * uTaps[`).concat(s,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){Xw(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return r=>{if(r>=e||r<=-e)return 0;if(r<11920929e-14&&r>-11920929e-14)return 1;const n=(r*=Math.PI)/e;return Math.sin(r)/r*Math.sin(n)/n}}applyTo2d(e){const r=e.imageData,n=this.scaleX,s=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/s;const i=r.width,o=r.height,a=Math.round(i*n),l=Math.round(o*s);let c;c=this.resizeType==="sliceHack"?this.sliceByTwo(e,i,o,a,l):this.resizeType==="hermite"?this.hermiteFastResize(e,i,o,a,l):this.resizeType==="bilinear"?this.bilinearFiltering(e,i,o,a,l):this.resizeType==="lanczos"?this.lanczosResize(e,i,o,a,l):new ImageData(a,l),e.imageData=c}sliceByTwo(e,r,n,s,i){const o=e.imageData,a=.5;let l=!1,c=!1,d=r*a,h=n*a;const f=e.filterBackend.resources;let p=0,g=0;const y=r;let v=0;f.sliceByTwo||(f.sliceByTwo=So());const m=f.sliceByTwo;(m.width<1.5*r||m.height<n)&&(m.width=1.5*r,m.height=n);const x=m.getContext("2d");for(x.clearRect(0,0,1.5*r,n),x.putImageData(o,0,0),s=Math.floor(s),i=Math.floor(i);!l||!c;)r=d,n=h,s<Math.floor(d*a)?d=Math.floor(d*a):(d=s,l=!0),i<Math.floor(h*a)?h=Math.floor(h*a):(h=i,c=!0),x.drawImage(m,p,g,r,n,y,v,d,h),p=y,g=v,v+=h;return x.getImageData(p,g,s,i)}lanczosResize(e,r,n,s,i){const o=e.imageData.data,a=e.ctx.createImageData(s,i),l=a.data,c=this.lanczosCreate(this.lanczosLobes),d=this.rcpScaleX,h=this.rcpScaleY,f=2/this.rcpScaleX,p=2/this.rcpScaleY,g=Math.ceil(d*this.lanczosLobes/2),y=Math.ceil(h*this.lanczosLobes/2),v={},m={x:0,y:0},x={x:0,y:0};return function b(_){let C,T,O,R,I,H,re,L,z,Y,pe;for(m.x=(_+.5)*d,x.x=Math.floor(m.x),C=0;C<i;C++){for(m.y=(C+.5)*h,x.y=Math.floor(m.y),I=0,H=0,re=0,L=0,z=0,T=x.x-g;T<=x.x+g;T++)if(!(T<0||T>=r)){Y=Math.floor(1e3*Math.abs(T-m.x)),v[Y]||(v[Y]={});for(let Q=x.y-y;Q<=x.y+y;Q++)Q<0||Q>=n||(pe=Math.floor(1e3*Math.abs(Q-m.y)),v[Y][pe]||(v[Y][pe]=c(Math.sqrt(Math.pow(Y*f,2)+Math.pow(pe*p,2))/1e3)),O=v[Y][pe],O>0&&(R=4*(Q*r+T),I+=O,H+=O*o[R],re+=O*o[R+1],L+=O*o[R+2],z+=O*o[R+3]))}R=4*(C*s+_),l[R]=H/I,l[R+1]=re/I,l[R+2]=L/I,l[R+3]=z/I}return++_<s?b(_):a}(0)}bilinearFiltering(e,r,n,s,i){let o,a,l,c,d,h,f,p,g,y,v,m,x,b=0;const _=this.rcpScaleX,C=this.rcpScaleY,T=4*(r-1),O=e.imageData.data,R=e.ctx.createImageData(s,i),I=R.data;for(f=0;f<i;f++)for(p=0;p<s;p++)for(d=Math.floor(_*p),h=Math.floor(C*f),g=_*p-d,y=C*f-h,x=4*(h*r+d),v=0;v<4;v++)o=O[x+v],a=O[x+4+v],l=O[x+T+v],c=O[x+T+4+v],m=o*(1-g)*(1-y)+a*g*(1-y)+l*y*(1-g)+c*g*y,I[b++]=m;return R}hermiteFastResize(e,r,n,s,i){const o=this.rcpScaleX,a=this.rcpScaleY,l=Math.ceil(o/2),c=Math.ceil(a/2),d=e.imageData.data,h=e.ctx.createImageData(s,i),f=h.data;for(let p=0;p<i;p++)for(let g=0;g<s;g++){const y=4*(g+p*s);let v=0,m=0,x=0,b=0,_=0,C=0,T=0;const O=(p+.5)*a;for(let R=Math.floor(p*a);R<(p+1)*a;R++){const I=Math.abs(O-(R+.5))/c,H=(g+.5)*o,re=I*I;for(let L=Math.floor(g*o);L<(g+1)*o;L++){let z=Math.abs(H-(L+.5))/l;const Y=Math.sqrt(re+z*z);Y>1&&Y<-1||(v=2*Y*Y*Y-3*Y*Y+1,v>0&&(z=4*(L+R*r),T+=v*d[z+3],x+=v,d[z+3]<255&&(v=v*d[z+3]/250),b+=v*d[z],_+=v*d[z+1],C+=v*d[z+2],m+=v))}}f[y]=b/m,f[y+1]=_/m,f[y+2]=C/m,f[y+3]=T/x}return h}}$(dy,"type","Resize"),$(dy,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),$(dy,"uniformLocations",["uDelta","uTaps"]),Me.setClass(dy);class hy extends Lr{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:r}}=e;const n=-this.saturation;for(let s=0;s<r.length;s+=4){const i=r[s],o=r[s+1],a=r[s+2],l=Math.max(i,o,a);r[s]+=l!==i?(l-i)*n:0,r[s+1]+=l!==o?(l-o)*n:0,r[s+2]+=l!==a?(l-a)*n:0}}sendUniformData(e,r){e.uniform1f(r.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}$(hy,"type","Saturation"),$(hy,"defaults",{saturation:0}),$(hy,"uniformLocations",["uSaturation"]),Me.setClass(hy);class fy extends Lr{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:r}}=e;const n=-this.vibrance;for(let s=0;s<r.length;s+=4){const i=r[s],o=r[s+1],a=r[s+2],l=Math.max(i,o,a),c=(i+o+a)/3,d=2*Math.abs(l-c)/255*n;r[s]+=l!==i?(l-i)*d:0,r[s+1]+=l!==o?(l-o)*d:0,r[s+2]+=l!==a?(l-a)*d:0}}sendUniformData(e,r){e.uniform1f(r.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}$(fy,"type","Vibrance"),$(fy,"defaults",{vibrance:0}),$(fy,"uniformLocations",["uVibrance"]),Me.setClass(fy);var[Jw,qje]=$s("Tooltip",[bh]),Zw=bh(),ZW="TooltipProvider",OTe=700,jk="tooltip.open",[MTe,hP]=Jw(ZW),QW=t=>{const{__scopeTooltip:e,delayDuration:r=OTe,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=t,[o,a]=w.useState(!0),l=w.useRef(!1),c=w.useRef(0);return w.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),u.jsx(MTe,{scope:e,isOpenDelayed:o,delayDuration:r,onOpen:w.useCallback(()=>{window.clearTimeout(c.current),a(!1)},[]),onClose:w.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a(!0),n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:w.useCallback(d=>{l.current=d},[]),disableHoverableContent:s,children:i})};QW.displayName=ZW;var Qw="Tooltip",[ITe,eb]=Jw(Qw),eq=t=>{const{__scopeTooltip:e,children:r,open:n,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=t,l=hP(Qw,t.__scopeTooltip),c=Zw(e),[d,h]=w.useState(null),f=ks(),p=w.useRef(0),g=o??l.disableHoverableContent,y=a??l.delayDuration,v=w.useRef(!1),[m=!1,x]=Rs({prop:n,defaultProp:s,onChange:O=>{O?(l.onOpen(),document.dispatchEvent(new CustomEvent(jk))):l.onClose(),i==null||i(O)}}),b=w.useMemo(()=>m?v.current?"delayed-open":"instant-open":"closed",[m]),_=w.useCallback(()=>{window.clearTimeout(p.current),v.current=!1,x(!0)},[x]),C=w.useCallback(()=>{window.clearTimeout(p.current),x(!1)},[x]),T=w.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{v.current=!0,x(!0)},y)},[y,x]);return w.useEffect(()=>()=>window.clearTimeout(p.current),[]),u.jsx(rj,{...c,children:u.jsx(ITe,{scope:e,contentId:f,open:m,stateAttribute:b,trigger:d,onTriggerChange:h,onTriggerEnter:w.useCallback(()=>{l.isOpenDelayed?T():_()},[l.isOpenDelayed,T,_]),onTriggerLeave:w.useCallback(()=>{g?C():window.clearTimeout(p.current)},[C,g]),onOpen:_,onClose:C,disableHoverableContent:g,children:r})})};eq.displayName=Qw;var Ak="TooltipTrigger",tq=w.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=eb(Ak,r),i=hP(Ak,r),o=Zw(r),a=w.useRef(null),l=rt(e,a,s.onTriggerChange),c=w.useRef(!1),d=w.useRef(!1),h=w.useCallback(()=>c.current=!1,[]);return w.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),u.jsx(nj,{asChild:!0,...o,children:u.jsx(Fe.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:l,onPointerMove:_e(t.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:_e(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:_e(t.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:_e(t.onFocus,()=>{c.current||s.onOpen()}),onBlur:_e(t.onBlur,s.onClose),onClick:_e(t.onClick,s.onClose)})})});tq.displayName=Ak;var DTe="TooltipPortal",[Gje,FTe]=Jw(DTe,{forceMount:void 0}),sh="TooltipContent",rq=w.forwardRef((t,e)=>{const r=FTe(sh,t.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...i}=t,o=eb(sh,t.__scopeTooltip);return u.jsx(En,{present:n||o.open,children:o.disableHoverableContent?u.jsx(nq,{side:s,...i,ref:e}):u.jsx(LTe,{side:s,...i,ref:e})})}),LTe=w.forwardRef((t,e)=>{const r=eb(sh,t.__scopeTooltip),n=hP(sh,t.__scopeTooltip),s=w.useRef(null),i=rt(e,s),[o,a]=w.useState(null),{trigger:l,onClose:c}=r,d=s.current,{onPointerInTransitChange:h}=n,f=w.useCallback(()=>{a(null),h(!1)},[h]),p=w.useCallback((g,y)=>{const v=g.currentTarget,m={x:g.clientX,y:g.clientY},x=VTe(m,v.getBoundingClientRect()),b=zTe(m,x),_=HTe(y.getBoundingClientRect()),C=qTe([...b,..._]);a(C),h(!0)},[h]);return w.useEffect(()=>()=>f(),[f]),w.useEffect(()=>{if(l&&d){const g=v=>p(v,d),y=v=>p(v,l);return l.addEventListener("pointerleave",g),d.addEventListener("pointerleave",y),()=>{l.removeEventListener("pointerleave",g),d.removeEventListener("pointerleave",y)}}},[l,d,p,f]),w.useEffect(()=>{if(o){const g=y=>{const v=y.target,m={x:y.clientX,y:y.clientY},x=(l==null?void 0:l.contains(v))||(d==null?void 0:d.contains(v)),b=!WTe(m,o);x?f():b&&(f(),c())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,d,o,c,f]),u.jsx(nq,{...t,ref:i})}),[BTe,$Te]=Jw(Qw,{isInside:!1}),nq=w.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=eb(sh,r),c=Zw(r),{onClose:d}=l;return w.useEffect(()=>(document.addEventListener(jk,d),()=>document.removeEventListener(jk,d)),[d]),w.useEffect(()=>{if(l.trigger){const h=f=>{const p=f.target;p!=null&&p.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),u.jsx(Ng,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:u.jsxs(sj,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[u.jsx(vU,{children:n}),u.jsx(BTe,{scope:r,isInside:!0,children:u.jsx(Lde,{id:l.contentId,role:"tooltip",children:s||n})})]})})});rq.displayName=sh;var sq="TooltipArrow",UTe=w.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,s=Zw(r);return $Te(sq,r).isInside?null:u.jsx(ij,{...s,...n,ref:e})});UTe.displayName=sq;function VTe(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(r,n,s,i)){case i:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function zTe(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function HTe(t){const{top:e,right:r,bottom:n,left:s}=t;return[{x:s,y:e},{x:r,y:e},{x:r,y:n},{x:s,y:n}]}function WTe(t,e){const{x:r,y:n}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,c=e[o].x,d=e[o].y;l>n!=d>n&&r<(c-a)*(n-l)/(d-l)+a&&(s=!s)}return s}function qTe(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),GTe(e)}function GTe(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const s=t[n];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const s=t[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))r.pop();else break}r.push(s)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var KTe=QW,YTe=eq,XTe=tq,iq=rq;const Tf=KTe,pn=YTe,gn=XTe,rn=w.forwardRef(({className:t,sideOffset:e=4,...r},n)=>u.jsx(iq,{ref:n,sideOffset:e,className:xe("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));rn.displayName=iq.displayName;const JTe=(t,e,r,n=10)=>{if(!e||!t||!r)return!1;const s=Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2)),i=e.getObjects().find(o=>{var a,l;return((a=o.data)==null?void 0:a.type)==="temp-point"&&((l=o.data)==null?void 0:l.isFirst)});if(s<n&&i){if(!i.animated){const o=i.radius||4;i.animated=!0,i.set({stroke:"#FF1493",strokeWidth:3,shadow:new yo({color:"rgba(255, 20, 147, 0.8)",blur:8})}),i.animate({radius:o*1.8},{onChange:e.renderAll.bind(e),duration:400,easing:g4.ease.easeOutQuad,onComplete:()=>{i.animate({radius:o},{onChange:e.renderAll.bind(e),duration:400,easing:g4.ease.easeInQuad})}}),e.renderAll()}return!0}else i&&i.animated&&(i.set({radius:4,stroke:"#ffffff",strokeWidth:2,shadow:void 0}),i.animated=!1,e.renderAll());return!1};function ZTe({imageUrl:t,width:e=800,height:r=600,className:n,onImageLoad:s}){const i=Ar(),{segments:o,activeSegmentId:a,copiedSegment:l,isDrawing:c,currentPoints:d,canvasHistory:h,historyIndex:f}=Ze(A=>A.segments),p=w.useRef(null),g=w.useRef(null),y=w.useRef(null),v=w.useRef("select"),m=w.useRef(!1),x=w.useRef([]),b=w.useRef([]),_=w.useRef([]),[C]=w.useState(null),[T,O]=w.useState(!1),R=w.useCallback(()=>{if(!g.current)return;const A=JSON.stringify(g.current.toJSON());i(CR(A))},[i]),I=w.useCallback(()=>{if(f>0){i(Vee());const A=h[f-1];A&&g.current&&g.current.loadFromJSON(A,()=>{g.current.renderAll()})}},[f,h,i]),H=w.useCallback(()=>{if(f<h.length-1){i(zee());const A=h[f+1];A&&g.current&&g.current.loadFromJSON(A,()=>{g.current.renderAll()})}},[f,h,i]),re=w.useCallback(()=>{!a||!g.current||(i(UB(a)),R(),Ve.success("Segment deleted"))},[a,i,R]),L=w.useCallback(()=>{if(g.current&&m.current){const A=g.current;A.getObjects().filter(G=>{var ue,Ye,j;return((ue=G.data)==null?void 0:ue.type)==="temp-line"||((Ye=G.data)==null?void 0:Ye.type)==="preview-line"||((j=G.data)==null?void 0:j.type)==="temp-point"}).forEach(G=>A.remove(G)),A.renderAll()}m.current=!1,x.current=[],b.current=[],_.current=[],i(Lee()),Ve.info("Polygon drawing cancelled")},[i]);w.useEffect(()=>{if(!p.current||g.current)return;const A=new kk(p.current,{width:e,height:r,backgroundColor:"#f8f9fa",selection:!0,preserveObjectStacking:!0});g.current=A,A.on("mouse:down",Q),A.on("mouse:move",se),A.on("mouse:dblclick",F),A.on("selection:cleared",()=>{console.log("Selection cleared"),i(jy(null))});const P=G=>{if(G.ctrlKey||G.metaKey)switch(G.key){case"c":G.preventDefault(),a&&(i(I0(a)),Ve.success("Segment copied"));break;case"v":G.preventDefault(),l&&(i(KC()),Ve.success("Segment pasted"));break;case"z":G.preventDefault(),G.shiftKey?H():I();break}else switch(G.key){case"Delete":case"Backspace":a&&re();break;case"Escape":m&&L();break}};return document.addEventListener("keydown",P),O(!0),console.log("Canvas initialized successfully"),()=>{console.log("Disposing canvas..."),document.removeEventListener("keydown",P),A.dispose(),g.current=null,y.current=null,O(!1)}},[e,r,a,l,i]),w.useEffect(()=>{if(!g.current||!T||!t){console.log("Skipping image load:",{canvasReady:T,imageUrl:!!t});return}const A=g.current;console.log("Loading background image:",t),y.current&&(A.remove(y.current),y.current=null);const P=(j,E)=>{const S=new ys(j,{selectable:!1,evented:!1,excludeFromExport:!1}),k=e/r,N=j.width/j.height;let q;N>k?q=e/j.width:q=r/j.height,S.scale(q),S.set({left:(e-j.width*q)/2,top:(r-j.height*q)/2}),y.current=S,A.add(S),A.sendObjectToBack(S),A.renderAll(),console.log(`Background image loaded successfully via ${E}`),Ve.success("Background image loaded successfully"),s&&s()},G=(j="anonymous")=>new Promise((E,S)=>{const k=new Image;j&&(k.crossOrigin=j),k.onload=()=>{E(k)},k.onerror=N=>{S(N)},k.src=t}),ue=async j=>{try{const E=await fetch(t,{mode:j,credentials:"omit",cache:"no-cache",headers:{Accept:"image/*"}});if(!E.ok)throw new Error(`HTTP ${E.status}: ${E.statusText}`);const S=await E.blob(),k=URL.createObjectURL(S);return new Promise((N,q)=>{const W=new Image;W.onload=()=>{URL.revokeObjectURL(k),N(W)},W.onerror=()=>{URL.revokeObjectURL(k),q(new Error("Failed to load image from blob"))},W.src=k})}catch(E){throw new Error(`Fetch failed with mode ${j}: ${E}`)}};(async()=>{const j=["anonymous",null,"use-credentials"];for(const k of j)try{console.log(`Attempting to load image with CORS mode: ${k||"none"}`);const N=await G(k);P(N,`CORS mode: ${k||"none"}`);return}catch(N){console.warn(`Failed to load with CORS mode: ${k||"none"}`,N)}const E=["cors","no-cors","same-origin"];for(const k of E)try{console.log(`Attempting to load image via fetch with mode: ${k}`);const N=await ue(k);P(N,`Fetch mode: ${k}`);return}catch(N){console.warn(`Failed to load with fetch mode: ${k}`,N)}console.error("All image loading strategies failed for URL:",t);const S=t.includes("s3.")?"Failed to load S3 image due to CORS restrictions. Please configure your S3 bucket CORS policy to allow requests from your domain.":"Failed to load background image. The image server may not allow cross-origin requests.";Ve.error(S,{duration:6e3,description:"Check browser console for detailed error information."}),s&&s()})()},[t,T,e,r,s]),w.useEffect(()=>{if(!g.current||!T)return;const A=g.current;console.log("Updating tool behavior:",v),A.selection=v.current==="select",A.renderAll()},[v,T]);const z=w.useCallback((A,P,G=!1)=>new Qi({left:A-4,top:P-4,radius:4,fill:G?"#FF1493":"#007bff",stroke:"#ffffff",strokeWidth:2,selectable:!1,evented:!1,data:{type:"temp-point",isFirst:G}}),[]),Y=w.useCallback((A,P)=>{const G=A.x-P.x,ue=A.y-P.y;return Math.sqrt(G*G+ue*ue)},[]),pe=w.useCallback(()=>{if(!g.current||x.current.length<3)return;const A=g.current;console.log("Finishing polygon with",x.current.length,"points"),A.getObjects().filter(j=>{var E,S,k;return((E=j.data)==null?void 0:E.type)==="temp-line"||((S=j.data)==null?void 0:S.type)==="preview-line"||((k=j.data)==null?void 0:k.type)==="temp-point"}).forEach(j=>A.remove(j));const G=x.current.map(j=>new X(j.x,j.y)),ue=new kf(G,{fill:"rgba(0, 123, 255, 0.3)",stroke:"#007bff",strokeWidth:2,selectable:!0,evented:!0});ue.data={type:"segment",segmentId:`segment-${Date.now()}`},A.add(ue),A.renderAll(),i(Fee({name:`Segment ${o.length+1}`})),m.current=!1,x.current=[],b.current=[],_.current=[];const Ye=JSON.stringify(A.toJSON());i(CR(Ye)),Ve.success("Polygon created successfully! Ready to draw another.")},[i,o.length]),Q=w.useCallback(A=>{if(console.log("Mouse down event activeTool:",v.current),!g.current||v.current!=="polygon")return;const P=g.current,G=P.getPointer(A.e);if(m.current){if(x.current.length>=3){const S=x.current[0];if(Y(S,G)<=15){console.log("Auto-completing polygon - clicked near first point"),pe();return}}const ue=new X(G.x,G.y),Ye=x.current[x.current.length-1];console.log("Adding point to polygon:",ue);const j=new Lo([Ye.x,Ye.y,G.x,G.y],{stroke:"#FF1493",strokeWidth:2,selectable:!1,evented:!1});j.data={type:"temp-line"};const E=z(G.x,G.y,!1);P.add(j),P.add(E),x.current.push(ue),b.current.push(j),_.current.push(E),i(Dee({x:G.x,y:G.y}))}else{console.log("Starting new polygon"),m.current=!0,x.current=[new X(G.x,G.y)],b.current=[],_.current=[];const ue=z(G.x,G.y,!0);P.add(ue),_.current.push(ue),i(Iee())}},[v,i,z,Y,pe]),se=w.useCallback(A=>{if(!g.current||!m.current||x.current.length===0)return;const P=g.current,G=P.getPointer(A.e),ue=x.current[x.current.length-1],Ye=P.getObjects().find(E=>{var S;return((S=E.data)==null?void 0:S.type)==="preview-line"});Ye&&P.remove(Ye);const j=new Lo([ue.x,ue.y,G.x,G.y],{stroke:"#007bff",strokeWidth:1,strokeDashArray:[5,5],selectable:!1,evented:!1});if(j.data={type:"preview-line"},P.add(j),x.current.length>=3){const E=x.current[0],S={x:G.x,y:G.y};JTe(S,P,E,15)}P.renderAll()},[]),F=w.useCallback(()=>{!g.current||!m.current||x.current.length<3||(console.log("Double-click detected - finishing polygon"),pe())},[pe]),K=A=>{console.log("Changing tool to:",A),m&&A!=="polygon"&&L(),v.current=A},de=()=>{a&&(i(Uee(a)),Ve.success("Material removed from segment"),R())},le=()=>{a&&(i(I0(a)),Ve.success("Segment copied"))},be=()=>{l&&(i(KC()),R(),Ve.success("Segment pasted"))},Be=()=>{a&&(i(VB(a)),R(),Ve.success("Segment moved forward"))},He=()=>{a&&(i(zB(a)),R(),Ve.success("Segment moved backward"))},ht=()=>{if(!g.current)return;const A=g.current.toDataURL({format:"png",quality:1,multiplier:2}),P=document.createElement("a");P.download="canvas-export.png",P.href=A,P.click(),Ve.success("Canvas exported successfully!")},U=f>0,D=f<h.length-1,ee=o.find(A=>A.id===a),me=o.find(A=>A.id===C),Se=l!==null;return u.jsx(Tf,{children:u.jsxs("div",{className:xe("flex flex-col space-y-4",n),children:[u.jsx(Ge,{children:u.jsx(tt,{className:"p-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsxs(pn,{children:[u.jsx(gn,{asChild:!0,children:u.jsxs(ge,{variant:v.current==="select"?"default":"outline",size:"sm",onClick:()=>K("select"),children:[u.jsx(Ace,{className:"h-4 w-4 mr-1"}),"Select"]})}),u.jsx(rn,{children:"Select and move segments"})]}),u.jsxs(pn,{children:[u.jsx(gn,{asChild:!0,children:u.jsxs(ge,{variant:v.current==="polygon"?"default":"outline",size:"sm",onClick:()=>K("polygon"),children:[u.jsx(Nce,{className:"h-4 w-4 mr-1"}),"Polygon"]})}),u.jsx(rn,{children:"Draw polygon segments"})]})]}),u.jsx(Gr,{orientation:"vertical",className:"h-6"}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsxs(pn,{children:[u.jsx(gn,{asChild:!0,children:u.jsx(ge,{variant:"outline",size:"sm",onClick:I,disabled:!U,children:u.jsx(Uce,{className:"h-4 w-4"})})}),u.jsx(rn,{children:"Undo (Ctrl+Z)"})]}),u.jsxs(pn,{children:[u.jsx(gn,{asChild:!0,children:u.jsx(ge,{variant:"outline",size:"sm",onClick:H,disabled:!D,children:u.jsx(Mce,{className:"h-4 w-4"})})}),u.jsx(rn,{children:"Redo (Ctrl+Shift+Z)"})]})]}),u.jsx(Gr,{orientation:"vertical",className:"h-6"}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsxs(pn,{children:[u.jsx(gn,{asChild:!0,children:u.jsx(ge,{variant:"outline",size:"sm",onClick:le,disabled:!a,children:u.jsx(Jo,{className:"h-4 w-4"})})}),u.jsx(rn,{children:"Copy segment (Ctrl+C)"})]}),u.jsxs(pn,{children:[u.jsx(gn,{asChild:!0,children:u.jsx(ge,{variant:"outline",size:"sm",onClick:be,disabled:!Se,children:u.jsx(FU,{className:"h-4 w-4"})})}),u.jsx(rn,{children:"Paste segment (Ctrl+V)"})]})]}),a&&u.jsxs(u.Fragment,{children:[u.jsx(Gr,{orientation:"vertical",className:"h-6"}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsxs(pn,{children:[u.jsx(gn,{asChild:!0,children:u.jsx(ge,{variant:"outline",size:"sm",onClick:Be,children:u.jsx(dv,{className:"h-4 w-4"})})}),u.jsx(rn,{children:"Bring forward"})]}),u.jsxs(pn,{children:[u.jsx(gn,{asChild:!0,children:u.jsx(ge,{variant:"outline",size:"sm",onClick:He,children:u.jsx(Xp,{className:"h-4 w-4"})})}),u.jsx(rn,{children:"Send backward"})]})]})]}),a&&u.jsxs(u.Fragment,{children:[u.jsx(Gr,{orientation:"vertical",className:"h-6"}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsxs(pn,{children:[u.jsx(gn,{asChild:!0,children:u.jsxs(ge,{variant:"outline",size:"sm",children:[u.jsx(V2,{className:"h-4 w-4 mr-1"}),"Material"]})}),u.jsx(rn,{children:"Apply material to selected segment"})]}),(ee==null?void 0:ee.material)&&u.jsxs(pn,{children:[u.jsx(gn,{asChild:!0,children:u.jsx(ge,{variant:"outline",size:"sm",onClick:de,children:u.jsx(W2,{className:"h-4 w-4"})})}),u.jsx(rn,{children:"Remove material"})]})]})]}),u.jsx(Gr,{orientation:"vertical",className:"h-6"}),u.jsxs(pn,{children:[u.jsx(gn,{asChild:!0,children:u.jsx(ge,{variant:"outline",size:"sm",onClick:re,disabled:!a,children:u.jsx(KU,{className:"h-4 w-4"})})}),u.jsx(rn,{children:"Delete selected segment (Delete)"})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[c&&u.jsxs(dt,{variant:"secondary",children:["Drawing: ",d.length," points"]}),a&&u.jsxs(dt,{variant:"outline",children:["Selected: ",ee==null?void 0:ee.name,(ee==null?void 0:ee.material)&&u.jsxs("span",{className:"ml-1 text-xs",children:[" ",ee.material.materialName]})]}),u.jsxs(ge,{variant:"outline",size:"sm",onClick:ht,children:[u.jsx(vce,{className:"h-4 w-4 mr-1"}),"Export"]})]})]})})}),u.jsx(ze.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:"relative",children:u.jsx(Ge,{className:"overflow-hidden",children:u.jsx(tt,{className:"p-0",children:u.jsxs("div",{className:"relative bg-gray-50",children:[u.jsx("canvas",{ref:p,className:"border-0 block",style:{maxWidth:"100%",height:"auto"}}),v.current==="polygon"&&!m.current&&u.jsx("div",{className:"absolute top-4 left-4 bg-blue-500 text-white px-3 py-2 rounded-lg text-sm",children:"Click to start drawing a polygon"}),m.current&&u.jsx("div",{className:"absolute top-4 left-4 bg-blue-500 text-white px-3 py-2 rounded-lg text-sm",children:"Click to add points  Click near first point or double-click to finish  Esc to cancel"}),!T&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100/80",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Initializing canvas..."})]})}),u.jsx(hl,{children:(me==null?void 0:me.material)&&u.jsx(ze.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute top-4 right-4 bg-black/80 text-white px-3 py-2 rounded-lg text-sm",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(ai,{className:"h-3 w-3"}),u.jsx("span",{children:me.material.materialName})]})})})]})})})})]})})}function QTe({currentCanvasImage:t,isUploading:e,canEdit:r,isJobRunning:n,onFileUpload:s,onClearImage:i}){const o=w.useRef(null),[a,l]=w.useState(!1),[c,d]=w.useState(null),[h,f]=w.useState(!1);w.useEffect(()=>{t&&t!==""?(console.log("currentCanvasImage changed:",t),f(!0),d(t)):(d(null),f(!1))},[t]);const p=w.useCallback(()=>{f(!1)},[]),g=x=>{x.preventDefault(),l(!1);const b=Array.from(x.dataTransfer.files);b.length>0&&s(b[0])},y=x=>{x.preventDefault(),l(!0)},v=x=>{x.preventDefault(),l(!1)},m=x=>{var _;const b=(_=x.target.files)==null?void 0:_[0];b&&s(b)};return u.jsx("main",{className:"flex-1 flex flex-col overflow-hidden",children:u.jsx(qg,{className:"flex-1",children:u.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"p-6 space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Design Canvas"}),u.jsx("p",{className:"text-muted-foreground",children:r?"Upload an image and use drawing tools to create segments":"View-only access to this project"})]}),t&&r&&u.jsx("div",{className:"flex items-center space-x-2",children:u.jsxs(ge,{variant:"outline",size:"sm",onClick:i,disabled:n,children:[u.jsx(W2,{className:"mr-2 h-4 w-4"}),"Clear"]})})]}),u.jsxs("div",{className:"relative",children:[u.jsx(hl,{mode:"wait",children:c?u.jsxs(ze.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative",children:[h&&u.jsx(ze.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-background/80 backdrop-blur-sm z-10 flex items-center justify-center rounded-lg",children:u.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[u.jsx(Hd,{className:"h-8 w-8 text-primary animate-spin"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading image..."})]})}),u.jsx(ZTe,{imageUrl:c,width:800,height:600,className:"mb-6",onImageLoad:p},`canvas-editor-${c}`)]},`canvas-${c}`):u.jsx(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:u.jsx(Ge,{className:xe("h-96 border-2 border-dashed transition-colors",r?"cursor-pointer":"cursor-not-allowed",a&&r?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50 bg-muted/10"),onDrop:r?g:void 0,onDragOver:r?y:void 0,onDragLeave:r?v:void 0,onClick:r?()=>{var x;return(x=o.current)==null?void 0:x.click()}:void 0,children:u.jsx(tt,{className:"h-full flex flex-col items-center justify-center p-8 text-center",children:u.jsx(ze.div,{animate:{scale:a&&r?1.1:1},transition:{duration:.2},className:"space-y-4",children:e?u.jsxs(u.Fragment,{children:[u.jsx(Hd,{className:"h-12 w-12 text-primary animate-spin mx-auto"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Uploading..."}),u.jsx("p",{className:"text-muted-foreground",children:"Please wait while we process your image"})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"p-4 rounded-full bg-primary/10 mx-auto w-fit",children:r?u.jsx(Wd,{className:"h-8 w-8 text-primary"}):u.jsx(Bc,{className:"h-8 w-8 text-muted-foreground"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold mb-2 text-foreground",children:r?"Upload Your Image":"No Image Uploaded"}),u.jsx("p",{className:"text-muted-foreground mb-4",children:r?"Drag and drop an image here, or click to browse":"Contact an admin to upload images to this project"}),r&&u.jsx("div",{className:"flex items-center justify-center space-x-4 text-sm text-muted-foreground",children:u.jsx("span",{children:"PNG, JPEG up to 10MB"})})]}),r&&u.jsxs(ge,{variant:"outline",className:"mt-4",children:[u.jsx(yd,{className:"mr-2 h-4 w-4"}),"Choose File"]})]})})})})},"upload")}),r&&u.jsx("input",{ref:o,type:"file",accept:"image/*",onChange:m,className:"hidden"})]})]})})})}function e2e({currentUserRole:t,canEdit:e,canAdmin:r,activeTab:n,onTabChange:s,onShareClick:i,projectId:o,selectedSegmentType:a,designSettings:l,isJobRunning:c,jobError:d,currentJob:h,currentImageUrl:f,isUploading:p,jobProgress:g,onStyleChange:y,onLevelChange:v,onPreserveToggle:m,onToneChange:x,onIntensityChange:b,onGenerate:_,onCancelJob:C}){return u.jsxs(ze.aside,{initial:{x:-288,opacity:0},animate:{x:0,opacity:1},transition:{duration:.5,ease:"easeOut"},className:"sm:w-72 w-full bg-card border-r border-border flex flex-col h-[calc(100vh-150px)] overflow-y-scroll",children:[u.jsx(W_e,{currentUserRole:t,canEdit:e,canAdmin:r,onShareClick:i}),u.jsx(uEe,{activeTab:n,onTabChange:s,projectId:o,selectedSegmentType:a,designSettings:l,isJobRunning:c,canEdit:e,jobError:d,currentJob:h,onStyleChange:y,onLevelChange:v,onPreserveToggle:m,onToneChange:x,onIntensityChange:b}),u.jsx("div",{className:"p-4 border-t border-border flex-shrink-0",children:u.jsx(hl,{mode:"wait",children:c?u.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{children:"Generating design..."}),u.jsxs("span",{children:[g,"%"]})]}),u.jsx(hw,{value:g,className:"h-2"}),u.jsxs(ge,{variant:"outline",size:"sm",onClick:C,className:"w-full",disabled:!e,children:[u.jsx(Lce,{className:"mr-2 h-4 w-4"}),"Cancel"]})]},"progress"):u.jsx(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:u.jsx(ge,{onClick:_,disabled:!f||p||!e,className:"w-full h-12 text-base font-medium",size:"lg",children:e?u.jsxs(u.Fragment,{children:[u.jsx(Zx,{className:"mr-2 h-5 w-5"}),"Generate Design"]}):u.jsxs(u.Fragment,{children:[u.jsx(Bc,{className:"mr-2 h-5 w-5"}),"View Only"]})})},"generate")})})]})}function S4(){const{id:t}=NT(),e=Ar(),{designSettings:r,selectedSegmentType:n,currentImageUrl:s,isUploading:i,error:o}=Ze(Q=>Q.studio),{segments:a,activeSegmentId:l}=Ze(Q=>Q.segments),{currentJob:c,error:d,isCreating:h}=Ze(Q=>Q.jobs),{currentProject:f,currentUserRole:p}=Ze(Q=>Q.projects),[g,y]=w.useState("design"),[v,m]=w.useState(!1),[x,b]=w.useState(""),_=t?Qre():!1,C=t?ene():!1,T=Ze(Q=>Q.jobs.list);w.useEffect(()=>{console.log("getAllJob effect triggered",{getAllJob:T,length:T==null?void 0:T.length}),T&&T.length>0&&e(Ree(T[0].full_image||""))},[T,e,s]),w.useEffect(()=>{s&&s!==""&&b(s)},[s]),w.useEffect(()=>{if(l){const Q=a.find(se=>se.id===l);Q!=null&&Q.type&&e(wR(Q.type))}else e(wR(null))},[l,a,e]),w.useEffect(()=>{t&&(e(Cee(t)),e(GC(t)),e(Ay(t)),e(vc(parseInt(t))),e(Js({projectId:t,type:"project_created",action:"Project Opened",detail:"Studio session started"})))},[t,e]),w.useEffect(()=>{o&&(Ve.error(o),e(Nee()))},[o,e]),w.useEffect(()=>{d&&(Ve.error(d),e(tte()))},[d,e]);const O=0,R=async Q=>{if(!_){Ve.error("You do not have permission to upload images");return}if(!Q.type.startsWith("image/")){Ve.error("Please upload an image file");return}if(Q.size>10*1024*1024){Ve.error("File size must be less than 10MB");return}const se=await e(Hf(Q));Hf.fulfilled.match(se)&&(Ve.success("Image uploaded successfully!"),t&&e(Js({projectId:t,type:"image_uploaded",action:"Image Uploaded",detail:`Background image "${Q.name}" added to canvas`,metadata:{fileName:Q.name,fileSize:Q.size}})))},I=async()=>{if(!_){Ve.error("You do not have permission to generate designs");return}if(!s){Ve.error("Please upload an image first");return}if(!t){Ve.error("No project selected");return}const Q={title:`Design Generation - ${new Date().toLocaleString()}`,jobType:r.style,full_image:s,thumbnail:s,project_id:parseInt(t),segements:JSON.stringify({style:r.style,level:r.level,preserve:r.preserve,tone:r.tone,intensity:r.intensity,segments:a.map(F=>{var K;return{id:F.id,points:F.points,materialId:(K=F.material)==null?void 0:K.materialId}})})};e(Js({projectId:t,type:"ai_job_started",action:"AI Job Started",detail:`Design generation started with ${r.style} style`,metadata:{style:r.style,level:r.level,tone:r.tone,intensity:r.intensity,segmentCount:a.length}}));const se=await e(rl(Q));rl.fulfilled.match(se)&&(Ve.success("AI job started! Processing your design..."),e(vc(parseInt(t))))},H=()=>{c&&e(ete()),Ve.info("Job cancelled"),t&&e(Js({projectId:t,type:"ai_job_failed",action:"AI Job Cancelled",detail:"Design generation cancelled by user"}))},re=Q=>{if(!_){Ve.error("You do not have permission to change design settings");return}const se=r.style;e(Eee(Q)),t&&se!==Q&&e(Js({projectId:t,type:"style_changed",action:"Style Changed",detail:`Design style updated to ${Q}`,metadata:{previousStyle:se,newStyle:Q}}))},L=Q=>{if(!_){Ve.error("You do not have permission to change design settings");return}const se=Q?2:1,F=r.level;e(kee(se)),t&&F!==se&&e(Js({projectId:t,type:"style_changed",action:"Processing Level Changed",detail:`Processing level updated to Level ${se}`,metadata:{previousLevel:F,newLevel:se}}))},z=Q=>{_&&e(Tee(Q))},Y=Q=>{_&&e(jee(Q))},pe=Q=>{_&&e(Aee(Q))};return u.jsxs("div",{className:"flex sm:flex-row flex-col md:h-screen bg-background",children:[u.jsx(e2e,{currentUserRole:p,canEdit:_,canAdmin:C,activeTab:g,onTabChange:y,onShareClick:()=>m(!0),projectId:t,selectedSegmentType:n,designSettings:r,isJobRunning:h,jobError:d,currentJob:c,currentImageUrl:s,isUploading:i,jobProgress:O,onStyleChange:re,onLevelChange:L,onPreserveToggle:z,onToneChange:Y,onIntensityChange:pe,onGenerate:I,onCancelJob:H}),u.jsx(QTe,{currentCanvasImage:x,isUploading:i,canEdit:_,isJobRunning:h,onFileUpload:R,onClearImage:()=>e(Pee())})]})}var fP="Avatar",[t2e,Kje]=$s(fP),[r2e,oq]=t2e(fP),aq=w.forwardRef((t,e)=>{const{__scopeAvatar:r,...n}=t,[s,i]=w.useState("idle");return u.jsx(r2e,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:u.jsx(Fe.span,{...n,ref:e})})});aq.displayName=fP;var lq="AvatarImage",cq=w.forwardRef((t,e)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...i}=t,o=oq(lq,r),a=n2e(n,i.referrerPolicy),l=Sr(c=>{s(c),o.onImageLoadingStatusChange(c)});return Fr(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?u.jsx(Fe.img,{...i,ref:e,src:n}):null});cq.displayName=lq;var uq="AvatarFallback",dq=w.forwardRef((t,e)=>{const{__scopeAvatar:r,delayMs:n,...s}=t,i=oq(uq,r),[o,a]=w.useState(n===void 0);return w.useEffect(()=>{if(n!==void 0){const l=window.setTimeout(()=>a(!0),n);return()=>window.clearTimeout(l)}},[n]),o&&i.imageLoadingStatus!=="loaded"?u.jsx(Fe.span,{...s,ref:e}):null});dq.displayName=uq;function n2e(t,e){const[r,n]=w.useState("idle");return Fr(()=>{if(!t){n("error");return}let s=!0;const i=new window.Image,o=a=>()=>{s&&n(a)};return n("loading"),i.onload=o("loaded"),i.onerror=o("error"),i.src=t,e&&(i.referrerPolicy=e),()=>{s=!1}},[t,e]),r}var hq=aq,fq=cq,pq=dq;const Pk=w.forwardRef(({className:t,...e},r)=>u.jsx(hq,{ref:r,className:xe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Pk.displayName=hq.displayName;const Nk=w.forwardRef(({className:t,...e},r)=>u.jsx(fq,{ref:r,className:xe("aspect-square h-full w-full",t),...e}));Nk.displayName=fq.displayName;const Rk=w.forwardRef(({className:t,...e},r)=>u.jsx(pq,{ref:r,className:xe("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Rk.displayName=pq.displayName;const gq=()=>{const[t,e]=w.useState("profile"),[r,n]=w.useState(!1),s=ci(),i=[{title:"ACCOUNT",items:[{id:"profile",label:"Profile",icon:Vy},{id:"settings",label:"Settings",icon:Zp},{id:"billing",label:"Billing",icon:LU}]},{title:"ORGANIZATIONS",items:[{id:"personal",label:"Personal",icon:Vy,badge:"Free Plan"},{id:"add-org",label:"Add Organization",icon:Jp,isAction:!0}]},{title:"WORKSPACE",items:[{id:"projects",label:"Projects",icon:rp,hasChevron:!0},{id:"assets",label:"Assets",icon:WU},{id:"boards",label:"Boards",icon:Pce}]},{title:"TOOLS & FEATURES",items:[{id:"design-tools",label:"Design Tools",icon:ai}]},{title:"COMMUNITY",items:[{id:"blogs",label:"Blogs",icon:gce},{id:"affiliate",label:"Affiliate Program",icon:Qx}]}],o=()=>{s("/login")};return u.jsxs("div",{className:"h-screen flex flex-col border-r border-gray-200 bg-white transition-all duration-300",style:{width:r?"64px":"280px",minWidth:r?"64px":"280px"},children:[u.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-gray-200",children:[!r&&u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-lg flex items-center justify-center",children:u.jsx(Vy,{className:"h-5 w-5 text-white",onClick:o})}),u.jsx("p",{className:"font-semibold text-gray-900 cursor-pointer",onClick:o,children:"Sign in"})]}),u.jsx("button",{onClick:()=>n(!r),className:"p-1 border rounded-md text-xs text-blue-600 border-blue-600 hover:bg-blue-50",children:r?"":""})]}),u.jsx("div",{className:"flex-1 overflow-y-auto space-y-6 pt-4",children:i.map(a=>u.jsxs("div",{className:"px-2",children:[!r&&u.jsx("h3",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2 px-2",children:a.title}),u.jsx("div",{className:"space-y-1",children:a.items.map(l=>u.jsxs("button",{onClick:()=>e(l.id),className:`group w-full flex items-center ${r?"justify-center":"justify-between"} px-2 py-2 rounded-lg transition-colors ${t===l.id?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100"} ${l.isAction?"text-blue-600 hover:bg-blue-50":""}`,children:[u.jsxs("div",{className:`flex items-center gap-3 ${r?"justify-center":""}`,children:[u.jsx(l.icon,{className:`h-5 w-5 ${t===l.id?"text-blue-700":"text-gray-500 group-hover:text-blue-600"}`}),!r&&u.jsx("span",{className:"text-sm font-medium",children:l.label})]}),!r&&u.jsxs("div",{className:"flex items-center gap-2",children:[l.badge&&u.jsx(OU,{className:"text-xs bg-gray-100 text-gray-600",children:l.badge}),l.hasChevron&&u.jsx(Xx,{className:"h-4 w-4 text-gray-400"})]})]},l.id))})]},a.title))}),u.jsx("div",{className:`p-4 ${r?"flex justify-center":""}`,children:u.jsxs("button",{onClick:()=>e("settings"),className:`w-full flex items-center ${r?"justify-center":"justify-start"} px-2 py-2 rounded-lg transition-colors hover:bg-gray-100`,children:[u.jsx(Zp,{className:"h-5 w-5 text-gray-600"}),!r&&u.jsx("span",{className:"ml-3 text-sm font-medium",children:"Settings"})]})})]})};var yp=function(){return yp=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},yp.apply(this,arguments)};var s2e=w.createContext(void 0);function i2e(){var t=w.useContext(s2e);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}w.createContext(void 0);var o2e=w.forwardRef(function(t,e){var r=i2e(),n=r.classNames,s=r.styles,i=[n.button_reset,n.button];t.className&&i.push(t.className);var o=i.join(" "),a=yp(yp({},s.button_reset),s.button);return t.style&&Object.assign(a,t.style),u.jsx("button",yp({},t,{ref:e,type:"button",className:o,style:a}))});w.createContext(void 0);w.createContext(void 0);var Co;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(Co||(Co={}));Co.Selected;Co.Disabled;Co.Hidden;Co.Today;Co.RangeEnd;Co.RangeMiddle;Co.RangeStart;Co.Outside;w.createContext(void 0);w.createContext(void 0);w.createContext(void 0);const a2e=({plan:t})=>(console.log("SubscriptionPlanData-->",t),u.jsx(u.Fragment,{children:u.jsxs(Ge,{className:"border-2 border-blue-500 relative",children:[u.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:u.jsx(OU,{className:"bg-blue-500",children:t.name})}),u.jsxs(vt,{children:[u.jsxs(St,{className:"flex items-center justify-between",children:[u.jsx("span",{children:t.name}),u.jsx(YU,{className:"h-5 w-5 text-blue-500"})]}),u.jsxs("div",{className:"text-3xl font-bold",children:["$",t.price,u.jsx("span",{className:"text-lg text-gray-500",children:"/month"})]})]}),u.jsxs(tt,{className:"space-y-4",children:[t.features.map((e,r)=>u.jsxs("div",{className:"flex items-center text-sm",children:[u.jsx(H2,{className:"h-4 w-4 mr-2 text-green-500"}),e]},r)),u.jsxs(o2e,{className:"w-full mt-4",children:[u.jsx(BU,{className:"h-4 w-4 mr-2"}),"Upgrade to Pro"]})]})]},t.id)}));function l2e(){var o;const[t,e]=w.useState("profile"),r=Ze(a=>{var l;return(l=a.auth)==null?void 0:l.user}),n={name:((o=r==null?void 0:r.email)==null?void 0:o.split("@")[0])||"Manish Gupta",email:(r==null?void 0:r.email)||"dev.manish.gupta17@gmail.com",avatar:"",plan:"Free Plan",subscription:null,joinDate:"June 2024"},{subscriptionalPlans:s}=Ze(a=>a.subscriptionPlan);console.log("subscriptionalPlans",s);const i={free:["Up to 3 projects","Basic design tools","Community support","1GB storage"],pro:["Unlimited projects","Advanced design tools","Priority support","50GB storage","Team collaboration","Export in high resolution"]};return u.jsx("div",{className:"min-h-screen bg-gray-50",children:u.jsxs("div",{className:"flex",children:[u.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 min-h-screen",children:[u.jsx("div",{className:"py-4 space-y-6",children:u.jsx(gq,{})}),u.jsx("div",{className:"absolute bottom-16 left-4 right-4 p-3 bg-gray-50 rounded-lg",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs(Pk,{className:"h-8 w-8",children:[u.jsx(Nk,{src:n.avatar}),u.jsx(Rk,{children:n.name.split(" ").map(a=>a[0]).join("")})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:n.name}),u.jsx("p",{className:"text-xs text-gray-500 truncate",children:n.email})]})]})})]}),u.jsxs("div",{className:"flex-1 p-8",children:[t==="profile"&&u.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-4xl mx-auto space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile"}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs(ge,{variant:"outline",size:"sm",children:[u.jsx(Fce,{className:"h-4 w-4 mr-2"}),"Edit"]}),u.jsxs(ge,{variant:"outline",size:"sm",children:[u.jsx(jce,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]}),u.jsx(Ge,{children:u.jsx(tt,{className:"p-6",children:u.jsxs("div",{className:"flex items-center space-x-6",children:[u.jsxs(Pk,{className:"h-20 w-20",children:[u.jsx(Nk,{src:n.avatar}),u.jsx(Rk,{className:"text-2xl",children:n.name.split(" ").map(a=>a[0]).join("")})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:n.name}),u.jsxs("p",{className:"text-gray-600 flex items-center",children:[u.jsx(np,{className:"h-4 w-4 mr-2"}),n.email]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs(dt,{variant:"outline",className:"flex items-center",children:[u.jsx(fv,{className:"h-3 w-3 mr-1"}),n.plan]}),u.jsxs("span",{className:"text-sm text-gray-500",children:["Member since ",n.joinDate]})]})]})]})})}),u.jsxs(Ge,{children:[u.jsx(vt,{children:u.jsxs(St,{className:"flex items-center",children:[u.jsx(LU,{className:"h-5 w-5 mr-2"}),"Subscription"]})}),u.jsxs(tt,{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-600",children:"You currently do not have a subscription."}),u.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Upgrade to unlock premium features and unlimited access."})]}),u.jsx(ge,{onClick:()=>e("upgrade"),children:"Upgrade Plan"})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Current Plan Features"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:i.free.map((a,l)=>u.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[u.jsx(H2,{className:"h-4 w-4 mr-2 text-gray-400"}),a]},l))})]})]})]}),u.jsxs(Ge,{children:[u.jsx(vt,{children:u.jsxs(St,{className:"flex items-center",children:[u.jsx(np,{className:"h-5 w-5 mr-2"}),"Contact Us"]})}),u.jsxs(tt,{children:[u.jsxs("p",{className:"text-gray-600 mb-4",children:["If you have any questions, chat with us directly or email us at"," ",u.jsx("a",{href:"mailto:support@renovateai.app",className:"text-blue-600 hover:underline",children:"support@renovateai.app"})]}),u.jsxs("div",{className:"flex space-x-3",children:[u.jsxs(ge,{variant:"outline",children:[u.jsx(np,{className:"h-4 w-4 mr-2"}),"Email Support"]}),u.jsxs(ge,{variant:"outline",children:[u.jsx(Qx,{className:"h-4 w-4 mr-2"}),"Live Chat"]})]})]})]})]}),t==="upgrade"&&u.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-4xl mx-auto space-y-6",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Upgrade Your Plan"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s&&s.length>0&&s.map(a=>u.jsx(a2e,{plan:a}))})]}),t==="settings"&&u.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-4xl mx-auto space-y-6",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),u.jsx(Ge,{children:u.jsx(tt,{className:"p-6",children:u.jsx("p",{className:"text-gray-600",children:"Settings panel coming soon..."})})})]}),!["profile","upgrade","settings"].includes(t)&&u.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-4xl mx-auto space-y-6",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 capitalize",children:t.replace("-"," ")}),u.jsx(Ge,{children:u.jsx(tt,{className:"p-6",children:u.jsxs("p",{className:"text-gray-600",children:[t.charAt(0).toUpperCase()+t.slice(1)," section coming soon..."]})})})]})]})]})})}function c2e(){const{slug:t}=NT(),e=ci(),r=Ar(),{currentSwatch:n,favorites:s,isLoading:i,error:o}=Ze(v=>v.swatches),[a,l]=w.useState("overview");w.useEffect(()=>{t&&r(Py(t))},[t,r]);const c=n?s.includes(n._id):!1,d=async()=>{n&&(await r(KB(n._id)),Ve.success(c?"Removed from favorites":"Added to favorites"))},h=()=>{n&&(navigator.clipboard.writeText(n.color.hex),Ve.success(`Color ${n.color.hex} copied to clipboard`))},f=async()=>{},p=v=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(v),g=v=>v>=70?{label:"Light",color:"bg-yellow-100 text-yellow-800",description:"Reflects most light, ideal for small spaces"}:v>=30?{label:"Medium",color:"bg-orange-100 text-orange-800",description:"Balanced light reflection, versatile for most rooms"}:{label:"Dark",color:"bg-gray-100 text-gray-800",description:"Absorbs most light, creates dramatic atmosphere"};if(i)return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx(kt,{className:"h-10 w-20"}),u.jsx(kt,{className:"h-8 w-48"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsx(kt,{className:"aspect-square rounded-lg"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx(kt,{className:"h-8 w-3/4"}),u.jsx(kt,{className:"h-4 w-full"}),u.jsx(kt,{className:"h-4 w-2/3"}),u.jsx("div",{className:"space-y-2",children:[...Array(5)].map((v,m)=>u.jsx(kt,{className:"h-12 w-full"},m))})]})]})]});if(o||!n)return u.jsxs("div",{className:"text-center py-12",children:[u.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Swatch not found"}),u.jsx("p",{className:"text-muted-foreground mb-6",children:"The swatch you're looking for doesn't exist or has been removed."}),u.jsxs(ge,{onClick:()=>e("/swatchbook"),children:[u.jsx(Yp,{className:"h-4 w-4 mr-2"}),"Back to SwatchBook"]})]});const y=g(n.color.lrv);return u.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(ge,{variant:"ghost",onClick:()=>e("/swatchbook"),className:"flex items-center space-x-2",children:[u.jsx(Yp,{className:"h-4 w-4"}),u.jsx("span",{children:"Back to SwatchBook"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs(ge,{variant:"outline",size:"sm",onClick:f,children:[u.jsx(Qp,{className:"h-4 w-4 mr-2"}),"Share"]}),u.jsxs(ge,{variant:c?"default":"outline",size:"sm",onClick:d,className:xe(c&&"text-red-500 hover:text-red-600"),children:[u.jsx(U2,{className:xe("h-4 w-4 mr-2",c&&"fill-current")}),c?"Favorited":"Add to Favorites"]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[u.jsx(ze.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:u.jsx(Ge,{className:"overflow-hidden",children:u.jsxs("div",{className:"relative aspect-square",children:[u.jsx("div",{className:"w-full h-full transition-all duration-300",style:{backgroundColor:n.color.hex}}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),u.jsx("div",{className:"absolute bottom-6 left-6 right-6",children:u.jsxs("div",{className:"flex items-end justify-between text-white",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold mb-1",children:n.color.hex}),u.jsx("p",{className:"text-sm opacity-90",children:n.color.rgb}),u.jsxs("p",{className:"text-sm opacity-90",children:["LRV ",n.color.lrv]})]}),u.jsx(dt,{className:y.color,variant:"secondary",children:y.label})]})}),u.jsxs(ge,{variant:"secondary",size:"sm",onClick:h,className:"absolute top-4 right-4 bg-white/90 hover:bg-white",children:[u.jsx(Jo,{className:"h-4 w-4 mr-2"}),"Copy Color"]})]})})}),u.jsxs(ze.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1},className:"space-y-6",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold",children:n.title}),u.jsx("p",{className:"text-lg text-muted-foreground",children:n.brand})]}),u.jsx(dt,{variant:"outline",className:"text-sm",children:n.sku})]}),u.jsx("p",{className:"text-muted-foreground mb-4",children:n.description}),u.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[u.jsx(dt,{variant:"secondary",children:n.category}),u.jsx(dt,{variant:"secondary",children:n.style}),u.jsx(dt,{variant:"secondary",children:n.finish}),u.jsx(dt,{variant:"secondary",children:n.coating_type})]})]}),u.jsxs(Ge,{children:[u.jsx(vt,{className:"pb-3",children:u.jsxs(St,{className:"text-lg flex items-center",children:[u.jsx($U,{className:"h-5 w-5 mr-2"}),"Pricing"]})}),u.jsx(tt,{children:u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-muted-foreground",children:"Per Gallon"}),u.jsx("p",{className:"text-2xl font-bold text-green-600",children:p(n.pricing.per_gallon)})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-muted-foreground",children:"Per Sq Ft"}),u.jsx("p",{className:"text-2xl font-bold text-green-600",children:p(n.pricing.per_sqft)})]})]})})]}),u.jsxs(Ge,{children:[u.jsx(vt,{className:"pb-3",children:u.jsxs(St,{className:"text-lg flex items-center",children:[u.jsx(HU,{className:"h-5 w-5 mr-2"}),"Quick Specs"]})}),u.jsxs(tt,{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Xo,{className:"h-4 w-4 text-muted-foreground"}),u.jsx("span",{className:"text-sm",children:"Dry Time (Touch)"})]}),u.jsx("span",{className:"text-sm font-medium",children:n.dry_time_touch})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Xo,{className:"h-4 w-4 text-muted-foreground"}),u.jsx("span",{className:"text-sm",children:"Dry Time (Recoat)"})]}),u.jsx("span",{className:"text-sm font-medium",children:n.dry_time_recoat})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Dce,{className:"h-4 w-4 text-muted-foreground"}),u.jsx("span",{className:"text-sm",children:"Coverage"})]}),u.jsxs("span",{className:"text-sm font-medium",children:[n.application.coverage_sqft_per_gal," sq ft/gal"]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Jc,{className:"h-4 w-4 text-muted-foreground"}),u.jsx("span",{className:"text-sm",children:"Light Reflectance"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:"text-sm font-medium",children:n.color.lrv}),u.jsx(dt,{className:`${y.color} text-xs`,variant:"secondary",children:y.label})]})]})]})]})]})]}),u.jsx(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:u.jsxs(TA,{value:a,onValueChange:l,children:[u.jsxs(Rw,{className:"grid w-full grid-cols-5",children:[u.jsx(In,{value:"overview",children:"Overview"}),u.jsx(In,{value:"application",children:"Application"}),u.jsx(In,{value:"specifications",children:"Specifications"}),u.jsx(In,{value:"certifications",children:"Certifications"}),u.jsx(In,{value:"availability",children:"Availability"})]}),u.jsx(Qs,{value:"overview",className:"mt-6",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs(Ge,{children:[u.jsx(vt,{children:u.jsxs(St,{className:"flex items-center",children:[u.jsx(ai,{className:"h-5 w-5 mr-2"}),"Color Information"]})}),u.jsxs(tt,{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx(Rr,{className:"text-sm font-medium",children:"Hex Code"}),u.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[u.jsx("div",{className:"w-6 h-6 rounded border",style:{backgroundColor:n.color.hex}}),u.jsx("code",{className:"text-sm bg-muted px-2 py-1 rounded",children:n.color.hex}),u.jsx(ge,{variant:"ghost",size:"sm",onClick:h,className:"h-6 w-6 p-0",children:u.jsx(Jo,{className:"h-3 w-3"})})]})]}),u.jsxs("div",{children:[u.jsx(Rr,{className:"text-sm font-medium",children:"RGB Values"}),u.jsx("code",{className:"block text-sm bg-muted px-2 py-1 rounded mt-1",children:n.color.rgb})]}),u.jsxs("div",{children:[u.jsx(Rr,{className:"text-sm font-medium",children:"Light Reflectance Value"}),u.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[u.jsx("span",{className:"text-sm font-medium",children:n.color.lrv}),u.jsx(dt,{className:y.color,variant:"secondary",children:y.label})]}),u.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:y.description})]})]})]}),u.jsxs(Ge,{children:[u.jsx(vt,{children:u.jsxs(St,{className:"flex items-center",children:[u.jsx(Bce,{className:"h-5 w-5 mr-2"}),"Tags & Categories"]})}),u.jsxs(tt,{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx(Rr,{className:"text-sm font-medium mb-2 block",children:"Style Tags"}),u.jsx("div",{className:"flex flex-wrap gap-1",children:n.tags.map(v=>u.jsx(dt,{variant:"secondary",className:"text-xs",children:v},v))})]}),u.jsxs("div",{children:[u.jsx(Rr,{className:"text-sm font-medium mb-2 block",children:"Application Areas"}),u.jsx("div",{className:"flex flex-wrap gap-1",children:n.segment_types.map(v=>u.jsx(dt,{variant:"outline",className:"text-xs capitalize",children:v},v))})]})]})]})]})}),u.jsx(Qs,{value:"application",className:"mt-6",children:u.jsxs(Ge,{children:[u.jsx(vt,{children:u.jsxs(St,{className:"flex items-center",children:[u.jsx(Jx,{className:"h-5 w-5 mr-2"}),"Application Guidelines"]})}),u.jsxs(tt,{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx(Rr,{className:"text-sm font-medium mb-3 block",children:"Recommended Substrates"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:n.application.recommended_substrates.map(v=>u.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg",children:[u.jsx(DU,{className:"h-4 w-4 text-green-600"}),u.jsx("span",{className:"text-sm",children:v})]},v))})]}),u.jsx(Gr,{}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx(Rr,{className:"text-sm font-medium mb-2 block",children:"Coverage"}),u.jsx("div",{className:"text-2xl font-bold text-primary",children:n.application.coverage_sqft_per_gal}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"square feet per gallon"})]}),u.jsxs("div",{children:[u.jsx(Rr,{className:"text-sm font-medium mb-2 block",children:"Finish Type"}),u.jsx("div",{className:"text-lg font-semibold",children:n.finish}),u.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.coating_type," coating"]})]})]})]})]})}),u.jsx(Qs,{value:"specifications",className:"mt-6",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs(Ge,{children:[u.jsx(vt,{children:u.jsxs(St,{className:"flex items-center",children:[u.jsx(Xo,{className:"h-5 w-5 mr-2"}),"Drying Times"]})}),u.jsxs(tt,{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[u.jsx("span",{className:"text-sm font-medium",children:"Touch Dry"}),u.jsx("span",{className:"text-sm",children:n.dry_time_touch})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[u.jsx("span",{className:"text-sm font-medium",children:"Recoat Time"}),u.jsx("span",{className:"text-sm",children:n.dry_time_recoat})]})]})]}),u.jsxs(Ge,{children:[u.jsx(vt,{children:u.jsxs(St,{className:"flex items-center",children:[u.jsx(UU,{className:"h-5 w-5 mr-2"}),"Product Details"]})}),u.jsxs(tt,{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[u.jsx("span",{className:"text-sm font-medium",children:"Coating Type"}),u.jsx("span",{className:"text-sm",children:n.coating_type})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[u.jsx("span",{className:"text-sm font-medium",children:"Finish"}),u.jsx("span",{className:"text-sm",children:n.finish})]}),u.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[u.jsx("span",{className:"text-sm font-medium",children:"Style"}),u.jsx("span",{className:"text-sm",children:n.style})]})]})]})]})}),u.jsx(Qs,{value:"certifications",className:"mt-6",children:u.jsxs(Ge,{children:[u.jsx(vt,{children:u.jsxs(St,{className:"flex items-center",children:[u.jsx(pce,{className:"h-5 w-5 mr-2"}),"Certifications & Standards"]})}),u.jsx(tt,{children:n.certifications.length>0?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.certifications.map(v=>u.jsxs("div",{className:"flex items-center space-x-3 p-4 border rounded-lg",children:[u.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:u.jsx(fv,{className:"h-5 w-5 text-green-600"})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium",children:v}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Certified standard"})]})]},v))}):u.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[u.jsx(fv,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),u.jsx("p",{children:"No certifications listed for this product"})]})})]})}),u.jsx(Qs,{value:"availability",className:"mt-6",children:u.jsxs(Ge,{children:[u.jsx(vt,{children:u.jsxs(St,{className:"flex items-center",children:[u.jsx(WU,{className:"h-5 w-5 mr-2"}),"Container Sizes & Availability"]})}),u.jsxs(tt,{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx(Rr,{className:"text-sm font-medium mb-3 block",children:"Available Sizes"}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:n.container_sizes.map(v=>u.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[u.jsx("span",{className:"text-sm font-medium",children:v}),u.jsx(dt,{variant:"secondary",className:"text-xs",children:"In Stock"})]},v))})]}),u.jsx(Gr,{}),u.jsxs("div",{children:[u.jsx(Rr,{className:"text-sm font-medium mb-3 block",children:"Pricing by Size"}),u.jsx("div",{className:"space-y-2",children:n.container_sizes.map(v=>{const m=v.includes("Quart")?.25:v.includes("5")?4.5:1,x=n.pricing.per_gallon*m;return u.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[u.jsx("span",{className:"text-sm",children:v}),u.jsx("span",{className:"text-sm font-semibold text-green-600",children:p(x)})]},v)})})]})]})]})})]})})]})}const u2e={"modern-dashboard-abc123":{id:"1",name:"Modern Dashboard",description:"A beautiful dashboard with dark mode support and advanced analytics. This project showcases modern design principles with clean layouts, intuitive navigation, and responsive components.",thumbnail:"https://images.pexels.com/photos/1779487/pexels-photo-1779487.jpeg?auto=compress&cs=tinysrgb&w=800&h=600&dpr=2",createdAt:"2024-01-15T10:30:00Z",updatedAt:"2024-01-20T14:45:00Z",progress:75,status:"active",publicSlug:"modern-dashboard-abc123",viewCount:1247,author:{name:"John Doe",avatar:"https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&dpr=2"},tags:["Dashboard","Modern","Analytics","Dark Mode"],images:["https://images.pexels.com/photos/1779487/pexels-photo-1779487.jpeg?auto=compress&cs=tinysrgb&w=800&h=600&dpr=2","https://images.pexels.com/photos/196644/pexels-photo-196644.jpeg?auto=compress&cs=tinysrgb&w=800&h=600&dpr=2","https://images.pexels.com/photos/230544/pexels-photo-230544.jpeg?auto=compress&cs=tinysrgb&w=800&h=600&dpr=2"],isActive:!0},"portfolio-website-def456":{id:"3",name:"Portfolio Website",description:"Creative portfolio with smooth animations and responsive design. Features include project galleries, contact forms, and interactive elements.",thumbnail:"https://images.pexels.com/photos/196644/pexels-photo-196644.jpeg?auto=compress&cs=tinysrgb&w=800&h=600&dpr=2",createdAt:"2024-01-05T11:00:00Z",updatedAt:"2024-01-12T13:30:00Z",progress:100,status:"completed",publicSlug:"portfolio-website-def456",viewCount:892,author:{name:"Jane Smith",avatar:"https://images.pexels.com/photos/415829/pexels-photo-415829.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&dpr=2"},tags:["Portfolio","Creative","Animation","Responsive"],images:["https://images.pexels.com/photos/196644/pexels-photo-196644.jpeg?auto=compress&cs=tinysrgb&w=800&h=600&dpr=2","https://images.pexels.com/photos/1779487/pexels-photo-1779487.jpeg?auto=compress&cs=tinysrgb&w=800&h=600&dpr=2"],isActive:!0}};function d2e(){const{slug:t}=NT(),e=ci(),[r,n]=w.useState(null),[s,i]=w.useState(!0),[o,a]=w.useState(null),[l,c]=w.useState(0);w.useEffect(()=>{(async()=>{if(!t){a("Invalid project URL"),i(!1);return}try{await new Promise(y=>setTimeout(y,800));const g=u2e[t];if(!g){a("Project not found or no longer public"),i(!1);return}if(!g.isActive){a("This project is no longer available for public viewing"),i(!1);return}n(g),g.viewCount+=1}catch{a("Failed to load project")}finally{i(!1)}})()},[t]);const d=async()=>{try{await navigator.share({title:r==null?void 0:r.name,text:r==null?void 0:r.description,url:window.location.href})}catch{navigator.clipboard.writeText(window.location.href),Ve.success("Link copied to clipboard")}},h=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),f=p=>{switch(p){case"active":return"bg-green-500/10 text-green-500 border-green-500/20";case"completed":return"bg-blue-500/10 text-blue-500 border-blue-500/20";case"paused":return"bg-yellow-500/10 text-yellow-500 border-yellow-500/20";default:return"bg-gray-500/10 text-gray-500 border-gray-500/20"}};return s?u.jsx("div",{className:"min-h-screen bg-background",children:u.jsx("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx(kt,{className:"h-10 w-20"}),u.jsx(kt,{className:"h-8 w-48"})]}),u.jsx(kt,{className:"aspect-video rounded-lg"}),u.jsxs("div",{className:"space-y-4",children:[u.jsx(kt,{className:"h-8 w-3/4"}),u.jsx(kt,{className:"h-4 w-full"}),u.jsx(kt,{className:"h-4 w-2/3"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[...Array(3)].map((p,g)=>u.jsx(kt,{className:"h-32"},g))})]})})}):o||!r?u.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:u.jsx(Ge,{className:"w-full max-w-md mx-4",children:u.jsx(tt,{className:"pt-6",children:u.jsxs("div",{className:"text-center space-y-4",children:[o!=null&&o.includes("not found")?u.jsx($ce,{className:"h-12 w-12 text-yellow-500 mx-auto"}):u.jsx(Bc,{className:"h-12 w-12 text-muted-foreground mx-auto"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-2",children:o!=null&&o.includes("not found")?"Project Not Found":"Access Unavailable"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:o||"This project is not available for public viewing."})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs(ge,{onClick:()=>window.history.back(),variant:"outline",className:"w-full",children:[u.jsx(Yp,{className:"h-4 w-4 mr-2"}),"Go Back"]}),u.jsx(ge,{onClick:()=>e("/login"),className:"w-full",children:"Sign In to Access Projects"})]})]})})})}):u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx("div",{className:"border-b border-border bg-card/50 backdrop-blur-sm sticky top-0 z-40",children:u.jsx("div",{className:"container mx-auto px-4 py-4 max-w-4xl",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs(ge,{variant:"ghost",onClick:()=>window.history.back(),className:"flex items-center space-x-2",children:[u.jsx(Yp,{className:"h-4 w-4"}),u.jsx("span",{children:"Back"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(zU,{className:"h-5 w-5 text-green-600"}),u.jsx("span",{className:"text-sm font-medium text-green-600",children:"Public Project"})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("div",{className:"flex items-center space-x-1 text-sm text-muted-foreground",children:[u.jsx(Jc,{className:"h-4 w-4"}),u.jsxs("span",{children:[r.viewCount.toLocaleString()," views"]})]}),u.jsxs(ge,{variant:"outline",size:"sm",onClick:d,children:[u.jsx(Qp,{className:"h-4 w-4 mr-2"}),"Share"]}),u.jsx(ge,{onClick:()=>e("/login"),size:"sm",children:"Sign In"})]})]})})}),u.jsx("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:u.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-8",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"aspect-video rounded-lg overflow-hidden bg-muted",children:u.jsx("img",{src:r.images[l],alt:r.name,className:"w-full h-full object-cover"})}),r.images.length>1&&u.jsx("div",{className:"flex justify-center mt-4 space-x-2",children:r.images.map((p,g)=>u.jsx("button",{onClick:()=>c(g),className:xe("w-3 h-3 rounded-full transition-colors",l===g?"bg-primary":"bg-muted-foreground/30 hover:bg-muted-foreground/50")},g))})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-start justify-between mb-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h1",{className:"text-3xl font-bold mb-2",children:r.name}),u.jsx("p",{className:"text-lg text-muted-foreground leading-relaxed",children:r.description})]}),u.jsx(dt,{className:xe("ml-4",f(r.status)),children:r.status})]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags.map(p=>u.jsx(dt,{variant:"secondary",children:p},p))})]}),u.jsx(Gr,{}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs(Ge,{children:[u.jsx(vt,{className:"pb-3",children:u.jsxs(St,{className:"text-base flex items-center",children:[u.jsx(Qx,{className:"h-4 w-4 mr-2"}),"Author"]})}),u.jsx(tt,{children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center overflow-hidden",children:r.author.avatar?u.jsx("img",{src:r.author.avatar,alt:r.author.name,className:"w-full h-full object-cover"}):u.jsx("span",{className:"text-sm font-medium",children:r.author.name.charAt(0)})}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium",children:r.author.name}),u.jsx("p",{className:"text-xs text-muted-foreground",children:"Project Creator"})]})]})})]}),u.jsxs(Ge,{children:[u.jsx(vt,{className:"pb-3",children:u.jsxs(St,{className:"text-base flex items-center",children:[u.jsx(MU,{className:"h-4 w-4 mr-2"}),"Timeline"]})}),u.jsxs(tt,{className:"space-y-2",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-muted-foreground",children:"Created"}),u.jsx("p",{className:"text-sm font-medium",children:h(r.createdAt)})]}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Updated"}),u.jsx("p",{className:"text-sm font-medium",children:h(r.updatedAt)})]})]})]}),u.jsxs(Ge,{children:[u.jsx(vt,{className:"pb-3",children:u.jsxs(St,{className:"text-base flex items-center",children:[u.jsx(ai,{className:"h-4 w-4 mr-2"}),"Progress"]})}),u.jsx(tt,{children:u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex justify-between text-sm",children:[u.jsx("span",{children:"Completion"}),u.jsxs("span",{className:"font-medium",children:[r.progress,"%"]})]}),u.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:u.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${r.progress}%`}})})]})})]})]}),u.jsx(Ge,{className:"bg-gradient-to-r from-primary/5 to-primary/10 border-primary/20",children:u.jsx(tt,{className:"pt-6",children:u.jsxs("div",{className:"text-center space-y-4",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Interested in this project?"}),u.jsx("p",{className:"text-muted-foreground",children:"Sign in to create your own projects and collaborate with others"})]}),u.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[u.jsx(ge,{onClick:()=>e("/login"),children:"Sign In to Get Started"}),u.jsxs(ge,{variant:"outline",onClick:d,children:[u.jsx(Qp,{className:"h-4 w-4 mr-2"}),"Share Project"]})]})]})})}),r.images.length>1&&u.jsxs(Ge,{children:[u.jsx(vt,{children:u.jsxs(St,{className:"flex items-center",children:[u.jsx(yd,{className:"h-5 w-5 mr-2"}),"Project Gallery"]})}),u.jsx(tt,{children:u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:r.images.map((p,g)=>u.jsx("button",{onClick:()=>c(g),className:xe("aspect-video rounded-lg overflow-hidden border-2 transition-all",l===g?"border-primary shadow-md":"border-transparent hover:border-primary/50"),children:u.jsx("img",{src:p,alt:`${r.name} - Image ${g+1}`,className:"w-full h-full object-cover"})},g))})})]})]})]})})]})}function h2e({children:t,requiredRole:e="user"}){const r=Ar(),{isAuthenticated:n,isLoading:s,isInitialized:i,user:o}=Ze(c=>c.auth),{profile:a}=Ze(c=>c.userProfile),l=dh();if(w.useEffect(()=>{i||r(zf())},[r,i]),s||!i)return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:u.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[u.jsx(Hd,{className:"h-8 w-8 animate-spin text-primary"}),u.jsx("p",{className:"text-sm text-muted-foreground",children:"Verifying authentication..."})]})});if(!n)return u.jsx(Mu,{to:"/login",state:{from:l},replace:!0});if(e&&o&&a){const c={user:0,viewer:1,vendor:2,editor:3,admin:4},d=c[a.role]||0,h=c[e]||0;if(d<h)return u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:u.jsxs("div",{className:"text-center space-y-4",children:[u.jsx("h2",{className:"text-2xl font-bold",children:"Access Denied"}),u.jsx("p",{className:"text-muted-foreground",children:"You don't have permission to access this resource."}),u.jsxs("p",{className:"text-sm text-muted-foreground",children:["Required role: ",e," | Your role: ",a.role]})]})})}return u.jsx(u.Fragment,{children:t})}function f2e(){const t=ci(),{profile:e}=Ze(n=>n.userProfile),r=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="vendor";return u.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"SwatchBook"}),u.jsx("p",{className:"text-muted-foreground",children:"Discover and explore our comprehensive collection of paint swatches"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs(ge,{variant:"outline",size:"sm",onClick:()=>t("/swatch/create"),children:[u.jsx(Jp,{className:"h-4 w-4 mr-2"}),"Create Swatch"]}),r&&u.jsxs(ge,{variant:"outline",size:"sm",onClick:()=>t("/swatch/import"),children:[u.jsx(Wd,{className:"h-4 w-4 mr-2"}),"Import Swatches"]})]})]})}function p2e(){const t=Ar(),{filters:e}=Ze(n=>n.swatches),r=n=>{t(D0({search:n})),t(XB(1))};return u.jsx("div",{className:"flex-1",children:u.jsxs("div",{className:"relative",children:[u.jsx(GU,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),u.jsx(Ai,{placeholder:"Search swatches by name, brand, or tags...",value:e.search,onChange:n=>r(n.target.value),className:"pl-10 bg-background"})]})})}function g2e({viewMode:t,setViewMode:e,layoutMode:r,setLayoutMode:n,sortBy:s,handleSort:i,showFavoritesOnly:o,setShowFavoritesOnly:a,showFilters:l,setShowFilters:c,getActiveFiltersCount:d}){const{favorites:h}=Ze(p=>p.swatches),f=p=>{switch(p){case"name":return"Name A-Z";case"price_low":return"Price: Low to High";case"price_high":return"Price: High to Low";case"lrv_low":return"LRV: Dark to Light";case"lrv_high":return"LRV: Light to Dark";case"newest":return"Newest First";case"popular":return"Most Popular";default:return"Name A-Z"}};return u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Rr,{htmlFor:"layout-mode",className:"text-sm whitespace-nowrap",children:"Layout:"}),u.jsxs("div",{className:"flex items-center border rounded-md",children:[u.jsxs(ge,{variant:r==="compact"?"default":"ghost",size:"sm",onClick:()=>n("compact"),className:"rounded-r-none border-r",children:[u.jsx(Ece,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline ml-1",children:"Compact"})]}),u.jsxs(ge,{variant:r==="detailed"?"default":"ghost",size:"sm",onClick:()=>n("detailed"),className:"rounded-l-none",children:[u.jsx(Ice,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline ml-1",children:"Detailed"})]})]})]}),u.jsxs(ge,{variant:o?"default":"outline",size:"sm",onClick:()=>a(!o),className:"flex items-center space-x-1",children:[u.jsx(U2,{className:xe("h-4 w-4",o&&"fill-current")}),u.jsx("span",{className:"hidden sm:inline",children:"Favorites"}),h.length>0&&u.jsx(dt,{variant:"secondary",className:"ml-1 text-xs",children:h.length})]}),u.jsxs(bj,{children:[u.jsx(Sj,{asChild:!0,children:u.jsxs(ge,{variant:"outline",size:"sm",children:[u.jsx(fce,{className:"h-4 w-4 mr-2"}),u.jsx("span",{className:"hidden sm:inline",children:f(s)}),u.jsx("span",{className:"sm:hidden",children:"Sort"})]})}),u.jsxs(yw,{align:"end",children:[u.jsx(nn,{onClick:()=>i("name"),children:"Name A-Z"}),u.jsx(nn,{onClick:()=>i("price_low"),children:"Price: Low to High"}),u.jsx(nn,{onClick:()=>i("price_high"),children:"Price: High to Low"}),u.jsx(nn,{onClick:()=>i("lrv_low"),children:"LRV: Dark to Light"}),u.jsx(nn,{onClick:()=>i("lrv_high"),children:"LRV: Light to Dark"}),u.jsx(nn,{onClick:()=>i("newest"),children:"Newest First"}),u.jsx(nn,{onClick:()=>i("popular"),children:"Most Popular"})]})]}),u.jsxs("div",{className:"flex items-center border rounded-md",children:[u.jsx(ge,{variant:t==="grid"?"default":"ghost",size:"sm",onClick:()=>e("grid"),className:"rounded-r-none",children:u.jsx(Sce,{className:"h-4 w-4"})}),u.jsx(ge,{variant:t==="list"?"default":"ghost",size:"sm",onClick:()=>e("list"),className:"rounded-l-none",children:u.jsx(Tce,{className:"h-4 w-4"})})]}),u.jsxs(ge,{variant:l?"default":"outline",size:"sm",onClick:()=>c(!l),className:"lg:hidden",children:[u.jsx(xce,{className:"h-4 w-4 mr-2"}),"Filters",d()>0&&u.jsx(dt,{variant:"secondary",className:"ml-1 text-xs",children:d()})]})]})}function m2e({getActiveFiltersCount:t}){const{filters:e}=Ze(r=>r.swatches);return t()===0?null:u.jsxs(ze.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex flex-wrap gap-2",children:[e.search&&u.jsxs(dt,{variant:"secondary",className:"bg-muted text-muted-foreground",children:['Search: "',e.search,'"']}),e.category&&u.jsxs(dt,{variant:"secondary",className:"bg-muted text-muted-foreground",children:["Category: ",e.category]}),e.brand&&u.jsxs(dt,{variant:"secondary",className:"bg-muted text-muted-foreground",children:["Brand: ",e.brand]}),e.style&&u.jsxs(dt,{variant:"secondary",className:"bg-muted text-muted-foreground",children:["Style: ",e.style]}),e.finish&&u.jsxs(dt,{variant:"secondary",className:"bg-muted text-muted-foreground",children:["Finish: ",e.finish]}),e.coating_type&&u.jsxs(dt,{variant:"secondary",className:"bg-muted text-muted-foreground",children:["Type: ",e.coating_type]}),e.tags.map(r=>u.jsxs(dt,{variant:"secondary",className:"bg-muted text-muted-foreground",children:["Tag: ",r]},r)),e.segment_types.map(r=>u.jsxs(dt,{variant:"secondary",className:"bg-muted text-muted-foreground",children:["Area: ",r]},r))]})}function y2e({swatch:t,variant:e="grid",layoutMode:r="detailed",showActions:n=!0,className:s}){const[i,o]=w.useState(!1),a="https://dzinlyv2.s3.us-east-2.amazonaws.com/liv/materials",l="https://betadzinly.s3.us-east-2.amazonaws.com/material/",c=async g=>{},d=()=>{},h=g=>{},p=(g=>g>=70?{label:"Light",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-950 dark:text-yellow-400 dark:border-yellow-800"}:g>=30?{label:"Medium",color:"bg-orange-100 text-orange-800 dark:bg-orange-950 dark:text-orange-400 dark:border-orange-800"}:{label:"Dark",color:"bg-gray-100 text-gray-800 dark:bg-gray-950 dark:text-gray-400 dark:border-gray-800"})(t.material_category_id);return e==="list"&&r==="compact"?u.jsx(Tf,{children:u.jsx(ze.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},whileHover:{scale:1.01},transition:{duration:.2},className:xe("w-full",s),children:u.jsx(Ge,{className:"cursor-pointer hover:shadow-md transition-all duration-300 overflow-hidden bg-card border-border",onClick:d,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:u.jsxs("div",{className:"flex items-center p-3",children:[u.jsx("div",{className:"w-12 h-12 flex-shrink-0 relative rounded-md overflow-hidden border border-border",children:u.jsx("img",{src:t.photo||"/placeholder-swatch.jpg",alt:t.title,className:"w-full h-full object-cover",onError:g=>{const y=g.target;y.style.backgroundColor=t.color||"#ffffff",y.style.display="block",y.src=""}})}),u.jsx("div",{className:"flex-1 min-w-0 ml-3",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"min-w-0 flex-1",children:[u.jsx("h3",{className:"font-medium text-sm truncate text-foreground",children:t.title}),u.jsx("div",{className:"flex items-center space-x-2 mt-1",children:u.jsx("code",{className:"text-xs bg-muted px-1 py-0.5 rounded text-muted-foreground",children:t.color??"#000000"})})]}),n&&u.jsx("div",{className:"flex items-center space-x-1 ml-2",children:u.jsx(ge,{variant:"ghost",size:"sm",onClick:h,className:"h-8 w-8 p-0",children:u.jsx(Jo,{className:"h-3 w-3"})})})]})})]})})})}):e==="grid"&&r==="compact"?u.jsx(Tf,{children:u.jsx(ze.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.02},transition:{duration:.2},className:xe("w-full",s),children:u.jsxs(Ge,{className:"group cursor-pointer hover:shadow-lg transition-all duration-300 overflow-hidden bg-card border-border",onClick:d,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[u.jsxs("div",{className:"relative aspect-square",children:[u.jsx("img",{src:`${t.bucket_path}`=="default"?`${a}/${t.photo}`:`${l}/${t.bucket_path}`,alt:t.title,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",onError:g=>{const y=g.target;y.style.backgroundColor=t.color||"#ffffff",y.style.display="block",y.src=""}}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),u.jsx("div",{className:"absolute bottom-2 left-2 right-2",children:u.jsxs("div",{className:"text-white text-xs",children:[u.jsx("div",{className:"font-medium truncate",children:t.title}),u.jsx("div",{className:"opacity-90",children:t.description})]})}),n&&u.jsx(ze.div,{initial:{opacity:0},animate:{opacity:i?1:0},transition:{duration:.2},className:"absolute top-2 right-2 flex space-x-1"})]}),u.jsx("div",{className:"p-2",children:u.jsx("div",{className:"flex items-center justify-between text-xs"})})]})})}):e==="list"?u.jsx(Tf,{children:u.jsx(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.01},transition:{duration:.2},className:xe("w-full",s),children:u.jsx(Ge,{className:"cursor-pointer hover:shadow-lg transition-all duration-300 overflow-hidden bg-card border-border",onClick:d,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:u.jsxs("div",{className:"flex",children:[u.jsxs("div",{className:"w-24 h-24 flex-shrink-0 relative",children:[u.jsx("img",{src:t.photo||"/placeholder-swatch.jpg",alt:t.title,className:"w-full h-full object-cover",onError:g=>{const y=g.target;y.style.backgroundColor=t.color||"#000000",y.style.display="block",y.src=""}}),u.jsx("div",{className:"absolute inset-0 bg-black/10"})]}),u.jsx("div",{className:"flex-1 p-4",children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[u.jsx("h3",{className:"font-semibold text-lg truncate text-foreground",children:t.title}),u.jsx(dt,{variant:"outline",className:"text-xs",children:t.color})]}),u.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-2",children:t.description}),u.jsx("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground"})]}),n&&u.jsxs("div",{className:"flex items-center space-x-1 ml-4",children:[u.jsxs(pn,{children:[u.jsx(gn,{asChild:!0,children:u.jsx(ge,{variant:"ghost",size:"sm",onClick:h,className:"h-8 w-8 p-0",children:u.jsx(Jo,{className:"h-4 w-4"})})}),u.jsx(rn,{children:"Copy color code"})]}),u.jsxs(pn,{children:[u.jsx(gn,{asChild:!0,children:u.jsx(ge,{variant:"ghost",size:"sm",onClick:c,className:xe("h-8 w-8 p-0")})}),u.jsx(rn,{})]}),u.jsxs(pn,{children:[u.jsx(gn,{asChild:!0,children:u.jsx(ge,{variant:"ghost",size:"sm",onClick:d,className:"h-8 w-8 p-0",children:u.jsx(NE,{className:"h-4 w-4"})})}),u.jsx(rn,{children:"View details"})]})]})]})})]})})})}):u.jsx(Tf,{children:u.jsx(ze.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{scale:1.02},transition:{duration:.2},className:xe("w-full",s),children:u.jsxs(Ge,{className:"group cursor-pointer hover:shadow-xl transition-all duration-300 overflow-hidden bg-card border-border",onClick:d,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[u.jsxs("div",{className:"relative aspect-square",children:[u.jsx("img",{src:t.photo||"/placeholder-swatch.jpg",alt:t.title,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",onError:g=>{const y=g.target;y.style.backgroundColor=t.color||"#ffffff",y.style.display="block",y.src=""}}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),u.jsx("div",{className:"absolute bottom-3 left-3 right-3",children:u.jsxs("div",{className:"flex items-center justify-between text-white text-sm",children:[u.jsxs("div",{children:[u.jsx("div",{className:"font-medium",children:t.title}),u.jsxs("div",{className:"text-xs opacity-90",children:["Description ",t.description]})]}),u.jsx(dt,{className:p.color,variant:"secondary",children:p.label})]})}),u.jsxs(ze.div,{initial:{opacity:0},animate:{opacity:i?1:0},transition:{duration:.2},className:"absolute top-3 right-3 flex flex-col space-y-1",children:[u.jsxs(pn,{children:[u.jsx(gn,{asChild:!0,children:u.jsx(ge,{variant:"secondary",size:"sm",onClick:c,className:xe("h-8 w-8 p-0 bg-white/90 hover:bg-white")})}),u.jsx(rn,{})]}),u.jsxs(pn,{children:[u.jsx(gn,{asChild:!0,children:u.jsx(ge,{variant:"secondary",size:"sm",onClick:h,className:"h-8 w-8 p-0 bg-white/90 hover:bg-white",children:u.jsx(Jo,{className:"h-4 w-4"})})}),u.jsx(rn,{children:"Copy color code"})]})]})]}),u.jsxs(vt,{className:"pb-3",children:[u.jsx("div",{className:"flex items-start justify-between",children:u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx(St,{className:"text-lg truncate text-foreground",children:t.title}),u.jsx(Xc,{className:"line-clamp-2 mt-1",children:t.description})]})}),u.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[u.jsx(dt,{variant:"outline",className:"text-xs",children:t.material_brand_id}),u.jsx(dt,{variant:"outline",className:"text-xs",children:t.finish_needed})]})]}),u.jsxs(tt,{className:"pt-0",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[u.jsx($U,{className:"h-4 w-4"}),u.jsx("span",{className:"text-xs text-muted-foreground",children:"/gal"})]}),u.jsx("span",{className:"text-sm text-muted-foreground"})]}),u.jsxs("div",{className:"space-y-2 text-xs text-muted-foreground",children:[u.jsx("div",{className:"flex items-center space-x-2",children:u.jsx(Xo,{className:"h-3 w-3"})}),u.jsx("div",{className:"flex items-center space-x-2",children:u.jsx(UU,{className:"h-3 w-3"})}),u.jsx("div",{className:"flex items-center space-x-2",children:u.jsx(ai,{className:"h-3 w-3"})})]}),u.jsx("div",{className:"flex flex-wrap gap-1 mt-3"})]})]})})})}function _4({compact:t=!1}){const e=Ar(),{filters:r}=Ze(_=>_.swatches),{categories:n}=Ze(_=>_.categories),{brands:s}=Ze(_=>_.brands),{styles:i}=Ze(_=>_.styles),[o,a]=w.useState([]),[l,c]=w.useState([]),[d,h]=w.useState({category:!0,brand:!0,style:!0,finish:!0,coating:!0,price:!0,lrv:!0,tags:!0,segments:!0}),f=_=>{h(C=>({...C,[_]:!C[_]}))},p=(_,C)=>{e(D0({[_]:C==null?void 0:C.id.toString()})),_==="category"&&C&&typeof C=="object"?(e(ote(C)),e(co({material_category_id:C.id,limit:100}))):_==="brand"&&C&&typeof C=="object"?(e(ate(C)),e(co({material_category_id:Number(r.category),material_brand_id:C.id,limit:100}))):_==="style"&&C&&typeof C=="object"&&(e(lte(C)),e(co({material_category_id:Number(r.category),material_brand_id:Number(r.brand),material_brand_style_id:C.id,limit:100})))},g=_=>{const C=n.find(T=>T.id.toString()===_);C&&p("category",{id:C.id,title:C.title})},y=_=>{const C=s.find(T=>T.id.toString()===_);C&&p("brand",{id:C.id,title:C.title})};w.useEffect(()=>{if(r.category){const _=s.filter(C=>C.material_category_id.toString()===r.category);a(_)}else a(s)},[r.category,s]),w.useEffect(()=>{if(r.brand&&i.length>0){const _=i.filter(C=>C.material_brand_id.toString()===r.brand);console.log("Filtered styles based on brand:",_),c(_)}else c(i)},[r.brand,i]);const v=_=>{const C=l.find(T=>T.id.toString()===_);C&&p("style",{id:C.id,title:C.title})},m=()=>{e(cte())},x=()=>{let _=0;return r.category&&_++,r.brand&&_++,r.style&&_++,r.finish&&_++,r.coating_type&&_++,r.tags.length>0&&_++,r.segment_types.length>0&&_++,(r.price_range[0]>0||r.price_range[1]<200)&&_++,(r.lrv_range[0]>0||r.lrv_range[1]<100)&&_++,_},b=({title:_,section:C,children:T})=>u.jsxs(Q7,{open:d[C],onOpenChange:()=>f(C),children:[u.jsx(eH,{asChild:!0,children:u.jsxs(ge,{variant:"ghost",className:"w-full justify-between p-0 h-auto font-medium text-left",children:[_,u.jsx(Xp,{className:xe("h-4 w-4 transition-transform",d[C]&&"rotate-180")})]})}),u.jsx(tH,{className:"space-y-3 pt-3",children:T})]});return u.jsxs(Ge,{className:xe("w-full",t&&"border-0 shadow-none"),children:[u.jsx(vt,{className:"pb-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(St,{className:"text-lg",children:"Filters"}),x()>0&&u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs(dt,{variant:"secondary",className:"text-xs",children:[x()," active"]}),u.jsx(ge,{variant:"ghost",size:"sm",onClick:m,className:"h-6 px-2 text-xs",children:"Clear all"})]})]})}),u.jsxs(tt,{className:"space-y-6",children:[u.jsx(b,{title:"Category",section:"category",children:u.jsxs(bc,{value:r.category??"",onValueChange:g,children:[u.jsx(nl,{children:u.jsx(Sc,{placeholder:"All Categories"})}),u.jsxs(sl,{children:[u.jsx(ki,{value:"all",children:"All Categories"}),n&&n.length>0&&n.map(_=>u.jsx(ki,{value:_.id.toString(),children:_.title},_.id))]})]})}),u.jsx(Gr,{}),u.jsx(b,{title:"Brand",section:"brand",children:u.jsxs(bc,{value:r.brand??"",onValueChange:y,children:[u.jsx(nl,{children:u.jsx(Sc,{placeholder:"All Brands"})}),u.jsxs(sl,{children:[u.jsx(ki,{value:"all",children:"All Brands"}),o&&o.length>0&&o.map(_=>u.jsx(ki,{value:_.id.toString(),children:_.title},_.id))]})]})}),u.jsx(Gr,{}),u.jsx(b,{title:"Style",section:"style",children:u.jsxs(bc,{value:r.style??"",onValueChange:v,children:[u.jsx(nl,{children:u.jsx(Sc,{placeholder:"All Styles"})}),u.jsxs(sl,{children:[u.jsx(ki,{value:"all",children:"All Styles"}),l&&l.length>0&&l.map(_=>u.jsx(ki,{value:_.id.toString(),children:_.title},_.id))]})]})}),u.jsx(Gr,{})]})]})}function v2e({viewMode:t,layoutMode:e,showFilters:r,showFavoritesOnly:n,setShowFavoritesOnly:s,getActiveFiltersCount:i}){const o=Ar(),{materials:a,isLoading:l,error:c,pagination:d}=Ze(p=>p.materials),h=async p=>{o(qee(p)),window.scrollTo({top:0,behavior:"smooth"});try{const g=await o(co({page:p,limit:100}));co.fulfilled.match(g)&&Ve.success("Swatches fetched successfully")}catch(g){console.error("Error fetching swatches:",g),o(D0({})),o(XB(1))}},f=()=>u.jsx("div",{className:xe("grid gap-4",e==="compact"?t==="grid"?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8":"grid-cols-1":t==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"),children:[...Array(e==="compact"?24:12)].map((p,g)=>u.jsxs("div",{className:"space-y-3",children:[u.jsx(kt,{className:xe(e==="compact"?t==="grid"?"aspect-square h-24":"h-16":t==="grid"?"aspect-square":"h-24")}),u.jsxs("div",{className:"space-y-2",children:[u.jsx(kt,{className:"h-4 w-3/4"}),u.jsx(kt,{className:"h-3 w-1/2"})]})]},g))});return u.jsxs("div",{className:"flex gap-6",children:[u.jsx(hl,{children:r&&u.jsx(ze.aside,{initial:{width:0,opacity:0},animate:{width:280,opacity:1},exit:{width:0,opacity:0},transition:{duration:.3},className:"hidden lg:block flex-shrink-0",children:u.jsx(_4,{})})}),r&&u.jsx("div",{className:"lg:hidden mb-6",children:u.jsx(_4,{compact:!0})}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("div",{className:"flex items-center justify-between mb-6",children:u.jsx("div",{className:"text-sm text-muted-foreground",children:l?"Loading swatches...":u.jsxs(u.Fragment,{children:["Showing ",a.length," of ",d.total," materials",n&&" (favorites only)",e==="compact"&&"  Compact view"]})})}),c&&u.jsxs("div",{className:"text-center py-12",children:[u.jsx("p",{className:"text-destructive mb-4",children:c}),u.jsx(ge,{children:"Try Again"})]}),l&&u.jsx(f,{}),!l&&!c&&a.length===0&&u.jsxs(ze.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[u.jsx("div",{className:"text-muted-foreground mb-4",children:n?u.jsxs(u.Fragment,{children:[u.jsx(U2,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),u.jsx("h3",{className:"text-lg font-semibold mb-2 text-foreground",children:"No favorites yet"}),u.jsx("p",{children:"Start exploring swatches and add your favorites!"})]}):u.jsxs(u.Fragment,{children:[u.jsx(GU,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),u.jsx("h3",{className:"text-lg font-semibold mb-2 text-foreground",children:"No swatches found"}),u.jsx("p",{children:"Try adjusting your search or filters"})]})}),(n||i()>0)&&u.jsx(ge,{variant:"outline",onClick:()=>{s(!1),o(D0({}))},children:"Clear all filters"})]}),!l&&!c&&a.length>0&&u.jsx(ze.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:u.jsx("div",{className:xe("grid gap-4",e==="compact"?t==="grid"?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8":"grid-cols-1":t==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"),children:u.jsx(hl,{children:a.map((p,g)=>u.jsx(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:g*.02},children:u.jsx(y2e,{swatch:p,variant:t,layoutMode:e})},p.id))})})}),!l&&!c&&d.totalPages>1&&u.jsxs("div",{className:"flex items-center justify-center space-x-2 mt-8",children:[u.jsxs(ge,{variant:"outline",size:"sm",onClick:()=>h(d.page-1),disabled:d.page===1,children:[u.jsx(IU,{className:"h-4 w-4"}),"Previous"]}),u.jsxs("div",{className:"flex items-center space-x-1",children:[[...Array(Math.min(5,d.totalPages))].map((p,g)=>{const y=g+1;return u.jsx(ge,{variant:d.page===y?"default":"outline",size:"sm",onClick:()=>h(y),className:"w-8 h-8 p-0",children:y},y)}),d.totalPages>5&&u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"text-muted-foreground",children:"..."}),u.jsx(ge,{variant:d.page===d.totalPages?"default":"outline",size:"sm",onClick:()=>h(d.totalPages),className:"w-8 h-8 p-0",children:d.totalPages})]})]}),u.jsxs(ge,{variant:"outline",size:"sm",onClick:()=>h(d.page+1),disabled:d.page===d.totalPages,children:["Next",u.jsx(Xx,{className:"h-4 w-4"})]})]})]})]})}function x2e(){Ar();const{filters:t,pagination:e}=Ze(g=>g.swatches),[r,n]=w.useState("grid"),[s,i]=w.useState("compact"),[o,a]=w.useState("name"),[l,c]=w.useState(!0),[d,h]=w.useState(!1),f=g=>{a(g)},p=()=>{let g=0;return t.search&&g++,t.category&&g++,t.brand&&g++,t.style&&g++,t.finish&&g++,t.coating_type&&g++,t.tags.length>0&&g++,t.segment_types.length>0&&g++,(t.price_range[0]>0||t.price_range[1]<200)&&g++,(t.lrv_range[0]>0||t.lrv_range[1]<100)&&g++,g};return u.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[u.jsx(f2e,{}),u.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[u.jsx(p2e,{}),u.jsx(g2e,{viewMode:r,setViewMode:n,layoutMode:s,setLayoutMode:i,sortBy:o,handleSort:f,showFavoritesOnly:d,setShowFavoritesOnly:h,showFilters:l,setShowFilters:c,getActiveFiltersCount:p})]}),u.jsx(m2e,{getActiveFiltersCount:p}),u.jsx(v2e,{viewMode:r,layoutMode:s,showFilters:l,showFavoritesOnly:d,setShowFavoritesOnly:h,getActiveFiltersCount:p})]})}const w2e={homeOwner:{rooms:[{id:"living-room",title:"Front View",image:"https://www.dzinly.com/files/dzinly-gallery/home/chris-after.jpg",alt:"Modern living room with comfortable seating"},{id:"kitchen",title:"Front View",image:"https://www.dzinly.com/files/dzinly-gallery/home/chris-after.jpg",alt:"Contemporary kitchen with modern appliances"},{id:"bedroom",title:"Front View",image:"https://www.dzinly.com/files/dzinly-gallery/home/chris-after.jpg",alt:"Comfortable bedroom with natural lighting"},{id:"bathroom",title:"Front View",image:"https://www.dzinly.com/files/dzinly-gallery/home/chris-after.jpg",alt:"Modern bathroom with clean design"}]},realtor:{rooms:[{id:"garden",title:"Front View",image:"https://www.dzinly.com/files/dzinly-gallery/home/chris-after.jpg",alt:"Beautiful garden landscape"},{id:"patio",title:"Patio",image:"https://www.dzinly.com/files/dzinly-gallery/home/chris-after.jpg",alt:"Outdoor patio area"},{id:"pool-area",title:"Pool Area",image:"https://www.dzinly.com/files/dzinly-gallery/home/chris-after.jpg",alt:"Swimming pool and deck"},{id:"facade",title:"Facade",image:"https://www.dzinly.com/files/dzinly-gallery/home/chris-after.jpg",alt:"Building exterior facade"}]},trade:{rooms:[{id:"office",title:"Office",image:"https://www.dzinly.com/files/dzinly-gallery/home/chris-after.jpg",alt:"Modern office space"},{id:"retail",title:"Retail",image:"https://www.dzinly.com/files/dzinly-gallery/home/chris-after.jpg",alt:"Retail store interior"},{id:"restaurant",title:"Restaurant",image:"https://www.dzinly.com/files/dzinly-gallery/home/chris-after.jpg",alt:"Restaurant dining area"},{id:"lobby",title:"Lobby",image:"https://www.dzinly.com/files/dzinly-gallery/home/chris-after.jpg",alt:"Commercial building lobby"}]},distributor:{rooms:[{id:"office",title:"Office",image:"https://www.dzinly.com/files/dzinly-gallery/home/chris-after.jpg",alt:"Modern office space"},{id:"retail",title:"Retail",image:"https://www.dzinly.com/files/dzinly-gallery/home/chris-after.jpg",alt:"Retail store interior"},{id:"restaurant",title:"Restaurant",image:"https://www.dzinly.com/files/dzinly-gallery/home/chris-after.jpg",alt:"Restaurant dining area"},{id:"lobby",title:"Lobby",image:"https://www.dzinly.com/files/dzinly-gallery/home/chris-after.jpg",alt:"Commercial building lobby"}]}},b2e=[{id:"renovate",title:"Renovate",description:"Fully renovate your existing room or home with AI and try different templates, styles, and colors for your dream space.",image:"https://www.dzinly.com/files/dzinly-gallery/home/chris-after.jpg",ctaText:"Try Now",ctaColor:"bg-black hover:bg-gray-800"},{id:"virtual-staging",title:"Virtual Staging (New)",description:"Professional AI virtual staging for your real estate photos in 15-20 seconds!",image:"https://www.dzinly.com/files/dzinly-gallery/home/chris-after.jpg",ctaText:"Stage",ctaColor:"bg-black hover:bg-gray-800",badge:"MLS Compliant"},{id:"studio",title:"Studio",description:"Use our studio to create your dream space by accessing all our tools in one place.",image:"https://www.dzinly.com/files/dzinly-gallery/home/chris-after.jpg",ctaText:"Use",ctaColor:"bg-black hover:bg-gray-800"}],S2e=({room:t,onClick:e})=>u.jsxs("div",{className:"relative flex-shrink-0 w-72 h-48 rounded-2xl overflow-hidden shadow-md hover:shadow-lg transition-all duration-300 hover:scale-105 cursor-pointer group",onClick:()=>e==null?void 0:e(t.id),children:[u.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-300 group-hover:scale-110",style:{backgroundImage:`url(${t.image})`}}),u.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20 group-hover:bg-opacity-30 transition-all duration-300"}),u.jsx("div",{className:"absolute inset-0 flex items-end p-6",children:u.jsxs("div",{className:"flex items-center justify-between w-full",children:[u.jsx("h3",{className:"text-white text-xl font-semibold drop-shadow-lg",children:t.title}),u.jsx(Xx,{className:"text-white w-6 h-6 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})})]}),_2e=({pick:t,onClick:e})=>u.jsxs(Ge,{className:"group hover:scale-105 transition-all duration-300 hover:shadow-xl border-0 shadow-md",children:[u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"h-48 bg-cover bg-center rounded-t-xl",style:{backgroundImage:`url(${t.image})`}}),t.badge&&u.jsx("div",{className:"absolute top-4 right-4 bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-medium",children:t.badge}),t.id==="renovate"&&u.jsx("div",{className:"absolute top-4 left-4 w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:u.jsxs("div",{className:"flex space-x-1",children:[u.jsx("div",{className:"w-2 h-6 bg-red-500 rounded-sm"}),u.jsx("div",{className:"w-2 h-6 bg-yellow-500 rounded-sm"}),u.jsx("div",{className:"w-2 h-6 bg-green-500 rounded-sm"}),u.jsx("div",{className:"w-2 h-6 bg-blue-500 rounded-sm"})]})}),t.id==="virtual-staging"&&u.jsx("div",{className:"absolute top-4 left-4 w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:u.jsx("div",{className:"text-white text-lg",children:""})}),t.id==="studio"&&u.jsx("div",{className:"absolute top-4 left-4 w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:u.jsx("div",{className:"w-6 h-6 bg-white rounded-sm flex items-center justify-center",children:u.jsx("div",{className:"w-3 h-3 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full"})})})]}),u.jsxs(vt,{className:"pb-4",children:[u.jsx(St,{className:"text-xl font-bold",children:t.title}),u.jsx(Xc,{className:"text-gray-600 leading-relaxed",children:t.description})]}),u.jsx(tt,{className:"pt-0",children:u.jsx("button",{onClick:()=>e==null?void 0:e(t.id),className:xe("w-full py-3 px-6 rounded-lg text-white font-semibold transition-all duration-200 transform hover:scale-105",t.ctaColor),children:t.ctaText})})]}),C2e=()=>{const t=r=>{console.log("Room clicked:",r)},e=r=>{console.log("Top pick clicked:",r)};return u.jsx(u.Fragment,{children:u.jsxs("div",{className:"rounded-md transition-all px-6 pt-6 duration-300",children:[u.jsxs("div",{className:"bg-white px-6 py-4 rounded-lg",children:[u.jsx("div",{className:"text-center space-y-2",children:u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-8",children:"Let's get started!"})}),u.jsxs(TA,{defaultValue:"homeOwner",className:"w-full",children:[u.jsxs(Rw,{className:"grid w-full max-w-lg mx-auto grid-cols-4 mb-8 gap-3 h-14",children:[u.jsx(In,{value:"homeOwner",className:"flex items-center gap-2 px-4 py-2 rounded-md",children:" Home Owner"}),u.jsx(In,{value:"realtor",className:"flex items-center gap-2 px-4 py-2 rounded-md",children:" Realtor"}),u.jsx(In,{value:"trade",className:"flex items-center gap-2 px-4 py-2 rounded-md",children:" Trade"}),u.jsx(In,{value:"distributor",className:"flex items-center gap-2 px-4 py-2 rounded-md",children:" Distributor"})]}),Object.entries(w2e).map(([r,n])=>u.jsx(Qs,{value:r,className:"space-y-8",children:u.jsx("div",{className:"overflow-x-auto pb-4",children:u.jsx("div",{className:"flex gap-6 min-w-max",children:n.rooms.map(s=>u.jsx(S2e,{room:s,onClick:t},s.id))})})},r))]})]}),u.jsxs("div",{className:"space-y-8 px-6 mt-6",children:[u.jsxs("div",{className:"text-left",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Top Picks"}),u.jsx("p",{className:"text-gray-600 text-lg",children:"Trending Renovation Solutions."})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:b2e.map(r=>u.jsx(_2e,{pick:r,onClick:e},r.id))})]})]})})},E2e=()=>{const[t,e]=w.useState(!1),[r,n]=w.useState(null),s=w.useRef(null),i=c=>{c.preventDefault(),c.stopPropagation(),c.type==="dragenter"||c.type==="dragover"?e(!0):c.type==="dragleave"&&e(!1)},o=c=>{if(c.preventDefault(),c.stopPropagation(),e(!1),c.dataTransfer.files&&c.dataTransfer.files[0]){const d=c.dataTransfer.files[0];d.type.startsWith("image/")&&n(d)}},a=c=>{c.target.files&&c.target.files[0]&&n(c.target.files[0])},l=()=>{var c;(c=s.current)==null||c.click()};return u.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:u.jsx("main",{className:"flex-1 flex items-center justify-center px-6 py-12",children:u.jsxs("div",{className:"max-w-2xl w-full text-center",children:[u.jsx("div",{className:"mb-8",children:u.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg",children:u.jsx("div",{className:"w-16 h-16 bg-white rounded-xl flex items-center justify-center",children:u.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-400 to-purple-500 rounded-lg flex items-center justify-center",children:u.jsx(yd,{className:"h-4 w-4 text-white"})})})})}),u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-12",children:"Everything home exterior in one place"}),u.jsxs("div",{className:`relative border-2 border-dashed rounded-2xl p-12 mb-8 transition-all duration-300 ${t?"border-blue-500 bg-blue-50":r?"border-green-500 bg-green-50":"border-gray-300 bg-white hover:border-gray-400 hover:bg-gray-50"}`,onDragEnter:i,onDragLeave:i,onDragOver:i,onDrop:o,children:[u.jsx("input",{ref:s,type:"file",accept:"image/*",onChange:a,className:"hidden"}),u.jsx("div",{className:"space-y-4",children:r?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-16 h-16 mx-auto bg-green-100 rounded-full flex items-center justify-center",children:u.jsx(yd,{className:"h-8 w-8 text-green-600"})}),u.jsxs("h3",{className:"text-xl font-semibold text-gray-900",children:["File Selected: ",r.name]}),u.jsx("p",{className:"text-gray-500",children:"Ready to process your image"})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"w-16 h-16 mx-auto bg-gray-100 rounded-full flex items-center justify-center",children:u.jsx(Wd,{className:"h-8 w-8 text-gray-400"})}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Drag-drop your photo here"}),u.jsxs("p",{className:"text-gray-500 max-w-md mx-auto",children:["Upload furnished or empty space, sketches, house exterior, and landscaping.",u.jsx("br",{}),"Supports JPG and PNG formats."]})]})}),!r&&u.jsx("div",{className:"mt-6",children:u.jsx("button",{onClick:l,className:"text-blue-600 hover:text-blue-700 font-medium underline transition-colors",children:"Or click here to browse files"})})]}),u.jsxs(ge,{onClick:r?()=>console.log("Process file:",r):l,className:`w-full max-w-md py-4 text-lg font-semibold rounded-xl transition-all ${r?"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white":"bg-gray-800 hover:bg-gray-900 text-white"}`,children:[u.jsx(yd,{className:"mr-2 h-5 w-5"}),r?"Process Image":"Choose a Photo"]}),!r&&u.jsx("div",{className:"mt-8 text-sm text-gray-500",children:u.jsx("p",{children:"Supported formats: JPG, PNG  Maximum file size: 10MB"})})]})})})},k2e=()=>u.jsxs("div",{className:"flex min-h-screen bg-gray-100",children:[u.jsx(gq,{}),u.jsx(C2e,{}),u.jsx(E2e,{})]}),T2e=()=>u.jsx(u.Fragment,{children:u.jsx("div",{className:"min-h-screen bg-gray-50 ",children:u.jsx(k2e,{})})}),j2e=()=>u.jsx("nav",{className:"bg-white shadow-sm border-b sticky top-0 z-50",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex justify-between items-center h-16",children:[u.jsx("div",{className:"flex items-center",children:u.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Dzinly"})}),u.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[u.jsx("a",{href:"#features",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Features"}),u.jsx("a",{href:"#pricing",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Pricing"}),u.jsx("a",{href:"#testimonials",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Reviews"}),u.jsx(ge,{variant:"outline",className:"mr-2",children:u.jsx("a",{href:"/login",children:"Sign In"})}),u.jsx(ge,{className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:u.jsx("a",{href:"/workspace",className:"text-white",children:"Get Started"})})]})]})})}),A2e=()=>{const t=ci(),e=()=>{t("/workspace")};return u.jsx("section",{className:"bg-gradient-to-br from-blue-50 via-white to-purple-50 py-20",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"text-center",children:[u.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:["Plan your home renovation with"," ",u.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AI"})]}),u.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed",children:"Transform your space in seconds with AI-powered design. Upload a photo, describe your vision, and watch our advanced AI create stunning renovations that bring your dreams to life."}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-16",children:[u.jsxs(ge,{size:"lg",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-lg px-8 py-4",onClick:e,children:["Start Designing Now",u.jsx(RU,{className:"ml-2 h-5 w-5"})]}),u.jsxs(ge,{size:"lg",variant:"outline",className:"text-lg px-8 py-4",children:[u.jsx(Oce,{className:"mr-2 h-5 w-5"}),"Watch Demo"]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 max-w-4xl mx-auto",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"1K+"}),u.jsx("div",{className:"text-gray-600",children:"Renovations Daily"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:"50+"}),u.jsx("div",{className:"text-gray-600",children:"Design Styles"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:"10M"}),u.jsx("div",{className:"text-gray-600",children:"Satisfied Customers"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-3xl font-bold text-yellow-600 mb-2",children:"4.8"}),u.jsx("div",{className:"text-gray-600",children:"App Store Rating"})]})]})]})})})},P2e=()=>{const t=[{icon:"",title:"AI Renovate",description:"Transform any space using advanced AI technology with photorealistic results"},{icon:"",title:"Virtual Staging",description:"Add furniture, lighting & fixtures instantly for real estate professionals"},{icon:"",title:"2D to 3D",description:"Transform elevations to realistic 3D renders in seconds"},{icon:"",title:"4K Upscaling",description:"Enhance blurry images to ultra-high 4K resolution"},{icon:"",title:"Exterior Design",description:"Renovate exteriors with AI precision and unlimited creativity"},{icon:"",title:"Object Removal",description:"Remove unwanted objects effortlessly with intelligent AI"}];return u.jsx("section",{id:"features",className:"py-20 bg-white",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-16",children:[u.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"The Most Powerful AI Renovation Kit"}),u.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Leverage advanced AI tools to renovate your space, exactly the way you want"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((e,r)=>u.jsxs(Ge,{className:"group hover:shadow-xl transition-all duration-300 hover:scale-105 border-0 shadow-md",children:[u.jsxs(vt,{children:[u.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-100 to-purple-100 rounded-2xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:u.jsx("span",{className:"text-3xl",children:e.icon})}),u.jsx(St,{className:"text-xl font-bold text-gray-900",children:e.title})]}),u.jsx(tt,{children:u.jsx(Xc,{className:"text-gray-600 text-base leading-relaxed",children:e.description})})]},r))})]})})},N2e=()=>{const t=[{number:1,title:"Upload Photo",description:"Upload a photo of your room or space that you want to renovate",gradient:"from-blue-500 to-purple-600"},{number:2,title:"Describe Vision",description:"Describe your renovation goals or choose from our design styles",gradient:"from-purple-500 to-pink-600"},{number:3,title:"Get Results",description:"Our AI generates stunning renovation visuals in seconds",gradient:"from-pink-500 to-red-600"}];return u.jsx("section",{className:"py-20 bg-gradient-to-br from-blue-50 to-purple-50",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-16",children:[u.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"How Dzinly Works"}),u.jsx("p",{className:"text-xl text-gray-600",children:"Transform your space in 3 simple steps"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map((e,r)=>u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:`w-20 h-20 bg-gradient-to-br ${e.gradient} rounded-full flex items-center justify-center mx-auto mb-6 text-white text-2xl font-bold`,children:e.number}),u.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:e.title}),u.jsx("p",{className:"text-gray-600 text-lg",children:e.description})]},r))})]})})},R2e=()=>{const t=[{name:"Jamie K.",role:"Homeowner",content:"This app is amazing! I remodeled my kitchen and the AI tools worked to near perfection. The UI is very fascinating and easy to use.",rating:5,avatar:"JK"},{name:"Sarah M.",role:"Interior Designer",content:"Dzinly has revolutionized my design process. I can show clients multiple options instantly and close deals faster than ever.",rating:5,avatar:"SM"},{name:"Mike R.",role:"Real Estate Agent",content:"The virtual staging feature is incredible. My listings get 3x more views and sell 40% faster with AI-staged photos.",rating:5,avatar:"MR"}];return u.jsx("section",{id:"testimonials",className:"py-20 bg-white",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-16",children:[u.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"What Our Users Say"}),u.jsx("p",{className:"text-xl text-gray-600",children:"Join thousands of satisfied customers transforming their spaces"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map((e,r)=>u.jsxs(Ge,{className:"shadow-lg border-0",children:[u.jsxs(vt,{children:[u.jsxs("div",{className:"flex items-center mb-4",children:[u.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold mr-4",children:e.avatar}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-gray-900",children:e.name}),u.jsx("p",{className:"text-gray-600 text-sm",children:e.role})]})]}),u.jsx("div",{className:"flex space-x-1",children:[...Array(e.rating)].map((n,s)=>u.jsx(H2,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"},s))})]}),u.jsx(tt,{children:u.jsxs("p",{className:"text-gray-600 italic leading-relaxed",children:['"',e.content,'"']})})]},r))})]})})},O2e=()=>{const t=[{name:"Starter",price:13,period:"month",credits:300,features:["300 Credits / month","Access to all (100+) styles","Residential interior & exterior","10 seconds turnaround","Unlimited cloud storage","Watermark included"],popular:!1},{name:"Professional",price:24,period:"month",credits:700,features:["700 Credits / month","Commercial spaces & styles","Early access to new features","Commercial license","10 seconds turnaround","No watermark"],popular:!0},{name:"Business",price:99,period:"month",credits:3e3,features:["3000 Credits / month","Ultra Quality 4K renders","Priority support","API access on request","Dedicated customer success","Custom watermark"],popular:!1}];return u.jsx("section",{id:"pricing",className:"py-20 bg-gradient-to-br from-blue-50 to-purple-50",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-16",children:[u.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Choose Your Plan"}),u.jsx("p",{className:"text-xl text-gray-600",children:"Start renovating your space with our advanced AI technology"})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map((e,r)=>u.jsxs(Ge,{className:`relative shadow-xl border-0 ${e.popular?"ring-2 ring-blue-500 scale-105":""}`,children:[e.popular&&u.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:u.jsx("span",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 py-2 rounded-full text-sm font-semibold",children:"Most Popular"})}),u.jsxs(vt,{className:"text-center pb-8 pt-8",children:[u.jsx(St,{className:"text-2xl font-bold text-gray-900 mb-2",children:e.name}),u.jsxs("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:["$",e.price,u.jsxs("span",{className:"text-lg text-gray-600 font-normal",children:["/",e.period]})]}),u.jsxs("p",{className:"text-gray-600",children:[e.credits," Credits / month"]})]}),u.jsxs(tt,{className:"pt-0",children:[u.jsx("ul",{className:"space-y-4 mb-8",children:e.features.map((n,s)=>u.jsxs("li",{className:"flex items-center",children:[u.jsx(yce,{className:"w-5 h-5 text-green-500 mr-3 flex-shrink-0"}),u.jsx("span",{className:"text-gray-600",children:n})]},s))}),u.jsx(ge,{className:`w-full py-3 text-lg font-semibold ${e.popular?"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700":"bg-gray-900 hover:bg-gray-800"}`,children:"Get Started"})]})]},r))})]})})},M2e=()=>u.jsx("section",{className:"py-20 bg-gradient-to-r from-blue-600 to-purple-600",children:u.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[u.jsx("h2",{className:"text-4xl font-bold text-white mb-6",children:"Ready to Transform Your Space?"}),u.jsx("p",{className:"text-xl text-blue-100 mb-8 leading-relaxed",children:"Join thousands of homeowners, realtors, and designers using AI to create stunning spaces in seconds. Start your renovation journey today."}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[u.jsx(ge,{size:"lg",className:"bg-white text-blue-600 hover:bg-blue-50 text-lg px-8 py-4 font-semibold",children:u.jsx("a",{href:"/signup",children:"Start Free Trial"})}),u.jsx(ge,{size:"lg",variant:"outline",className:"border-white text-white hover:bg-white hover:text-blue-600 text-lg px-8 py-4",children:"Contact Sales"})]})]})}),I2e=()=>u.jsx("footer",{className:"bg-gray-900 text-white py-16",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent mb-4",children:"Dzinly"}),u.jsx("p",{className:"text-gray-400 mb-4",children:"Transform your space with AI-powered renovation and design tools."}),u.jsxs("div",{className:"flex space-x-4",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center cursor-pointer hover:bg-blue-700 transition-colors",children:u.jsx("span",{className:"text-white text-sm",children:"f"})}),u.jsx("div",{className:"w-8 h-8 bg-blue-400 rounded-full flex items-center justify-center cursor-pointer hover:bg-blue-500 transition-colors",children:u.jsx("span",{className:"text-white text-sm",children:"t"})}),u.jsx("div",{className:"w-8 h-8 bg-blue-700 rounded-full flex items-center justify-center cursor-pointer hover:bg-blue-800 transition-colors",children:u.jsx("span",{className:"text-white text-sm",children:"in"})})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold mb-4",children:"Product"}),u.jsxs("ul",{className:"space-y-2 text-gray-400",children:[u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Features"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Pricing"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"API"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Documentation"})})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold mb-4",children:"Company"}),u.jsxs("ul",{className:"space-y-2 text-gray-400",children:[u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Blog"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Careers"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold mb-4",children:"Support"}),u.jsxs("ul",{className:"space-y-2 text-gray-400",children:[u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Help Center"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Community"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Status"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy Policy"})})]})]})]}),u.jsx("div",{className:"border-t border-gray-800 mt-12 pt-8 text-center text-gray-400",children:u.jsx("p",{children:" 2025 Dzinly. All rights reserved. Built with  for creators."})})]})}),D2e=()=>u.jsx("div",{children:u.jsxs("div",{className:"w-full bg-[#F6F9FF]",children:[u.jsx(j2e,{}),u.jsx(A2e,{}),u.jsx(P2e,{}),u.jsx(N2e,{}),u.jsx(R2e,{}),u.jsx(O2e,{}),u.jsx(M2e,{}),u.jsx(I2e,{})]})}),F2e=[{id:"projects",label:"Projects",icon:rp},{id:"studio",label:"Studio",icon:ai},{id:"swatchbook",label:"SwatchBook",icon:V2}],L2e=()=>{const[t,e]=w.useState(!0),[r,n]=w.useState("projects"),s=ci();return u.jsxs("aside",{className:xe("h-screen bg-white border-r transition-all duration-300 flex flex-col justify-between",t?"w-20":"w-64"),children:[u.jsxs("div",{className:"px-2 py-4 flex items-center justify-between",children:[!t&&u.jsx("h2",{className:"text-lg font-semibold ml-2",children:"Dashboard"}),u.jsx("button",{onClick:()=>e(!t),className:"ml-auto rounded-md bg-gray-100 p-1 hover:bg-gray-200",children:t?u.jsx(Xx,{size:16}):u.jsx(IU,{size:16})})]}),u.jsx("div",{className:"flex-1 space-y-2",children:F2e.map(i=>{const o=i.icon,a=r===i.id;return u.jsxs("button",{onClick:()=>{n(i.id),s(`/app/${i.id}`)},className:xe("group flex items-center w-full transition-colors px-4 py-2 rounded-md hover:bg-gray-100",t?"justify-center":"justify-start",a&&"bg-black text-white hover:bg-black"),children:[u.jsx(o,{className:xe("h-5 w-5",a?"text-white":"text-gray-500 group-hover:text-black")}),!t&&u.jsx("span",{className:"ml-3 text-sm font-medium",children:i.label})]},i.id)})}),u.jsx("div",{className:"p-4",children:u.jsxs("button",{onClick:()=>alert("Settings clicked"),className:xe("flex items-center gap-3 w-full px-2 py-2 rounded-lg hover:bg-gray-100 text-gray-600",t?"justify-center":"justify-start"),children:[u.jsx(Zp,{className:"h-5 w-5"}),!t&&u.jsx("span",{className:"text-sm font-medium",children:"Settings"})]})})]})};function B2e(){const{isAuthenticated:t}=Ze(e=>e.auth);return u.jsxs(MY,{children:[u.jsx(kn,{path:"/",element:t?u.jsx(Mu,{to:"/projects",replace:!0}):u.jsx(D2e,{})}),u.jsx(kn,{path:"/login",element:t?u.jsx(Mu,{to:"/projects",replace:!0}):u.jsx(Gce,{})}),u.jsx(kn,{path:"/signup",element:t?u.jsx(Mu,{to:"/projects",replace:!0}):u.jsx(efe,{})}),u.jsx(kn,{path:"/project/public/:slug",element:u.jsx(d2e,{})}),u.jsx(kn,{path:"/workspace",element:u.jsx(T2e,{})}),u.jsxs(kn,{path:"/app",element:u.jsx(h2e,{children:u.jsx(L2e,{})}),children:[u.jsx(kn,{index:!0,element:u.jsx(Mu,{to:"/app/projects",replace:!0})}),u.jsx(kn,{path:"projects",element:u.jsx(H_e,{})}),u.jsx(kn,{path:"profile",element:u.jsx(l2e,{})}),u.jsx(kn,{path:"studio",element:u.jsx(S4,{})}),u.jsx(kn,{path:"studio/:id",element:u.jsx(S4,{})}),u.jsx(kn,{path:"swatchbook",element:u.jsx(x2e,{})}),u.jsx(kn,{path:"swatch/:slug",element:u.jsx(c2e,{})})]}),u.jsx(kn,{path:"*",element:u.jsx(Mu,{to:t?"/app/projects":"/",replace:!0})})]})}const $2e=({...t})=>{const{theme:e="system"}=yX();return u.jsx(vee,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};function U2e(){return w.useEffect(()=>{to.dispatch(zf())},[]),u.jsx(uX,{store:to,children:u.jsx(vX,{attribute:"class",defaultTheme:"dark",enableSystem:!0,children:u.jsxs(UY,{children:[u.jsx(B2e,{}),u.jsx($2e,{})]})})})}$L(document.getElementById("root")).render(u.jsx(w.StrictMode,{children:u.jsx(U2e,{})}));
